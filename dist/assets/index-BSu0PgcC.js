function uP(t,r){for(var s=0;s<r.length;s++){const o=r[s];if(typeof o!="string"&&!Array.isArray(o)){for(const a in o)if(a!=="default"&&!(a in t)){const d=Object.getOwnPropertyDescriptor(o,a);d&&Object.defineProperty(t,a,d.get?d:{enumerable:!0,get:()=>o[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const d of a)if(d.type==="childList")for(const h of d.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function s(a){const d={};return a.integrity&&(d.integrity=a.integrity),a.referrerPolicy&&(d.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?d.credentials="include":a.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(a){if(a.ep)return;a.ep=!0;const d=s(a);fetch(a.href,d)}})();var JS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var vy={exports:{}},Im={},yy={exports:{}},$t={};var QS;function dP(){if(QS)return $t;QS=1;var t=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),$=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.iterator;function w(z){return z===null||typeof z!="object"?null:(z=y&&z[y]||z["@@iterator"],typeof z=="function"?z:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,I={};function x(z,se,ae){this.props=z,this.context=se,this.refs=I,this.updater=ae||S}x.prototype.isReactComponent={},x.prototype.setState=function(z,se){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,se,"setState")},x.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function A(){}A.prototype=x.prototype;function M(z,se,ae){this.props=z,this.context=se,this.refs=I,this.updater=ae||S}var P=M.prototype=new A;P.constructor=M,O(P,x.prototype),P.isPureReactComponent=!0;var F=Array.isArray,B=Object.prototype.hasOwnProperty,V={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function W(z,se,ae){var ne,me={},fe=null,te=null;if(se!=null)for(ne in se.ref!==void 0&&(te=se.ref),se.key!==void 0&&(fe=""+se.key),se)B.call(se,ne)&&!j.hasOwnProperty(ne)&&(me[ne]=se[ne]);var Se=arguments.length-2;if(Se===1)me.children=ae;else if(1<Se){for(var Le=Array(Se),He=0;He<Se;He++)Le[He]=arguments[He+2];me.children=Le}if(z&&z.defaultProps)for(ne in Se=z.defaultProps,Se)me[ne]===void 0&&(me[ne]=Se[ne]);return{$$typeof:t,type:z,key:fe,ref:te,props:me,_owner:V.current}}function he(z,se){return{$$typeof:t,type:z.type,key:se,ref:z.ref,props:z.props,_owner:z._owner}}function we(z){return typeof z=="object"&&z!==null&&z.$$typeof===t}function Ee(z){var se={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(ae){return se[ae]})}var ye=/\/+/g;function De(z,se){return typeof z=="object"&&z!==null&&z.key!=null?Ee(""+z.key):se.toString(36)}function ce(z,se,ae,ne,me){var fe=typeof z;(fe==="undefined"||fe==="boolean")&&(z=null);var te=!1;if(z===null)te=!0;else switch(fe){case"string":case"number":te=!0;break;case"object":switch(z.$$typeof){case t:case r:te=!0}}if(te)return te=z,me=me(te),z=ne===""?"."+De(te,0):ne,F(me)?(ae="",z!=null&&(ae=z.replace(ye,"$&/")+"/"),ce(me,se,ae,"",function(He){return He})):me!=null&&(we(me)&&(me=he(me,ae+(!me.key||te&&te.key===me.key?"":(""+me.key).replace(ye,"$&/")+"/")+z)),se.push(me)),1;if(te=0,ne=ne===""?".":ne+":",F(z))for(var Se=0;Se<z.length;Se++){fe=z[Se];var Le=ne+De(fe,Se);te+=ce(fe,se,ae,Le,me)}else if(Le=w(z),typeof Le=="function")for(z=Le.call(z),Se=0;!(fe=z.next()).done;)fe=fe.value,Le=ne+De(fe,Se++),te+=ce(fe,se,ae,Le,me);else if(fe==="object")throw se=String(z),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.");return te}function Oe(z,se,ae){if(z==null)return z;var ne=[],me=0;return ce(z,ne,"","",function(fe){return se.call(ae,fe,me++)}),ne}function ie(z){if(z._status===-1){var se=z._result;se=se(),se.then(function(ae){(z._status===0||z._status===-1)&&(z._status=1,z._result=ae)},function(ae){(z._status===0||z._status===-1)&&(z._status=2,z._result=ae)}),z._status===-1&&(z._status=0,z._result=se)}if(z._status===1)return z._result.default;throw z._result}var pe={current:null},G={transition:null},ee={ReactCurrentDispatcher:pe,ReactCurrentBatchConfig:G,ReactCurrentOwner:V};function $e(){throw Error("act(...) is not supported in production builds of React.")}return $t.Children={map:Oe,forEach:function(z,se,ae){Oe(z,function(){se.apply(this,arguments)},ae)},count:function(z){var se=0;return Oe(z,function(){se++}),se},toArray:function(z){return Oe(z,function(se){return se})||[]},only:function(z){if(!we(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},$t.Component=x,$t.Fragment=s,$t.Profiler=a,$t.PureComponent=M,$t.StrictMode=o,$t.Suspense=g,$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ee,$t.act=$e,$t.cloneElement=function(z,se,ae){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var ne=O({},z.props),me=z.key,fe=z.ref,te=z._owner;if(se!=null){if(se.ref!==void 0&&(fe=se.ref,te=V.current),se.key!==void 0&&(me=""+se.key),z.type&&z.type.defaultProps)var Se=z.type.defaultProps;for(Le in se)B.call(se,Le)&&!j.hasOwnProperty(Le)&&(ne[Le]=se[Le]===void 0&&Se!==void 0?Se[Le]:se[Le])}var Le=arguments.length-2;if(Le===1)ne.children=ae;else if(1<Le){Se=Array(Le);for(var He=0;He<Le;He++)Se[He]=arguments[He+2];ne.children=Se}return{$$typeof:t,type:z.type,key:me,ref:fe,props:ne,_owner:te}},$t.createContext=function(z){return z={$$typeof:h,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:d,_context:z},z.Consumer=z},$t.createElement=W,$t.createFactory=function(z){var se=W.bind(null,z);return se.type=z,se},$t.createRef=function(){return{current:null}},$t.forwardRef=function(z){return{$$typeof:f,render:z}},$t.isValidElement=we,$t.lazy=function(z){return{$$typeof:v,_payload:{_status:-1,_result:z},_init:ie}},$t.memo=function(z,se){return{$$typeof:$,type:z,compare:se===void 0?null:se}},$t.startTransition=function(z){var se=G.transition;G.transition={};try{z()}finally{G.transition=se}},$t.unstable_act=$e,$t.useCallback=function(z,se){return pe.current.useCallback(z,se)},$t.useContext=function(z){return pe.current.useContext(z)},$t.useDebugValue=function(){},$t.useDeferredValue=function(z){return pe.current.useDeferredValue(z)},$t.useEffect=function(z,se){return pe.current.useEffect(z,se)},$t.useId=function(){return pe.current.useId()},$t.useImperativeHandle=function(z,se,ae){return pe.current.useImperativeHandle(z,se,ae)},$t.useInsertionEffect=function(z,se){return pe.current.useInsertionEffect(z,se)},$t.useLayoutEffect=function(z,se){return pe.current.useLayoutEffect(z,se)},$t.useMemo=function(z,se){return pe.current.useMemo(z,se)},$t.useReducer=function(z,se,ae){return pe.current.useReducer(z,se,ae)},$t.useRef=function(z){return pe.current.useRef(z)},$t.useState=function(z){return pe.current.useState(z)},$t.useSyncExternalStore=function(z,se,ae){return pe.current.useSyncExternalStore(z,se,ae)},$t.useTransition=function(){return pe.current.useTransition()},$t.version="18.3.1",$t}var ZS;function xb(){return ZS||(ZS=1,yy.exports=dP()),yy.exports}var eC;function hP(){if(eC)return Im;eC=1;var t=xb(),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function h(f,g,$){var v,y={},w=null,S=null;$!==void 0&&(w=""+$),g.key!==void 0&&(w=""+g.key),g.ref!==void 0&&(S=g.ref);for(v in g)o.call(g,v)&&!d.hasOwnProperty(v)&&(y[v]=g[v]);if(f&&f.defaultProps)for(v in g=f.defaultProps,g)y[v]===void 0&&(y[v]=g[v]);return{$$typeof:r,type:f,key:w,ref:S,props:y,_owner:a.current}}return Im.Fragment=s,Im.jsx=h,Im.jsxs=h,Im}var tC;function pP(){return tC||(tC=1,vy.exports=hP()),vy.exports}var R=pP(),S$={},Ty={exports:{}},ds={},by={exports:{}},Ey={};var nC;function fP(){return nC||(nC=1,(function(t){function r(G,ee){var $e=G.length;G.push(ee);e:for(;0<$e;){var z=$e-1>>>1,se=G[z];if(0<a(se,ee))G[z]=ee,G[$e]=se,$e=z;else break e}}function s(G){return G.length===0?null:G[0]}function o(G){if(G.length===0)return null;var ee=G[0],$e=G.pop();if($e!==ee){G[0]=$e;e:for(var z=0,se=G.length,ae=se>>>1;z<ae;){var ne=2*(z+1)-1,me=G[ne],fe=ne+1,te=G[fe];if(0>a(me,$e))fe<se&&0>a(te,me)?(G[z]=te,G[fe]=$e,z=fe):(G[z]=me,G[ne]=$e,z=ne);else if(fe<se&&0>a(te,$e))G[z]=te,G[fe]=$e,z=fe;else break e}}return ee}function a(G,ee){var $e=G.sortIndex-ee.sortIndex;return $e!==0?$e:G.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;t.unstable_now=function(){return d.now()}}else{var h=Date,f=h.now();t.unstable_now=function(){return h.now()-f}}var g=[],$=[],v=1,y=null,w=3,S=!1,O=!1,I=!1,x=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(G){for(var ee=s($);ee!==null;){if(ee.callback===null)o($);else if(ee.startTime<=G)o($),ee.sortIndex=ee.expirationTime,r(g,ee);else break;ee=s($)}}function F(G){if(I=!1,P(G),!O)if(s(g)!==null)O=!0,ie(B);else{var ee=s($);ee!==null&&pe(F,ee.startTime-G)}}function B(G,ee){O=!1,I&&(I=!1,A(W),W=-1),S=!0;var $e=w;try{for(P(ee),y=s(g);y!==null&&(!(y.expirationTime>ee)||G&&!Ee());){var z=y.callback;if(typeof z=="function"){y.callback=null,w=y.priorityLevel;var se=z(y.expirationTime<=ee);ee=t.unstable_now(),typeof se=="function"?y.callback=se:y===s(g)&&o(g),P(ee)}else o(g);y=s(g)}if(y!==null)var ae=!0;else{var ne=s($);ne!==null&&pe(F,ne.startTime-ee),ae=!1}return ae}finally{y=null,w=$e,S=!1}}var V=!1,j=null,W=-1,he=5,we=-1;function Ee(){return!(t.unstable_now()-we<he)}function ye(){if(j!==null){var G=t.unstable_now();we=G;var ee=!0;try{ee=j(!0,G)}finally{ee?De():(V=!1,j=null)}}else V=!1}var De;if(typeof M=="function")De=function(){M(ye)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,Oe=ce.port2;ce.port1.onmessage=ye,De=function(){Oe.postMessage(null)}}else De=function(){x(ye,0)};function ie(G){j=G,V||(V=!0,De())}function pe(G,ee){W=x(function(){G(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){O||S||(O=!0,ie(B))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):he=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return s(g)},t.unstable_next=function(G){switch(w){case 1:case 2:case 3:var ee=3;break;default:ee=w}var $e=w;w=ee;try{return G()}finally{w=$e}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,ee){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var $e=w;w=G;try{return ee()}finally{w=$e}},t.unstable_scheduleCallback=function(G,ee,$e){var z=t.unstable_now();switch(typeof $e=="object"&&$e!==null?($e=$e.delay,$e=typeof $e=="number"&&0<$e?z+$e:z):$e=z,G){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=$e+se,G={id:v++,callback:ee,priorityLevel:G,startTime:$e,expirationTime:se,sortIndex:-1},$e>z?(G.sortIndex=$e,r($,G),s(g)===null&&G===s($)&&(I?(A(W),W=-1):I=!0,pe(F,$e-z))):(G.sortIndex=se,r(g,G),O||S||(O=!0,ie(B))),G},t.unstable_shouldYield=Ee,t.unstable_wrapCallback=function(G){var ee=w;return function(){var $e=w;w=ee;try{return G.apply(this,arguments)}finally{w=$e}}}})(Ey)),Ey}var rC;function mP(){return rC||(rC=1,by.exports=fP()),by.exports}var sC;function gP(){if(sC)return ds;sC=1;var t=xb(),r=mP();function s(l){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+l,p=1;p<arguments.length;p++)c+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function d(l,c){h(l,c),h(l+"Capture",c)}function h(l,c){for(a[l]=c,l=0;l<c.length;l++)o.add(c[l])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,$=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},y={};function w(l){return g.call(y,l)?!0:g.call(v,l)?!1:$.test(l)?y[l]=!0:(v[l]=!0,!1)}function S(l,c,p,_){if(p!==null&&p.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return _?!1:p!==null?!p.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function O(l,c,p,_){if(c===null||typeof c>"u"||S(l,c,p,_))return!0;if(_)return!1;if(p!==null)switch(p.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function I(l,c,p,_,b,C,L){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=_,this.attributeNamespace=b,this.mustUseProperty=p,this.propertyName=l,this.type=c,this.sanitizeURL=C,this.removeEmptyString=L}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){x[l]=new I(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var c=l[0];x[c]=new I(c,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){x[l]=new I(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){x[l]=new I(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){x[l]=new I(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){x[l]=new I(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){x[l]=new I(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){x[l]=new I(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){x[l]=new I(l,5,!1,l.toLowerCase(),null,!1,!1)});var A=/[\-:]([a-z])/g;function M(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var c=l.replace(A,M);x[c]=new I(c,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var c=l.replace(A,M);x[c]=new I(c,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var c=l.replace(A,M);x[c]=new I(c,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){x[l]=new I(l,1,!1,l.toLowerCase(),null,!1,!1)}),x.xlinkHref=new I("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){x[l]=new I(l,1,!1,l.toLowerCase(),null,!0,!0)});function P(l,c,p,_){var b=x.hasOwnProperty(c)?x[c]:null;(b!==null?b.type!==0:_||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(O(c,p,b,_)&&(p=null),_||b===null?w(c)&&(p===null?l.removeAttribute(c):l.setAttribute(c,""+p)):b.mustUseProperty?l[b.propertyName]=p===null?b.type===3?!1:"":p:(c=b.attributeName,_=b.attributeNamespace,p===null?l.removeAttribute(c):(b=b.type,p=b===3||b===4&&p===!0?"":""+p,_?l.setAttributeNS(_,c,p):l.setAttribute(c,p))))}var F=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,B=Symbol.for("react.element"),V=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),W=Symbol.for("react.strict_mode"),he=Symbol.for("react.profiler"),we=Symbol.for("react.provider"),Ee=Symbol.for("react.context"),ye=Symbol.for("react.forward_ref"),De=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),Oe=Symbol.for("react.memo"),ie=Symbol.for("react.lazy"),pe=Symbol.for("react.offscreen"),G=Symbol.iterator;function ee(l){return l===null||typeof l!="object"?null:(l=G&&l[G]||l["@@iterator"],typeof l=="function"?l:null)}var $e=Object.assign,z;function se(l){if(z===void 0)try{throw Error()}catch(p){var c=p.stack.trim().match(/\n( *(at )?)/);z=c&&c[1]||""}return`
`+z+l}var ae=!1;function ne(l,c){if(!l||ae)return"";ae=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(le){var _=le}Reflect.construct(l,[],c)}else{try{c.call()}catch(le){_=le}l.call(c.prototype)}else{try{throw Error()}catch(le){_=le}l()}}catch(le){if(le&&_&&typeof le.stack=="string"){for(var b=le.stack.split(`
`),C=_.stack.split(`
`),L=b.length-1,U=C.length-1;1<=L&&0<=U&&b[L]!==C[U];)U--;for(;1<=L&&0<=U;L--,U--)if(b[L]!==C[U]){if(L!==1||U!==1)do if(L--,U--,0>U||b[L]!==C[U]){var K=`
`+b[L].replace(" at new "," at ");return l.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",l.displayName)),K}while(1<=L&&0<=U);break}}}finally{ae=!1,Error.prepareStackTrace=p}return(l=l?l.displayName||l.name:"")?se(l):""}function me(l){switch(l.tag){case 5:return se(l.type);case 16:return se("Lazy");case 13:return se("Suspense");case 19:return se("SuspenseList");case 0:case 2:case 15:return l=ne(l.type,!1),l;case 11:return l=ne(l.type.render,!1),l;case 1:return l=ne(l.type,!0),l;default:return""}}function fe(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case j:return"Fragment";case V:return"Portal";case he:return"Profiler";case W:return"StrictMode";case De:return"Suspense";case ce:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case Ee:return(l.displayName||"Context")+".Consumer";case we:return(l._context.displayName||"Context")+".Provider";case ye:var c=l.render;return l=l.displayName,l||(l=c.displayName||c.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case Oe:return c=l.displayName||null,c!==null?c:fe(l.type)||"Memo";case ie:c=l._payload,l=l._init;try{return fe(l(c))}catch{}}return null}function te(l){var c=l.type;switch(l.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=c.render,l=l.displayName||l.name||"",c.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fe(c);case 8:return c===W?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function Se(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Le(l){var c=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function He(l){var c=Le(l)?"checked":"value",p=Object.getOwnPropertyDescriptor(l.constructor.prototype,c),_=""+l[c];if(!l.hasOwnProperty(c)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var b=p.get,C=p.set;return Object.defineProperty(l,c,{configurable:!0,get:function(){return b.call(this)},set:function(L){_=""+L,C.call(this,L)}}),Object.defineProperty(l,c,{enumerable:p.enumerable}),{getValue:function(){return _},setValue:function(L){_=""+L},stopTracking:function(){l._valueTracker=null,delete l[c]}}}}function tt(l){l._valueTracker||(l._valueTracker=He(l))}function ct(l){if(!l)return!1;var c=l._valueTracker;if(!c)return!0;var p=c.getValue(),_="";return l&&(_=Le(l)?l.checked?"true":"false":l.value),l=_,l!==p?(c.setValue(l),!0):!1}function nt(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}function Rt(l,c){var p=c.checked;return $e({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??l._wrapperState.initialChecked})}function Wt(l,c){var p=c.defaultValue==null?"":c.defaultValue,_=c.checked!=null?c.checked:c.defaultChecked;p=Se(c.value!=null?c.value:p),l._wrapperState={initialChecked:_,initialValue:p,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function Mt(l,c){c=c.checked,c!=null&&P(l,"checked",c,!1)}function wn(l,c){Mt(l,c);var p=Se(c.value),_=c.type;if(p!=null)_==="number"?(p===0&&l.value===""||l.value!=p)&&(l.value=""+p):l.value!==""+p&&(l.value=""+p);else if(_==="submit"||_==="reset"){l.removeAttribute("value");return}c.hasOwnProperty("value")?Yr(l,c.type,p):c.hasOwnProperty("defaultValue")&&Yr(l,c.type,Se(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(l.defaultChecked=!!c.defaultChecked)}function At(l,c,p){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var _=c.type;if(!(_!=="submit"&&_!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+l._wrapperState.initialValue,p||c===l.value||(l.value=c),l.defaultValue=c}p=l.name,p!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,p!==""&&(l.name=p)}function Yr(l,c,p){(c!=="number"||nt(l.ownerDocument)!==l)&&(p==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+p&&(l.defaultValue=""+p))}var je=Array.isArray;function at(l,c,p,_){if(l=l.options,c){c={};for(var b=0;b<p.length;b++)c["$"+p[b]]=!0;for(p=0;p<l.length;p++)b=c.hasOwnProperty("$"+l[p].value),l[p].selected!==b&&(l[p].selected=b),b&&_&&(l[p].defaultSelected=!0)}else{for(p=""+Se(p),c=null,b=0;b<l.length;b++){if(l[b].value===p){l[b].selected=!0,_&&(l[b].defaultSelected=!0);return}c!==null||l[b].disabled||(c=l[b])}c!==null&&(c.selected=!0)}}function ft(l,c){if(c.dangerouslySetInnerHTML!=null)throw Error(s(91));return $e({},c,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function kn(l,c){var p=c.value;if(p==null){if(p=c.children,c=c.defaultValue,p!=null){if(c!=null)throw Error(s(92));if(je(p)){if(1<p.length)throw Error(s(93));p=p[0]}c=p}c==null&&(c=""),p=c}l._wrapperState={initialValue:Se(p)}}function or(l,c){var p=Se(c.value),_=Se(c.defaultValue);p!=null&&(p=""+p,p!==l.value&&(l.value=p),c.defaultValue==null&&l.defaultValue!==p&&(l.defaultValue=p)),_!=null&&(l.defaultValue=""+_)}function fs(l){var c=l.textContent;c===l._wrapperState.initialValue&&c!==""&&c!==null&&(l.value=c)}function hn(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zt(l,c){return l==null||l==="http://www.w3.org/1999/xhtml"?hn(c):l==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var Yn,ti=(function(l){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,p,_,b){MSApp.execUnsafeLocalFunction(function(){return l(c,p,_,b)})}:l})(function(l,c){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=c;else{for(Yn=Yn||document.createElement("div"),Yn.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=Yn.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;c.firstChild;)l.appendChild(c.firstChild)}});function ue(l,c){if(c){var p=l.firstChild;if(p&&p===l.lastChild&&p.nodeType===3){p.nodeValue=c;return}}l.textContent=c}var Ge={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},k=["Webkit","ms","Moz","O"];Object.keys(Ge).forEach(function(l){k.forEach(function(c){c=c+l.charAt(0).toUpperCase()+l.substring(1),Ge[c]=Ge[l]})});function D(l,c,p){return c==null||typeof c=="boolean"||c===""?"":p||typeof c!="number"||c===0||Ge.hasOwnProperty(l)&&Ge[l]?(""+c).trim():c+"px"}function q(l,c){l=l.style;for(var p in c)if(c.hasOwnProperty(p)){var _=p.indexOf("--")===0,b=D(p,c[p],_);p==="float"&&(p="cssFloat"),_?l.setProperty(p,b):l[p]=b}}var Q=$e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xe(l,c){if(c){if(Q[l]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(s(137,l));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(s(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(s(61))}if(c.style!=null&&typeof c.style!="object")throw Error(s(62))}}function kt(l,c){if(l.indexOf("-")===-1)return typeof c.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qn=null;function qr(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var ni=null,Jr=null,xr=null;function _r(l){if(l=Mr(l)){if(typeof ni!="function")throw Error(s(280));var c=l.stateNode;c&&(c=Lc(c),ni(l.stateNode,l.type,c))}}function ri(l){Jr?xr?xr.push(l):xr=[l]:Jr=l}function it(){if(Jr){var l=Jr,c=xr;if(xr=Jr=null,_r(l),c)for(l=0;l<c.length;l++)_r(c[l])}}function yt(l,c){return l(c)}function gt(){}var on=!1;function Jn(l,c,p){if(on)return l(c,p);on=!0;try{return yt(l,c,p)}finally{on=!1,(Jr!==null||xr!==null)&&(gt(),it())}}function Qn(l,c){var p=l.stateNode;if(p===null)return null;var _=Lc(p);if(_===null)return null;p=_[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(l=l.type,_=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!_;break e;default:l=!1}if(l)return null;if(p&&typeof p!="function")throw Error(s(231,c,typeof p));return p}var Qr=!1;if(f)try{var Sn={};Object.defineProperty(Sn,"passive",{get:function(){Qr=!0}}),window.addEventListener("test",Sn,Sn),window.removeEventListener("test",Sn,Sn)}catch{Qr=!1}function vr(l,c,p,_,b,C,L,U,K){var le=Array.prototype.slice.call(arguments,3);try{c.apply(p,le)}catch(Ce){this.onError(Ce)}}var si=!1,Ql=null,Zl=!1,nd=null,Sg={onError:function(l){si=!0,Ql=l}};function Cg(l,c,p,_,b,C,L,U,K){si=!1,Ql=null,vr.apply(Sg,arguments)}function ea(l,c,p,_,b,C,L,U,K){if(Cg.apply(this,arguments),si){if(si){var le=Ql;si=!1,Ql=null}else throw Error(s(198));Zl||(Zl=!0,nd=le)}}function oi(l){var c=l,p=l;if(l.alternate)for(;c.return;)c=c.return;else{l=c;do c=l,(c.flags&4098)!==0&&(p=c.return),l=c.return;while(l)}return c.tag===3?p:null}function ic(l){if(l.tag===13){var c=l.memoizedState;if(c===null&&(l=l.alternate,l!==null&&(c=l.memoizedState)),c!==null)return c.dehydrated}return null}function Sp(l){if(oi(l)!==l)throw Error(s(188))}function lc(l){var c=l.alternate;if(!c){if(c=oi(l),c===null)throw Error(s(188));return c!==l?null:l}for(var p=l,_=c;;){var b=p.return;if(b===null)break;var C=b.alternate;if(C===null){if(_=b.return,_!==null){p=_;continue}break}if(b.child===C.child){for(C=b.child;C;){if(C===p)return Sp(b),l;if(C===_)return Sp(b),c;C=C.sibling}throw Error(s(188))}if(p.return!==_.return)p=b,_=C;else{for(var L=!1,U=b.child;U;){if(U===p){L=!0,p=b,_=C;break}if(U===_){L=!0,_=b,p=C;break}U=U.sibling}if(!L){for(U=C.child;U;){if(U===p){L=!0,p=C,_=b;break}if(U===_){L=!0,_=C,p=b;break}U=U.sibling}if(!L)throw Error(s(189))}}if(p.alternate!==_)throw Error(s(190))}if(p.tag!==3)throw Error(s(188));return p.stateNode.current===p?l:c}function ac(l){return l=lc(l),l!==null?Cp(l):null}function Cp(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var c=Cp(l);if(c!==null)return c;l=l.sibling}return null}var cc=r.unstable_scheduleCallback,Ip=r.unstable_cancelCallback,rd=r.unstable_shouldYield,Rp=r.unstable_requestPaint,Qt=r.unstable_now,sd=r.unstable_getCurrentPriorityLevel,ta=r.unstable_ImmediatePriority,uc=r.unstable_UserBlockingPriority,ii=r.unstable_NormalPriority,Ig=r.unstable_LowPriority,Ki=r.unstable_IdlePriority,li=null,Or=null;function Rg(l){if(Or&&typeof Or.onCommitFiberRoot=="function")try{Or.onCommitFiberRoot(li,l,void 0,(l.current.flags&128)===128)}catch{}}var Zr=Math.clz32?Math.clz32:xn,kg=Math.log,ai=Math.LN2;function xn(l){return l>>>=0,l===0?32:31-(kg(l)/ai|0)|0}var ci=64,na=4194304;function ir(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function es(l,c){var p=l.pendingLanes;if(p===0)return 0;var _=0,b=l.suspendedLanes,C=l.pingedLanes,L=p&268435455;if(L!==0){var U=L&~b;U!==0?_=ir(U):(C&=L,C!==0&&(_=ir(C)))}else L=p&~b,L!==0?_=ir(L):C!==0&&(_=ir(C));if(_===0)return 0;if(c!==0&&c!==_&&(c&b)===0&&(b=_&-_,C=c&-c,b>=C||b===16&&(C&4194240)!==0))return c;if((_&4)!==0&&(_|=p&16),c=l.entangledLanes,c!==0)for(l=l.entanglements,c&=_;0<c;)p=31-Zr(c),b=1<<p,_|=l[p],c&=~b;return _}function xg(l,c){switch(l){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kp(l,c){for(var p=l.suspendedLanes,_=l.pingedLanes,b=l.expirationTimes,C=l.pendingLanes;0<C;){var L=31-Zr(C),U=1<<L,K=b[L];K===-1?((U&p)===0||(U&_)!==0)&&(b[L]=xg(U,c)):K<=c&&(l.expiredLanes|=U),C&=~U}}function ra(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function od(){var l=ci;return ci<<=1,(ci&4194240)===0&&(ci=64),l}function id(l){for(var c=[],p=0;31>p;p++)c.push(l);return c}function Xi(l,c,p){l.pendingLanes|=c,c!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,c=31-Zr(c),l[c]=p}function dc(l,c){var p=l.pendingLanes&~c;l.pendingLanes=c,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=c,l.mutableReadLanes&=c,l.entangledLanes&=c,c=l.entanglements;var _=l.eventTimes;for(l=l.expirationTimes;0<p;){var b=31-Zr(p),C=1<<b;c[b]=0,_[b]=-1,l[b]=-1,p&=~C}}function ld(l,c){var p=l.entangledLanes|=c;for(l=l.entanglements;p;){var _=31-Zr(p),b=1<<_;b&c|l[_]&c&&(l[_]|=c),p&=~b}}var Et=0;function xp(l){return l&=-l,1<l?4<l?(l&268435455)!==0?16:536870912:4:1}var Op,sa,Ap,Yi,Np,hc=!1,qi=[],Hs=null,Gs=null,Eo=null,ui=new Map,js=new Map,ms=[],Og="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ad(l,c){switch(l){case"focusin":case"focusout":Hs=null;break;case"dragenter":case"dragleave":Gs=null;break;case"mouseover":case"mouseout":Eo=null;break;case"pointerover":case"pointerout":ui.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":js.delete(c.pointerId)}}function Ji(l,c,p,_,b,C){return l===null||l.nativeEvent!==C?(l={blockedOn:c,domEventName:p,eventSystemFlags:_,nativeEvent:C,targetContainers:[b]},c!==null&&(c=Mr(c),c!==null&&sa(c)),l):(l.eventSystemFlags|=_,c=l.targetContainers,b!==null&&c.indexOf(b)===-1&&c.push(b),l)}function Ag(l,c,p,_,b){switch(c){case"focusin":return Hs=Ji(Hs,l,c,p,_,b),!0;case"dragenter":return Gs=Ji(Gs,l,c,p,_,b),!0;case"mouseover":return Eo=Ji(Eo,l,c,p,_,b),!0;case"pointerover":var C=b.pointerId;return ui.set(C,Ji(ui.get(C)||null,l,c,p,_,b)),!0;case"gotpointercapture":return C=b.pointerId,js.set(C,Ji(js.get(C)||null,l,c,p,_,b)),!0}return!1}function Lp(l){var c=Lr(l.target);if(c!==null){var p=oi(c);if(p!==null){if(c=p.tag,c===13){if(c=ic(p),c!==null){l.blockedOn=c,Np(l.priority,function(){Ap(p)});return}}else if(c===3&&p.stateNode.current.memoizedState.isDehydrated){l.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Ws(l){if(l.blockedOn!==null)return!1;for(var c=l.targetContainers;0<c.length;){var p=gc(l.domEventName,l.eventSystemFlags,c[0],l.nativeEvent);if(p===null){p=l.nativeEvent;var _=new p.constructor(p.type,p);qn=_,p.target.dispatchEvent(_),qn=null}else return c=Mr(p),c!==null&&sa(c),l.blockedOn=p,!1;c.shift()}return!0}function Mp(l,c,p){Ws(l)&&p.delete(c)}function pc(){hc=!1,Hs!==null&&Ws(Hs)&&(Hs=null),Gs!==null&&Ws(Gs)&&(Gs=null),Eo!==null&&Ws(Eo)&&(Eo=null),ui.forEach(Mp),js.forEach(Mp)}function Bn(l,c){l.blockedOn===c&&(l.blockedOn=null,hc||(hc=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,pc)))}function oa(l){function c(b){return Bn(b,l)}if(0<qi.length){Bn(qi[0],l);for(var p=1;p<qi.length;p++){var _=qi[p];_.blockedOn===l&&(_.blockedOn=null)}}for(Hs!==null&&Bn(Hs,l),Gs!==null&&Bn(Gs,l),Eo!==null&&Bn(Eo,l),ui.forEach(c),js.forEach(c),p=0;p<ms.length;p++)_=ms[p],_.blockedOn===l&&(_.blockedOn=null);for(;0<ms.length&&(p=ms[0],p.blockedOn===null);)Lp(p),p.blockedOn===null&&ms.shift()}var Qi=F.ReactCurrentBatchConfig,fc=!0;function Ng(l,c,p,_){var b=Et,C=Qi.transition;Qi.transition=null;try{Et=1,cd(l,c,p,_)}finally{Et=b,Qi.transition=C}}function Lg(l,c,p,_){var b=Et,C=Qi.transition;Qi.transition=null;try{Et=4,cd(l,c,p,_)}finally{Et=b,Qi.transition=C}}function cd(l,c,p,_){if(fc){var b=gc(l,c,p,_);if(b===null)xd(l,c,_,mc,p),ad(l,_);else if(Ag(b,l,c,p,_))_.stopPropagation();else if(ad(l,_),c&4&&-1<Og.indexOf(l)){for(;b!==null;){var C=Mr(b);if(C!==null&&Op(C),C=gc(l,c,p,_),C===null&&xd(l,c,_,mc,p),C===b)break;b=C}b!==null&&_.stopPropagation()}else xd(l,c,_,null,p)}}var mc=null;function gc(l,c,p,_){if(mc=null,l=qr(_),l=Lr(l),l!==null)if(c=oi(l),c===null)l=null;else if(p=c.tag,p===13){if(l=ic(c),l!==null)return l;l=null}else if(p===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;l=null}else c!==l&&(l=null);return mc=l,null}function zs(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sd()){case ta:return 1;case uc:return 4;case ii:case Ig:return 16;case Ki:return 536870912;default:return 16}default:return 16}}var Ar=null,$c=null,_c=null;function Pp(){if(_c)return _c;var l,c=$c,p=c.length,_,b="value"in Ar?Ar.value:Ar.textContent,C=b.length;for(l=0;l<p&&c[l]===b[l];l++);var L=p-l;for(_=1;_<=L&&c[p-_]===b[C-_];_++);return _c=b.slice(l,1<_?1-_:void 0)}function vc(l){var c=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&c===13&&(l=13)):l=c,l===10&&(l=13),32<=l||l===13?l:0}function yc(){return!0}function Dp(){return!1}function yr(l){function c(p,_,b,C,L){this._reactName=p,this._targetInst=b,this.type=_,this.nativeEvent=C,this.target=L,this.currentTarget=null;for(var U in l)l.hasOwnProperty(U)&&(p=l[U],this[U]=p?p(C):C[U]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?yc:Dp,this.isPropagationStopped=Dp,this}return $e(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=yc)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=yc)},persist:function(){},isPersistent:yc}),c}var Zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ud=yr(Zi),ia=$e({},Zi,{view:0,detail:0}),Bp=yr(ia),dd,di,hi,Tc=$e({},ia,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fd,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==hi&&(hi&&l.type==="mousemove"?(dd=l.screenX-hi.screenX,di=l.screenY-hi.screenY):di=dd=0,hi=l),dd)},movementY:function(l){return"movementY"in l?l.movementY:di}}),el=yr(Tc),Fp=$e({},Tc,{dataTransfer:0}),Up=yr(Fp),Vp=$e({},ia,{relatedTarget:0}),la=yr(Vp),hd=$e({},Zi,{animationName:0,elapsedTime:0,pseudoElement:0}),Hp=yr(hd),Mg=$e({},Zi,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Gp=yr(Mg),jp=$e({},Zi,{data:0}),pd=yr(jp),Wp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xp(l){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(l):(l=Kp[l])?!!c[l]:!1}function fd(){return Xp}var bc=$e({},ia,{key:function(l){if(l.key){var c=Wp[l.key]||l.key;if(c!=="Unidentified")return c}return l.type==="keypress"?(l=vc(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?zp[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fd,charCode:function(l){return l.type==="keypress"?vc(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?vc(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Yp=yr(bc),md=$e({},Tc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ec=yr(md),Ks=$e({},ia,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fd}),qp=yr(Ks),Jp=$e({},Zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),wc=yr(Jp),Qp=$e({},Tc,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Zp=yr(Qp),Pg=[9,13,27,32],aa=f&&"CompositionEvent"in window,tl=null;f&&"documentMode"in document&&(tl=document.documentMode);var Dg=f&&"TextEvent"in window&&!tl,ef=f&&(!aa||tl&&8<tl&&11>=tl),tf=" ",nf=!1;function rf(l,c){switch(l){case"keyup":return Pg.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nl(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var pi=!1;function sf(l,c){switch(l){case"compositionend":return nl(c);case"keypress":return c.which!==32?null:(nf=!0,tf);case"textInput":return l=c.data,l===tf&&nf?null:l;default:return null}}function ca(l,c){if(pi)return l==="compositionend"||!aa&&rf(l,c)?(l=Pp(),_c=$c=Ar=null,pi=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return ef&&c.locale!=="ko"?null:c.data;default:return null}}var gd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function of(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c==="input"?!!gd[l.type]:c==="textarea"}function lf(l,c,p,_){ri(_),c=fa(c,"onChange"),0<c.length&&(p=new ud("onChange","change",null,p,_),l.push({event:p,listeners:c}))}var rl=null,sl=null;function wo(l){Ac(l,0)}function ua(l){var c=ar(l);if(ct(c))return l}function af(l,c){if(l==="change")return c}var cf=!1;if(f){var $d;if(f){var _d="oninput"in document;if(!_d){var uf=document.createElement("div");uf.setAttribute("oninput","return;"),_d=typeof uf.oninput=="function"}$d=_d}else $d=!1;cf=$d&&(!document.documentMode||9<document.documentMode)}function vd(){rl&&(rl.detachEvent("onpropertychange",df),sl=rl=null)}function df(l){if(l.propertyName==="value"&&ua(sl)){var c=[];lf(c,sl,l,qr(l)),Jn(wo,c)}}function hf(l,c,p){l==="focusin"?(vd(),rl=c,sl=p,rl.attachEvent("onpropertychange",df)):l==="focusout"&&vd()}function Bg(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return ua(sl)}function ol(l,c){if(l==="click")return ua(c)}function Sc(l,c){if(l==="input"||l==="change")return ua(c)}function yd(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var Tr=typeof Object.is=="function"?Object.is:yd;function gs(l,c){if(Tr(l,c))return!0;if(typeof l!="object"||l===null||typeof c!="object"||c===null)return!1;var p=Object.keys(l),_=Object.keys(c);if(p.length!==_.length)return!1;for(_=0;_<p.length;_++){var b=p[_];if(!g.call(c,b)||!Tr(l[b],c[b]))return!1}return!0}function Td(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Cc(l,c){var p=Td(l);l=0;for(var _;p;){if(p.nodeType===3){if(_=l+p.textContent.length,l<=c&&_>=c)return{node:p,offset:c-l};l=_}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=Td(p)}}function bd(l,c){return l&&c?l===c?!0:l&&l.nodeType===3?!1:c&&c.nodeType===3?bd(l,c.parentNode):"contains"in l?l.contains(c):l.compareDocumentPosition?!!(l.compareDocumentPosition(c)&16):!1:!1}function Zt(){for(var l=window,c=nt();c instanceof l.HTMLIFrameElement;){try{var p=typeof c.contentWindow.location.href=="string"}catch{p=!1}if(p)l=c.contentWindow;else break;c=nt(l.document)}return c}function Ed(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c&&(c==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||c==="textarea"||l.contentEditable==="true")}function da(l){var c=Zt(),p=l.focusedElem,_=l.selectionRange;if(c!==p&&p&&p.ownerDocument&&bd(p.ownerDocument.documentElement,p)){if(_!==null&&Ed(p)){if(c=_.start,l=_.end,l===void 0&&(l=c),"selectionStart"in p)p.selectionStart=c,p.selectionEnd=Math.min(l,p.value.length);else if(l=(c=p.ownerDocument||document)&&c.defaultView||window,l.getSelection){l=l.getSelection();var b=p.textContent.length,C=Math.min(_.start,b);_=_.end===void 0?C:Math.min(_.end,b),!l.extend&&C>_&&(b=_,_=C,C=b),b=Cc(p,C);var L=Cc(p,_);b&&L&&(l.rangeCount!==1||l.anchorNode!==b.node||l.anchorOffset!==b.offset||l.focusNode!==L.node||l.focusOffset!==L.offset)&&(c=c.createRange(),c.setStart(b.node,b.offset),l.removeAllRanges(),C>_?(l.addRange(c),l.extend(L.node,L.offset)):(c.setEnd(L.node,L.offset),l.addRange(c)))}}for(c=[],l=p;l=l.parentNode;)l.nodeType===1&&c.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<c.length;p++)l=c[p],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var il=f&&"documentMode"in document&&11>=document.documentMode,ll=null,Ic=null,fi=null,mi=!1;function wd(l,c,p){var _=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;mi||ll==null||ll!==nt(_)||(_=ll,"selectionStart"in _&&Ed(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),fi&&gs(fi,_)||(fi=_,_=fa(Ic,"onSelect"),0<_.length&&(c=new ud("onSelect","select",null,c,p),l.push({event:c,listeners:_}),c.target=ll)))}function Xs(l,c){var p={};return p[l.toLowerCase()]=c.toLowerCase(),p["Webkit"+l]="webkit"+c,p["Moz"+l]="moz"+c,p}var Ys={animationend:Xs("Animation","AnimationEnd"),animationiteration:Xs("Animation","AnimationIteration"),animationstart:Xs("Animation","AnimationStart"),transitionend:Xs("Transition","TransitionEnd")},Rc={},Sd={};f&&(Sd=document.createElement("div").style,"AnimationEvent"in window||(delete Ys.animationend.animation,delete Ys.animationiteration.animation,delete Ys.animationstart.animation),"TransitionEvent"in window||delete Ys.transitionend.transition);function kc(l){if(Rc[l])return Rc[l];if(!Ys[l])return l;var c=Ys[l],p;for(p in c)if(c.hasOwnProperty(p)&&p in Sd)return Rc[l]=c[p];return l}var pf=kc("animationend"),ff=kc("animationiteration"),Cd=kc("animationstart"),mf=kc("transitionend"),Id=new Map,ha="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function So(l,c){Id.set(l,c),d(c,[l])}for(var Rd=0;Rd<ha.length;Rd++){var kd=ha[Rd],Fg=kd.toLowerCase(),xc=kd[0].toUpperCase()+kd.slice(1);So(Fg,"on"+xc)}So(pf,"onAnimationEnd"),So(ff,"onAnimationIteration"),So(Cd,"onAnimationStart"),So("dblclick","onDoubleClick"),So("focusin","onFocus"),So("focusout","onBlur"),So(mf,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),d("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),d("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),d("onBeforeInput",["compositionend","keypress","textInput","paste"]),d("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gf=new Set("cancel close invalid load scroll toggle".split(" ").concat(al));function Oc(l,c,p){var _=l.type||"unknown-event";l.currentTarget=p,ea(_,c,void 0,l),l.currentTarget=null}function Ac(l,c){c=(c&4)!==0;for(var p=0;p<l.length;p++){var _=l[p],b=_.event;_=_.listeners;e:{var C=void 0;if(c)for(var L=_.length-1;0<=L;L--){var U=_[L],K=U.instance,le=U.currentTarget;if(U=U.listener,K!==C&&b.isPropagationStopped())break e;Oc(b,U,le),C=K}else for(L=0;L<_.length;L++){if(U=_[L],K=U.instance,le=U.currentTarget,U=U.listener,K!==C&&b.isPropagationStopped())break e;Oc(b,U,le),C=K}}}if(Zl)throw l=nd,Zl=!1,nd=null,l}function Vt(l,c){var p=c[Nc];p===void 0&&(p=c[Nc]=new Set);var _=l+"__bubble";p.has(_)||($f(c,l,2,!1),p.add(_))}function cl(l,c,p){var _=0;c&&(_|=4),$f(p,l,_,c)}var pa="_reactListening"+Math.random().toString(36).slice(2);function Co(l){if(!l[pa]){l[pa]=!0,o.forEach(function(p){p!=="selectionchange"&&(gf.has(p)||cl(p,!1,l),cl(p,!0,l))});var c=l.nodeType===9?l:l.ownerDocument;c===null||c[pa]||(c[pa]=!0,cl("selectionchange",!1,c))}}function $f(l,c,p,_){switch(zs(c)){case 1:var b=Ng;break;case 4:b=Lg;break;default:b=cd}p=b.bind(null,c,p,l),b=void 0,!Qr||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(b=!0),_?b!==void 0?l.addEventListener(c,p,{capture:!0,passive:b}):l.addEventListener(c,p,!0):b!==void 0?l.addEventListener(c,p,{passive:b}):l.addEventListener(c,p,!1)}function xd(l,c,p,_,b){var C=_;if((c&1)===0&&(c&2)===0&&_!==null)e:for(;;){if(_===null)return;var L=_.tag;if(L===3||L===4){var U=_.stateNode.containerInfo;if(U===b||U.nodeType===8&&U.parentNode===b)break;if(L===4)for(L=_.return;L!==null;){var K=L.tag;if((K===3||K===4)&&(K=L.stateNode.containerInfo,K===b||K.nodeType===8&&K.parentNode===b))return;L=L.return}for(;U!==null;){if(L=Lr(U),L===null)return;if(K=L.tag,K===5||K===6){_=C=L;continue e}U=U.parentNode}}_=_.return}Jn(function(){var le=C,Ce=qr(p),Ie=[];e:{var be=Id.get(l);if(be!==void 0){var Ue=ud,We=l;switch(l){case"keypress":if(vc(p)===0)break e;case"keydown":case"keyup":Ue=Yp;break;case"focusin":We="focus",Ue=la;break;case"focusout":We="blur",Ue=la;break;case"beforeblur":case"afterblur":Ue=la;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ue=el;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ue=Up;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ue=qp;break;case pf:case ff:case Cd:Ue=Hp;break;case mf:Ue=wc;break;case"scroll":Ue=Bp;break;case"wheel":Ue=Zp;break;case"copy":case"cut":case"paste":Ue=Gp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ue=Ec}var ze=(c&4)!==0,Ut=!ze&&l==="scroll",X=ze?be!==null?be+"Capture":null:be;ze=[];for(var J=le,re;J!==null;){re=J;var Ae=re.stateNode;if(re.tag===5&&Ae!==null&&(re=Ae,X!==null&&(Ae=Qn(J,X),Ae!=null&&ze.push(ts(J,Ae,re)))),Ut)break;J=J.return}0<ze.length&&(be=new Ue(be,We,null,p,Ce),Ie.push({event:be,listeners:ze}))}}if((c&7)===0){e:{if(be=l==="mouseover"||l==="pointerover",Ue=l==="mouseout"||l==="pointerout",be&&p!==qn&&(We=p.relatedTarget||p.fromElement)&&(Lr(We)||We[ns]))break e;if((Ue||be)&&(be=Ce.window===Ce?Ce:(be=Ce.ownerDocument)?be.defaultView||be.parentWindow:window,Ue?(We=p.relatedTarget||p.toElement,Ue=le,We=We?Lr(We):null,We!==null&&(Ut=oi(We),We!==Ut||We.tag!==5&&We.tag!==6)&&(We=null)):(Ue=null,We=le),Ue!==We)){if(ze=el,Ae="onMouseLeave",X="onMouseEnter",J="mouse",(l==="pointerout"||l==="pointerover")&&(ze=Ec,Ae="onPointerLeave",X="onPointerEnter",J="pointer"),Ut=Ue==null?be:ar(Ue),re=We==null?be:ar(We),be=new ze(Ae,J+"leave",Ue,p,Ce),be.target=Ut,be.relatedTarget=re,Ae=null,Lr(Ce)===le&&(ze=new ze(X,J+"enter",We,p,Ce),ze.target=re,ze.relatedTarget=Ut,Ae=ze),Ut=Ae,Ue&&We)t:{for(ze=Ue,X=We,J=0,re=ze;re;re=lr(re))J++;for(re=0,Ae=X;Ae;Ae=lr(Ae))re++;for(;0<J-re;)ze=lr(ze),J--;for(;0<re-J;)X=lr(X),re--;for(;J--;){if(ze===X||X!==null&&ze===X.alternate)break t;ze=lr(ze),X=lr(X)}ze=null}else ze=null;Ue!==null&&_f(Ie,be,Ue,ze,!1),We!==null&&Ut!==null&&_f(Ie,Ut,We,ze,!0)}}e:{if(be=le?ar(le):window,Ue=be.nodeName&&be.nodeName.toLowerCase(),Ue==="select"||Ue==="input"&&be.type==="file")var Xe=af;else if(of(be))if(cf)Xe=Sc;else{Xe=Bg;var Je=hf}else(Ue=be.nodeName)&&Ue.toLowerCase()==="input"&&(be.type==="checkbox"||be.type==="radio")&&(Xe=ol);if(Xe&&(Xe=Xe(l,le))){lf(Ie,Xe,p,Ce);break e}Je&&Je(l,be,le),l==="focusout"&&(Je=be._wrapperState)&&Je.controlled&&be.type==="number"&&Yr(be,"number",be.value)}switch(Je=le?ar(le):window,l){case"focusin":(of(Je)||Je.contentEditable==="true")&&(ll=Je,Ic=le,fi=null);break;case"focusout":fi=Ic=ll=null;break;case"mousedown":mi=!0;break;case"contextmenu":case"mouseup":case"dragend":mi=!1,wd(Ie,p,Ce);break;case"selectionchange":if(il)break;case"keydown":case"keyup":wd(Ie,p,Ce)}var Qe;if(aa)e:{switch(l){case"compositionstart":var et="onCompositionStart";break e;case"compositionend":et="onCompositionEnd";break e;case"compositionupdate":et="onCompositionUpdate";break e}et=void 0}else pi?rf(l,p)&&(et="onCompositionEnd"):l==="keydown"&&p.keyCode===229&&(et="onCompositionStart");et&&(ef&&p.locale!=="ko"&&(pi||et!=="onCompositionStart"?et==="onCompositionEnd"&&pi&&(Qe=Pp()):(Ar=Ce,$c="value"in Ar?Ar.value:Ar.textContent,pi=!0)),Je=fa(le,et),0<Je.length&&(et=new pd(et,l,null,p,Ce),Ie.push({event:et,listeners:Je}),Qe?et.data=Qe:(Qe=nl(p),Qe!==null&&(et.data=Qe)))),(Qe=Dg?sf(l,p):ca(l,p))&&(le=fa(le,"onBeforeInput"),0<le.length&&(Ce=new pd("onBeforeInput","beforeinput",null,p,Ce),Ie.push({event:Ce,listeners:le}),Ce.data=Qe))}Ac(Ie,c)})}function ts(l,c,p){return{instance:l,listener:c,currentTarget:p}}function fa(l,c){for(var p=c+"Capture",_=[];l!==null;){var b=l,C=b.stateNode;b.tag===5&&C!==null&&(b=C,C=Qn(l,p),C!=null&&_.unshift(ts(l,C,b)),C=Qn(l,c),C!=null&&_.push(ts(l,C,b))),l=l.return}return _}function lr(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function _f(l,c,p,_,b){for(var C=c._reactName,L=[];p!==null&&p!==_;){var U=p,K=U.alternate,le=U.stateNode;if(K!==null&&K===_)break;U.tag===5&&le!==null&&(U=le,b?(K=Qn(p,C),K!=null&&L.unshift(ts(p,K,U))):b||(K=Qn(p,C),K!=null&&L.push(ts(p,K,U)))),p=p.return}L.length!==0&&l.push({event:c,listeners:L})}var Ug=/\r\n?/g,vf=/\u0000|\uFFFD/g;function yf(l){return(typeof l=="string"?l:""+l).replace(Ug,`
`).replace(vf,"")}function qs(l,c,p){if(c=yf(c),yf(l)!==c&&p)throw Error(s(425))}function ma(){}var Od=null,Ad=null;function Nd(l,c){return l==="textarea"||l==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Ld=typeof setTimeout=="function"?setTimeout:void 0,Vg=typeof clearTimeout=="function"?clearTimeout:void 0,Md=typeof Promise=="function"?Promise:void 0,Hg=typeof queueMicrotask=="function"?queueMicrotask:typeof Md<"u"?function(l){return Md.resolve(null).then(l).catch(Gg)}:Ld;function Gg(l){setTimeout(function(){throw l})}function ga(l,c){var p=c,_=0;do{var b=p.nextSibling;if(l.removeChild(p),b&&b.nodeType===8)if(p=b.data,p==="/$"){if(_===0){l.removeChild(b),oa(c);return}_--}else p!=="$"&&p!=="$?"&&p!=="$!"||_++;p=b}while(p);oa(c)}function Io(l){for(;l!=null;l=l.nextSibling){var c=l.nodeType;if(c===1||c===3)break;if(c===8){if(c=l.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return l}function Tf(l){l=l.previousSibling;for(var c=0;l;){if(l.nodeType===8){var p=l.data;if(p==="$"||p==="$!"||p==="$?"){if(c===0)return l;c--}else p==="/$"&&c++}l=l.previousSibling}return null}var gi=Math.random().toString(36).slice(2),Nr="__reactFiber$"+gi,ul="__reactProps$"+gi,ns="__reactContainer$"+gi,Nc="__reactEvents$"+gi,bf="__reactListeners$"+gi,$a="__reactHandles$"+gi;function Lr(l){var c=l[Nr];if(c)return c;for(var p=l.parentNode;p;){if(c=p[ns]||p[Nr]){if(p=c.alternate,c.child!==null||p!==null&&p.child!==null)for(l=Tf(l);l!==null;){if(p=l[Nr])return p;l=Tf(l)}return c}l=p,p=l.parentNode}return null}function Mr(l){return l=l[Nr]||l[ns],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function ar(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(s(33))}function Lc(l){return l[ul]||null}var Pd=[],dl=-1;function Js(l){return{current:l}}function Nt(l){0>dl||(l.current=Pd[dl],Pd[dl]=null,dl--)}function Pt(l,c){dl++,Pd[dl]=l.current,l.current=c}var Ro={},Fn=Js(Ro),Zn=Js(!1),Qs=Ro;function $i(l,c){var p=l.type.contextTypes;if(!p)return Ro;var _=l.stateNode;if(_&&_.__reactInternalMemoizedUnmaskedChildContext===c)return _.__reactInternalMemoizedMaskedChildContext;var b={},C;for(C in p)b[C]=c[C];return _&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=c,l.__reactInternalMemoizedMaskedChildContext=b),b}function Un(l){return l=l.childContextTypes,l!=null}function Mc(){Nt(Zn),Nt(Fn)}function Ef(l,c,p){if(Fn.current!==Ro)throw Error(s(168));Pt(Fn,c),Pt(Zn,p)}function wf(l,c,p){var _=l.stateNode;if(c=c.childContextTypes,typeof _.getChildContext!="function")return p;_=_.getChildContext();for(var b in _)if(!(b in c))throw Error(s(108,te(l)||"Unknown",b));return $e({},p,_)}function Pc(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||Ro,Qs=Fn.current,Pt(Fn,l),Pt(Zn,Zn.current),!0}function Ke(l,c,p){var _=l.stateNode;if(!_)throw Error(s(169));p?(l=wf(l,c,Qs),_.__reactInternalMemoizedMergedChildContext=l,Nt(Zn),Nt(Fn),Pt(Fn,l)):Nt(Zn),Pt(Zn,p)}var ln=null,an=!1,Lt=!1;function $s(l){ln===null?ln=[l]:ln.push(l)}function _a(l){an=!0,$s(l)}function Me(){if(!Lt&&ln!==null){Lt=!0;var l=0,c=Et;try{var p=ln;for(Et=1;l<p.length;l++){var _=p[l];do _=_(!0);while(_!==null)}ln=null,an=!1}catch(b){throw ln!==null&&(ln=ln.slice(l+1)),cc(ta,Me),b}finally{Et=c,Lt=!1}}return null}var Dt=[],_i=0,Dc=null,_s=0,cr=[],ur=0,ko=null,Zs=1,vs="";function eo(l,c){Dt[_i++]=_s,Dt[_i++]=Dc,Dc=l,_s=c}function Dd(l,c,p){cr[ur++]=Zs,cr[ur++]=vs,cr[ur++]=ko,ko=l;var _=Zs;l=vs;var b=32-Zr(_)-1;_&=~(1<<b),p+=1;var C=32-Zr(c)+b;if(30<C){var L=b-b%5;C=(_&(1<<L)-1).toString(32),_>>=L,b-=L,Zs=1<<32-Zr(c)+b|p<<b|_,vs=C+l}else Zs=1<<C|p<<b|_,vs=l}function Bc(l){l.return!==null&&(eo(l,1),Dd(l,1,0))}function Bd(l){for(;l===Dc;)Dc=Dt[--_i],Dt[_i]=null,_s=Dt[--_i],Dt[_i]=null;for(;l===ko;)ko=cr[--ur],cr[ur]=null,vs=cr[--ur],cr[ur]=null,Zs=cr[--ur],cr[ur]=null}var dr=null,br=null,Bt=!1,rs=null;function Sf(l,c){var p=jn(5,null,null,0);p.elementType="DELETED",p.stateNode=c,p.return=l,c=l.deletions,c===null?(l.deletions=[p],l.flags|=16):c.push(p)}function Cf(l,c){switch(l.tag){case 5:var p=l.type;return c=c.nodeType!==1||p.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(l.stateNode=c,dr=l,br=Io(c.firstChild),!0):!1;case 6:return c=l.pendingProps===""||c.nodeType!==3?null:c,c!==null?(l.stateNode=c,dr=l,br=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(p=ko!==null?{id:Zs,overflow:vs}:null,l.memoizedState={dehydrated:c,treeContext:p,retryLane:1073741824},p=jn(18,null,null,0),p.stateNode=c,p.return=l,l.child=p,dr=l,br=null,!0):!1;default:return!1}}function Fd(l){return(l.mode&1)!==0&&(l.flags&128)===0}function Ud(l){if(Bt){var c=br;if(c){var p=c;if(!Cf(l,c)){if(Fd(l))throw Error(s(418));c=Io(p.nextSibling);var _=dr;c&&Cf(l,c)?Sf(_,p):(l.flags=l.flags&-4097|2,Bt=!1,dr=l)}}else{if(Fd(l))throw Error(s(418));l.flags=l.flags&-4097|2,Bt=!1,dr=l}}}function Vd(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;dr=l}function Fc(l){if(l!==dr)return!1;if(!Bt)return Vd(l),Bt=!0,!1;var c;if((c=l.tag!==3)&&!(c=l.tag!==5)&&(c=l.type,c=c!=="head"&&c!=="body"&&!Nd(l.type,l.memoizedProps)),c&&(c=br)){if(Fd(l))throw va(),Error(s(418));for(;c;)Sf(l,c),c=Io(c.nextSibling)}if(Vd(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(s(317));e:{for(l=l.nextSibling,c=0;l;){if(l.nodeType===8){var p=l.data;if(p==="/$"){if(c===0){br=Io(l.nextSibling);break e}c--}else p!=="$"&&p!=="$!"&&p!=="$?"||c++}l=l.nextSibling}br=null}}else br=dr?Io(l.stateNode.nextSibling):null;return!0}function va(){for(var l=br;l;)l=Io(l.nextSibling)}function to(){br=dr=null,Bt=!1}function Hd(l){rs===null?rs=[l]:rs.push(l)}var If=F.ReactCurrentBatchConfig;function hl(l,c,p){if(l=p.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(s(309));var _=p.stateNode}if(!_)throw Error(s(147,l));var b=_,C=""+l;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===C?c.ref:(c=function(L){var U=b.refs;L===null?delete U[C]:U[C]=L},c._stringRef=C,c)}if(typeof l!="string")throw Error(s(284));if(!p._owner)throw Error(s(290,l))}return l}function ya(l,c){throw l=Object.prototype.toString.call(c),Error(s(31,l==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":l))}function Gd(l){var c=l._init;return c(l._payload)}function Uc(l){function c(X,J){if(l){var re=X.deletions;re===null?(X.deletions=[J],X.flags|=16):re.push(J)}}function p(X,J){if(!l)return null;for(;J!==null;)c(X,J),J=J.sibling;return null}function _(X,J){for(X=new Map;J!==null;)J.key!==null?X.set(J.key,J):X.set(J.index,J),J=J.sibling;return X}function b(X,J){return X=Hr(X,J),X.index=0,X.sibling=null,X}function C(X,J,re){return X.index=re,l?(re=X.alternate,re!==null?(re=re.index,re<J?(X.flags|=2,J):re):(X.flags|=2,J)):(X.flags|=1048576,J)}function L(X){return l&&X.alternate===null&&(X.flags|=2),X}function U(X,J,re,Ae){return J===null||J.tag!==6?(J=vh(re,X.mode,Ae),J.return=X,J):(J=b(J,re),J.return=X,J)}function K(X,J,re,Ae){var Xe=re.type;return Xe===j?Ce(X,J,re.props.children,Ae,re.key):J!==null&&(J.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===ie&&Gd(Xe)===J.type)?(Ae=b(J,re.props),Ae.ref=hl(X,J,re),Ae.return=X,Ae):(Ae=uo(re.type,re.key,re.props,null,X.mode,Ae),Ae.ref=hl(X,J,re),Ae.return=X,Ae)}function le(X,J,re,Ae){return J===null||J.tag!==4||J.stateNode.containerInfo!==re.containerInfo||J.stateNode.implementation!==re.implementation?(J=$u(re,X.mode,Ae),J.return=X,J):(J=b(J,re.children||[]),J.return=X,J)}function Ce(X,J,re,Ae,Xe){return J===null||J.tag!==7?(J=Bo(re,X.mode,Ae,Xe),J.return=X,J):(J=b(J,re),J.return=X,J)}function Ie(X,J,re){if(typeof J=="string"&&J!==""||typeof J=="number")return J=vh(""+J,X.mode,re),J.return=X,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case B:return re=uo(J.type,J.key,J.props,null,X.mode,re),re.ref=hl(X,null,J),re.return=X,re;case V:return J=$u(J,X.mode,re),J.return=X,J;case ie:var Ae=J._init;return Ie(X,Ae(J._payload),re)}if(je(J)||ee(J))return J=Bo(J,X.mode,re,null),J.return=X,J;ya(X,J)}return null}function be(X,J,re,Ae){var Xe=J!==null?J.key:null;if(typeof re=="string"&&re!==""||typeof re=="number")return Xe!==null?null:U(X,J,""+re,Ae);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case B:return re.key===Xe?K(X,J,re,Ae):null;case V:return re.key===Xe?le(X,J,re,Ae):null;case ie:return Xe=re._init,be(X,J,Xe(re._payload),Ae)}if(je(re)||ee(re))return Xe!==null?null:Ce(X,J,re,Ae,null);ya(X,re)}return null}function Ue(X,J,re,Ae,Xe){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number")return X=X.get(re)||null,U(J,X,""+Ae,Xe);if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case B:return X=X.get(Ae.key===null?re:Ae.key)||null,K(J,X,Ae,Xe);case V:return X=X.get(Ae.key===null?re:Ae.key)||null,le(J,X,Ae,Xe);case ie:var Je=Ae._init;return Ue(X,J,re,Je(Ae._payload),Xe)}if(je(Ae)||ee(Ae))return X=X.get(re)||null,Ce(J,X,Ae,Xe,null);ya(J,Ae)}return null}function We(X,J,re,Ae){for(var Xe=null,Je=null,Qe=J,et=J=0,fn=null;Qe!==null&&et<re.length;et++){Qe.index>et?(fn=Qe,Qe=null):fn=Qe.sibling;var lt=be(X,Qe,re[et],Ae);if(lt===null){Qe===null&&(Qe=fn);break}l&&Qe&&lt.alternate===null&&c(X,Qe),J=C(lt,J,et),Je===null?Xe=lt:Je.sibling=lt,Je=lt,Qe=fn}if(et===re.length)return p(X,Qe),Bt&&eo(X,et),Xe;if(Qe===null){for(;et<re.length;et++)Qe=Ie(X,re[et],Ae),Qe!==null&&(J=C(Qe,J,et),Je===null?Xe=Qe:Je.sibling=Qe,Je=Qe);return Bt&&eo(X,et),Xe}for(Qe=_(X,Qe);et<re.length;et++)fn=Ue(Qe,X,et,re[et],Ae),fn!==null&&(l&&fn.alternate!==null&&Qe.delete(fn.key===null?et:fn.key),J=C(fn,J,et),Je===null?Xe=fn:Je.sibling=fn,Je=fn);return l&&Qe.forEach(function(ho){return c(X,ho)}),Bt&&eo(X,et),Xe}function ze(X,J,re,Ae){var Xe=ee(re);if(typeof Xe!="function")throw Error(s(150));if(re=Xe.call(re),re==null)throw Error(s(151));for(var Je=Xe=null,Qe=J,et=J=0,fn=null,lt=re.next();Qe!==null&&!lt.done;et++,lt=re.next()){Qe.index>et?(fn=Qe,Qe=null):fn=Qe.sibling;var ho=be(X,Qe,lt.value,Ae);if(ho===null){Qe===null&&(Qe=fn);break}l&&Qe&&ho.alternate===null&&c(X,Qe),J=C(ho,J,et),Je===null?Xe=ho:Je.sibling=ho,Je=ho,Qe=fn}if(lt.done)return p(X,Qe),Bt&&eo(X,et),Xe;if(Qe===null){for(;!lt.done;et++,lt=re.next())lt=Ie(X,lt.value,Ae),lt!==null&&(J=C(lt,J,et),Je===null?Xe=lt:Je.sibling=lt,Je=lt);return Bt&&eo(X,et),Xe}for(Qe=_(X,Qe);!lt.done;et++,lt=re.next())lt=Ue(Qe,X,et,lt.value,Ae),lt!==null&&(l&&lt.alternate!==null&&Qe.delete(lt.key===null?et:lt.key),J=C(lt,J,et),Je===null?Xe=lt:Je.sibling=lt,Je=lt);return l&&Qe.forEach(function(bv){return c(X,bv)}),Bt&&eo(X,et),Xe}function Ut(X,J,re,Ae){if(typeof re=="object"&&re!==null&&re.type===j&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case B:e:{for(var Xe=re.key,Je=J;Je!==null;){if(Je.key===Xe){if(Xe=re.type,Xe===j){if(Je.tag===7){p(X,Je.sibling),J=b(Je,re.props.children),J.return=X,X=J;break e}}else if(Je.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===ie&&Gd(Xe)===Je.type){p(X,Je.sibling),J=b(Je,re.props),J.ref=hl(X,Je,re),J.return=X,X=J;break e}p(X,Je);break}else c(X,Je);Je=Je.sibling}re.type===j?(J=Bo(re.props.children,X.mode,Ae,re.key),J.return=X,X=J):(Ae=uo(re.type,re.key,re.props,null,X.mode,Ae),Ae.ref=hl(X,J,re),Ae.return=X,X=Ae)}return L(X);case V:e:{for(Je=re.key;J!==null;){if(J.key===Je)if(J.tag===4&&J.stateNode.containerInfo===re.containerInfo&&J.stateNode.implementation===re.implementation){p(X,J.sibling),J=b(J,re.children||[]),J.return=X,X=J;break e}else{p(X,J);break}else c(X,J);J=J.sibling}J=$u(re,X.mode,Ae),J.return=X,X=J}return L(X);case ie:return Je=re._init,Ut(X,J,Je(re._payload),Ae)}if(je(re))return We(X,J,re,Ae);if(ee(re))return ze(X,J,re,Ae);ya(X,re)}return typeof re=="string"&&re!==""||typeof re=="number"?(re=""+re,J!==null&&J.tag===6?(p(X,J.sibling),J=b(J,re),J.return=X,X=J):(p(X,J),J=vh(re,X.mode,Ae),J.return=X,X=J),L(X)):p(X,J)}return Ut}var vi=Uc(!0),Rf=Uc(!1),Vc=Js(null),Hc=null,ys=null,Gc=null;function jd(){Gc=ys=Hc=null}function Ta(l){var c=Vc.current;Nt(Vc),l._currentValue=c}function Er(l,c,p){for(;l!==null;){var _=l.alternate;if((l.childLanes&c)!==c?(l.childLanes|=c,_!==null&&(_.childLanes|=c)):_!==null&&(_.childLanes&c)!==c&&(_.childLanes|=c),l===p)break;l=l.return}}function pl(l,c){Hc=l,Gc=ys=null,l=l.dependencies,l!==null&&l.firstContext!==null&&((l.lanes&c)!==0&&(Vn=!0),l.firstContext=null)}function Cn(l){var c=l._currentValue;if(Gc!==l)if(l={context:l,memoizedValue:c,next:null},ys===null){if(Hc===null)throw Error(s(308));ys=l,Hc.dependencies={lanes:0,firstContext:l}}else ys=ys.next=l;return c}var xo=null;function Wd(l){xo===null?xo=[l]:xo.push(l)}function ba(l,c,p,_){var b=c.interleaved;return b===null?(p.next=p,Wd(c)):(p.next=b.next,b.next=p),c.interleaved=p,Ts(l,_)}function Ts(l,c){l.lanes|=c;var p=l.alternate;for(p!==null&&(p.lanes|=c),p=l,l=l.return;l!==null;)l.childLanes|=c,p=l.alternate,p!==null&&(p.childLanes|=c),p=l,l=l.return;return p.tag===3?p.stateNode:null}var no=!1;function jc(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zd(l,c){l=l.updateQueue,c.updateQueue===l&&(c.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function bs(l,c){return{eventTime:l,lane:c,tag:0,payload:null,callback:null,next:null}}function ro(l,c,p){var _=l.updateQueue;if(_===null)return null;if(_=_.shared,(vt&2)!==0){var b=_.pending;return b===null?c.next=c:(c.next=b.next,b.next=c),_.pending=c,Ts(l,p)}return b=_.interleaved,b===null?(c.next=c,Wd(_)):(c.next=b.next,b.next=c),_.interleaved=c,Ts(l,p)}function Ea(l,c,p){if(c=c.updateQueue,c!==null&&(c=c.shared,(p&4194240)!==0)){var _=c.lanes;_&=l.pendingLanes,p|=_,c.lanes=p,ld(l,p)}}function Kd(l,c){var p=l.updateQueue,_=l.alternate;if(_!==null&&(_=_.updateQueue,p===_)){var b=null,C=null;if(p=p.firstBaseUpdate,p!==null){do{var L={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};C===null?b=C=L:C=C.next=L,p=p.next}while(p!==null);C===null?b=C=c:C=C.next=c}else b=C=c;p={baseState:_.baseState,firstBaseUpdate:b,lastBaseUpdate:C,shared:_.shared,effects:_.effects},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=c:l.next=c,p.lastBaseUpdate=c}function wa(l,c,p,_){var b=l.updateQueue;no=!1;var C=b.firstBaseUpdate,L=b.lastBaseUpdate,U=b.shared.pending;if(U!==null){b.shared.pending=null;var K=U,le=K.next;K.next=null,L===null?C=le:L.next=le,L=K;var Ce=l.alternate;Ce!==null&&(Ce=Ce.updateQueue,U=Ce.lastBaseUpdate,U!==L&&(U===null?Ce.firstBaseUpdate=le:U.next=le,Ce.lastBaseUpdate=K))}if(C!==null){var Ie=b.baseState;L=0,Ce=le=K=null,U=C;do{var be=U.lane,Ue=U.eventTime;if((_&be)===be){Ce!==null&&(Ce=Ce.next={eventTime:Ue,lane:0,tag:U.tag,payload:U.payload,callback:U.callback,next:null});e:{var We=l,ze=U;switch(be=c,Ue=p,ze.tag){case 1:if(We=ze.payload,typeof We=="function"){Ie=We.call(Ue,Ie,be);break e}Ie=We;break e;case 3:We.flags=We.flags&-65537|128;case 0:if(We=ze.payload,be=typeof We=="function"?We.call(Ue,Ie,be):We,be==null)break e;Ie=$e({},Ie,be);break e;case 2:no=!0}}U.callback!==null&&U.lane!==0&&(l.flags|=64,be=b.effects,be===null?b.effects=[U]:be.push(U))}else Ue={eventTime:Ue,lane:be,tag:U.tag,payload:U.payload,callback:U.callback,next:null},Ce===null?(le=Ce=Ue,K=Ie):Ce=Ce.next=Ue,L|=be;if(U=U.next,U===null){if(U=b.shared.pending,U===null)break;be=U,U=be.next,be.next=null,b.lastBaseUpdate=be,b.shared.pending=null}}while(!0);if(Ce===null&&(K=Ie),b.baseState=K,b.firstBaseUpdate=le,b.lastBaseUpdate=Ce,c=b.shared.interleaved,c!==null){b=c;do L|=b.lane,b=b.next;while(b!==c)}else C===null&&(b.shared.lanes=0);Il|=L,l.lanes=L,l.memoizedState=Ie}}function Xd(l,c,p){if(l=c.effects,c.effects=null,l!==null)for(c=0;c<l.length;c++){var _=l[c],b=_.callback;if(b!==null){if(_.callback=null,_=p,typeof b!="function")throw Error(s(191,b));b.call(_)}}}var Sa={},Es=Js(Sa),Ca=Js(Sa),Ia=Js(Sa);function yi(l){if(l===Sa)throw Error(s(174));return l}function Yd(l,c){switch(Pt(Ia,c),Pt(Ca,l),Pt(Es,Sa),l=c.nodeType,l){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:zt(null,"");break;default:l=l===8?c.parentNode:c,c=l.namespaceURI||null,l=l.tagName,c=zt(c,l)}Nt(Es),Pt(Es,c)}function Oo(){Nt(Es),Nt(Ca),Nt(Ia)}function kf(l){yi(Ia.current);var c=yi(Es.current),p=zt(c,l.type);c!==p&&(Pt(Ca,l),Pt(Es,p))}function qd(l){Ca.current===l&&(Nt(Es),Nt(Ca))}var Kt=Js(0);function Ra(l){for(var c=l;c!==null;){if(c.tag===13){var p=c.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Wc=[];function zc(){for(var l=0;l<Wc.length;l++)Wc[l]._workInProgressVersionPrimary=null;Wc.length=0}var ka=F.ReactCurrentDispatcher,Kc=F.ReactCurrentBatchConfig,Ao=0,Ht=null,en=null,$n=null,Xc=!1,fl=!1,ml=0,xf=0;function On(){throw Error(s(321))}function Yc(l,c){if(c===null)return!1;for(var p=0;p<c.length&&p<l.length;p++)if(!Tr(l[p],c[p]))return!1;return!0}function qc(l,c,p,_,b,C){if(Ao=C,Ht=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,ka.current=l===null||l.memoizedState===null?zg:_l,l=p(_,b),fl){C=0;do{if(fl=!1,ml=0,25<=C)throw Error(s(301));C+=1,$n=en=null,c.updateQueue=null,ka.current=Kg,l=p(_,b)}while(fl)}if(ka.current=Ti,c=en!==null&&en.next!==null,Ao=0,$n=en=Ht=null,Xc=!1,c)throw Error(s(300));return l}function Jc(){var l=ml!==0;return ml=0,l}function ss(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $n===null?Ht.memoizedState=$n=l:$n=$n.next=l,$n}function wr(){if(en===null){var l=Ht.alternate;l=l!==null?l.memoizedState:null}else l=en.next;var c=$n===null?Ht.memoizedState:$n.next;if(c!==null)$n=c,en=l;else{if(l===null)throw Error(s(310));en=l,l={memoizedState:en.memoizedState,baseState:en.baseState,baseQueue:en.baseQueue,queue:en.queue,next:null},$n===null?Ht.memoizedState=$n=l:$n=$n.next=l}return $n}function gl(l,c){return typeof c=="function"?c(l):c}function Jd(l){var c=wr(),p=c.queue;if(p===null)throw Error(s(311));p.lastRenderedReducer=l;var _=en,b=_.baseQueue,C=p.pending;if(C!==null){if(b!==null){var L=b.next;b.next=C.next,C.next=L}_.baseQueue=b=C,p.pending=null}if(b!==null){C=b.next,_=_.baseState;var U=L=null,K=null,le=C;do{var Ce=le.lane;if((Ao&Ce)===Ce)K!==null&&(K=K.next={lane:0,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),_=le.hasEagerState?le.eagerState:l(_,le.action);else{var Ie={lane:Ce,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null};K===null?(U=K=Ie,L=_):K=K.next=Ie,Ht.lanes|=Ce,Il|=Ce}le=le.next}while(le!==null&&le!==C);K===null?L=_:K.next=U,Tr(_,c.memoizedState)||(Vn=!0),c.memoizedState=_,c.baseState=L,c.baseQueue=K,p.lastRenderedState=_}if(l=p.interleaved,l!==null){b=l;do C=b.lane,Ht.lanes|=C,Il|=C,b=b.next;while(b!==l)}else b===null&&(p.lanes=0);return[c.memoizedState,p.dispatch]}function Qd(l){var c=wr(),p=c.queue;if(p===null)throw Error(s(311));p.lastRenderedReducer=l;var _=p.dispatch,b=p.pending,C=c.memoizedState;if(b!==null){p.pending=null;var L=b=b.next;do C=l(C,L.action),L=L.next;while(L!==b);Tr(C,c.memoizedState)||(Vn=!0),c.memoizedState=C,c.baseQueue===null&&(c.baseState=C),p.lastRenderedState=C}return[C,_]}function Of(){}function Zd(l,c){var p=Ht,_=wr(),b=c(),C=!Tr(_.memoizedState,b);if(C&&(_.memoizedState=b,Vn=!0),_=_.queue,ws(Lf.bind(null,p,_,l),[l]),_.getSnapshot!==c||C||$n!==null&&$n.memoizedState.tag&1){if(p.flags|=2048,os(9,Nf.bind(null,p,_,b,c),void 0,null),Ln===null)throw Error(s(349));(Ao&30)!==0||Af(p,c,b)}return b}function Af(l,c,p){l.flags|=16384,l={getSnapshot:c,value:p},c=Ht.updateQueue,c===null?(c={lastEffect:null,stores:null},Ht.updateQueue=c,c.stores=[l]):(p=c.stores,p===null?c.stores=[l]:p.push(l))}function Nf(l,c,p,_){c.value=p,c.getSnapshot=_,Mf(c)&&Pf(l)}function Lf(l,c,p){return p(function(){Mf(c)&&Pf(l)})}function Mf(l){var c=l.getSnapshot;l=l.value;try{var p=c();return!Tr(l,p)}catch{return!0}}function Pf(l){var c=Ts(l,1);c!==null&&ls(c,l,1,-1)}function ve(l){var c=ss();return typeof l=="function"&&(l=l()),c.memoizedState=c.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gl,lastRenderedState:l},c.queue=l,l=l.dispatch=Gf.bind(null,Ht,l),[c.memoizedState,l]}function os(l,c,p,_){return l={tag:l,create:c,destroy:p,deps:_,next:null},c=Ht.updateQueue,c===null?(c={lastEffect:null,stores:null},Ht.updateQueue=c,c.lastEffect=l.next=l):(p=c.lastEffect,p===null?c.lastEffect=l.next=l:(_=p.next,p.next=l,l.next=_,c.lastEffect=l)),l}function jg(){return wr().memoizedState}function $l(l,c,p,_){var b=ss();Ht.flags|=l,b.memoizedState=os(1|c,p,void 0,_===void 0?null:_)}function Pr(l,c,p,_){var b=wr();_=_===void 0?null:_;var C=void 0;if(en!==null){var L=en.memoizedState;if(C=L.destroy,_!==null&&Yc(_,L.deps)){b.memoizedState=os(c,p,C,_);return}}Ht.flags|=l,b.memoizedState=os(1|c,p,C,_)}function Te(l,c){return $l(8390656,8,l,c)}function ws(l,c){return Pr(2048,8,l,c)}function hr(l,c){return Pr(4,2,l,c)}function oe(l,c){return Pr(4,4,l,c)}function Df(l,c){if(typeof c=="function")return l=l(),c(l),function(){c(null)};if(c!=null)return l=l(),c.current=l,function(){c.current=null}}function Bf(l,c,p){return p=p!=null?p.concat([l]):null,Pr(4,4,Df.bind(null,c,l),p)}function eh(){}function Ff(l,c){var p=wr();c=c===void 0?null:c;var _=p.memoizedState;return _!==null&&c!==null&&Yc(c,_[1])?_[0]:(p.memoizedState=[l,c],l)}function Uf(l,c){var p=wr();c=c===void 0?null:c;var _=p.memoizedState;return _!==null&&c!==null&&Yc(c,_[1])?_[0]:(l=l(),p.memoizedState=[l,c],l)}function Wg(l,c,p){return(Ao&21)===0?(l.baseState&&(l.baseState=!1,Vn=!0),l.memoizedState=p):(Tr(p,c)||(p=od(),Ht.lanes|=p,Il|=p,l.baseState=!0),c)}function Vf(l,c){var p=Et;Et=p!==0&&4>p?p:4,l(!0);var _=Kc.transition;Kc.transition={};try{l(!1),c()}finally{Et=p,Kc.transition=_}}function Hf(){return wr().memoizedState}function Qc(l,c,p){var _=Po(l);if(p={lane:_,action:p,hasEagerState:!1,eagerState:null,next:null},th(l))so(c,p);else if(p=ba(l,c,p,_),p!==null){var b=nr();ls(p,l,_,b),jf(p,c,_)}}function Gf(l,c,p){var _=Po(l),b={lane:_,action:p,hasEagerState:!1,eagerState:null,next:null};if(th(l))so(c,b);else{var C=l.alternate;if(l.lanes===0&&(C===null||C.lanes===0)&&(C=c.lastRenderedReducer,C!==null))try{var L=c.lastRenderedState,U=C(L,p);if(b.hasEagerState=!0,b.eagerState=U,Tr(U,L)){var K=c.interleaved;K===null?(b.next=b,Wd(c)):(b.next=K.next,K.next=b),c.interleaved=b;return}}catch{}p=ba(l,c,b,_),p!==null&&(b=nr(),ls(p,l,_,b),jf(p,c,_))}}function th(l){var c=l.alternate;return l===Ht||c!==null&&c===Ht}function so(l,c){fl=Xc=!0;var p=l.pending;p===null?c.next=c:(c.next=p.next,p.next=c),l.pending=c}function jf(l,c,p){if((p&4194240)!==0){var _=c.lanes;_&=l.pendingLanes,p|=_,c.lanes=p,ld(l,p)}}var Ti={readContext:Cn,useCallback:On,useContext:On,useEffect:On,useImperativeHandle:On,useInsertionEffect:On,useLayoutEffect:On,useMemo:On,useReducer:On,useRef:On,useState:On,useDebugValue:On,useDeferredValue:On,useTransition:On,useMutableSource:On,useSyncExternalStore:On,useId:On,unstable_isNewReconciler:!1},zg={readContext:Cn,useCallback:function(l,c){return ss().memoizedState=[l,c===void 0?null:c],l},useContext:Cn,useEffect:Te,useImperativeHandle:function(l,c,p){return p=p!=null?p.concat([l]):null,$l(4194308,4,Df.bind(null,c,l),p)},useLayoutEffect:function(l,c){return $l(4194308,4,l,c)},useInsertionEffect:function(l,c){return $l(4,2,l,c)},useMemo:function(l,c){var p=ss();return c=c===void 0?null:c,l=l(),p.memoizedState=[l,c],l},useReducer:function(l,c,p){var _=ss();return c=p!==void 0?p(c):c,_.memoizedState=_.baseState=c,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:c},_.queue=l,l=l.dispatch=Qc.bind(null,Ht,l),[_.memoizedState,l]},useRef:function(l){var c=ss();return l={current:l},c.memoizedState=l},useState:ve,useDebugValue:eh,useDeferredValue:function(l){return ss().memoizedState=l},useTransition:function(){var l=ve(!1),c=l[0];return l=Vf.bind(null,l[1]),ss().memoizedState=l,[c,l]},useMutableSource:function(){},useSyncExternalStore:function(l,c,p){var _=Ht,b=ss();if(Bt){if(p===void 0)throw Error(s(407));p=p()}else{if(p=c(),Ln===null)throw Error(s(349));(Ao&30)!==0||Af(_,c,p)}b.memoizedState=p;var C={value:p,getSnapshot:c};return b.queue=C,Te(Lf.bind(null,_,C,l),[l]),_.flags|=2048,os(9,Nf.bind(null,_,C,p,c),void 0,null),p},useId:function(){var l=ss(),c=Ln.identifierPrefix;if(Bt){var p=vs,_=Zs;p=(_&~(1<<32-Zr(_)-1)).toString(32)+p,c=":"+c+"R"+p,p=ml++,0<p&&(c+="H"+p.toString(32)),c+=":"}else p=xf++,c=":"+c+"r"+p.toString(32)+":";return l.memoizedState=c},unstable_isNewReconciler:!1},_l={readContext:Cn,useCallback:Ff,useContext:Cn,useEffect:ws,useImperativeHandle:Bf,useInsertionEffect:hr,useLayoutEffect:oe,useMemo:Uf,useReducer:Jd,useRef:jg,useState:function(){return Jd(gl)},useDebugValue:eh,useDeferredValue:function(l){var c=wr();return Wg(c,en.memoizedState,l)},useTransition:function(){var l=Jd(gl)[0],c=wr().memoizedState;return[l,c]},useMutableSource:Of,useSyncExternalStore:Zd,useId:Hf,unstable_isNewReconciler:!1},Kg={readContext:Cn,useCallback:Ff,useContext:Cn,useEffect:ws,useImperativeHandle:Bf,useInsertionEffect:hr,useLayoutEffect:oe,useMemo:Uf,useReducer:Qd,useRef:jg,useState:function(){return Qd(gl)},useDebugValue:eh,useDeferredValue:function(l){var c=wr();return en===null?c.memoizedState=l:Wg(c,en.memoizedState,l)},useTransition:function(){var l=Qd(gl)[0],c=wr().memoizedState;return[l,c]},useMutableSource:Of,useSyncExternalStore:Zd,useId:Hf,unstable_isNewReconciler:!1};function pr(l,c){if(l&&l.defaultProps){c=$e({},c),l=l.defaultProps;for(var p in l)c[p]===void 0&&(c[p]=l[p]);return c}return c}function nh(l,c,p,_){c=l.memoizedState,p=p(_,c),p=p==null?c:$e({},c,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}var _n={isMounted:function(l){return(l=l._reactInternals)?oi(l)===l:!1},enqueueSetState:function(l,c,p){l=l._reactInternals;var _=nr(),b=Po(l),C=bs(_,b);C.payload=c,p!=null&&(C.callback=p),c=ro(l,C,b),c!==null&&(ls(c,l,b,_),Ea(c,l,b))},enqueueReplaceState:function(l,c,p){l=l._reactInternals;var _=nr(),b=Po(l),C=bs(_,b);C.tag=1,C.payload=c,p!=null&&(C.callback=p),c=ro(l,C,b),c!==null&&(ls(c,l,b,_),Ea(c,l,b))},enqueueForceUpdate:function(l,c){l=l._reactInternals;var p=nr(),_=Po(l),b=bs(p,_);b.tag=2,c!=null&&(b.callback=c),c=ro(l,b,_),c!==null&&(ls(c,l,_,p),Ea(c,l,_))}};function vl(l,c,p,_,b,C,L){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(_,C,L):c.prototype&&c.prototype.isPureReactComponent?!gs(p,_)||!gs(b,C):!0}function is(l,c,p){var _=!1,b=Ro,C=c.contextType;return typeof C=="object"&&C!==null?C=Cn(C):(b=Un(c)?Qs:Fn.current,_=c.contextTypes,C=(_=_!=null)?$i(l,b):Ro),c=new c(p,C),l.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=_n,l.stateNode=c,c._reactInternals=l,_&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=b,l.__reactInternalMemoizedMaskedChildContext=C),c}function rh(l,c,p,_){l=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(p,_),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(p,_),c.state!==l&&_n.enqueueReplaceState(c,c.state,null)}function Zc(l,c,p,_){var b=l.stateNode;b.props=p,b.state=l.memoizedState,b.refs={},jc(l);var C=c.contextType;typeof C=="object"&&C!==null?b.context=Cn(C):(C=Un(c)?Qs:Fn.current,b.context=$i(l,C)),b.state=l.memoizedState,C=c.getDerivedStateFromProps,typeof C=="function"&&(nh(l,c,C,p),b.state=l.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(c=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),c!==b.state&&_n.enqueueReplaceState(b,b.state,null),wa(l,p,b,_),b.state=l.memoizedState),typeof b.componentDidMount=="function"&&(l.flags|=4194308)}function xa(l,c){try{var p="",_=c;do p+=me(_),_=_.return;while(_);var b=p}catch(C){b=`
Error generating stack: `+C.message+`
`+C.stack}return{value:l,source:c,stack:b,digest:null}}function sh(l,c,p){return{value:l,source:null,stack:p??null,digest:c??null}}function Oa(l,c){try{console.error(c.value)}catch(p){setTimeout(function(){throw p})}}var yl=typeof WeakMap=="function"?WeakMap:Map;function eu(l,c,p){p=bs(-1,p),p.tag=3,p.payload={element:null};var _=c.value;return p.callback=function(){Rl||(Rl=!0,Gn=_),Oa(l,c)},p}function bi(l,c,p){p=bs(-1,p),p.tag=3;var _=l.type.getDerivedStateFromError;if(typeof _=="function"){var b=c.value;p.payload=function(){return _(b)},p.callback=function(){Oa(l,c)}}var C=l.stateNode;return C!==null&&typeof C.componentDidCatch=="function"&&(p.callback=function(){Oa(l,c),typeof _!="function"&&(Ci===null?Ci=new Set([this]):Ci.add(this));var L=c.stack;this.componentDidCatch(c.value,{componentStack:L!==null?L:""})}),p}function oh(l,c,p){var _=l.pingCache;if(_===null){_=l.pingCache=new yl;var b=new Set;_.set(c,b)}else b=_.get(c),b===void 0&&(b=new Set,_.set(c,b));b.has(p)||(b.add(p),l=$h.bind(null,l,c,p),c.then(l,l))}function Wf(l){do{var c;if((c=l.tag===13)&&(c=l.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return l;l=l.return}while(l!==null);return null}function zf(l,c,p,_,b){return(l.mode&1)===0?(l===c?l.flags|=65536:(l.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(c=bs(-1,1),c.tag=2,ro(p,c,1))),p.lanes|=1),l):(l.flags|=65536,l.lanes=b,l)}var Xg=F.ReactCurrentOwner,Vn=!1;function An(l,c,p,_){c.child=l===null?Rf(c,null,p,_):vi(c,l.child,p,_)}function ih(l,c,p,_,b){p=p.render;var C=c.ref;return pl(c,b),_=qc(l,c,p,_,C,b),p=Jc(),l!==null&&!Vn?(c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~b,Cs(l,c,b)):(Bt&&p&&Bc(c),c.flags|=1,An(l,c,_,b),c.child)}function Kf(l,c,p,_,b){if(l===null){var C=p.type;return typeof C=="function"&&!xi(C)&&C.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(c.tag=15,c.type=C,Xf(l,c,C,_,b)):(l=uo(p.type,null,_,c,c.mode,b),l.ref=c.ref,l.return=c,c.child=l)}if(C=l.child,(l.lanes&b)===0){var L=C.memoizedProps;if(p=p.compare,p=p!==null?p:gs,p(L,_)&&l.ref===c.ref)return Cs(l,c,b)}return c.flags|=1,l=Hr(C,_),l.ref=c.ref,l.return=c,c.child=l}function Xf(l,c,p,_,b){if(l!==null){var C=l.memoizedProps;if(gs(C,_)&&l.ref===c.ref)if(Vn=!1,c.pendingProps=_=C,(l.lanes&b)!==0)(l.flags&131072)!==0&&(Vn=!0);else return c.lanes=l.lanes,Cs(l,c,b)}return lh(l,c,p,_,b)}function Yf(l,c,p){var _=c.pendingProps,b=_.children,C=l!==null?l.memoizedState:null;if(_.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pt(wi,tr),tr|=p;else{if((p&1073741824)===0)return l=C!==null?C.baseLanes|p:p,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:l,cachePool:null,transitions:null},c.updateQueue=null,Pt(wi,tr),tr|=l,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},_=C!==null?C.baseLanes:p,Pt(wi,tr),tr|=_}else C!==null?(_=C.baseLanes|p,c.memoizedState=null):_=p,Pt(wi,tr),tr|=_;return An(l,c,b,p),c.child}function Yg(l,c){var p=c.ref;(l===null&&p!==null||l!==null&&l.ref!==p)&&(c.flags|=512,c.flags|=2097152)}function lh(l,c,p,_,b){var C=Un(p)?Qs:Fn.current;return C=$i(c,C),pl(c,b),p=qc(l,c,p,_,C,b),_=Jc(),l!==null&&!Vn?(c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~b,Cs(l,c,b)):(Bt&&_&&Bc(c),c.flags|=1,An(l,c,p,b),c.child)}function qf(l,c,p,_,b){if(Un(p)){var C=!0;Pc(c)}else C=!1;if(pl(c,b),c.stateNode===null)Aa(l,c),is(c,p,_),Zc(c,p,_,b),_=!0;else if(l===null){var L=c.stateNode,U=c.memoizedProps;L.props=U;var K=L.context,le=p.contextType;typeof le=="object"&&le!==null?le=Cn(le):(le=Un(p)?Qs:Fn.current,le=$i(c,le));var Ce=p.getDerivedStateFromProps,Ie=typeof Ce=="function"||typeof L.getSnapshotBeforeUpdate=="function";Ie||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(U!==_||K!==le)&&rh(c,L,_,le),no=!1;var be=c.memoizedState;L.state=be,wa(c,_,L,b),K=c.memoizedState,U!==_||be!==K||Zn.current||no?(typeof Ce=="function"&&(nh(c,p,Ce,_),K=c.memoizedState),(U=no||vl(c,p,U,_,be,K,le))?(Ie||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(c.flags|=4194308)):(typeof L.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=_,c.memoizedState=K),L.props=_,L.state=K,L.context=le,_=U):(typeof L.componentDidMount=="function"&&(c.flags|=4194308),_=!1)}else{L=c.stateNode,zd(l,c),U=c.memoizedProps,le=c.type===c.elementType?U:pr(c.type,U),L.props=le,Ie=c.pendingProps,be=L.context,K=p.contextType,typeof K=="object"&&K!==null?K=Cn(K):(K=Un(p)?Qs:Fn.current,K=$i(c,K));var Ue=p.getDerivedStateFromProps;(Ce=typeof Ue=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(U!==Ie||be!==K)&&rh(c,L,_,K),no=!1,be=c.memoizedState,L.state=be,wa(c,_,L,b);var We=c.memoizedState;U!==Ie||be!==We||Zn.current||no?(typeof Ue=="function"&&(nh(c,p,Ue,_),We=c.memoizedState),(le=no||vl(c,p,le,_,be,We,K)||!1)?(Ce||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(_,We,K),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(_,We,K)),typeof L.componentDidUpdate=="function"&&(c.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof L.componentDidUpdate!="function"||U===l.memoizedProps&&be===l.memoizedState||(c.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||U===l.memoizedProps&&be===l.memoizedState||(c.flags|=1024),c.memoizedProps=_,c.memoizedState=We),L.props=_,L.state=We,L.context=K,_=le):(typeof L.componentDidUpdate!="function"||U===l.memoizedProps&&be===l.memoizedState||(c.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||U===l.memoizedProps&&be===l.memoizedState||(c.flags|=1024),_=!1)}return tu(l,c,p,_,C,b)}function tu(l,c,p,_,b,C){Yg(l,c);var L=(c.flags&128)!==0;if(!_&&!L)return b&&Ke(c,p,!1),Cs(l,c,C);_=c.stateNode,Xg.current=c;var U=L&&typeof p.getDerivedStateFromError!="function"?null:_.render();return c.flags|=1,l!==null&&L?(c.child=vi(c,l.child,null,C),c.child=vi(c,null,U,C)):An(l,c,U,C),c.memoizedState=_.state,b&&Ke(c,p,!0),c.child}function nu(l){var c=l.stateNode;c.pendingContext?Ef(l,c.pendingContext,c.pendingContext!==c.context):c.context&&Ef(l,c.context,!1),Yd(l,c.containerInfo)}function Jf(l,c,p,_,b){return to(),Hd(b),c.flags|=256,An(l,c,p,_),c.child}var ru={dehydrated:null,treeContext:null,retryLane:0};function ah(l){return{baseLanes:l,cachePool:null,transitions:null}}function qg(l,c,p){var _=c.pendingProps,b=Kt.current,C=!1,L=(c.flags&128)!==0,U;if((U=L)||(U=l!==null&&l.memoizedState===null?!1:(b&2)!==0),U?(C=!0,c.flags&=-129):(l===null||l.memoizedState!==null)&&(b|=1),Pt(Kt,b&1),l===null)return Ud(c),l=c.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?((c.mode&1)===0?c.lanes=1:l.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(L=_.children,l=_.fallback,C?(_=c.mode,C=c.child,L={mode:"hidden",children:L},(_&1)===0&&C!==null?(C.childLanes=0,C.pendingProps=L):C=xs(L,_,0,null),l=Bo(l,_,p,null),C.return=c,l.return=c,C.sibling=l,c.child=C,c.child.memoizedState=ah(p),c.memoizedState=ru,l):ch(c,L));if(b=l.memoizedState,b!==null&&(U=b.dehydrated,U!==null))return No(l,c,L,_,U,b,p);if(C){C=_.fallback,L=c.mode,b=l.child,U=b.sibling;var K={mode:"hidden",children:_.children};return(L&1)===0&&c.child!==b?(_=c.child,_.childLanes=0,_.pendingProps=K,c.deletions=null):(_=Hr(b,K),_.subtreeFlags=b.subtreeFlags&14680064),U!==null?C=Hr(U,C):(C=Bo(C,L,p,null),C.flags|=2),C.return=c,_.return=c,_.sibling=C,c.child=_,_=C,C=c.child,L=l.child.memoizedState,L=L===null?ah(p):{baseLanes:L.baseLanes|p,cachePool:null,transitions:L.transitions},C.memoizedState=L,C.childLanes=l.childLanes&~p,c.memoizedState=ru,_}return C=l.child,l=C.sibling,_=Hr(C,{mode:"visible",children:_.children}),(c.mode&1)===0&&(_.lanes=p),_.return=c,_.sibling=null,l!==null&&(p=c.deletions,p===null?(c.deletions=[l],c.flags|=16):p.push(l)),c.child=_,c.memoizedState=null,_}function ch(l,c){return c=xs({mode:"visible",children:c},l.mode,0,null),c.return=l,l.child=c}function su(l,c,p,_){return _!==null&&Hd(_),vi(c,l.child,null,p),l=ch(c,c.pendingProps.children),l.flags|=2,c.memoizedState=null,l}function No(l,c,p,_,b,C,L){if(p)return c.flags&256?(c.flags&=-257,_=sh(Error(s(422))),su(l,c,L,_)):c.memoizedState!==null?(c.child=l.child,c.flags|=128,null):(C=_.fallback,b=c.mode,_=xs({mode:"visible",children:_.children},b,0,null),C=Bo(C,b,L,null),C.flags|=2,_.return=c,C.return=c,_.sibling=C,c.child=_,(c.mode&1)!==0&&vi(c,l.child,null,L),c.child.memoizedState=ah(L),c.memoizedState=ru,C);if((c.mode&1)===0)return su(l,c,L,null);if(b.data==="$!"){if(_=b.nextSibling&&b.nextSibling.dataset,_)var U=_.dgst;return _=U,C=Error(s(419)),_=sh(C,_,void 0),su(l,c,L,_)}if(U=(L&l.childLanes)!==0,Vn||U){if(_=Ln,_!==null){switch(L&-L){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}b=(b&(_.suspendedLanes|L))!==0?0:b,b!==0&&b!==C.retryLane&&(C.retryLane=b,Ts(l,b),ls(_,l,b,-1))}return Al(),_=sh(Error(s(421))),su(l,c,L,_)}return b.data==="$?"?(c.flags|=128,c.child=l.child,c=t$.bind(null,l),b._reactRetry=c,null):(l=C.treeContext,br=Io(b.nextSibling),dr=c,Bt=!0,rs=null,l!==null&&(cr[ur++]=Zs,cr[ur++]=vs,cr[ur++]=ko,Zs=l.id,vs=l.overflow,ko=c),c=ch(c,_.children),c.flags|=4096,c)}function Qf(l,c,p){l.lanes|=c;var _=l.alternate;_!==null&&(_.lanes|=c),Er(l.return,c,p)}function Ss(l,c,p,_,b){var C=l.memoizedState;C===null?l.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:_,tail:p,tailMode:b}:(C.isBackwards=c,C.rendering=null,C.renderingStartTime=0,C.last=_,C.tail=p,C.tailMode=b)}function Ft(l,c,p){var _=c.pendingProps,b=_.revealOrder,C=_.tail;if(An(l,c,_.children,p),_=Kt.current,(_&2)!==0)_=_&1|2,c.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=c.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Qf(l,p,c);else if(l.tag===19)Qf(l,p,c);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===c)break e;for(;l.sibling===null;){if(l.return===null||l.return===c)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}_&=1}if(Pt(Kt,_),(c.mode&1)===0)c.memoizedState=null;else switch(b){case"forwards":for(p=c.child,b=null;p!==null;)l=p.alternate,l!==null&&Ra(l)===null&&(b=p),p=p.sibling;p=b,p===null?(b=c.child,c.child=null):(b=p.sibling,p.sibling=null),Ss(c,!1,b,p,C);break;case"backwards":for(p=null,b=c.child,c.child=null;b!==null;){if(l=b.alternate,l!==null&&Ra(l)===null){c.child=b;break}l=b.sibling,b.sibling=p,p=b,b=l}Ss(c,!0,p,null,C);break;case"together":Ss(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Aa(l,c){(c.mode&1)===0&&l!==null&&(l.alternate=null,c.alternate=null,c.flags|=2)}function Cs(l,c,p){if(l!==null&&(c.dependencies=l.dependencies),Il|=c.lanes,(p&c.childLanes)===0)return null;if(l!==null&&c.child!==l.child)throw Error(s(153));if(c.child!==null){for(l=c.child,p=Hr(l,l.pendingProps),c.child=p,p.return=c;l.sibling!==null;)l=l.sibling,p=p.sibling=Hr(l,l.pendingProps),p.return=c;p.sibling=null}return c.child}function Zf(l,c,p){switch(c.tag){case 3:nu(c),to();break;case 5:kf(c);break;case 1:Un(c.type)&&Pc(c);break;case 4:Yd(c,c.stateNode.containerInfo);break;case 10:var _=c.type._context,b=c.memoizedProps.value;Pt(Vc,_._currentValue),_._currentValue=b;break;case 13:if(_=c.memoizedState,_!==null)return _.dehydrated!==null?(Pt(Kt,Kt.current&1),c.flags|=128,null):(p&c.child.childLanes)!==0?qg(l,c,p):(Pt(Kt,Kt.current&1),l=Cs(l,c,p),l!==null?l.sibling:null);Pt(Kt,Kt.current&1);break;case 19:if(_=(p&c.childLanes)!==0,(l.flags&128)!==0){if(_)return Ft(l,c,p);c.flags|=128}if(b=c.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),Pt(Kt,Kt.current),_)break;return null;case 22:case 23:return c.lanes=0,Yf(l,c,p)}return Cs(l,c,p)}var ke,Tl,Is,Sr;ke=function(l,c){for(var p=c.child;p!==null;){if(p.tag===5||p.tag===6)l.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===c)break;for(;p.sibling===null;){if(p.return===null||p.return===c)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},Tl=function(){},Is=function(l,c,p,_){var b=l.memoizedProps;if(b!==_){l=c.stateNode,yi(Es.current);var C=null;switch(p){case"input":b=Rt(l,b),_=Rt(l,_),C=[];break;case"select":b=$e({},b,{value:void 0}),_=$e({},_,{value:void 0}),C=[];break;case"textarea":b=ft(l,b),_=ft(l,_),C=[];break;default:typeof b.onClick!="function"&&typeof _.onClick=="function"&&(l.onclick=ma)}xe(p,_);var L;p=null;for(le in b)if(!_.hasOwnProperty(le)&&b.hasOwnProperty(le)&&b[le]!=null)if(le==="style"){var U=b[le];for(L in U)U.hasOwnProperty(L)&&(p||(p={}),p[L]="")}else le!=="dangerouslySetInnerHTML"&&le!=="children"&&le!=="suppressContentEditableWarning"&&le!=="suppressHydrationWarning"&&le!=="autoFocus"&&(a.hasOwnProperty(le)?C||(C=[]):(C=C||[]).push(le,null));for(le in _){var K=_[le];if(U=b?.[le],_.hasOwnProperty(le)&&K!==U&&(K!=null||U!=null))if(le==="style")if(U){for(L in U)!U.hasOwnProperty(L)||K&&K.hasOwnProperty(L)||(p||(p={}),p[L]="");for(L in K)K.hasOwnProperty(L)&&U[L]!==K[L]&&(p||(p={}),p[L]=K[L])}else p||(C||(C=[]),C.push(le,p)),p=K;else le==="dangerouslySetInnerHTML"?(K=K?K.__html:void 0,U=U?U.__html:void 0,K!=null&&U!==K&&(C=C||[]).push(le,K)):le==="children"?typeof K!="string"&&typeof K!="number"||(C=C||[]).push(le,""+K):le!=="suppressContentEditableWarning"&&le!=="suppressHydrationWarning"&&(a.hasOwnProperty(le)?(K!=null&&le==="onScroll"&&Vt("scroll",l),C||U===K||(C=[])):(C=C||[]).push(le,K))}p&&(C=C||[]).push("style",p);var le=C;(c.updateQueue=le)&&(c.flags|=4)}},Sr=function(l,c,p,_){p!==_&&(c.flags|=4)};function Dr(l,c){if(!Bt)switch(l.tailMode){case"hidden":c=l.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var _=null;p!==null;)p.alternate!==null&&(_=p),p=p.sibling;_===null?c||l.tail===null?l.tail=null:l.tail.sibling=null:_.sibling=null}}function Gt(l){var c=l.alternate!==null&&l.alternate.child===l.child,p=0,_=0;if(c)for(var b=l.child;b!==null;)p|=b.lanes|b.childLanes,_|=b.subtreeFlags&14680064,_|=b.flags&14680064,b.return=l,b=b.sibling;else for(b=l.child;b!==null;)p|=b.lanes|b.childLanes,_|=b.subtreeFlags,_|=b.flags,b.return=l,b=b.sibling;return l.subtreeFlags|=_,l.childLanes=p,c}function em(l,c,p){var _=c.pendingProps;switch(Bd(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(c),null;case 1:return Un(c.type)&&Mc(),Gt(c),null;case 3:return _=c.stateNode,Oo(),Nt(Zn),Nt(Fn),zc(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(l===null||l.child===null)&&(Fc(c)?c.flags|=4:l===null||l.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,rs!==null&&(mh(rs),rs=null))),Tl(l,c),Gt(c),null;case 5:qd(c);var b=yi(Ia.current);if(p=c.type,l!==null&&c.stateNode!=null)Is(l,c,p,_,b),l.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!_){if(c.stateNode===null)throw Error(s(166));return Gt(c),null}if(l=yi(Es.current),Fc(c)){_=c.stateNode,p=c.type;var C=c.memoizedProps;switch(_[Nr]=c,_[ul]=C,l=(c.mode&1)!==0,p){case"dialog":Vt("cancel",_),Vt("close",_);break;case"iframe":case"object":case"embed":Vt("load",_);break;case"video":case"audio":for(b=0;b<al.length;b++)Vt(al[b],_);break;case"source":Vt("error",_);break;case"img":case"image":case"link":Vt("error",_),Vt("load",_);break;case"details":Vt("toggle",_);break;case"input":Wt(_,C),Vt("invalid",_);break;case"select":_._wrapperState={wasMultiple:!!C.multiple},Vt("invalid",_);break;case"textarea":kn(_,C),Vt("invalid",_)}xe(p,C),b=null;for(var L in C)if(C.hasOwnProperty(L)){var U=C[L];L==="children"?typeof U=="string"?_.textContent!==U&&(C.suppressHydrationWarning!==!0&&qs(_.textContent,U,l),b=["children",U]):typeof U=="number"&&_.textContent!==""+U&&(C.suppressHydrationWarning!==!0&&qs(_.textContent,U,l),b=["children",""+U]):a.hasOwnProperty(L)&&U!=null&&L==="onScroll"&&Vt("scroll",_)}switch(p){case"input":tt(_),At(_,C,!0);break;case"textarea":tt(_),fs(_);break;case"select":case"option":break;default:typeof C.onClick=="function"&&(_.onclick=ma)}_=b,c.updateQueue=_,_!==null&&(c.flags|=4)}else{L=b.nodeType===9?b:b.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=hn(p)),l==="http://www.w3.org/1999/xhtml"?p==="script"?(l=L.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof _.is=="string"?l=L.createElement(p,{is:_.is}):(l=L.createElement(p),p==="select"&&(L=l,_.multiple?L.multiple=!0:_.size&&(L.size=_.size))):l=L.createElementNS(l,p),l[Nr]=c,l[ul]=_,ke(l,c,!1,!1),c.stateNode=l;e:{switch(L=kt(p,_),p){case"dialog":Vt("cancel",l),Vt("close",l),b=_;break;case"iframe":case"object":case"embed":Vt("load",l),b=_;break;case"video":case"audio":for(b=0;b<al.length;b++)Vt(al[b],l);b=_;break;case"source":Vt("error",l),b=_;break;case"img":case"image":case"link":Vt("error",l),Vt("load",l),b=_;break;case"details":Vt("toggle",l),b=_;break;case"input":Wt(l,_),b=Rt(l,_),Vt("invalid",l);break;case"option":b=_;break;case"select":l._wrapperState={wasMultiple:!!_.multiple},b=$e({},_,{value:void 0}),Vt("invalid",l);break;case"textarea":kn(l,_),b=ft(l,_),Vt("invalid",l);break;default:b=_}xe(p,b),U=b;for(C in U)if(U.hasOwnProperty(C)){var K=U[C];C==="style"?q(l,K):C==="dangerouslySetInnerHTML"?(K=K?K.__html:void 0,K!=null&&ti(l,K)):C==="children"?typeof K=="string"?(p!=="textarea"||K!=="")&&ue(l,K):typeof K=="number"&&ue(l,""+K):C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&C!=="autoFocus"&&(a.hasOwnProperty(C)?K!=null&&C==="onScroll"&&Vt("scroll",l):K!=null&&P(l,C,K,L))}switch(p){case"input":tt(l),At(l,_,!1);break;case"textarea":tt(l),fs(l);break;case"option":_.value!=null&&l.setAttribute("value",""+Se(_.value));break;case"select":l.multiple=!!_.multiple,C=_.value,C!=null?at(l,!!_.multiple,C,!1):_.defaultValue!=null&&at(l,!!_.multiple,_.defaultValue,!0);break;default:typeof b.onClick=="function"&&(l.onclick=ma)}switch(p){case"button":case"input":case"select":case"textarea":_=!!_.autoFocus;break e;case"img":_=!0;break e;default:_=!1}}_&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Gt(c),null;case 6:if(l&&c.stateNode!=null)Sr(l,c,l.memoizedProps,_);else{if(typeof _!="string"&&c.stateNode===null)throw Error(s(166));if(p=yi(Ia.current),yi(Es.current),Fc(c)){if(_=c.stateNode,p=c.memoizedProps,_[Nr]=c,(C=_.nodeValue!==p)&&(l=dr,l!==null))switch(l.tag){case 3:qs(_.nodeValue,p,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&qs(_.nodeValue,p,(l.mode&1)!==0)}C&&(c.flags|=4)}else _=(p.nodeType===9?p:p.ownerDocument).createTextNode(_),_[Nr]=c,c.stateNode=_}return Gt(c),null;case 13:if(Nt(Kt),_=c.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(Bt&&br!==null&&(c.mode&1)!==0&&(c.flags&128)===0)va(),to(),c.flags|=98560,C=!1;else if(C=Fc(c),_!==null&&_.dehydrated!==null){if(l===null){if(!C)throw Error(s(318));if(C=c.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(s(317));C[Nr]=c}else to(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Gt(c),C=!1}else rs!==null&&(mh(rs),rs=null),C=!0;if(!C)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=p,c):(_=_!==null,_!==(l!==null&&l.memoizedState!==null)&&_&&(c.child.flags|=8192,(c.mode&1)!==0&&(l===null||(Kt.current&1)!==0?un===0&&(un=3):Al())),c.updateQueue!==null&&(c.flags|=4),Gt(c),null);case 4:return Oo(),Tl(l,c),l===null&&Co(c.stateNode.containerInfo),Gt(c),null;case 10:return Ta(c.type._context),Gt(c),null;case 17:return Un(c.type)&&Mc(),Gt(c),null;case 19:if(Nt(Kt),C=c.memoizedState,C===null)return Gt(c),null;if(_=(c.flags&128)!==0,L=C.rendering,L===null)if(_)Dr(C,!1);else{if(un!==0||l!==null&&(l.flags&128)!==0)for(l=c.child;l!==null;){if(L=Ra(l),L!==null){for(c.flags|=128,Dr(C,!1),_=L.updateQueue,_!==null&&(c.updateQueue=_,c.flags|=4),c.subtreeFlags=0,_=p,p=c.child;p!==null;)C=p,l=_,C.flags&=14680066,L=C.alternate,L===null?(C.childLanes=0,C.lanes=l,C.child=null,C.subtreeFlags=0,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=L.childLanes,C.lanes=L.lanes,C.child=L.child,C.subtreeFlags=0,C.deletions=null,C.memoizedProps=L.memoizedProps,C.memoizedState=L.memoizedState,C.updateQueue=L.updateQueue,C.type=L.type,l=L.dependencies,C.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),p=p.sibling;return Pt(Kt,Kt.current&1|2),c.child}l=l.sibling}C.tail!==null&&Qt()>Si&&(c.flags|=128,_=!0,Dr(C,!1),c.lanes=4194304)}else{if(!_)if(l=Ra(L),l!==null){if(c.flags|=128,_=!0,p=l.updateQueue,p!==null&&(c.updateQueue=p,c.flags|=4),Dr(C,!0),C.tail===null&&C.tailMode==="hidden"&&!L.alternate&&!Bt)return Gt(c),null}else 2*Qt()-C.renderingStartTime>Si&&p!==1073741824&&(c.flags|=128,_=!0,Dr(C,!1),c.lanes=4194304);C.isBackwards?(L.sibling=c.child,c.child=L):(p=C.last,p!==null?p.sibling=L:c.child=L,C.last=L)}return C.tail!==null?(c=C.tail,C.rendering=c,C.tail=c.sibling,C.renderingStartTime=Qt(),c.sibling=null,p=Kt.current,Pt(Kt,_?p&1|2:p&1),c):(Gt(c),null);case 22:case 23:return gh(),_=c.memoizedState!==null,l!==null&&l.memoizedState!==null!==_&&(c.flags|=8192),_&&(c.mode&1)!==0?(tr&1073741824)!==0&&(Gt(c),c.subtreeFlags&6&&(c.flags|=8192)):Gt(c),null;case 24:return null;case 25:return null}throw Error(s(156,c.tag))}function uh(l,c){switch(Bd(c),c.tag){case 1:return Un(c.type)&&Mc(),l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 3:return Oo(),Nt(Zn),Nt(Fn),zc(),l=c.flags,(l&65536)!==0&&(l&128)===0?(c.flags=l&-65537|128,c):null;case 5:return qd(c),null;case 13:if(Nt(Kt),l=c.memoizedState,l!==null&&l.dehydrated!==null){if(c.alternate===null)throw Error(s(340));to()}return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 19:return Nt(Kt),null;case 4:return Oo(),null;case 10:return Ta(c.type._context),null;case 22:case 23:return gh(),null;case 24:return null;default:return null}}var pn=!1,Z=!1,St=typeof WeakSet=="function"?WeakSet:Set,Re=null;function bl(l,c){var p=l.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(_){Xt(l,c,_)}else p.current=null}function oo(l,c,p){try{p()}catch(_){Xt(l,c,_)}}var tm=!1;function Jg(l,c){if(Od=fc,l=Zt(),Ed(l)){if("selectionStart"in l)var p={start:l.selectionStart,end:l.selectionEnd};else e:{p=(p=l.ownerDocument)&&p.defaultView||window;var _=p.getSelection&&p.getSelection();if(_&&_.rangeCount!==0){p=_.anchorNode;var b=_.anchorOffset,C=_.focusNode;_=_.focusOffset;try{p.nodeType,C.nodeType}catch{p=null;break e}var L=0,U=-1,K=-1,le=0,Ce=0,Ie=l,be=null;t:for(;;){for(var Ue;Ie!==p||b!==0&&Ie.nodeType!==3||(U=L+b),Ie!==C||_!==0&&Ie.nodeType!==3||(K=L+_),Ie.nodeType===3&&(L+=Ie.nodeValue.length),(Ue=Ie.firstChild)!==null;)be=Ie,Ie=Ue;for(;;){if(Ie===l)break t;if(be===p&&++le===b&&(U=L),be===C&&++Ce===_&&(K=L),(Ue=Ie.nextSibling)!==null)break;Ie=be,be=Ie.parentNode}Ie=Ue}p=U===-1||K===-1?null:{start:U,end:K}}else p=null}p=p||{start:0,end:0}}else p=null;for(Ad={focusedElem:l,selectionRange:p},fc=!1,Re=c;Re!==null;)if(c=Re,l=c.child,(c.subtreeFlags&1028)!==0&&l!==null)l.return=c,Re=l;else for(;Re!==null;){c=Re;try{var We=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(We!==null){var ze=We.memoizedProps,Ut=We.memoizedState,X=c.stateNode,J=X.getSnapshotBeforeUpdate(c.elementType===c.type?ze:pr(c.type,ze),Ut);X.__reactInternalSnapshotBeforeUpdate=J}break;case 3:var re=c.stateNode.containerInfo;re.nodeType===1?re.textContent="":re.nodeType===9&&re.documentElement&&re.removeChild(re.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(Ae){Xt(c,c.return,Ae)}if(l=c.sibling,l!==null){l.return=c.return,Re=l;break}Re=c.return}return We=tm,tm=!1,We}function ou(l,c,p){var _=c.updateQueue;if(_=_!==null?_.lastEffect:null,_!==null){var b=_=_.next;do{if((b.tag&l)===l){var C=b.destroy;b.destroy=void 0,C!==void 0&&oo(c,p,C)}b=b.next}while(b!==_)}}function io(l,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var p=c=c.next;do{if((p.tag&l)===l){var _=p.create;p.destroy=_()}p=p.next}while(p!==c)}}function qt(l){var c=l.ref;if(c!==null){var p=l.stateNode;l.tag,l=p,typeof c=="function"?c(l):c.current=l}}function iu(l){var c=l.alternate;c!==null&&(l.alternate=null,iu(c)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(c=l.stateNode,c!==null&&(delete c[Nr],delete c[ul],delete c[Nc],delete c[bf],delete c[$a])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function dh(l){return l.tag===5||l.tag===3||l.tag===4}function lu(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||dh(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function El(l,c,p){var _=l.tag;if(_===5||_===6)l=l.stateNode,c?p.nodeType===8?p.parentNode.insertBefore(l,c):p.insertBefore(l,c):(p.nodeType===8?(c=p.parentNode,c.insertBefore(l,p)):(c=p,c.appendChild(l)),p=p._reactRootContainer,p!=null||c.onclick!==null||(c.onclick=ma));else if(_!==4&&(l=l.child,l!==null))for(El(l,c,p),l=l.sibling;l!==null;)El(l,c,p),l=l.sibling}function wl(l,c,p){var _=l.tag;if(_===5||_===6)l=l.stateNode,c?p.insertBefore(l,c):p.appendChild(l);else if(_!==4&&(l=l.child,l!==null))for(wl(l,c,p),l=l.sibling;l!==null;)wl(l,c,p),l=l.sibling}var Nn=null,Rs=!1;function Br(l,c,p){for(p=p.child;p!==null;)hh(l,c,p),p=p.sibling}function hh(l,c,p){if(Or&&typeof Or.onCommitFiberUnmount=="function")try{Or.onCommitFiberUnmount(li,p)}catch{}switch(p.tag){case 5:Z||bl(p,c);case 6:var _=Nn,b=Rs;Nn=null,Br(l,c,p),Nn=_,Rs=b,Nn!==null&&(Rs?(l=Nn,p=p.stateNode,l.nodeType===8?l.parentNode.removeChild(p):l.removeChild(p)):Nn.removeChild(p.stateNode));break;case 18:Nn!==null&&(Rs?(l=Nn,p=p.stateNode,l.nodeType===8?ga(l.parentNode,p):l.nodeType===1&&ga(l,p),oa(l)):ga(Nn,p.stateNode));break;case 4:_=Nn,b=Rs,Nn=p.stateNode.containerInfo,Rs=!0,Br(l,c,p),Nn=_,Rs=b;break;case 0:case 11:case 14:case 15:if(!Z&&(_=p.updateQueue,_!==null&&(_=_.lastEffect,_!==null))){b=_=_.next;do{var C=b,L=C.destroy;C=C.tag,L!==void 0&&((C&2)!==0||(C&4)!==0)&&oo(p,c,L),b=b.next}while(b!==_)}Br(l,c,p);break;case 1:if(!Z&&(bl(p,c),_=p.stateNode,typeof _.componentWillUnmount=="function"))try{_.props=p.memoizedProps,_.state=p.memoizedState,_.componentWillUnmount()}catch(U){Xt(p,c,U)}Br(l,c,p);break;case 21:Br(l,c,p);break;case 22:p.mode&1?(Z=(_=Z)||p.memoizedState!==null,Br(l,c,p),Z=_):Br(l,c,p);break;default:Br(l,c,p)}}function nm(l){var c=l.updateQueue;if(c!==null){l.updateQueue=null;var p=l.stateNode;p===null&&(p=l.stateNode=new St),c.forEach(function(_){var b=lm.bind(null,l,_);p.has(_)||(p.add(_),_.then(b,b))})}}function qe(l,c){var p=c.deletions;if(p!==null)for(var _=0;_<p.length;_++){var b=p[_];try{var C=l,L=c,U=L;e:for(;U!==null;){switch(U.tag){case 5:Nn=U.stateNode,Rs=!1;break e;case 3:Nn=U.stateNode.containerInfo,Rs=!0;break e;case 4:Nn=U.stateNode.containerInfo,Rs=!0;break e}U=U.return}if(Nn===null)throw Error(s(160));hh(C,L,b),Nn=null,Rs=!1;var K=b.alternate;K!==null&&(K.return=null),b.return=null}catch(le){Xt(b,c,le)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)rm(c,l),c=c.sibling}function rm(l,c){var p=l.alternate,_=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(qe(c,l),Hn(l),_&4){try{ou(3,l,l.return),io(3,l)}catch(ze){Xt(l,l.return,ze)}try{ou(5,l,l.return)}catch(ze){Xt(l,l.return,ze)}}break;case 1:qe(c,l),Hn(l),_&512&&p!==null&&bl(p,p.return);break;case 5:if(qe(c,l),Hn(l),_&512&&p!==null&&bl(p,p.return),l.flags&32){var b=l.stateNode;try{ue(b,"")}catch(ze){Xt(l,l.return,ze)}}if(_&4&&(b=l.stateNode,b!=null)){var C=l.memoizedProps,L=p!==null?p.memoizedProps:C,U=l.type,K=l.updateQueue;if(l.updateQueue=null,K!==null)try{U==="input"&&C.type==="radio"&&C.name!=null&&Mt(b,C),kt(U,L);var le=kt(U,C);for(L=0;L<K.length;L+=2){var Ce=K[L],Ie=K[L+1];Ce==="style"?q(b,Ie):Ce==="dangerouslySetInnerHTML"?ti(b,Ie):Ce==="children"?ue(b,Ie):P(b,Ce,Ie,le)}switch(U){case"input":wn(b,C);break;case"textarea":or(b,C);break;case"select":var be=b._wrapperState.wasMultiple;b._wrapperState.wasMultiple=!!C.multiple;var Ue=C.value;Ue!=null?at(b,!!C.multiple,Ue,!1):be!==!!C.multiple&&(C.defaultValue!=null?at(b,!!C.multiple,C.defaultValue,!0):at(b,!!C.multiple,C.multiple?[]:"",!1))}b[ul]=C}catch(ze){Xt(l,l.return,ze)}}break;case 6:if(qe(c,l),Hn(l),_&4){if(l.stateNode===null)throw Error(s(162));b=l.stateNode,C=l.memoizedProps;try{b.nodeValue=C}catch(ze){Xt(l,l.return,ze)}}break;case 3:if(qe(c,l),Hn(l),_&4&&p!==null&&p.memoizedState.isDehydrated)try{oa(c.containerInfo)}catch(ze){Xt(l,l.return,ze)}break;case 4:qe(c,l),Hn(l);break;case 13:qe(c,l),Hn(l),b=l.child,b.flags&8192&&(C=b.memoizedState!==null,b.stateNode.isHidden=C,!C||b.alternate!==null&&b.alternate.memoizedState!==null||(cu=Qt())),_&4&&nm(l);break;case 22:if(Ce=p!==null&&p.memoizedState!==null,l.mode&1?(Z=(le=Z)||Ce,qe(c,l),Z=le):qe(c,l),Hn(l),_&8192){if(le=l.memoizedState!==null,(l.stateNode.isHidden=le)&&!Ce&&(l.mode&1)!==0)for(Re=l,Ce=l.child;Ce!==null;){for(Ie=Re=Ce;Re!==null;){switch(be=Re,Ue=be.child,be.tag){case 0:case 11:case 14:case 15:ou(4,be,be.return);break;case 1:bl(be,be.return);var We=be.stateNode;if(typeof We.componentWillUnmount=="function"){_=be,p=be.return;try{c=_,We.props=c.memoizedProps,We.state=c.memoizedState,We.componentWillUnmount()}catch(ze){Xt(_,p,ze)}}break;case 5:bl(be,be.return);break;case 22:if(be.memoizedState!==null){Ei(Ie);continue}}Ue!==null?(Ue.return=be,Re=Ue):Ei(Ie)}Ce=Ce.sibling}e:for(Ce=null,Ie=l;;){if(Ie.tag===5){if(Ce===null){Ce=Ie;try{b=Ie.stateNode,le?(C=b.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none"):(U=Ie.stateNode,K=Ie.memoizedProps.style,L=K!=null&&K.hasOwnProperty("display")?K.display:null,U.style.display=D("display",L))}catch(ze){Xt(l,l.return,ze)}}}else if(Ie.tag===6){if(Ce===null)try{Ie.stateNode.nodeValue=le?"":Ie.memoizedProps}catch(ze){Xt(l,l.return,ze)}}else if((Ie.tag!==22&&Ie.tag!==23||Ie.memoizedState===null||Ie===l)&&Ie.child!==null){Ie.child.return=Ie,Ie=Ie.child;continue}if(Ie===l)break e;for(;Ie.sibling===null;){if(Ie.return===null||Ie.return===l)break e;Ce===Ie&&(Ce=null),Ie=Ie.return}Ce===Ie&&(Ce=null),Ie.sibling.return=Ie.return,Ie=Ie.sibling}}break;case 19:qe(c,l),Hn(l),_&4&&nm(l);break;case 21:break;default:qe(c,l),Hn(l)}}function Hn(l){var c=l.flags;if(c&2){try{e:{for(var p=l.return;p!==null;){if(dh(p)){var _=p;break e}p=p.return}throw Error(s(160))}switch(_.tag){case 5:var b=_.stateNode;_.flags&32&&(ue(b,""),_.flags&=-33);var C=lu(l);wl(l,C,b);break;case 3:case 4:var L=_.stateNode.containerInfo,U=lu(l);El(l,U,L);break;default:throw Error(s(161))}}catch(K){Xt(l,l.return,K)}l.flags&=-3}c&4096&&(l.flags&=-4097)}function Lo(l,c,p){Re=l,Sl(l)}function Sl(l,c,p){for(var _=(l.mode&1)!==0;Re!==null;){var b=Re,C=b.child;if(b.tag===22&&_){var L=b.memoizedState!==null||pn;if(!L){var U=b.alternate,K=U!==null&&U.memoizedState!==null||Z;U=pn;var le=Z;if(pn=L,(Z=K)&&!le)for(Re=b;Re!==null;)L=Re,K=L.child,L.tag===22&&L.memoizedState!==null?er(b):K!==null?(K.return=L,Re=K):er(b);for(;C!==null;)Re=C,Sl(C),C=C.sibling;Re=b,pn=U,Z=le}Mo(l)}else(b.subtreeFlags&8772)!==0&&C!==null?(C.return=b,Re=C):Mo(l)}}function Mo(l){for(;Re!==null;){var c=Re;if((c.flags&8772)!==0){var p=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:Z||io(5,c);break;case 1:var _=c.stateNode;if(c.flags&4&&!Z)if(p===null)_.componentDidMount();else{var b=c.elementType===c.type?p.memoizedProps:pr(c.type,p.memoizedProps);_.componentDidUpdate(b,p.memoizedState,_.__reactInternalSnapshotBeforeUpdate)}var C=c.updateQueue;C!==null&&Xd(c,C,_);break;case 3:var L=c.updateQueue;if(L!==null){if(p=null,c.child!==null)switch(c.child.tag){case 5:p=c.child.stateNode;break;case 1:p=c.child.stateNode}Xd(c,L,p)}break;case 5:var U=c.stateNode;if(p===null&&c.flags&4){p=U;var K=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":K.autoFocus&&p.focus();break;case"img":K.src&&(p.src=K.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var le=c.alternate;if(le!==null){var Ce=le.memoizedState;if(Ce!==null){var Ie=Ce.dehydrated;Ie!==null&&oa(Ie)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}Z||c.flags&512&&qt(c)}catch(be){Xt(c,c.return,be)}}if(c===l){Re=null;break}if(p=c.sibling,p!==null){p.return=c.return,Re=p;break}Re=c.return}}function Ei(l){for(;Re!==null;){var c=Re;if(c===l){Re=null;break}var p=c.sibling;if(p!==null){p.return=c.return,Re=p;break}Re=c.return}}function er(l){for(;Re!==null;){var c=Re;try{switch(c.tag){case 0:case 11:case 15:var p=c.return;try{io(4,c)}catch(K){Xt(c,p,K)}break;case 1:var _=c.stateNode;if(typeof _.componentDidMount=="function"){var b=c.return;try{_.componentDidMount()}catch(K){Xt(c,b,K)}}var C=c.return;try{qt(c)}catch(K){Xt(c,C,K)}break;case 5:var L=c.return;try{qt(c)}catch(K){Xt(c,L,K)}}}catch(K){Xt(c,c.return,K)}if(c===l){Re=null;break}var U=c.sibling;if(U!==null){U.return=c.return,Re=U;break}Re=c.return}}var Qg=Math.ceil,au=F.ReactCurrentDispatcher,ph=F.ReactCurrentOwner,Fr=F.ReactCurrentBatchConfig,vt=0,Ln=null,cn=null,Mn=0,tr=0,wi=Js(0),un=0,Cl=null,Il=0,fh=0,Ur=0,tn=null,Pn=null,cu=0,Si=1/0,Vr=null,Rl=!1,Gn=null,Ci=null,kl=!1,lo=null,Na=0,ao=0,uu=null,du=-1,xl=0;function nr(){return(vt&6)!==0?Qt():du!==-1?du:du=Qt()}function Po(l){return(l.mode&1)===0?1:(vt&2)!==0&&Mn!==0?Mn&-Mn:If.transition!==null?(xl===0&&(xl=od()),xl):(l=Et,l!==0||(l=window.event,l=l===void 0?16:zs(l.type)),l)}function ls(l,c,p,_){if(50<ao)throw ao=0,uu=null,Error(s(185));Xi(l,p,_),((vt&2)===0||l!==Ln)&&(l===Ln&&((vt&2)===0&&(fh|=p),un===4&&co(l,Mn)),fr(l,_),p===1&&vt===0&&(c.mode&1)===0&&(Si=Qt()+500,an&&Me()))}function fr(l,c){var p=l.callbackNode;kp(l,c);var _=es(l,l===Ln?Mn:0);if(_===0)p!==null&&Ip(p),l.callbackNode=null,l.callbackPriority=0;else if(c=_&-_,l.callbackPriority!==c){if(p!=null&&Ip(p),c===1)l.tag===0?_a(La.bind(null,l)):$s(La.bind(null,l)),Hg(function(){(vt&6)===0&&Me()}),p=null;else{switch(xp(_)){case 1:p=ta;break;case 4:p=uc;break;case 16:p=ii;break;case 536870912:p=Ki;break;default:p=ii}p=_h(p,Ii.bind(null,l))}l.callbackPriority=c,l.callbackNode=p}}function Ii(l,c){if(du=-1,xl=0,(vt&6)!==0)throw Error(s(327));var p=l.callbackNode;if(as()&&l.callbackNode!==p)return null;var _=es(l,l===Ln?Mn:0);if(_===0)return null;if((_&30)!==0||(_&l.expiredLanes)!==0||c)c=mu(l,_);else{c=_;var b=vt;vt|=2;var C=sm();(Ln!==l||Mn!==c)&&(Vr=null,Si=Qt()+500,nn(l,c));do try{e$();break}catch(U){Ol(l,U)}while(!0);jd(),au.current=C,vt=b,cn!==null?c=0:(Ln=null,Mn=0,c=un)}if(c!==0){if(c===2&&(b=ra(l),b!==0&&(_=b,c=hu(l,b))),c===1)throw p=Cl,nn(l,0),co(l,_),fr(l,Qt()),p;if(c===6)co(l,_);else{if(b=l.current.alternate,(_&30)===0&&!pu(b)&&(c=mu(l,_),c===2&&(C=ra(l),C!==0&&(_=C,c=hu(l,C))),c===1))throw p=Cl,nn(l,0),co(l,_),fr(l,Qt()),p;switch(l.finishedWork=b,l.finishedLanes=_,c){case 0:case 1:throw Error(s(345));case 2:ks(l,Pn,Vr);break;case 3:if(co(l,_),(_&130023424)===_&&(c=cu+500-Qt(),10<c)){if(es(l,0)!==0)break;if(b=l.suspendedLanes,(b&_)!==_){nr(),l.pingedLanes|=l.suspendedLanes&b;break}l.timeoutHandle=Ld(ks.bind(null,l,Pn,Vr),c);break}ks(l,Pn,Vr);break;case 4:if(co(l,_),(_&4194240)===_)break;for(c=l.eventTimes,b=-1;0<_;){var L=31-Zr(_);C=1<<L,L=c[L],L>b&&(b=L),_&=~C}if(_=b,_=Qt()-_,_=(120>_?120:480>_?480:1080>_?1080:1920>_?1920:3e3>_?3e3:4320>_?4320:1960*Qg(_/1960))-_,10<_){l.timeoutHandle=Ld(ks.bind(null,l,Pn,Vr),_);break}ks(l,Pn,Vr);break;case 5:ks(l,Pn,Vr);break;default:throw Error(s(329))}}}return fr(l,Qt()),l.callbackNode===p?Ii.bind(null,l):null}function hu(l,c){var p=tn;return l.current.memoizedState.isDehydrated&&(nn(l,c).flags|=256),l=mu(l,c),l!==2&&(c=Pn,Pn=p,c!==null&&mh(c)),l}function mh(l){Pn===null?Pn=l:Pn.push.apply(Pn,l)}function pu(l){for(var c=l;;){if(c.flags&16384){var p=c.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var _=0;_<p.length;_++){var b=p[_],C=b.getSnapshot;b=b.value;try{if(!Tr(C(),b))return!1}catch{return!1}}}if(p=c.child,c.subtreeFlags&16384&&p!==null)p.return=c,c=p;else{if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function co(l,c){for(c&=~Ur,c&=~fh,l.suspendedLanes|=c,l.pingedLanes&=~c,l=l.expirationTimes;0<c;){var p=31-Zr(c),_=1<<p;l[p]=-1,c&=~_}}function La(l){if((vt&6)!==0)throw Error(s(327));as();var c=es(l,0);if((c&1)===0)return fr(l,Qt()),null;var p=mu(l,c);if(l.tag!==0&&p===2){var _=ra(l);_!==0&&(c=_,p=hu(l,_))}if(p===1)throw p=Cl,nn(l,0),co(l,c),fr(l,Qt()),p;if(p===6)throw Error(s(345));return l.finishedWork=l.current.alternate,l.finishedLanes=c,ks(l,Pn,Vr),fr(l,Qt()),null}function fu(l,c){var p=vt;vt|=1;try{return l(c)}finally{vt=p,vt===0&&(Si=Qt()+500,an&&Me())}}function Do(l){lo!==null&&lo.tag===0&&(vt&6)===0&&as();var c=vt;vt|=1;var p=Fr.transition,_=Et;try{if(Fr.transition=null,Et=1,l)return l()}finally{Et=_,Fr.transition=p,vt=c,(vt&6)===0&&Me()}}function gh(){tr=wi.current,Nt(wi)}function nn(l,c){l.finishedWork=null,l.finishedLanes=0;var p=l.timeoutHandle;if(p!==-1&&(l.timeoutHandle=-1,Vg(p)),cn!==null)for(p=cn.return;p!==null;){var _=p;switch(Bd(_),_.tag){case 1:_=_.type.childContextTypes,_!=null&&Mc();break;case 3:Oo(),Nt(Zn),Nt(Fn),zc();break;case 5:qd(_);break;case 4:Oo();break;case 13:Nt(Kt);break;case 19:Nt(Kt);break;case 10:Ta(_.type._context);break;case 22:case 23:gh()}p=p.return}if(Ln=l,cn=l=Hr(l.current,null),Mn=tr=c,un=0,Cl=null,Ur=fh=Il=0,Pn=tn=null,xo!==null){for(c=0;c<xo.length;c++)if(p=xo[c],_=p.interleaved,_!==null){p.interleaved=null;var b=_.next,C=p.pending;if(C!==null){var L=C.next;C.next=b,_.next=L}p.pending=_}xo=null}return l}function Ol(l,c){do{var p=cn;try{if(jd(),ka.current=Ti,Xc){for(var _=Ht.memoizedState;_!==null;){var b=_.queue;b!==null&&(b.pending=null),_=_.next}Xc=!1}if(Ao=0,$n=en=Ht=null,fl=!1,ml=0,ph.current=null,p===null||p.return===null){un=1,Cl=c,cn=null;break}e:{var C=l,L=p.return,U=p,K=c;if(c=Mn,U.flags|=32768,K!==null&&typeof K=="object"&&typeof K.then=="function"){var le=K,Ce=U,Ie=Ce.tag;if((Ce.mode&1)===0&&(Ie===0||Ie===11||Ie===15)){var be=Ce.alternate;be?(Ce.updateQueue=be.updateQueue,Ce.memoizedState=be.memoizedState,Ce.lanes=be.lanes):(Ce.updateQueue=null,Ce.memoizedState=null)}var Ue=Wf(L);if(Ue!==null){Ue.flags&=-257,zf(Ue,L,U,C,c),Ue.mode&1&&oh(C,le,c),c=Ue,K=le;var We=c.updateQueue;if(We===null){var ze=new Set;ze.add(K),c.updateQueue=ze}else We.add(K);break e}else{if((c&1)===0){oh(C,le,c),Al();break e}K=Error(s(426))}}else if(Bt&&U.mode&1){var Ut=Wf(L);if(Ut!==null){(Ut.flags&65536)===0&&(Ut.flags|=256),zf(Ut,L,U,C,c),Hd(xa(K,U));break e}}C=K=xa(K,U),un!==4&&(un=2),tn===null?tn=[C]:tn.push(C),C=L;do{switch(C.tag){case 3:C.flags|=65536,c&=-c,C.lanes|=c;var X=eu(C,K,c);Kd(C,X);break e;case 1:U=K;var J=C.type,re=C.stateNode;if((C.flags&128)===0&&(typeof J.getDerivedStateFromError=="function"||re!==null&&typeof re.componentDidCatch=="function"&&(Ci===null||!Ci.has(re)))){C.flags|=65536,c&=-c,C.lanes|=c;var Ae=bi(C,U,c);Kd(C,Ae);break e}}C=C.return}while(C!==null)}om(p)}catch(Xe){c=Xe,cn===p&&p!==null&&(cn=p=p.return);continue}break}while(!0)}function sm(){var l=au.current;return au.current=Ti,l===null?Ti:l}function Al(){(un===0||un===3||un===2)&&(un=4),Ln===null||(Il&268435455)===0&&(fh&268435455)===0||co(Ln,Mn)}function mu(l,c){var p=vt;vt|=2;var _=sm();(Ln!==l||Mn!==c)&&(Vr=null,nn(l,c));do try{Zg();break}catch(b){Ol(l,b)}while(!0);if(jd(),vt=p,au.current=_,cn!==null)throw Error(s(261));return Ln=null,Mn=0,un}function Zg(){for(;cn!==null;)Ri(cn)}function e$(){for(;cn!==null&&!rd();)Ri(cn)}function Ri(l){var c=gu(l.alternate,l,tr);l.memoizedProps=l.pendingProps,c===null?om(l):cn=c,ph.current=null}function om(l){var c=l;do{var p=c.alternate;if(l=c.return,(c.flags&32768)===0){if(p=em(p,c,tr),p!==null){cn=p;return}}else{if(p=uh(p,c),p!==null){p.flags&=32767,cn=p;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{un=6,cn=null;return}}if(c=c.sibling,c!==null){cn=c;return}cn=c=l}while(c!==null);un===0&&(un=5)}function ks(l,c,p){var _=Et,b=Fr.transition;try{Fr.transition=null,Et=1,vn(l,c,p,_)}finally{Fr.transition=b,Et=_}return null}function vn(l,c,p,_){do as();while(lo!==null);if((vt&6)!==0)throw Error(s(327));p=l.finishedWork;var b=l.finishedLanes;if(p===null)return null;if(l.finishedWork=null,l.finishedLanes=0,p===l.current)throw Error(s(177));l.callbackNode=null,l.callbackPriority=0;var C=p.lanes|p.childLanes;if(dc(l,C),l===Ln&&(cn=Ln=null,Mn=0),(p.subtreeFlags&2064)===0&&(p.flags&2064)===0||kl||(kl=!0,_h(ii,function(){return as(),null})),C=(p.flags&15990)!==0,(p.subtreeFlags&15990)!==0||C){C=Fr.transition,Fr.transition=null;var L=Et;Et=1;var U=vt;vt|=4,ph.current=null,Jg(l,p),rm(p,l),da(Ad),fc=!!Od,Ad=Od=null,l.current=p,Lo(p),Rp(),vt=U,Et=L,Fr.transition=C}else l.current=p;if(kl&&(kl=!1,lo=l,Na=b),C=l.pendingLanes,C===0&&(Ci=null),Rg(p.stateNode),fr(l,Qt()),c!==null)for(_=l.onRecoverableError,p=0;p<c.length;p++)b=c[p],_(b.value,{componentStack:b.stack,digest:b.digest});if(Rl)throw Rl=!1,l=Gn,Gn=null,l;return(Na&1)!==0&&l.tag!==0&&as(),C=l.pendingLanes,(C&1)!==0?l===uu?ao++:(ao=0,uu=l):ao=0,Me(),null}function as(){if(lo!==null){var l=xp(Na),c=Fr.transition,p=Et;try{if(Fr.transition=null,Et=16>l?16:l,lo===null)var _=!1;else{if(l=lo,lo=null,Na=0,(vt&6)!==0)throw Error(s(331));var b=vt;for(vt|=4,Re=l.current;Re!==null;){var C=Re,L=C.child;if((Re.flags&16)!==0){var U=C.deletions;if(U!==null){for(var K=0;K<U.length;K++){var le=U[K];for(Re=le;Re!==null;){var Ce=Re;switch(Ce.tag){case 0:case 11:case 15:ou(8,Ce,C)}var Ie=Ce.child;if(Ie!==null)Ie.return=Ce,Re=Ie;else for(;Re!==null;){Ce=Re;var be=Ce.sibling,Ue=Ce.return;if(iu(Ce),Ce===le){Re=null;break}if(be!==null){be.return=Ue,Re=be;break}Re=Ue}}}var We=C.alternate;if(We!==null){var ze=We.child;if(ze!==null){We.child=null;do{var Ut=ze.sibling;ze.sibling=null,ze=Ut}while(ze!==null)}}Re=C}}if((C.subtreeFlags&2064)!==0&&L!==null)L.return=C,Re=L;else e:for(;Re!==null;){if(C=Re,(C.flags&2048)!==0)switch(C.tag){case 0:case 11:case 15:ou(9,C,C.return)}var X=C.sibling;if(X!==null){X.return=C.return,Re=X;break e}Re=C.return}}var J=l.current;for(Re=J;Re!==null;){L=Re;var re=L.child;if((L.subtreeFlags&2064)!==0&&re!==null)re.return=L,Re=re;else e:for(L=J;Re!==null;){if(U=Re,(U.flags&2048)!==0)try{switch(U.tag){case 0:case 11:case 15:io(9,U)}}catch(Xe){Xt(U,U.return,Xe)}if(U===L){Re=null;break e}var Ae=U.sibling;if(Ae!==null){Ae.return=U.return,Re=Ae;break e}Re=U.return}}if(vt=b,Me(),Or&&typeof Or.onPostCommitFiberRoot=="function")try{Or.onPostCommitFiberRoot(li,l)}catch{}_=!0}return _}finally{Et=p,Fr.transition=c}}return!1}function ki(l,c,p){c=xa(p,c),c=eu(l,c,1),l=ro(l,c,1),c=nr(),l!==null&&(Xi(l,1,c),fr(l,c))}function Xt(l,c,p){if(l.tag===3)ki(l,l,p);else for(;c!==null;){if(c.tag===3){ki(c,l,p);break}else if(c.tag===1){var _=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(Ci===null||!Ci.has(_))){l=xa(p,l),l=bi(c,l,1),c=ro(c,l,1),l=nr(),c!==null&&(Xi(c,1,l),fr(c,l));break}}c=c.return}}function $h(l,c,p){var _=l.pingCache;_!==null&&_.delete(c),c=nr(),l.pingedLanes|=l.suspendedLanes&p,Ln===l&&(Mn&p)===p&&(un===4||un===3&&(Mn&130023424)===Mn&&500>Qt()-cu?nn(l,0):Ur|=p),fr(l,c)}function im(l,c){c===0&&((l.mode&1)===0?c=1:(c=na,na<<=1,(na&130023424)===0&&(na=4194304)));var p=nr();l=Ts(l,c),l!==null&&(Xi(l,c,p),fr(l,p))}function t$(l){var c=l.memoizedState,p=0;c!==null&&(p=c.retryLane),im(l,p)}function lm(l,c){var p=0;switch(l.tag){case 13:var _=l.stateNode,b=l.memoizedState;b!==null&&(p=b.retryLane);break;case 19:_=l.stateNode;break;default:throw Error(s(314))}_!==null&&_.delete(c),im(l,p)}var gu;gu=function(l,c,p){if(l!==null)if(l.memoizedProps!==c.pendingProps||Zn.current)Vn=!0;else{if((l.lanes&p)===0&&(c.flags&128)===0)return Vn=!1,Zf(l,c,p);Vn=(l.flags&131072)!==0}else Vn=!1,Bt&&(c.flags&1048576)!==0&&Dd(c,_s,c.index);switch(c.lanes=0,c.tag){case 2:var _=c.type;Aa(l,c),l=c.pendingProps;var b=$i(c,Fn.current);pl(c,p),b=qc(null,c,_,l,b,p);var C=Jc();return c.flags|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Un(_)?(C=!0,Pc(c)):C=!1,c.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,jc(c),b.updater=_n,c.stateNode=b,b._reactInternals=c,Zc(c,_,l,p),c=tu(null,c,_,!0,C,p)):(c.tag=0,Bt&&C&&Bc(c),An(null,c,b,p),c=c.child),c;case 16:_=c.elementType;e:{switch(Aa(l,c),l=c.pendingProps,b=_._init,_=b(_._payload),c.type=_,b=c.tag=Tt(_),l=pr(_,l),b){case 0:c=lh(null,c,_,l,p);break e;case 1:c=qf(null,c,_,l,p);break e;case 11:c=ih(null,c,_,l,p);break e;case 14:c=Kf(null,c,_,pr(_.type,l),p);break e}throw Error(s(306,_,""))}return c;case 0:return _=c.type,b=c.pendingProps,b=c.elementType===_?b:pr(_,b),lh(l,c,_,b,p);case 1:return _=c.type,b=c.pendingProps,b=c.elementType===_?b:pr(_,b),qf(l,c,_,b,p);case 3:e:{if(nu(c),l===null)throw Error(s(387));_=c.pendingProps,C=c.memoizedState,b=C.element,zd(l,c),wa(c,_,null,p);var L=c.memoizedState;if(_=L.element,C.isDehydrated)if(C={element:_,isDehydrated:!1,cache:L.cache,pendingSuspenseBoundaries:L.pendingSuspenseBoundaries,transitions:L.transitions},c.updateQueue.baseState=C,c.memoizedState=C,c.flags&256){b=xa(Error(s(423)),c),c=Jf(l,c,_,p,b);break e}else if(_!==b){b=xa(Error(s(424)),c),c=Jf(l,c,_,p,b);break e}else for(br=Io(c.stateNode.containerInfo.firstChild),dr=c,Bt=!0,rs=null,p=Rf(c,null,_,p),c.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(to(),_===b){c=Cs(l,c,p);break e}An(l,c,_,p)}c=c.child}return c;case 5:return kf(c),l===null&&Ud(c),_=c.type,b=c.pendingProps,C=l!==null?l.memoizedProps:null,L=b.children,Nd(_,b)?L=null:C!==null&&Nd(_,C)&&(c.flags|=32),Yg(l,c),An(l,c,L,p),c.child;case 6:return l===null&&Ud(c),null;case 13:return qg(l,c,p);case 4:return Yd(c,c.stateNode.containerInfo),_=c.pendingProps,l===null?c.child=vi(c,null,_,p):An(l,c,_,p),c.child;case 11:return _=c.type,b=c.pendingProps,b=c.elementType===_?b:pr(_,b),ih(l,c,_,b,p);case 7:return An(l,c,c.pendingProps,p),c.child;case 8:return An(l,c,c.pendingProps.children,p),c.child;case 12:return An(l,c,c.pendingProps.children,p),c.child;case 10:e:{if(_=c.type._context,b=c.pendingProps,C=c.memoizedProps,L=b.value,Pt(Vc,_._currentValue),_._currentValue=L,C!==null)if(Tr(C.value,L)){if(C.children===b.children&&!Zn.current){c=Cs(l,c,p);break e}}else for(C=c.child,C!==null&&(C.return=c);C!==null;){var U=C.dependencies;if(U!==null){L=C.child;for(var K=U.firstContext;K!==null;){if(K.context===_){if(C.tag===1){K=bs(-1,p&-p),K.tag=2;var le=C.updateQueue;if(le!==null){le=le.shared;var Ce=le.pending;Ce===null?K.next=K:(K.next=Ce.next,Ce.next=K),le.pending=K}}C.lanes|=p,K=C.alternate,K!==null&&(K.lanes|=p),Er(C.return,p,c),U.lanes|=p;break}K=K.next}}else if(C.tag===10)L=C.type===c.type?null:C.child;else if(C.tag===18){if(L=C.return,L===null)throw Error(s(341));L.lanes|=p,U=L.alternate,U!==null&&(U.lanes|=p),Er(L,p,c),L=C.sibling}else L=C.child;if(L!==null)L.return=C;else for(L=C;L!==null;){if(L===c){L=null;break}if(C=L.sibling,C!==null){C.return=L.return,L=C;break}L=L.return}C=L}An(l,c,b.children,p),c=c.child}return c;case 9:return b=c.type,_=c.pendingProps.children,pl(c,p),b=Cn(b),_=_(b),c.flags|=1,An(l,c,_,p),c.child;case 14:return _=c.type,b=pr(_,c.pendingProps),b=pr(_.type,b),Kf(l,c,_,b,p);case 15:return Xf(l,c,c.type,c.pendingProps,p);case 17:return _=c.type,b=c.pendingProps,b=c.elementType===_?b:pr(_,b),Aa(l,c),c.tag=1,Un(_)?(l=!0,Pc(c)):l=!1,pl(c,p),is(c,_,b),Zc(c,_,b,p),tu(null,c,_,!0,l,p);case 19:return Ft(l,c,p);case 22:return Yf(l,c,p)}throw Error(s(156,c.tag))};function _h(l,c){return cc(l,c)}function Nl(l,c,p,_){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(l,c,p,_){return new Nl(l,c,p,_)}function xi(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Tt(l){if(typeof l=="function")return xi(l)?1:0;if(l!=null){if(l=l.$$typeof,l===ye)return 11;if(l===Oe)return 14}return 2}function Hr(l,c){var p=l.alternate;return p===null?(p=jn(l.tag,c,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=c,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&14680064,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,c=l.dependencies,p.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p}function uo(l,c,p,_,b,C){var L=2;if(_=l,typeof l=="function")xi(l)&&(L=1);else if(typeof l=="string")L=5;else e:switch(l){case j:return Bo(p.children,b,C,c);case W:L=8,b|=8;break;case he:return l=jn(12,p,c,b|2),l.elementType=he,l.lanes=C,l;case De:return l=jn(13,p,c,b),l.elementType=De,l.lanes=C,l;case ce:return l=jn(19,p,c,b),l.elementType=ce,l.lanes=C,l;case pe:return xs(p,b,C,c);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case we:L=10;break e;case Ee:L=9;break e;case ye:L=11;break e;case Oe:L=14;break e;case ie:L=16,_=null;break e}throw Error(s(130,l==null?l:typeof l,""))}return c=jn(L,p,c,b),c.elementType=l,c.type=_,c.lanes=C,c}function Bo(l,c,p,_){return l=jn(7,l,_,c),l.lanes=p,l}function xs(l,c,p,_){return l=jn(22,l,_,c),l.elementType=pe,l.lanes=p,l.stateNode={isHidden:!1},l}function vh(l,c,p){return l=jn(6,l,null,c),l.lanes=p,l}function $u(l,c,p){return c=jn(4,l.children!==null?l.children:[],l.key,c),c.lanes=p,c.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},c}function rr(l,c,p,_,b){this.tag=c,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=id(0),this.expirationTimes=id(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=id(0),this.identifierPrefix=_,this.onRecoverableError=b,this.mutableSourceEagerHydrationData=null}function Ll(l,c,p,_,b,C,L,U,K){return l=new rr(l,c,p,U,K),c===1?(c=1,C===!0&&(c|=8)):c=0,C=jn(3,null,null,c),l.current=C,C.stateNode=l,C.memoizedState={element:_,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},jc(C),l}function Ma(l,c,p){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:V,key:_==null?null:""+_,children:l,containerInfo:c,implementation:p}}function _u(l){if(!l)return Ro;l=l._reactInternals;e:{if(oi(l)!==l||l.tag!==1)throw Error(s(170));var c=l;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Un(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(s(171))}if(l.tag===1){var p=l.type;if(Un(p))return wf(l,p,c)}return c}function Pa(l,c,p,_,b,C,L,U,K){return l=Ll(p,_,!0,l,b,C,L,U,K),l.context=_u(null),p=l.current,_=nr(),b=Po(p),C=bs(_,b),C.callback=c??null,ro(p,C,b),l.current.lanes=b,Xi(l,b,_),fr(l,_),l}function Fo(l,c,p,_){var b=c.current,C=nr(),L=Po(b);return p=_u(p),c.context===null?c.context=p:c.pendingContext=p,c=bs(C,L),c.payload={element:l},_=_===void 0?null:_,_!==null&&(c.callback=_),l=ro(b,c,L),l!==null&&(ls(l,b,L,C),Ea(l,b,L)),L}function vu(l){return l=l.current,l.child?(l.child.tag===5,l.child.stateNode):null}function am(l,c){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<c?p:c}}function Uo(l,c){am(l,c),(l=l.alternate)&&am(l,c)}function cm(){return null}var yh=typeof reportError=="function"?reportError:function(l){console.error(l)};function Cr(l){this._internalRoot=l}Oi.prototype.render=Cr.prototype.render=function(l){var c=this._internalRoot;if(c===null)throw Error(s(409));Fo(l,c,null,null)},Oi.prototype.unmount=Cr.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var c=l.containerInfo;Do(function(){Fo(null,l,null,null)}),c[ns]=null}};function Oi(l){this._internalRoot=l}Oi.prototype.unstable_scheduleHydration=function(l){if(l){var c=Yi();l={blockedOn:null,target:l,priority:c};for(var p=0;p<ms.length&&c!==0&&c<ms[p].priority;p++);ms.splice(p,0,l),p===0&&Lp(l)}};function yu(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function Da(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function um(){}function n$(l,c,p,_,b){if(b){if(typeof _=="function"){var C=_;_=function(){var le=vu(L);C.call(le)}}var L=Pa(c,_,l,0,null,!1,!1,"",um);return l._reactRootContainer=L,l[ns]=L.current,Co(l.nodeType===8?l.parentNode:l),Do(),L}for(;b=l.lastChild;)l.removeChild(b);if(typeof _=="function"){var U=_;_=function(){var le=vu(K);U.call(le)}}var K=Ll(l,0,!1,null,null,!1,!1,"",um);return l._reactRootContainer=K,l[ns]=K.current,Co(l.nodeType===8?l.parentNode:l),Do(function(){Fo(c,K,p,_)}),K}function Ml(l,c,p,_,b){var C=p._reactRootContainer;if(C){var L=C;if(typeof b=="function"){var U=b;b=function(){var K=vu(L);U.call(K)}}Fo(c,L,l,b)}else L=n$(p,c,l,b,_);return vu(L)}Op=function(l){switch(l.tag){case 3:var c=l.stateNode;if(c.current.memoizedState.isDehydrated){var p=ir(c.pendingLanes);p!==0&&(ld(c,p|1),fr(c,Qt()),(vt&6)===0&&(Si=Qt()+500,Me()))}break;case 13:Do(function(){var _=Ts(l,1);if(_!==null){var b=nr();ls(_,l,1,b)}}),Uo(l,1)}},sa=function(l){if(l.tag===13){var c=Ts(l,134217728);if(c!==null){var p=nr();ls(c,l,134217728,p)}Uo(l,134217728)}},Ap=function(l){if(l.tag===13){var c=Po(l),p=Ts(l,c);if(p!==null){var _=nr();ls(p,l,c,_)}Uo(l,c)}},Yi=function(){return Et},Np=function(l,c){var p=Et;try{return Et=l,c()}finally{Et=p}},ni=function(l,c,p){switch(c){case"input":if(wn(l,p),c=p.name,p.type==="radio"&&c!=null){for(p=l;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<p.length;c++){var _=p[c];if(_!==l&&_.form===l.form){var b=Lc(_);if(!b)throw Error(s(90));ct(_),wn(_,b)}}}break;case"textarea":or(l,p);break;case"select":c=p.value,c!=null&&at(l,!!p.multiple,c,!1)}},yt=fu,gt=Do;var yn={usingClientEntryPoint:!1,Events:[Mr,ar,Lc,ri,it,fu]},Wn={findFiberByHostInstance:Lr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},dm={bundleType:Wn.bundleType,version:Wn.version,rendererPackageName:Wn.rendererPackageName,rendererConfig:Wn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:F.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=ac(l),l===null?null:l.stateNode},findFiberByHostInstance:Wn.findFiberByHostInstance||cm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ba=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ba.isDisabled&&Ba.supportsFiber)try{li=Ba.inject(dm),Or=Ba}catch{}}return ds.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yn,ds.createPortal=function(l,c){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yu(c))throw Error(s(200));return Ma(l,c,null,p)},ds.createRoot=function(l,c){if(!yu(l))throw Error(s(299));var p=!1,_="",b=yh;return c!=null&&(c.unstable_strictMode===!0&&(p=!0),c.identifierPrefix!==void 0&&(_=c.identifierPrefix),c.onRecoverableError!==void 0&&(b=c.onRecoverableError)),c=Ll(l,1,!1,null,null,p,!1,_,b),l[ns]=c.current,Co(l.nodeType===8?l.parentNode:l),new Cr(c)},ds.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var c=l._reactInternals;if(c===void 0)throw typeof l.render=="function"?Error(s(188)):(l=Object.keys(l).join(","),Error(s(268,l)));return l=ac(c),l=l===null?null:l.stateNode,l},ds.flushSync=function(l){return Do(l)},ds.hydrate=function(l,c,p){if(!Da(c))throw Error(s(200));return Ml(null,l,c,!0,p)},ds.hydrateRoot=function(l,c,p){if(!yu(l))throw Error(s(405));var _=p!=null&&p.hydratedSources||null,b=!1,C="",L=yh;if(p!=null&&(p.unstable_strictMode===!0&&(b=!0),p.identifierPrefix!==void 0&&(C=p.identifierPrefix),p.onRecoverableError!==void 0&&(L=p.onRecoverableError)),c=Pa(c,null,l,1,p??null,b,!1,C,L),l[ns]=c.current,Co(l),_)for(l=0;l<_.length;l++)p=_[l],b=p._getVersion,b=b(p._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[p,b]:c.mutableSourceEagerHydrationData.push(p,b);return new Oi(c)},ds.render=function(l,c,p){if(!Da(c))throw Error(s(200));return Ml(null,l,c,!1,p)},ds.unmountComponentAtNode=function(l){if(!Da(l))throw Error(s(40));return l._reactRootContainer?(Do(function(){Ml(null,null,l,!1,function(){l._reactRootContainer=null,l[ns]=null})}),!0):!1},ds.unstable_batchedUpdates=fu,ds.unstable_renderSubtreeIntoContainer=function(l,c,p,_){if(!Da(p))throw Error(s(200));if(l==null||l._reactInternals===void 0)throw Error(s(38));return Ml(l,c,p,!1,_)},ds.version="18.3.1-next-f1338f8080-20240426",ds}var oC;function wk(){if(oC)return Ty.exports;oC=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}return t(),Ty.exports=gP(),Ty.exports}var iC;function $P(){if(iC)return S$;iC=1;var t=wk();return S$.createRoot=t.createRoot,S$.hydrateRoot=t.hydrateRoot,S$}var _P=$P(),E=xb();const Ne=kb(E),N_=uP({__proto__:null,default:Ne},[E]),vP=1,yP=1e6;let wy=0;function TP(){return wy=(wy+1)%Number.MAX_SAFE_INTEGER,wy.toString()}const Sy=new Map,lC=t=>{if(Sy.has(t))return;const r=setTimeout(()=>{Sy.delete(t),Vm({type:"REMOVE_TOAST",toastId:t})},yP);Sy.set(t,r)},bP=(t,r)=>{switch(r.type){case"ADD_TOAST":return{...t,toasts:[r.toast,...t.toasts].slice(0,vP)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(s=>s.id===r.toast.id?{...s,...r.toast}:s)};case"DISMISS_TOAST":{const{toastId:s}=r;return s?lC(s):t.toasts.forEach(o=>{lC(o.id)}),{...t,toasts:t.toasts.map(o=>o.id===s||s===void 0?{...o,open:!1}:o)}}case"REMOVE_TOAST":return r.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==r.toastId)}}},W$=[];let z$={toasts:[]};function Vm(t){z$=bP(z$,t),W$.forEach(r=>{r(z$)})}function EP({...t}){const r=TP(),s=a=>Vm({type:"UPDATE_TOAST",toast:{...a,id:r}}),o=()=>Vm({type:"DISMISS_TOAST",toastId:r});return Vm({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:a=>{a||o()}}}),{id:r,dismiss:o,update:s}}function wP(){const[t,r]=E.useState(z$);return E.useEffect(()=>(W$.push(r),()=>{const s=W$.indexOf(r);s>-1&&W$.splice(s,1)}),[t]),{...t,toast:EP,dismiss:s=>Vm({type:"DISMISS_TOAST",toastId:s})}}var mp=wk();const Sk=kb(mp);function Pe(t,r,{checkForDefaultPrevented:s=!0}={}){return function(a){if(t?.(a),s===!1||!a.defaultPrevented)return r?.(a)}}function aC(t,r){if(typeof t=="function")return t(r);t!=null&&(t.current=r)}function L_(...t){return r=>{let s=!1;const o=t.map(a=>{const d=aC(a,r);return!s&&typeof d=="function"&&(s=!0),d});if(s)return()=>{for(let a=0;a<o.length;a++){const d=o[a];typeof d=="function"?d():aC(t[a],null)}}}}function _t(...t){return E.useCallback(L_(...t),t)}function SP(t,r){const s=E.createContext(r),o=d=>{const{children:h,...f}=d,g=E.useMemo(()=>f,Object.values(f));return R.jsx(s.Provider,{value:g,children:h})};o.displayName=t+"Provider";function a(d){const h=E.useContext(s);if(h)return h;if(r!==void 0)return r;throw new Error(`\`${d}\` must be used within \`${t}\``)}return[o,a]}function To(t,r=[]){let s=[];function o(d,h){const f=E.createContext(h),g=s.length;s=[...s,h];const $=y=>{const{scope:w,children:S,...O}=y,I=w?.[t]?.[g]||f,x=E.useMemo(()=>O,Object.values(O));return R.jsx(I.Provider,{value:x,children:S})};$.displayName=d+"Provider";function v(y,w){const S=w?.[t]?.[g]||f,O=E.useContext(S);if(O)return O;if(h!==void 0)return h;throw new Error(`\`${y}\` must be used within \`${d}\``)}return[$,v]}const a=()=>{const d=s.map(h=>E.createContext(h));return function(f){const g=f?.[t]||d;return E.useMemo(()=>({[`__scope${t}`]:{...f,[t]:g}}),[f,g])}};return a.scopeName=t,[o,CP(a,...r)]}function CP(...t){const r=t[0];if(t.length===1)return r;const s=()=>{const o=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(d){const h=o.reduce((f,{useScope:g,scopeName:$})=>{const y=g(d)[`__scope${$}`];return{...f,...y}},{});return E.useMemo(()=>({[`__scope${r.scopeName}`]:h}),[h])}};return s.scopeName=r.scopeName,s}function ju(t){const r=RP(t),s=E.forwardRef((o,a)=>{const{children:d,...h}=o,f=E.Children.toArray(d),g=f.find(xP);if(g){const $=g.props.children,v=f.map(y=>y===g?E.Children.count($)>1?E.Children.only(null):E.isValidElement($)?$.props.children:null:y);return R.jsx(r,{...h,ref:a,children:E.isValidElement($)?E.cloneElement($,void 0,v):null})}return R.jsx(r,{...h,ref:a,children:d})});return s.displayName=`${t}.Slot`,s}var IP=ju("Slot");function RP(t){const r=E.forwardRef((s,o)=>{const{children:a,...d}=s;if(E.isValidElement(a)){const h=AP(a),f=OP(d,a.props);return a.type!==E.Fragment&&(f.ref=o?L_(o,h):h),E.cloneElement(a,f)}return E.Children.count(a)>1?E.Children.only(null):null});return r.displayName=`${t}.SlotClone`,r}var Ck=Symbol("radix.slottable");function kP(t){const r=({children:s})=>R.jsx(R.Fragment,{children:s});return r.displayName=`${t}.Slottable`,r.__radixId=Ck,r}function xP(t){return E.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Ck}function OP(t,r){const s={...r};for(const o in r){const a=t[o],d=r[o];/^on[A-Z]/.test(o)?a&&d?s[o]=(...f)=>{const g=d(...f);return a(...f),g}:a&&(s[o]=a):o==="style"?s[o]={...a,...d}:o==="className"&&(s[o]=[a,d].filter(Boolean).join(" "))}return{...t,...s}}function AP(t){let r=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,s=r&&"isReactWarning"in r&&r.isReactWarning;return s?t.ref:(r=Object.getOwnPropertyDescriptor(t,"ref")?.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}function M_(t){const r=t+"CollectionProvider",[s,o]=To(r),[a,d]=s(r,{collectionRef:{current:null},itemMap:new Map}),h=I=>{const{scope:x,children:A}=I,M=Ne.useRef(null),P=Ne.useRef(new Map).current;return R.jsx(a,{scope:x,itemMap:P,collectionRef:M,children:A})};h.displayName=r;const f=t+"CollectionSlot",g=ju(f),$=Ne.forwardRef((I,x)=>{const{scope:A,children:M}=I,P=d(f,A),F=_t(x,P.collectionRef);return R.jsx(g,{ref:F,children:M})});$.displayName=f;const v=t+"CollectionItemSlot",y="data-radix-collection-item",w=ju(v),S=Ne.forwardRef((I,x)=>{const{scope:A,children:M,...P}=I,F=Ne.useRef(null),B=_t(x,F),V=d(v,A);return Ne.useEffect(()=>(V.itemMap.set(F,{ref:F,...P}),()=>{V.itemMap.delete(F)})),R.jsx(w,{[y]:"",ref:B,children:M})});S.displayName=v;function O(I){const x=d(t+"CollectionConsumer",I);return Ne.useCallback(()=>{const M=x.collectionRef.current;if(!M)return[];const P=Array.from(M.querySelectorAll(`[${y}]`));return Array.from(x.itemMap.values()).sort((V,j)=>P.indexOf(V.ref.current)-P.indexOf(j.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:h,Slot:$,ItemSlot:S},O,o]}var NP=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ze=NP.reduce((t,r)=>{const s=ju(`Primitive.${r}`),o=E.forwardRef((a,d)=>{const{asChild:h,...f}=a,g=h?s:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),R.jsx(g,{...f,ref:d})});return o.displayName=`Primitive.${r}`,{...t,[r]:o}},{});function Ob(t,r){t&&mp.flushSync(()=>t.dispatchEvent(r))}function Rn(t){const r=E.useRef(t);return E.useEffect(()=>{r.current=t}),E.useMemo(()=>(...s)=>r.current?.(...s),[])}function LP(t,r=globalThis?.document){const s=Rn(t);E.useEffect(()=>{const o=a=>{a.key==="Escape"&&s(a)};return r.addEventListener("keydown",o,{capture:!0}),()=>r.removeEventListener("keydown",o,{capture:!0})},[s,r])}var MP="DismissableLayer",$T="dismissableLayer.update",PP="dismissableLayer.pointerDownOutside",DP="dismissableLayer.focusOutside",cC,Ik=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),gp=E.forwardRef((t,r)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:d,onInteractOutside:h,onDismiss:f,...g}=t,$=E.useContext(Ik),[v,y]=E.useState(null),w=v?.ownerDocument??globalThis?.document,[,S]=E.useState({}),O=_t(r,j=>y(j)),I=Array.from($.layers),[x]=[...$.layersWithOutsidePointerEventsDisabled].slice(-1),A=I.indexOf(x),M=v?I.indexOf(v):-1,P=$.layersWithOutsidePointerEventsDisabled.size>0,F=M>=A,B=FP(j=>{const W=j.target,he=[...$.branches].some(we=>we.contains(W));!F||he||(a?.(j),h?.(j),j.defaultPrevented||f?.())},w),V=UP(j=>{const W=j.target;[...$.branches].some(we=>we.contains(W))||(d?.(j),h?.(j),j.defaultPrevented||f?.())},w);return LP(j=>{M===$.layers.size-1&&(o?.(j),!j.defaultPrevented&&f&&(j.preventDefault(),f()))},w),E.useEffect(()=>{if(v)return s&&($.layersWithOutsidePointerEventsDisabled.size===0&&(cC=w.body.style.pointerEvents,w.body.style.pointerEvents="none"),$.layersWithOutsidePointerEventsDisabled.add(v)),$.layers.add(v),uC(),()=>{s&&$.layersWithOutsidePointerEventsDisabled.size===1&&(w.body.style.pointerEvents=cC)}},[v,w,s,$]),E.useEffect(()=>()=>{v&&($.layers.delete(v),$.layersWithOutsidePointerEventsDisabled.delete(v),uC())},[v,$]),E.useEffect(()=>{const j=()=>S({});return document.addEventListener($T,j),()=>document.removeEventListener($T,j)},[]),R.jsx(Ze.div,{...g,ref:O,style:{pointerEvents:P?F?"auto":"none":void 0,...t.style},onFocusCapture:Pe(t.onFocusCapture,V.onFocusCapture),onBlurCapture:Pe(t.onBlurCapture,V.onBlurCapture),onPointerDownCapture:Pe(t.onPointerDownCapture,B.onPointerDownCapture)})});gp.displayName=MP;var BP="DismissableLayerBranch",Rk=E.forwardRef((t,r)=>{const s=E.useContext(Ik),o=E.useRef(null),a=_t(r,o);return E.useEffect(()=>{const d=o.current;if(d)return s.branches.add(d),()=>{s.branches.delete(d)}},[s.branches]),R.jsx(Ze.div,{...t,ref:a})});Rk.displayName=BP;function FP(t,r=globalThis?.document){const s=Rn(t),o=E.useRef(!1),a=E.useRef(()=>{});return E.useEffect(()=>{const d=f=>{if(f.target&&!o.current){let g=function(){kk(PP,s,$,{discrete:!0})};const $={originalEvent:f};f.pointerType==="touch"?(r.removeEventListener("click",a.current),a.current=g,r.addEventListener("click",a.current,{once:!0})):g()}else r.removeEventListener("click",a.current);o.current=!1},h=window.setTimeout(()=>{r.addEventListener("pointerdown",d)},0);return()=>{window.clearTimeout(h),r.removeEventListener("pointerdown",d),r.removeEventListener("click",a.current)}},[r,s]),{onPointerDownCapture:()=>o.current=!0}}function UP(t,r=globalThis?.document){const s=Rn(t),o=E.useRef(!1);return E.useEffect(()=>{const a=d=>{d.target&&!o.current&&kk(DP,s,{originalEvent:d},{discrete:!1})};return r.addEventListener("focusin",a),()=>r.removeEventListener("focusin",a)},[r,s]),{onFocusCapture:()=>o.current=!0,onBlurCapture:()=>o.current=!1}}function uC(){const t=new CustomEvent($T);document.dispatchEvent(t)}function kk(t,r,s,{discrete:o}){const a=s.originalEvent.target,d=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:s});r&&a.addEventListener(t,r,{once:!0}),o?Ob(a,d):a.dispatchEvent(d)}var VP=gp,HP=Rk,sr=globalThis?.document?E.useLayoutEffect:()=>{},GP="Portal",pg=E.forwardRef((t,r)=>{const{container:s,...o}=t,[a,d]=E.useState(!1);sr(()=>d(!0),[]);const h=s||a&&globalThis?.document?.body;return h?Sk.createPortal(R.jsx(Ze.div,{...o,ref:r}),h):null});pg.displayName=GP;function jP(t,r){return E.useReducer((s,o)=>r[s][o]??s,t)}var Kr=t=>{const{present:r,children:s}=t,o=WP(r),a=typeof s=="function"?s({present:o.isPresent}):E.Children.only(s),d=_t(o.ref,zP(a));return typeof s=="function"||o.isPresent?E.cloneElement(a,{ref:d}):null};Kr.displayName="Presence";function WP(t){const[r,s]=E.useState(),o=E.useRef(null),a=E.useRef(t),d=E.useRef("none"),h=t?"mounted":"unmounted",[f,g]=jP(h,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const $=C$(o.current);d.current=f==="mounted"?$:"none"},[f]),sr(()=>{const $=o.current,v=a.current;if(v!==t){const w=d.current,S=C$($);t?g("MOUNT"):S==="none"||$?.display==="none"?g("UNMOUNT"):g(v&&w!==S?"ANIMATION_OUT":"UNMOUNT"),a.current=t}},[t,g]),sr(()=>{if(r){let $;const v=r.ownerDocument.defaultView??window,y=S=>{const I=C$(o.current).includes(S.animationName);if(S.target===r&&I&&(g("ANIMATION_END"),!a.current)){const x=r.style.animationFillMode;r.style.animationFillMode="forwards",$=v.setTimeout(()=>{r.style.animationFillMode==="forwards"&&(r.style.animationFillMode=x)})}},w=S=>{S.target===r&&(d.current=C$(o.current))};return r.addEventListener("animationstart",w),r.addEventListener("animationcancel",y),r.addEventListener("animationend",y),()=>{v.clearTimeout($),r.removeEventListener("animationstart",w),r.removeEventListener("animationcancel",y),r.removeEventListener("animationend",y)}}else g("ANIMATION_END")},[r,g]),{isPresent:["mounted","unmountSuspended"].includes(f),ref:E.useCallback($=>{o.current=$?getComputedStyle($):null,s($)},[])}}function C$(t){return t?.animationName||"none"}function zP(t){let r=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,s=r&&"isReactWarning"in r&&r.isReactWarning;return s?t.ref:(r=Object.getOwnPropertyDescriptor(t,"ref")?.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}var KP=N_[" useInsertionEffect ".trim().toString()]||sr;function Wu({prop:t,defaultProp:r,onChange:s=()=>{},caller:o}){const[a,d,h]=XP({defaultProp:r,onChange:s}),f=t!==void 0,g=f?t:a;{const v=E.useRef(t!==void 0);E.useEffect(()=>{const y=v.current;y!==f&&console.warn(`${o} is changing from ${y?"controlled":"uncontrolled"} to ${f?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),v.current=f},[f,o])}const $=E.useCallback(v=>{if(f){const y=YP(v)?v(t):v;y!==t&&h.current?.(y)}else d(v)},[f,t,d,h]);return[g,$]}function XP({defaultProp:t,onChange:r}){const[s,o]=E.useState(t),a=E.useRef(s),d=E.useRef(r);return KP(()=>{d.current=r},[r]),E.useEffect(()=>{a.current!==s&&(d.current?.(s),a.current=s)},[s,a]),[s,o,d]}function YP(t){return typeof t=="function"}var xk=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),qP="VisuallyHidden",P_=E.forwardRef((t,r)=>R.jsx(Ze.span,{...t,ref:r,style:{...xk,...t.style}}));P_.displayName=qP;var JP=P_,Ab="ToastProvider",[Nb,QP,ZP]=M_("Toast"),[Ok]=To("Toast",[ZP]),[eD,D_]=Ok(Ab),Ak=t=>{const{__scopeToast:r,label:s="Notification",duration:o=5e3,swipeDirection:a="right",swipeThreshold:d=50,children:h}=t,[f,g]=E.useState(null),[$,v]=E.useState(0),y=E.useRef(!1),w=E.useRef(!1);return s.trim()||console.error(`Invalid prop \`label\` supplied to \`${Ab}\`. Expected non-empty \`string\`.`),R.jsx(Nb.Provider,{scope:r,children:R.jsx(eD,{scope:r,label:s,duration:o,swipeDirection:a,swipeThreshold:d,toastCount:$,viewport:f,onViewportChange:g,onToastAdd:E.useCallback(()=>v(S=>S+1),[]),onToastRemove:E.useCallback(()=>v(S=>S-1),[]),isFocusedToastEscapeKeyDownRef:y,isClosePausedRef:w,children:h})})};Ak.displayName=Ab;var Nk="ToastViewport",tD=["F8"],_T="toast.viewportPause",vT="toast.viewportResume",Lk=E.forwardRef((t,r)=>{const{__scopeToast:s,hotkey:o=tD,label:a="Notifications ({hotkey})",...d}=t,h=D_(Nk,s),f=QP(s),g=E.useRef(null),$=E.useRef(null),v=E.useRef(null),y=E.useRef(null),w=_t(r,y,h.onViewportChange),S=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),O=h.toastCount>0;E.useEffect(()=>{const x=A=>{o.length!==0&&o.every(P=>A[P]||A.code===P)&&y.current?.focus()};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[o]),E.useEffect(()=>{const x=g.current,A=y.current;if(O&&x&&A){const M=()=>{if(!h.isClosePausedRef.current){const V=new CustomEvent(_T);A.dispatchEvent(V),h.isClosePausedRef.current=!0}},P=()=>{if(h.isClosePausedRef.current){const V=new CustomEvent(vT);A.dispatchEvent(V),h.isClosePausedRef.current=!1}},F=V=>{!x.contains(V.relatedTarget)&&P()},B=()=>{x.contains(document.activeElement)||P()};return x.addEventListener("focusin",M),x.addEventListener("focusout",F),x.addEventListener("pointermove",M),x.addEventListener("pointerleave",B),window.addEventListener("blur",M),window.addEventListener("focus",P),()=>{x.removeEventListener("focusin",M),x.removeEventListener("focusout",F),x.removeEventListener("pointermove",M),x.removeEventListener("pointerleave",B),window.removeEventListener("blur",M),window.removeEventListener("focus",P)}}},[O,h.isClosePausedRef]);const I=E.useCallback(({tabbingDirection:x})=>{const M=f().map(P=>{const F=P.ref.current,B=[F,...fD(F)];return x==="forwards"?B:B.reverse()});return(x==="forwards"?M.reverse():M).flat()},[f]);return E.useEffect(()=>{const x=y.current;if(x){const A=M=>{const P=M.altKey||M.ctrlKey||M.metaKey;if(M.key==="Tab"&&!P){const B=document.activeElement,V=M.shiftKey;if(M.target===x&&V){$.current?.focus();return}const he=I({tabbingDirection:V?"backwards":"forwards"}),we=he.findIndex(Ee=>Ee===B);Cy(he.slice(we+1))?M.preventDefault():V?$.current?.focus():v.current?.focus()}};return x.addEventListener("keydown",A),()=>x.removeEventListener("keydown",A)}},[f,I]),R.jsxs(HP,{ref:g,role:"region","aria-label":a.replace("{hotkey}",S),tabIndex:-1,style:{pointerEvents:O?void 0:"none"},children:[O&&R.jsx(yT,{ref:$,onFocusFromOutsideViewport:()=>{const x=I({tabbingDirection:"forwards"});Cy(x)}}),R.jsx(Nb.Slot,{scope:s,children:R.jsx(Ze.ol,{tabIndex:-1,...d,ref:w})}),O&&R.jsx(yT,{ref:v,onFocusFromOutsideViewport:()=>{const x=I({tabbingDirection:"backwards"});Cy(x)}})]})});Lk.displayName=Nk;var Mk="ToastFocusProxy",yT=E.forwardRef((t,r)=>{const{__scopeToast:s,onFocusFromOutsideViewport:o,...a}=t,d=D_(Mk,s);return R.jsx(P_,{"aria-hidden":!0,tabIndex:0,...a,ref:r,style:{position:"fixed"},onFocus:h=>{const f=h.relatedTarget;!d.viewport?.contains(f)&&o()}})});yT.displayName=Mk;var fg="Toast",nD="toast.swipeStart",rD="toast.swipeMove",sD="toast.swipeCancel",oD="toast.swipeEnd",Pk=E.forwardRef((t,r)=>{const{forceMount:s,open:o,defaultOpen:a,onOpenChange:d,...h}=t,[f,g]=Wu({prop:o,defaultProp:a??!0,onChange:d,caller:fg});return R.jsx(Kr,{present:s||f,children:R.jsx(aD,{open:f,...h,ref:r,onClose:()=>g(!1),onPause:Rn(t.onPause),onResume:Rn(t.onResume),onSwipeStart:Pe(t.onSwipeStart,$=>{$.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Pe(t.onSwipeMove,$=>{const{x:v,y}=$.detail.delta;$.currentTarget.setAttribute("data-swipe","move"),$.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${v}px`),$.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${y}px`)}),onSwipeCancel:Pe(t.onSwipeCancel,$=>{$.currentTarget.setAttribute("data-swipe","cancel"),$.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),$.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),$.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),$.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Pe(t.onSwipeEnd,$=>{const{x:v,y}=$.detail.delta;$.currentTarget.setAttribute("data-swipe","end"),$.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),$.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),$.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${v}px`),$.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${y}px`),g(!1)})})})});Pk.displayName=fg;var[iD,lD]=Ok(fg,{onClose(){}}),aD=E.forwardRef((t,r)=>{const{__scopeToast:s,type:o="foreground",duration:a,open:d,onClose:h,onEscapeKeyDown:f,onPause:g,onResume:$,onSwipeStart:v,onSwipeMove:y,onSwipeCancel:w,onSwipeEnd:S,...O}=t,I=D_(fg,s),[x,A]=E.useState(null),M=_t(r,ce=>A(ce)),P=E.useRef(null),F=E.useRef(null),B=a||I.duration,V=E.useRef(0),j=E.useRef(B),W=E.useRef(0),{onToastAdd:he,onToastRemove:we}=I,Ee=Rn(()=>{x?.contains(document.activeElement)&&I.viewport?.focus(),h()}),ye=E.useCallback(ce=>{!ce||ce===1/0||(window.clearTimeout(W.current),V.current=new Date().getTime(),W.current=window.setTimeout(Ee,ce))},[Ee]);E.useEffect(()=>{const ce=I.viewport;if(ce){const Oe=()=>{ye(j.current),$?.()},ie=()=>{const pe=new Date().getTime()-V.current;j.current=j.current-pe,window.clearTimeout(W.current),g?.()};return ce.addEventListener(_T,ie),ce.addEventListener(vT,Oe),()=>{ce.removeEventListener(_T,ie),ce.removeEventListener(vT,Oe)}}},[I.viewport,B,g,$,ye]),E.useEffect(()=>{d&&!I.isClosePausedRef.current&&ye(B)},[d,B,I.isClosePausedRef,ye]),E.useEffect(()=>(he(),()=>we()),[he,we]);const De=E.useMemo(()=>x?Gk(x):null,[x]);return I.viewport?R.jsxs(R.Fragment,{children:[De&&R.jsx(cD,{__scopeToast:s,role:"status","aria-live":o==="foreground"?"assertive":"polite","aria-atomic":!0,children:De}),R.jsx(iD,{scope:s,onClose:Ee,children:mp.createPortal(R.jsx(Nb.ItemSlot,{scope:s,children:R.jsx(VP,{asChild:!0,onEscapeKeyDown:Pe(f,()=>{I.isFocusedToastEscapeKeyDownRef.current||Ee(),I.isFocusedToastEscapeKeyDownRef.current=!1}),children:R.jsx(Ze.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":d?"open":"closed","data-swipe-direction":I.swipeDirection,...O,ref:M,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Pe(t.onKeyDown,ce=>{ce.key==="Escape"&&(f?.(ce.nativeEvent),ce.nativeEvent.defaultPrevented||(I.isFocusedToastEscapeKeyDownRef.current=!0,Ee()))}),onPointerDown:Pe(t.onPointerDown,ce=>{ce.button===0&&(P.current={x:ce.clientX,y:ce.clientY})}),onPointerMove:Pe(t.onPointerMove,ce=>{if(!P.current)return;const Oe=ce.clientX-P.current.x,ie=ce.clientY-P.current.y,pe=!!F.current,G=["left","right"].includes(I.swipeDirection),ee=["left","up"].includes(I.swipeDirection)?Math.min:Math.max,$e=G?ee(0,Oe):0,z=G?0:ee(0,ie),se=ce.pointerType==="touch"?10:2,ae={x:$e,y:z},ne={originalEvent:ce,delta:ae};pe?(F.current=ae,I$(rD,y,ne,{discrete:!1})):dC(ae,I.swipeDirection,se)?(F.current=ae,I$(nD,v,ne,{discrete:!1}),ce.target.setPointerCapture(ce.pointerId)):(Math.abs(Oe)>se||Math.abs(ie)>se)&&(P.current=null)}),onPointerUp:Pe(t.onPointerUp,ce=>{const Oe=F.current,ie=ce.target;if(ie.hasPointerCapture(ce.pointerId)&&ie.releasePointerCapture(ce.pointerId),F.current=null,P.current=null,Oe){const pe=ce.currentTarget,G={originalEvent:ce,delta:Oe};dC(Oe,I.swipeDirection,I.swipeThreshold)?I$(oD,S,G,{discrete:!0}):I$(sD,w,G,{discrete:!0}),pe.addEventListener("click",ee=>ee.preventDefault(),{once:!0})}})})})}),I.viewport)})]}):null}),cD=t=>{const{__scopeToast:r,children:s,...o}=t,a=D_(fg,r),[d,h]=E.useState(!1),[f,g]=E.useState(!1);return hD(()=>h(!0)),E.useEffect(()=>{const $=window.setTimeout(()=>g(!0),1e3);return()=>window.clearTimeout($)},[]),f?null:R.jsx(pg,{asChild:!0,children:R.jsx(P_,{...o,children:d&&R.jsxs(R.Fragment,{children:[a.label," ",s]})})})},uD="ToastTitle",Dk=E.forwardRef((t,r)=>{const{__scopeToast:s,...o}=t;return R.jsx(Ze.div,{...o,ref:r})});Dk.displayName=uD;var dD="ToastDescription",Bk=E.forwardRef((t,r)=>{const{__scopeToast:s,...o}=t;return R.jsx(Ze.div,{...o,ref:r})});Bk.displayName=dD;var Fk="ToastAction",Uk=E.forwardRef((t,r)=>{const{altText:s,...o}=t;return s.trim()?R.jsx(Hk,{altText:s,asChild:!0,children:R.jsx(Lb,{...o,ref:r})}):(console.error(`Invalid prop \`altText\` supplied to \`${Fk}\`. Expected non-empty \`string\`.`),null)});Uk.displayName=Fk;var Vk="ToastClose",Lb=E.forwardRef((t,r)=>{const{__scopeToast:s,...o}=t,a=lD(Vk,s);return R.jsx(Hk,{asChild:!0,children:R.jsx(Ze.button,{type:"button",...o,ref:r,onClick:Pe(t.onClick,a.onClose)})})});Lb.displayName=Vk;var Hk=E.forwardRef((t,r)=>{const{__scopeToast:s,altText:o,...a}=t;return R.jsx(Ze.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":o||void 0,...a,ref:r})});function Gk(t){const r=[];return Array.from(t.childNodes).forEach(o=>{if(o.nodeType===o.TEXT_NODE&&o.textContent&&r.push(o.textContent),pD(o)){const a=o.ariaHidden||o.hidden||o.style.display==="none",d=o.dataset.radixToastAnnounceExclude==="";if(!a)if(d){const h=o.dataset.radixToastAnnounceAlt;h&&r.push(h)}else r.push(...Gk(o))}}),r}function I$(t,r,s,{discrete:o}){const a=s.originalEvent.currentTarget,d=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:s});r&&a.addEventListener(t,r,{once:!0}),o?Ob(a,d):a.dispatchEvent(d)}var dC=(t,r,s=0)=>{const o=Math.abs(t.x),a=Math.abs(t.y),d=o>a;return r==="left"||r==="right"?d&&o>s:!d&&a>s};function hD(t=()=>{}){const r=Rn(t);sr(()=>{let s=0,o=0;return s=window.requestAnimationFrame(()=>o=window.requestAnimationFrame(r)),()=>{window.cancelAnimationFrame(s),window.cancelAnimationFrame(o)}},[r])}function pD(t){return t.nodeType===t.ELEMENT_NODE}function fD(t){const r=[],s=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const a=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||a?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)r.push(s.currentNode);return r}function Cy(t){const r=document.activeElement;return t.some(s=>s===r?!0:(s.focus(),document.activeElement!==r))}var mD=Ak,jk=Lk,Wk=Pk,zk=Dk,Kk=Bk,Xk=Uk,Yk=Lb;function qk(t){var r,s,o="";if(typeof t=="string"||typeof t=="number")o+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(r=0;r<a;r++)t[r]&&(s=qk(t[r]))&&(o&&(o+=" "),o+=s)}else for(s in t)t[s]&&(o&&(o+=" "),o+=s);return o}function Jk(){for(var t,r,s=0,o="",a=arguments.length;s<a;s++)(t=arguments[s])&&(r=qk(t))&&(o&&(o+=" "),o+=r);return o}const hC=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,pC=Jk,Mb=(t,r)=>s=>{var o;if(r?.variants==null)return pC(t,s?.class,s?.className);const{variants:a,defaultVariants:d}=r,h=Object.keys(a).map($=>{const v=s?.[$],y=d?.[$];if(v===null)return null;const w=hC(v)||hC(y);return a[$][w]}),f=s&&Object.entries(s).reduce(($,v)=>{let[y,w]=v;return w===void 0||($[y]=w),$},{}),g=r==null||(o=r.compoundVariants)===null||o===void 0?void 0:o.reduce(($,v)=>{let{class:y,className:w,...S}=v;return Object.entries(S).every(O=>{let[I,x]=O;return Array.isArray(x)?x.includes({...d,...f}[I]):{...d,...f}[I]===x})?[...$,y,w]:$},[]);return pC(t,h,g,s?.class,s?.className)};const gD=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Qk=(...t)=>t.filter((r,s,o)=>!!r&&r.trim()!==""&&o.indexOf(r)===s).join(" ").trim();var $D={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const _D=E.forwardRef(({color:t="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:d,iconNode:h,...f},g)=>E.createElement("svg",{ref:g,...$D,width:r,height:r,stroke:t,strokeWidth:o?Number(s)*24/Number(r):s,className:Qk("lucide",a),...f},[...h.map(([$,v])=>E.createElement($,v)),...Array.isArray(d)?d:[d]]));const Ot=(t,r)=>{const s=E.forwardRef(({className:o,...a},d)=>E.createElement(_D,{ref:d,iconNode:r,className:Qk(`lucide-${gD(t)}`,o),...a}));return s.displayName=`${t}`,s};const vD=Ot("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);const yD=Ot("Blocks",[["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["path",{d:"M10 21V8a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1H3",key:"1fpvtg"}]]);const Pb=Ot("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const Zk=Ot("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const TD=Ot("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const bD=Ot("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const e0=Ot("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const ED=Ot("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const wD=Ot("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const K$=Ot("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);const SD=Ot("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const CD=Ot("FileCode",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]]);const ID=Ot("FilePlus",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]]);const RD=Ot("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);const kD=Ot("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);const xD=Ot("Hammer",[["path",{d:"m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9",key:"eefl8a"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"b7pghm"}]]);const fC=Ot("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);const OD=Ot("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const AD=Ot("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);const ND=Ot("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);const LD=Ot("Plug",[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M9 8V2",key:"14iosj"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z",key:"osxo6l"}]]);const TT=Ot("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);const MD=Ot("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);const PD=Ot("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);const o_=Ot("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);const t0=Ot("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const DD=Ot("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const BD=Ot("Unplug",[["path",{d:"m19 5 3-3",key:"yk6iyv"}],["path",{d:"m2 22 3-3",key:"19mgm9"}],["path",{d:"M6.3 20.3a2.4 2.4 0 0 0 3.4 0L12 18l-6-6-2.3 2.3a2.4 2.4 0 0 0 0 3.4Z",key:"goz73y"}],["path",{d:"M7.5 13.5 10 11",key:"7xgeeb"}],["path",{d:"M10.5 16.5 13 14",key:"10btkg"}],["path",{d:"m12 6 6 6 2.3-2.3a2.4 2.4 0 0 0 0-3.4l-2.6-2.6a2.4 2.4 0 0 0-3.4 0Z",key:"1snsnr"}]]);const FD=Ot("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const Db=Ot("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const UD=Ot("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Bb="-",VD=t=>{const r=GD(t),{conflictingClassGroups:s,conflictingClassGroupModifiers:o}=t;return{getClassGroupId:h=>{const f=h.split(Bb);return f[0]===""&&f.length!==1&&f.shift(),n0(f,r)||HD(h)},getConflictingClassGroupIds:(h,f)=>{const g=s[h]||[];return f&&o[h]?[...g,...o[h]]:g}}},n0=(t,r)=>{if(t.length===0)return r.classGroupId;const s=t[0],o=r.nextPart.get(s),a=o?n0(t.slice(1),o):void 0;if(a)return a;if(r.validators.length===0)return;const d=t.join(Bb);return r.validators.find(({validator:h})=>h(d))?.classGroupId},mC=/^\[(.+)\]$/,HD=t=>{if(mC.test(t)){const r=mC.exec(t)[1],s=r?.substring(0,r.indexOf(":"));if(s)return"arbitrary.."+s}},GD=t=>{const{theme:r,prefix:s}=t,o={nextPart:new Map,validators:[]};return WD(Object.entries(t.classGroups),s).forEach(([d,h])=>{bT(h,o,d,r)}),o},bT=(t,r,s,o)=>{t.forEach(a=>{if(typeof a=="string"){const d=a===""?r:gC(r,a);d.classGroupId=s;return}if(typeof a=="function"){if(jD(a)){bT(a(o),r,s,o);return}r.validators.push({validator:a,classGroupId:s});return}Object.entries(a).forEach(([d,h])=>{bT(h,gC(r,d),s,o)})})},gC=(t,r)=>{let s=t;return r.split(Bb).forEach(o=>{s.nextPart.has(o)||s.nextPart.set(o,{nextPart:new Map,validators:[]}),s=s.nextPart.get(o)}),s},jD=t=>t.isThemeGetter,WD=(t,r)=>r?t.map(([s,o])=>{const a=o.map(d=>typeof d=="string"?r+d:typeof d=="object"?Object.fromEntries(Object.entries(d).map(([h,f])=>[r+h,f])):d);return[s,a]}):t,zD=t=>{if(t<1)return{get:()=>{},set:()=>{}};let r=0,s=new Map,o=new Map;const a=(d,h)=>{s.set(d,h),r++,r>t&&(r=0,o=s,s=new Map)};return{get(d){let h=s.get(d);if(h!==void 0)return h;if((h=o.get(d))!==void 0)return a(d,h),h},set(d,h){s.has(d)?s.set(d,h):a(d,h)}}},r0="!",KD=t=>{const{separator:r,experimentalParseClassName:s}=t,o=r.length===1,a=r[0],d=r.length,h=f=>{const g=[];let $=0,v=0,y;for(let x=0;x<f.length;x++){let A=f[x];if($===0){if(A===a&&(o||f.slice(x,x+d)===r)){g.push(f.slice(v,x)),v=x+d;continue}if(A==="/"){y=x;continue}}A==="["?$++:A==="]"&&$--}const w=g.length===0?f:f.substring(v),S=w.startsWith(r0),O=S?w.substring(1):w,I=y&&y>v?y-v:void 0;return{modifiers:g,hasImportantModifier:S,baseClassName:O,maybePostfixModifierPosition:I}};return s?f=>s({className:f,parseClassName:h}):h},XD=t=>{if(t.length<=1)return t;const r=[];let s=[];return t.forEach(o=>{o[0]==="["?(r.push(...s.sort(),o),s=[]):s.push(o)}),r.push(...s.sort()),r},YD=t=>({cache:zD(t.cacheSize),parseClassName:KD(t),...VD(t)}),qD=/\s+/,JD=(t,r)=>{const{parseClassName:s,getClassGroupId:o,getConflictingClassGroupIds:a}=r,d=[],h=t.trim().split(qD);let f="";for(let g=h.length-1;g>=0;g-=1){const $=h[g],{modifiers:v,hasImportantModifier:y,baseClassName:w,maybePostfixModifierPosition:S}=s($);let O=!!S,I=o(O?w.substring(0,S):w);if(!I){if(!O){f=$+(f.length>0?" "+f:f);continue}if(I=o(w),!I){f=$+(f.length>0?" "+f:f);continue}O=!1}const x=XD(v).join(":"),A=y?x+r0:x,M=A+I;if(d.includes(M))continue;d.push(M);const P=a(I,O);for(let F=0;F<P.length;++F){const B=P[F];d.push(A+B)}f=$+(f.length>0?" "+f:f)}return f};function QD(){let t=0,r,s,o="";for(;t<arguments.length;)(r=arguments[t++])&&(s=s0(r))&&(o&&(o+=" "),o+=s);return o}const s0=t=>{if(typeof t=="string")return t;let r,s="";for(let o=0;o<t.length;o++)t[o]&&(r=s0(t[o]))&&(s&&(s+=" "),s+=r);return s};function ZD(t,...r){let s,o,a,d=h;function h(g){const $=r.reduce((v,y)=>y(v),t());return s=YD($),o=s.cache.get,a=s.cache.set,d=f,f(g)}function f(g){const $=o(g);if($)return $;const v=JD(g,s);return a(g,v),v}return function(){return d(QD.apply(null,arguments))}}const rn=t=>{const r=s=>s[t]||[];return r.isThemeGetter=!0,r},o0=/^\[(?:([a-z-]+):)?(.+)\]$/i,eB=/^\d+\/\d+$/,tB=new Set(["px","full","screen"]),nB=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,rB=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,sB=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,oB=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,iB=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Gl=t=>np(t)||tB.has(t)||eB.test(t),Wa=t=>$p(t,"length",fB),np=t=>!!t&&!Number.isNaN(Number(t)),Iy=t=>$p(t,"number",np),Rm=t=>!!t&&Number.isInteger(Number(t)),lB=t=>t.endsWith("%")&&np(t.slice(0,-1)),dt=t=>o0.test(t),za=t=>nB.test(t),aB=new Set(["length","size","percentage"]),cB=t=>$p(t,aB,i0),uB=t=>$p(t,"position",i0),dB=new Set(["image","url"]),hB=t=>$p(t,dB,gB),pB=t=>$p(t,"",mB),km=()=>!0,$p=(t,r,s)=>{const o=o0.exec(t);return o?o[1]?typeof r=="string"?o[1]===r:r.has(o[1]):s(o[2]):!1},fB=t=>rB.test(t)&&!sB.test(t),i0=()=>!1,mB=t=>oB.test(t),gB=t=>iB.test(t),$B=()=>{const t=rn("colors"),r=rn("spacing"),s=rn("blur"),o=rn("brightness"),a=rn("borderColor"),d=rn("borderRadius"),h=rn("borderSpacing"),f=rn("borderWidth"),g=rn("contrast"),$=rn("grayscale"),v=rn("hueRotate"),y=rn("invert"),w=rn("gap"),S=rn("gradientColorStops"),O=rn("gradientColorStopPositions"),I=rn("inset"),x=rn("margin"),A=rn("opacity"),M=rn("padding"),P=rn("saturate"),F=rn("scale"),B=rn("sepia"),V=rn("skew"),j=rn("space"),W=rn("translate"),he=()=>["auto","contain","none"],we=()=>["auto","hidden","clip","visible","scroll"],Ee=()=>["auto",dt,r],ye=()=>[dt,r],De=()=>["",Gl,Wa],ce=()=>["auto",np,dt],Oe=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ie=()=>["solid","dashed","dotted","double","none"],pe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],G=()=>["start","end","center","between","around","evenly","stretch"],ee=()=>["","0",dt],$e=()=>["auto","avoid","all","avoid-page","page","left","right","column"],z=()=>[np,dt];return{cacheSize:500,separator:":",theme:{colors:[km],spacing:[Gl,Wa],blur:["none","",za,dt],brightness:z(),borderColor:[t],borderRadius:["none","","full",za,dt],borderSpacing:ye(),borderWidth:De(),contrast:z(),grayscale:ee(),hueRotate:z(),invert:ee(),gap:ye(),gradientColorStops:[t],gradientColorStopPositions:[lB,Wa],inset:Ee(),margin:Ee(),opacity:z(),padding:ye(),saturate:z(),scale:z(),sepia:ee(),skew:z(),space:ye(),translate:ye()},classGroups:{aspect:[{aspect:["auto","square","video",dt]}],container:["container"],columns:[{columns:[za]}],"break-after":[{"break-after":$e()}],"break-before":[{"break-before":$e()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Oe(),dt]}],overflow:[{overflow:we()}],"overflow-x":[{"overflow-x":we()}],"overflow-y":[{"overflow-y":we()}],overscroll:[{overscroll:he()}],"overscroll-x":[{"overscroll-x":he()}],"overscroll-y":[{"overscroll-y":he()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[I]}],"inset-x":[{"inset-x":[I]}],"inset-y":[{"inset-y":[I]}],start:[{start:[I]}],end:[{end:[I]}],top:[{top:[I]}],right:[{right:[I]}],bottom:[{bottom:[I]}],left:[{left:[I]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Rm,dt]}],basis:[{basis:Ee()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",dt]}],grow:[{grow:ee()}],shrink:[{shrink:ee()}],order:[{order:["first","last","none",Rm,dt]}],"grid-cols":[{"grid-cols":[km]}],"col-start-end":[{col:["auto",{span:["full",Rm,dt]},dt]}],"col-start":[{"col-start":ce()}],"col-end":[{"col-end":ce()}],"grid-rows":[{"grid-rows":[km]}],"row-start-end":[{row:["auto",{span:[Rm,dt]},dt]}],"row-start":[{"row-start":ce()}],"row-end":[{"row-end":ce()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",dt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",dt]}],gap:[{gap:[w]}],"gap-x":[{"gap-x":[w]}],"gap-y":[{"gap-y":[w]}],"justify-content":[{justify:["normal",...G()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...G(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...G(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[M]}],px:[{px:[M]}],py:[{py:[M]}],ps:[{ps:[M]}],pe:[{pe:[M]}],pt:[{pt:[M]}],pr:[{pr:[M]}],pb:[{pb:[M]}],pl:[{pl:[M]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[j]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[j]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",dt,r]}],"min-w":[{"min-w":[dt,r,"min","max","fit"]}],"max-w":[{"max-w":[dt,r,"none","full","min","max","fit","prose",{screen:[za]},za]}],h:[{h:[dt,r,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[dt,r,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[dt,r,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[dt,r,"auto","min","max","fit"]}],"font-size":[{text:["base",za,Wa]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Iy]}],"font-family":[{font:[km]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",dt]}],"line-clamp":[{"line-clamp":["none",np,Iy]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Gl,dt]}],"list-image":[{"list-image":["none",dt]}],"list-style-type":[{list:["none","disc","decimal",dt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[A]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[A]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ie(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Gl,Wa]}],"underline-offset":[{"underline-offset":["auto",Gl,dt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:ye()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",dt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",dt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[A]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Oe(),uB]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",cB]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},hB]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[O]}],"gradient-via-pos":[{via:[O]}],"gradient-to-pos":[{to:[O]}],"gradient-from":[{from:[S]}],"gradient-via":[{via:[S]}],"gradient-to":[{to:[S]}],rounded:[{rounded:[d]}],"rounded-s":[{"rounded-s":[d]}],"rounded-e":[{"rounded-e":[d]}],"rounded-t":[{"rounded-t":[d]}],"rounded-r":[{"rounded-r":[d]}],"rounded-b":[{"rounded-b":[d]}],"rounded-l":[{"rounded-l":[d]}],"rounded-ss":[{"rounded-ss":[d]}],"rounded-se":[{"rounded-se":[d]}],"rounded-ee":[{"rounded-ee":[d]}],"rounded-es":[{"rounded-es":[d]}],"rounded-tl":[{"rounded-tl":[d]}],"rounded-tr":[{"rounded-tr":[d]}],"rounded-br":[{"rounded-br":[d]}],"rounded-bl":[{"rounded-bl":[d]}],"border-w":[{border:[f]}],"border-w-x":[{"border-x":[f]}],"border-w-y":[{"border-y":[f]}],"border-w-s":[{"border-s":[f]}],"border-w-e":[{"border-e":[f]}],"border-w-t":[{"border-t":[f]}],"border-w-r":[{"border-r":[f]}],"border-w-b":[{"border-b":[f]}],"border-w-l":[{"border-l":[f]}],"border-opacity":[{"border-opacity":[A]}],"border-style":[{border:[...ie(),"hidden"]}],"divide-x":[{"divide-x":[f]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[f]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[A]}],"divide-style":[{divide:ie()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...ie()]}],"outline-offset":[{"outline-offset":[Gl,dt]}],"outline-w":[{outline:[Gl,Wa]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:De()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[A]}],"ring-offset-w":[{"ring-offset":[Gl,Wa]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",za,pB]}],"shadow-color":[{shadow:[km]}],opacity:[{opacity:[A]}],"mix-blend":[{"mix-blend":[...pe(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":pe()}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[o]}],contrast:[{contrast:[g]}],"drop-shadow":[{"drop-shadow":["","none",za,dt]}],grayscale:[{grayscale:[$]}],"hue-rotate":[{"hue-rotate":[v]}],invert:[{invert:[y]}],saturate:[{saturate:[P]}],sepia:[{sepia:[B]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[o]}],"backdrop-contrast":[{"backdrop-contrast":[g]}],"backdrop-grayscale":[{"backdrop-grayscale":[$]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[v]}],"backdrop-invert":[{"backdrop-invert":[y]}],"backdrop-opacity":[{"backdrop-opacity":[A]}],"backdrop-saturate":[{"backdrop-saturate":[P]}],"backdrop-sepia":[{"backdrop-sepia":[B]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[h]}],"border-spacing-x":[{"border-spacing-x":[h]}],"border-spacing-y":[{"border-spacing-y":[h]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",dt]}],duration:[{duration:z()}],ease:[{ease:["linear","in","out","in-out",dt]}],delay:[{delay:z()}],animate:[{animate:["none","spin","ping","pulse","bounce",dt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[F]}],"scale-x":[{"scale-x":[F]}],"scale-y":[{"scale-y":[F]}],rotate:[{rotate:[Rm,dt]}],"translate-x":[{"translate-x":[W]}],"translate-y":[{"translate-y":[W]}],"skew-x":[{"skew-x":[V]}],"skew-y":[{"skew-y":[V]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",dt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",dt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":ye()}],"scroll-mx":[{"scroll-mx":ye()}],"scroll-my":[{"scroll-my":ye()}],"scroll-ms":[{"scroll-ms":ye()}],"scroll-me":[{"scroll-me":ye()}],"scroll-mt":[{"scroll-mt":ye()}],"scroll-mr":[{"scroll-mr":ye()}],"scroll-mb":[{"scroll-mb":ye()}],"scroll-ml":[{"scroll-ml":ye()}],"scroll-p":[{"scroll-p":ye()}],"scroll-px":[{"scroll-px":ye()}],"scroll-py":[{"scroll-py":ye()}],"scroll-ps":[{"scroll-ps":ye()}],"scroll-pe":[{"scroll-pe":ye()}],"scroll-pt":[{"scroll-pt":ye()}],"scroll-pr":[{"scroll-pr":ye()}],"scroll-pb":[{"scroll-pb":ye()}],"scroll-pl":[{"scroll-pl":ye()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",dt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Gl,Wa,Iy]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},_B=ZD($B);function pt(...t){return _B(Jk(t))}const vB=mD,l0=E.forwardRef(({className:t,...r},s)=>R.jsx(jk,{ref:s,className:pt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...r}));l0.displayName=jk.displayName;const yB=Mb("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),a0=E.forwardRef(({className:t,variant:r,...s},o)=>R.jsx(Wk,{ref:o,className:pt(yB({variant:r}),t),...s}));a0.displayName=Wk.displayName;const TB=E.forwardRef(({className:t,...r},s)=>R.jsx(Xk,{ref:s,className:pt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",t),...r}));TB.displayName=Xk.displayName;const c0=E.forwardRef(({className:t,...r},s)=>R.jsx(Yk,{ref:s,className:pt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...r,children:R.jsx(Db,{className:"h-4 w-4"})}));c0.displayName=Yk.displayName;const u0=E.forwardRef(({className:t,...r},s)=>R.jsx(zk,{ref:s,className:pt("text-sm font-semibold",t),...r}));u0.displayName=zk.displayName;const d0=E.forwardRef(({className:t,...r},s)=>R.jsx(Kk,{ref:s,className:pt("text-sm opacity-90",t),...r}));d0.displayName=Kk.displayName;function bB(){const{toasts:t}=wP();return R.jsxs(vB,{children:[t.map(function({id:r,title:s,description:o,action:a,...d}){return R.jsxs(a0,{...d,children:[R.jsxs("div",{className:"grid gap-1",children:[s&&R.jsx(u0,{children:s}),o&&R.jsx(d0,{children:o})]}),a,R.jsx(c0,{})]},r)}),R.jsx(l0,{})]})}var $C=["light","dark"],EB="(prefers-color-scheme: dark)",wB=E.createContext(void 0),SB={setTheme:t=>{},themes:[]},CB=()=>{var t;return(t=E.useContext(wB))!=null?t:SB};E.memo(({forcedTheme:t,storageKey:r,attribute:s,enableSystem:o,enableColorScheme:a,defaultTheme:d,value:h,attrs:f,nonce:g})=>{let $=d==="system",v=s==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${f.map(O=>`'${O}'`).join(",")})`};`:`var d=document.documentElement,n='${s}',s='setAttribute';`,y=a?$C.includes(d)&&d?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${d}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",w=(O,I=!1,x=!0)=>{let A=h?h[O]:O,M=I?O+"|| ''":`'${A}'`,P="";return a&&x&&!I&&$C.includes(O)&&(P+=`d.style.colorScheme = '${O}';`),s==="class"?I||A?P+=`c.add(${M})`:P+="null":A&&(P+=`d[s](n,${M})`),P},S=t?`!function(){${v}${w(t)}}()`:o?`!function(){try{${v}var e=localStorage.getItem('${r}');if('system'===e||(!e&&${$})){var t='${EB}',m=window.matchMedia(t);if(m.media!==t||m.matches){${w("dark")}}else{${w("light")}}}else if(e){${h?`var x=${JSON.stringify(h)};`:""}${w(h?"x[e]":"e",!0)}}${$?"":"else{"+w(d,!1,!1)+"}"}${y}}catch(e){}}()`:`!function(){try{${v}var e=localStorage.getItem('${r}');if(e){${h?`var x=${JSON.stringify(h)};`:""}${w(h?"x[e]":"e",!0)}}else{${w(d,!1,!1)};}${y}}catch(t){}}();`;return E.createElement("script",{nonce:g,dangerouslySetInnerHTML:{__html:S}})});var IB=t=>{switch(t){case"success":return xB;case"info":return AB;case"warning":return OB;case"error":return NB;default:return null}},RB=Array(12).fill(0),kB=({visible:t,className:r})=>Ne.createElement("div",{className:["sonner-loading-wrapper",r].filter(Boolean).join(" "),"data-visible":t},Ne.createElement("div",{className:"sonner-spinner"},RB.map((s,o)=>Ne.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${o}`})))),xB=Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ne.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),OB=Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Ne.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),AB=Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ne.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),NB=Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ne.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),LB=Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Ne.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Ne.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),MB=()=>{let[t,r]=Ne.useState(document.hidden);return Ne.useEffect(()=>{let s=()=>{r(document.hidden)};return document.addEventListener("visibilitychange",s),()=>window.removeEventListener("visibilitychange",s)},[]),t},ET=1,PB=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;let{message:s,...o}=t,a=typeof t?.id=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:ET++,d=this.toasts.find(f=>f.id===a),h=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),d?this.toasts=this.toasts.map(f=>f.id===a?(this.publish({...f,...t,id:a,title:s}),{...f,...t,id:a,dismissible:h,title:s}):f):this.addToast({title:s,...o,dismissible:h,id:a}),a},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(r=>{this.subscribers.forEach(s=>s({id:r.id,dismiss:!0}))}),this.subscribers.forEach(r=>r({id:t,dismiss:!0})),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let s;r.loading!==void 0&&(s=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));let o=t instanceof Promise?t:t(),a=s!==void 0,d,h=o.then(async g=>{if(d=["resolve",g],Ne.isValidElement(g))a=!1,this.create({id:s,type:"default",message:g});else if(BB(g)&&!g.ok){a=!1;let $=typeof r.error=="function"?await r.error(`HTTP error! status: ${g.status}`):r.error,v=typeof r.description=="function"?await r.description(`HTTP error! status: ${g.status}`):r.description;this.create({id:s,type:"error",message:$,description:v})}else if(r.success!==void 0){a=!1;let $=typeof r.success=="function"?await r.success(g):r.success,v=typeof r.description=="function"?await r.description(g):r.description;this.create({id:s,type:"success",message:$,description:v})}}).catch(async g=>{if(d=["reject",g],r.error!==void 0){a=!1;let $=typeof r.error=="function"?await r.error(g):r.error,v=typeof r.description=="function"?await r.description(g):r.description;this.create({id:s,type:"error",message:$,description:v})}}).finally(()=>{var g;a&&(this.dismiss(s),s=void 0),(g=r.finally)==null||g.call(r)}),f=()=>new Promise((g,$)=>h.then(()=>d[0]==="reject"?$(d[1]):g(d[1])).catch($));return typeof s!="string"&&typeof s!="number"?{unwrap:f}:Object.assign(s,{unwrap:f})},this.custom=(t,r)=>{let s=r?.id||ET++;return this.create({jsx:t(s),id:s,...r}),s},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},hs=new PB,DB=(t,r)=>{let s=r?.id||ET++;return hs.addToast({title:t,...r,id:s}),s},BB=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",FB=DB,UB=()=>hs.toasts,VB=()=>hs.getActiveToasts(),Xn=Object.assign(FB,{success:hs.success,info:hs.info,warning:hs.warning,error:hs.error,custom:hs.custom,message:hs.message,promise:hs.promise,dismiss:hs.dismiss,loading:hs.loading},{getHistory:UB,getToasts:VB});function HB(t,{insertAt:r}={}){if(typeof document>"u")return;let s=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",r==="top"&&s.firstChild?s.insertBefore(o,s.firstChild):s.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}HB(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function R$(t){return t.label!==void 0}var GB=3,jB="32px",WB="16px",_C=4e3,zB=356,KB=14,XB=20,YB=200;function jo(...t){return t.filter(Boolean).join(" ")}function qB(t){let[r,s]=t.split("-"),o=[];return r&&o.push(r),s&&o.push(s),o}var JB=t=>{var r,s,o,a,d,h,f,g,$,v,y;let{invert:w,toast:S,unstyled:O,interacting:I,setHeights:x,visibleToasts:A,heights:M,index:P,toasts:F,expanded:B,removeToast:V,defaultRichColors:j,closeButton:W,style:he,cancelButtonStyle:we,actionButtonStyle:Ee,className:ye="",descriptionClassName:De="",duration:ce,position:Oe,gap:ie,loadingIcon:pe,expandByDefault:G,classNames:ee,icons:$e,closeButtonAriaLabel:z="Close toast",pauseWhenPageIsHidden:se}=t,[ae,ne]=Ne.useState(null),[me,fe]=Ne.useState(null),[te,Se]=Ne.useState(!1),[Le,He]=Ne.useState(!1),[tt,ct]=Ne.useState(!1),[nt,Rt]=Ne.useState(!1),[Wt,Mt]=Ne.useState(!1),[wn,At]=Ne.useState(0),[Yr,je]=Ne.useState(0),at=Ne.useRef(S.duration||ce||_C),ft=Ne.useRef(null),kn=Ne.useRef(null),or=P===0,fs=P+1<=A,hn=S.type,zt=S.dismissible!==!1,Yn=S.className||"",ti=S.descriptionClassName||"",ue=Ne.useMemo(()=>M.findIndex(it=>it.toastId===S.id)||0,[M,S.id]),Ge=Ne.useMemo(()=>{var it;return(it=S.closeButton)!=null?it:W},[S.closeButton,W]),k=Ne.useMemo(()=>S.duration||ce||_C,[S.duration,ce]),D=Ne.useRef(0),q=Ne.useRef(0),Q=Ne.useRef(0),xe=Ne.useRef(null),[kt,qn]=Oe.split("-"),qr=Ne.useMemo(()=>M.reduce((it,yt,gt)=>gt>=ue?it:it+yt.height,0),[M,ue]),ni=MB(),Jr=S.invert||w,xr=hn==="loading";q.current=Ne.useMemo(()=>ue*ie+qr,[ue,qr]),Ne.useEffect(()=>{at.current=k},[k]),Ne.useEffect(()=>{Se(!0)},[]),Ne.useEffect(()=>{let it=kn.current;if(it){let yt=it.getBoundingClientRect().height;return je(yt),x(gt=>[{toastId:S.id,height:yt,position:S.position},...gt]),()=>x(gt=>gt.filter(on=>on.toastId!==S.id))}},[x,S.id]),Ne.useLayoutEffect(()=>{if(!te)return;let it=kn.current,yt=it.style.height;it.style.height="auto";let gt=it.getBoundingClientRect().height;it.style.height=yt,je(gt),x(on=>on.find(Jn=>Jn.toastId===S.id)?on.map(Jn=>Jn.toastId===S.id?{...Jn,height:gt}:Jn):[{toastId:S.id,height:gt,position:S.position},...on])},[te,S.title,S.description,x,S.id]);let _r=Ne.useCallback(()=>{He(!0),At(q.current),x(it=>it.filter(yt=>yt.toastId!==S.id)),setTimeout(()=>{V(S)},YB)},[S,V,x,q]);Ne.useEffect(()=>{if(S.promise&&hn==="loading"||S.duration===1/0||S.type==="loading")return;let it;return B||I||se&&ni?(()=>{if(Q.current<D.current){let yt=new Date().getTime()-D.current;at.current=at.current-yt}Q.current=new Date().getTime()})():at.current!==1/0&&(D.current=new Date().getTime(),it=setTimeout(()=>{var yt;(yt=S.onAutoClose)==null||yt.call(S,S),_r()},at.current)),()=>clearTimeout(it)},[B,I,S,hn,se,ni,_r]),Ne.useEffect(()=>{S.delete&&_r()},[_r,S.delete]);function ri(){var it,yt,gt;return $e!=null&&$e.loading?Ne.createElement("div",{className:jo(ee?.loader,(it=S?.classNames)==null?void 0:it.loader,"sonner-loader"),"data-visible":hn==="loading"},$e.loading):pe?Ne.createElement("div",{className:jo(ee?.loader,(yt=S?.classNames)==null?void 0:yt.loader,"sonner-loader"),"data-visible":hn==="loading"},pe):Ne.createElement(kB,{className:jo(ee?.loader,(gt=S?.classNames)==null?void 0:gt.loader),visible:hn==="loading"})}return Ne.createElement("li",{tabIndex:0,ref:kn,className:jo(ye,Yn,ee?.toast,(r=S?.classNames)==null?void 0:r.toast,ee?.default,ee?.[hn],(s=S?.classNames)==null?void 0:s[hn]),"data-sonner-toast":"","data-rich-colors":(o=S.richColors)!=null?o:j,"data-styled":!(S.jsx||S.unstyled||O),"data-mounted":te,"data-promise":!!S.promise,"data-swiped":Wt,"data-removed":Le,"data-visible":fs,"data-y-position":kt,"data-x-position":qn,"data-index":P,"data-front":or,"data-swiping":tt,"data-dismissible":zt,"data-type":hn,"data-invert":Jr,"data-swipe-out":nt,"data-swipe-direction":me,"data-expanded":!!(B||G&&te),style:{"--index":P,"--toasts-before":P,"--z-index":F.length-P,"--offset":`${Le?wn:q.current}px`,"--initial-height":G?"auto":`${Yr}px`,...he,...S.style},onDragEnd:()=>{ct(!1),ne(null),xe.current=null},onPointerDown:it=>{xr||!zt||(ft.current=new Date,At(q.current),it.target.setPointerCapture(it.pointerId),it.target.tagName!=="BUTTON"&&(ct(!0),xe.current={x:it.clientX,y:it.clientY}))},onPointerUp:()=>{var it,yt,gt,on;if(nt||!zt)return;xe.current=null;let Jn=Number(((it=kn.current)==null?void 0:it.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Qn=Number(((yt=kn.current)==null?void 0:yt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Qr=new Date().getTime()-((gt=ft.current)==null?void 0:gt.getTime()),Sn=ae==="x"?Jn:Qn,vr=Math.abs(Sn)/Qr;if(Math.abs(Sn)>=XB||vr>.11){At(q.current),(on=S.onDismiss)==null||on.call(S,S),fe(ae==="x"?Jn>0?"right":"left":Qn>0?"down":"up"),_r(),Rt(!0),Mt(!1);return}ct(!1),ne(null)},onPointerMove:it=>{var yt,gt,on,Jn;if(!xe.current||!zt||((yt=window.getSelection())==null?void 0:yt.toString().length)>0)return;let Qn=it.clientY-xe.current.y,Qr=it.clientX-xe.current.x,Sn=(gt=t.swipeDirections)!=null?gt:qB(Oe);!ae&&(Math.abs(Qr)>1||Math.abs(Qn)>1)&&ne(Math.abs(Qr)>Math.abs(Qn)?"x":"y");let vr={x:0,y:0};ae==="y"?(Sn.includes("top")||Sn.includes("bottom"))&&(Sn.includes("top")&&Qn<0||Sn.includes("bottom")&&Qn>0)&&(vr.y=Qn):ae==="x"&&(Sn.includes("left")||Sn.includes("right"))&&(Sn.includes("left")&&Qr<0||Sn.includes("right")&&Qr>0)&&(vr.x=Qr),(Math.abs(vr.x)>0||Math.abs(vr.y)>0)&&Mt(!0),(on=kn.current)==null||on.style.setProperty("--swipe-amount-x",`${vr.x}px`),(Jn=kn.current)==null||Jn.style.setProperty("--swipe-amount-y",`${vr.y}px`)}},Ge&&!S.jsx?Ne.createElement("button",{"aria-label":z,"data-disabled":xr,"data-close-button":!0,onClick:xr||!zt?()=>{}:()=>{var it;_r(),(it=S.onDismiss)==null||it.call(S,S)},className:jo(ee?.closeButton,(a=S?.classNames)==null?void 0:a.closeButton)},(d=$e?.close)!=null?d:LB):null,S.jsx||E.isValidElement(S.title)?S.jsx?S.jsx:typeof S.title=="function"?S.title():S.title:Ne.createElement(Ne.Fragment,null,hn||S.icon||S.promise?Ne.createElement("div",{"data-icon":"",className:jo(ee?.icon,(h=S?.classNames)==null?void 0:h.icon)},S.promise||S.type==="loading"&&!S.icon?S.icon||ri():null,S.type!=="loading"?S.icon||$e?.[hn]||IB(hn):null):null,Ne.createElement("div",{"data-content":"",className:jo(ee?.content,(f=S?.classNames)==null?void 0:f.content)},Ne.createElement("div",{"data-title":"",className:jo(ee?.title,(g=S?.classNames)==null?void 0:g.title)},typeof S.title=="function"?S.title():S.title),S.description?Ne.createElement("div",{"data-description":"",className:jo(De,ti,ee?.description,($=S?.classNames)==null?void 0:$.description)},typeof S.description=="function"?S.description():S.description):null),E.isValidElement(S.cancel)?S.cancel:S.cancel&&R$(S.cancel)?Ne.createElement("button",{"data-button":!0,"data-cancel":!0,style:S.cancelButtonStyle||we,onClick:it=>{var yt,gt;R$(S.cancel)&&zt&&((gt=(yt=S.cancel).onClick)==null||gt.call(yt,it),_r())},className:jo(ee?.cancelButton,(v=S?.classNames)==null?void 0:v.cancelButton)},S.cancel.label):null,E.isValidElement(S.action)?S.action:S.action&&R$(S.action)?Ne.createElement("button",{"data-button":!0,"data-action":!0,style:S.actionButtonStyle||Ee,onClick:it=>{var yt,gt;R$(S.action)&&((gt=(yt=S.action).onClick)==null||gt.call(yt,it),!it.defaultPrevented&&_r())},className:jo(ee?.actionButton,(y=S?.classNames)==null?void 0:y.actionButton)},S.action.label):null))};function vC(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function QB(t,r){let s={};return[t,r].forEach((o,a)=>{let d=a===1,h=d?"--mobile-offset":"--offset",f=d?WB:jB;function g($){["top","right","bottom","left"].forEach(v=>{s[`${h}-${v}`]=typeof $=="number"?`${$}px`:$})}typeof o=="number"||typeof o=="string"?g(o):typeof o=="object"?["top","right","bottom","left"].forEach($=>{o[$]===void 0?s[`${h}-${$}`]=f:s[`${h}-${$}`]=typeof o[$]=="number"?`${o[$]}px`:o[$]}):g(f)}),s}var ZB=E.forwardRef(function(t,r){let{invert:s,position:o="bottom-right",hotkey:a=["altKey","KeyT"],expand:d,closeButton:h,className:f,offset:g,mobileOffset:$,theme:v="light",richColors:y,duration:w,style:S,visibleToasts:O=GB,toastOptions:I,dir:x=vC(),gap:A=KB,loadingIcon:M,icons:P,containerAriaLabel:F="Notifications",pauseWhenPageIsHidden:B}=t,[V,j]=Ne.useState([]),W=Ne.useMemo(()=>Array.from(new Set([o].concat(V.filter(se=>se.position).map(se=>se.position)))),[V,o]),[he,we]=Ne.useState([]),[Ee,ye]=Ne.useState(!1),[De,ce]=Ne.useState(!1),[Oe,ie]=Ne.useState(v!=="system"?v:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),pe=Ne.useRef(null),G=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),ee=Ne.useRef(null),$e=Ne.useRef(!1),z=Ne.useCallback(se=>{j(ae=>{var ne;return(ne=ae.find(me=>me.id===se.id))!=null&&ne.delete||hs.dismiss(se.id),ae.filter(({id:me})=>me!==se.id)})},[]);return Ne.useEffect(()=>hs.subscribe(se=>{if(se.dismiss){j(ae=>ae.map(ne=>ne.id===se.id?{...ne,delete:!0}:ne));return}setTimeout(()=>{Sk.flushSync(()=>{j(ae=>{let ne=ae.findIndex(me=>me.id===se.id);return ne!==-1?[...ae.slice(0,ne),{...ae[ne],...se},...ae.slice(ne+1)]:[se,...ae]})})})}),[]),Ne.useEffect(()=>{if(v!=="system"){ie(v);return}if(v==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ie("dark"):ie("light")),typeof window>"u")return;let se=window.matchMedia("(prefers-color-scheme: dark)");try{se.addEventListener("change",({matches:ae})=>{ie(ae?"dark":"light")})}catch{se.addListener(({matches:ne})=>{try{ie(ne?"dark":"light")}catch(me){console.error(me)}})}},[v]),Ne.useEffect(()=>{V.length<=1&&ye(!1)},[V]),Ne.useEffect(()=>{let se=ae=>{var ne,me;a.every(fe=>ae[fe]||ae.code===fe)&&(ye(!0),(ne=pe.current)==null||ne.focus()),ae.code==="Escape"&&(document.activeElement===pe.current||(me=pe.current)!=null&&me.contains(document.activeElement))&&ye(!1)};return document.addEventListener("keydown",se),()=>document.removeEventListener("keydown",se)},[a]),Ne.useEffect(()=>{if(pe.current)return()=>{ee.current&&(ee.current.focus({preventScroll:!0}),ee.current=null,$e.current=!1)}},[pe.current]),Ne.createElement("section",{ref:r,"aria-label":`${F} ${G}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},W.map((se,ae)=>{var ne;let[me,fe]=se.split("-");return V.length?Ne.createElement("ol",{key:se,dir:x==="auto"?vC():x,tabIndex:-1,ref:pe,className:f,"data-sonner-toaster":!0,"data-theme":Oe,"data-y-position":me,"data-lifted":Ee&&V.length>1&&!d,"data-x-position":fe,style:{"--front-toast-height":`${((ne=he[0])==null?void 0:ne.height)||0}px`,"--width":`${zB}px`,"--gap":`${A}px`,...S,...QB(g,$)},onBlur:te=>{$e.current&&!te.currentTarget.contains(te.relatedTarget)&&($e.current=!1,ee.current&&(ee.current.focus({preventScroll:!0}),ee.current=null))},onFocus:te=>{te.target instanceof HTMLElement&&te.target.dataset.dismissible==="false"||$e.current||($e.current=!0,ee.current=te.relatedTarget)},onMouseEnter:()=>ye(!0),onMouseMove:()=>ye(!0),onMouseLeave:()=>{De||ye(!1)},onDragEnd:()=>ye(!1),onPointerDown:te=>{te.target instanceof HTMLElement&&te.target.dataset.dismissible==="false"||ce(!0)},onPointerUp:()=>ce(!1)},V.filter(te=>!te.position&&ae===0||te.position===se).map((te,Se)=>{var Le,He;return Ne.createElement(JB,{key:te.id,icons:P,index:Se,toast:te,defaultRichColors:y,duration:(Le=I?.duration)!=null?Le:w,className:I?.className,descriptionClassName:I?.descriptionClassName,invert:s,visibleToasts:O,closeButton:(He=I?.closeButton)!=null?He:h,interacting:De,position:se,style:I?.style,unstyled:I?.unstyled,classNames:I?.classNames,cancelButtonStyle:I?.cancelButtonStyle,actionButtonStyle:I?.actionButtonStyle,removeToast:z,toasts:V.filter(tt=>tt.position==te.position),heights:he.filter(tt=>tt.position==te.position),setHeights:we,expandByDefault:d,gap:A,loadingIcon:M,expanded:Ee,pauseWhenPageIsHidden:B,swipeDirections:t.swipeDirections})})):null}))});const e1=({...t})=>{const{theme:r="system"}=CB();return R.jsx(ZB,{theme:r,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var t1=N_[" useId ".trim().toString()]||(()=>{}),n1=0;function Ui(t){const[r,s]=E.useState(t1());return sr(()=>{s(o=>o??String(n1++))},[t]),r?`radix-${r}`:""}const r1=["top","right","bottom","left"],Za=Math.min,Ps=Math.max,i_=Math.round,k$=Math.floor,Vi=t=>({x:t,y:t}),s1={left:"right",right:"left",bottom:"top",top:"bottom"},o1={start:"end",end:"start"};function wT(t,r,s){return Ps(t,Za(r,s))}function Xl(t,r){return typeof t=="function"?t(r):t}function Yl(t){return t.split("-")[0]}function _p(t){return t.split("-")[1]}function Fb(t){return t==="x"?"y":"x"}function Ub(t){return t==="y"?"height":"width"}const i1=new Set(["top","bottom"]);function Fi(t){return i1.has(Yl(t))?"y":"x"}function Vb(t){return Fb(Fi(t))}function l1(t,r,s){s===void 0&&(s=!1);const o=_p(t),a=Vb(t),d=Ub(a);let h=a==="x"?o===(s?"end":"start")?"right":"left":o==="start"?"bottom":"top";return r.reference[d]>r.floating[d]&&(h=l_(h)),[h,l_(h)]}function a1(t){const r=l_(t);return[ST(t),r,ST(r)]}function ST(t){return t.replace(/start|end/g,r=>o1[r])}const yC=["left","right"],TC=["right","left"],c1=["top","bottom"],u1=["bottom","top"];function d1(t,r,s){switch(t){case"top":case"bottom":return s?r?TC:yC:r?yC:TC;case"left":case"right":return r?c1:u1;default:return[]}}function h1(t,r,s,o){const a=_p(t);let d=d1(Yl(t),s==="start",o);return a&&(d=d.map(h=>h+"-"+a),r&&(d=d.concat(d.map(ST)))),d}function l_(t){return t.replace(/left|right|bottom|top/g,r=>s1[r])}function p1(t){return{top:0,right:0,bottom:0,left:0,...t}}function h0(t){return typeof t!="number"?p1(t):{top:t,right:t,bottom:t,left:t}}function a_(t){const{x:r,y:s,width:o,height:a}=t;return{width:o,height:a,top:s,left:r,right:r+o,bottom:s+a,x:r,y:s}}function bC(t,r,s){let{reference:o,floating:a}=t;const d=Fi(r),h=Vb(r),f=Ub(h),g=Yl(r),$=d==="y",v=o.x+o.width/2-a.width/2,y=o.y+o.height/2-a.height/2,w=o[f]/2-a[f]/2;let S;switch(g){case"top":S={x:v,y:o.y-a.height};break;case"bottom":S={x:v,y:o.y+o.height};break;case"right":S={x:o.x+o.width,y};break;case"left":S={x:o.x-a.width,y};break;default:S={x:o.x,y:o.y}}switch(_p(r)){case"start":S[h]-=w*(s&&$?-1:1);break;case"end":S[h]+=w*(s&&$?-1:1);break}return S}const f1=async(t,r,s)=>{const{placement:o="bottom",strategy:a="absolute",middleware:d=[],platform:h}=s,f=d.filter(Boolean),g=await(h.isRTL==null?void 0:h.isRTL(r));let $=await h.getElementRects({reference:t,floating:r,strategy:a}),{x:v,y}=bC($,o,g),w=o,S={},O=0;for(let I=0;I<f.length;I++){const{name:x,fn:A}=f[I],{x:M,y:P,data:F,reset:B}=await A({x:v,y,initialPlacement:o,placement:w,strategy:a,middlewareData:S,rects:$,platform:h,elements:{reference:t,floating:r}});v=M??v,y=P??y,S={...S,[x]:{...S[x],...F}},B&&O<=50&&(O++,typeof B=="object"&&(B.placement&&(w=B.placement),B.rects&&($=B.rects===!0?await h.getElementRects({reference:t,floating:r,strategy:a}):B.rects),{x:v,y}=bC($,w,g)),I=-1)}return{x:v,y,placement:w,strategy:a,middlewareData:S}};async function Xm(t,r){var s;r===void 0&&(r={});const{x:o,y:a,platform:d,rects:h,elements:f,strategy:g}=t,{boundary:$="clippingAncestors",rootBoundary:v="viewport",elementContext:y="floating",altBoundary:w=!1,padding:S=0}=Xl(r,t),O=h0(S),x=f[w?y==="floating"?"reference":"floating":y],A=a_(await d.getClippingRect({element:(s=await(d.isElement==null?void 0:d.isElement(x)))==null||s?x:x.contextElement||await(d.getDocumentElement==null?void 0:d.getDocumentElement(f.floating)),boundary:$,rootBoundary:v,strategy:g})),M=y==="floating"?{x:o,y:a,width:h.floating.width,height:h.floating.height}:h.reference,P=await(d.getOffsetParent==null?void 0:d.getOffsetParent(f.floating)),F=await(d.isElement==null?void 0:d.isElement(P))?await(d.getScale==null?void 0:d.getScale(P))||{x:1,y:1}:{x:1,y:1},B=a_(d.convertOffsetParentRelativeRectToViewportRelativeRect?await d.convertOffsetParentRelativeRectToViewportRelativeRect({elements:f,rect:M,offsetParent:P,strategy:g}):M);return{top:(A.top-B.top+O.top)/F.y,bottom:(B.bottom-A.bottom+O.bottom)/F.y,left:(A.left-B.left+O.left)/F.x,right:(B.right-A.right+O.right)/F.x}}const m1=t=>({name:"arrow",options:t,async fn(r){const{x:s,y:o,placement:a,rects:d,platform:h,elements:f,middlewareData:g}=r,{element:$,padding:v=0}=Xl(t,r)||{};if($==null)return{};const y=h0(v),w={x:s,y:o},S=Vb(a),O=Ub(S),I=await h.getDimensions($),x=S==="y",A=x?"top":"left",M=x?"bottom":"right",P=x?"clientHeight":"clientWidth",F=d.reference[O]+d.reference[S]-w[S]-d.floating[O],B=w[S]-d.reference[S],V=await(h.getOffsetParent==null?void 0:h.getOffsetParent($));let j=V?V[P]:0;(!j||!await(h.isElement==null?void 0:h.isElement(V)))&&(j=f.floating[P]||d.floating[O]);const W=F/2-B/2,he=j/2-I[O]/2-1,we=Za(y[A],he),Ee=Za(y[M],he),ye=we,De=j-I[O]-Ee,ce=j/2-I[O]/2+W,Oe=wT(ye,ce,De),ie=!g.arrow&&_p(a)!=null&&ce!==Oe&&d.reference[O]/2-(ce<ye?we:Ee)-I[O]/2<0,pe=ie?ce<ye?ce-ye:ce-De:0;return{[S]:w[S]+pe,data:{[S]:Oe,centerOffset:ce-Oe-pe,...ie&&{alignmentOffset:pe}},reset:ie}}}),g1=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(r){var s,o;const{placement:a,middlewareData:d,rects:h,initialPlacement:f,platform:g,elements:$}=r,{mainAxis:v=!0,crossAxis:y=!0,fallbackPlacements:w,fallbackStrategy:S="bestFit",fallbackAxisSideDirection:O="none",flipAlignment:I=!0,...x}=Xl(t,r);if((s=d.arrow)!=null&&s.alignmentOffset)return{};const A=Yl(a),M=Fi(f),P=Yl(f)===f,F=await(g.isRTL==null?void 0:g.isRTL($.floating)),B=w||(P||!I?[l_(f)]:a1(f)),V=O!=="none";!w&&V&&B.push(...h1(f,I,O,F));const j=[f,...B],W=await Xm(r,x),he=[];let we=((o=d.flip)==null?void 0:o.overflows)||[];if(v&&he.push(W[A]),y){const ce=l1(a,h,F);he.push(W[ce[0]],W[ce[1]])}if(we=[...we,{placement:a,overflows:he}],!he.every(ce=>ce<=0)){var Ee,ye;const ce=(((Ee=d.flip)==null?void 0:Ee.index)||0)+1,Oe=j[ce];if(Oe&&(!(y==="alignment"?M!==Fi(Oe):!1)||we.every(G=>G.overflows[0]>0&&Fi(G.placement)===M)))return{data:{index:ce,overflows:we},reset:{placement:Oe}};let ie=(ye=we.filter(pe=>pe.overflows[0]<=0).sort((pe,G)=>pe.overflows[1]-G.overflows[1])[0])==null?void 0:ye.placement;if(!ie)switch(S){case"bestFit":{var De;const pe=(De=we.filter(G=>{if(V){const ee=Fi(G.placement);return ee===M||ee==="y"}return!0}).map(G=>[G.placement,G.overflows.filter(ee=>ee>0).reduce((ee,$e)=>ee+$e,0)]).sort((G,ee)=>G[1]-ee[1])[0])==null?void 0:De[0];pe&&(ie=pe);break}case"initialPlacement":ie=f;break}if(a!==ie)return{reset:{placement:ie}}}return{}}}};function EC(t,r){return{top:t.top-r.height,right:t.right-r.width,bottom:t.bottom-r.height,left:t.left-r.width}}function wC(t){return r1.some(r=>t[r]>=0)}const $1=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(r){const{rects:s}=r,{strategy:o="referenceHidden",...a}=Xl(t,r);switch(o){case"referenceHidden":{const d=await Xm(r,{...a,elementContext:"reference"}),h=EC(d,s.reference);return{data:{referenceHiddenOffsets:h,referenceHidden:wC(h)}}}case"escaped":{const d=await Xm(r,{...a,altBoundary:!0}),h=EC(d,s.floating);return{data:{escapedOffsets:h,escaped:wC(h)}}}default:return{}}}}},p0=new Set(["left","top"]);async function _1(t,r){const{placement:s,platform:o,elements:a}=t,d=await(o.isRTL==null?void 0:o.isRTL(a.floating)),h=Yl(s),f=_p(s),g=Fi(s)==="y",$=p0.has(h)?-1:1,v=d&&g?-1:1,y=Xl(r,t);let{mainAxis:w,crossAxis:S,alignmentAxis:O}=typeof y=="number"?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:y.mainAxis||0,crossAxis:y.crossAxis||0,alignmentAxis:y.alignmentAxis};return f&&typeof O=="number"&&(S=f==="end"?O*-1:O),g?{x:S*v,y:w*$}:{x:w*$,y:S*v}}const v1=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(r){var s,o;const{x:a,y:d,placement:h,middlewareData:f}=r,g=await _1(r,t);return h===((s=f.offset)==null?void 0:s.placement)&&(o=f.arrow)!=null&&o.alignmentOffset?{}:{x:a+g.x,y:d+g.y,data:{...g,placement:h}}}}},y1=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(r){const{x:s,y:o,placement:a}=r,{mainAxis:d=!0,crossAxis:h=!1,limiter:f={fn:x=>{let{x:A,y:M}=x;return{x:A,y:M}}},...g}=Xl(t,r),$={x:s,y:o},v=await Xm(r,g),y=Fi(Yl(a)),w=Fb(y);let S=$[w],O=$[y];if(d){const x=w==="y"?"top":"left",A=w==="y"?"bottom":"right",M=S+v[x],P=S-v[A];S=wT(M,S,P)}if(h){const x=y==="y"?"top":"left",A=y==="y"?"bottom":"right",M=O+v[x],P=O-v[A];O=wT(M,O,P)}const I=f.fn({...r,[w]:S,[y]:O});return{...I,data:{x:I.x-s,y:I.y-o,enabled:{[w]:d,[y]:h}}}}}},T1=function(t){return t===void 0&&(t={}),{options:t,fn(r){const{x:s,y:o,placement:a,rects:d,middlewareData:h}=r,{offset:f=0,mainAxis:g=!0,crossAxis:$=!0}=Xl(t,r),v={x:s,y:o},y=Fi(a),w=Fb(y);let S=v[w],O=v[y];const I=Xl(f,r),x=typeof I=="number"?{mainAxis:I,crossAxis:0}:{mainAxis:0,crossAxis:0,...I};if(g){const P=w==="y"?"height":"width",F=d.reference[w]-d.floating[P]+x.mainAxis,B=d.reference[w]+d.reference[P]-x.mainAxis;S<F?S=F:S>B&&(S=B)}if($){var A,M;const P=w==="y"?"width":"height",F=p0.has(Yl(a)),B=d.reference[y]-d.floating[P]+(F&&((A=h.offset)==null?void 0:A[y])||0)+(F?0:x.crossAxis),V=d.reference[y]+d.reference[P]+(F?0:((M=h.offset)==null?void 0:M[y])||0)-(F?x.crossAxis:0);O<B?O=B:O>V&&(O=V)}return{[w]:S,[y]:O}}}},b1=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(r){var s,o;const{placement:a,rects:d,platform:h,elements:f}=r,{apply:g=()=>{},...$}=Xl(t,r),v=await Xm(r,$),y=Yl(a),w=_p(a),S=Fi(a)==="y",{width:O,height:I}=d.floating;let x,A;y==="top"||y==="bottom"?(x=y,A=w===(await(h.isRTL==null?void 0:h.isRTL(f.floating))?"start":"end")?"left":"right"):(A=y,x=w==="end"?"top":"bottom");const M=I-v.top-v.bottom,P=O-v.left-v.right,F=Za(I-v[x],M),B=Za(O-v[A],P),V=!r.middlewareData.shift;let j=F,W=B;if((s=r.middlewareData.shift)!=null&&s.enabled.x&&(W=P),(o=r.middlewareData.shift)!=null&&o.enabled.y&&(j=M),V&&!w){const we=Ps(v.left,0),Ee=Ps(v.right,0),ye=Ps(v.top,0),De=Ps(v.bottom,0);S?W=O-2*(we!==0||Ee!==0?we+Ee:Ps(v.left,v.right)):j=I-2*(ye!==0||De!==0?ye+De:Ps(v.top,v.bottom))}await g({...r,availableWidth:W,availableHeight:j});const he=await h.getDimensions(f.floating);return O!==he.width||I!==he.height?{reset:{rects:!0}}:{}}}};function B_(){return typeof window<"u"}function vp(t){return f0(t)?(t.nodeName||"").toLowerCase():"#document"}function Fs(t){var r;return(t==null||(r=t.ownerDocument)==null?void 0:r.defaultView)||window}function Wi(t){var r;return(r=(f0(t)?t.ownerDocument:t.document)||window.document)==null?void 0:r.documentElement}function f0(t){return B_()?t instanceof Node||t instanceof Fs(t).Node:!1}function Qo(t){return B_()?t instanceof Element||t instanceof Fs(t).Element:!1}function ji(t){return B_()?t instanceof HTMLElement||t instanceof Fs(t).HTMLElement:!1}function SC(t){return!B_()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Fs(t).ShadowRoot}const E1=new Set(["inline","contents"]);function mg(t){const{overflow:r,overflowX:s,overflowY:o,display:a}=Zo(t);return/auto|scroll|overlay|hidden|clip/.test(r+o+s)&&!E1.has(a)}const w1=new Set(["table","td","th"]);function S1(t){return w1.has(vp(t))}const C1=[":popover-open",":modal"];function F_(t){return C1.some(r=>{try{return t.matches(r)}catch{return!1}})}const I1=["transform","translate","scale","rotate","perspective"],R1=["transform","translate","scale","rotate","perspective","filter"],k1=["paint","layout","strict","content"];function Hb(t){const r=Gb(),s=Qo(t)?Zo(t):t;return I1.some(o=>s[o]?s[o]!=="none":!1)||(s.containerType?s.containerType!=="normal":!1)||!r&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!r&&(s.filter?s.filter!=="none":!1)||R1.some(o=>(s.willChange||"").includes(o))||k1.some(o=>(s.contain||"").includes(o))}function x1(t){let r=ec(t);for(;ji(r)&&!cp(r);){if(Hb(r))return r;if(F_(r))return null;r=ec(r)}return null}function Gb(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const O1=new Set(["html","body","#document"]);function cp(t){return O1.has(vp(t))}function Zo(t){return Fs(t).getComputedStyle(t)}function U_(t){return Qo(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ec(t){if(vp(t)==="html")return t;const r=t.assignedSlot||t.parentNode||SC(t)&&t.host||Wi(t);return SC(r)?r.host:r}function m0(t){const r=ec(t);return cp(r)?t.ownerDocument?t.ownerDocument.body:t.body:ji(r)&&mg(r)?r:m0(r)}function Ym(t,r,s){var o;r===void 0&&(r=[]),s===void 0&&(s=!0);const a=m0(t),d=a===((o=t.ownerDocument)==null?void 0:o.body),h=Fs(a);if(d){const f=CT(h);return r.concat(h,h.visualViewport||[],mg(a)?a:[],f&&s?Ym(f):[])}return r.concat(a,Ym(a,[],s))}function CT(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function g0(t){const r=Zo(t);let s=parseFloat(r.width)||0,o=parseFloat(r.height)||0;const a=ji(t),d=a?t.offsetWidth:s,h=a?t.offsetHeight:o,f=i_(s)!==d||i_(o)!==h;return f&&(s=d,o=h),{width:s,height:o,$:f}}function jb(t){return Qo(t)?t:t.contextElement}function rp(t){const r=jb(t);if(!ji(r))return Vi(1);const s=r.getBoundingClientRect(),{width:o,height:a,$:d}=g0(r);let h=(d?i_(s.width):s.width)/o,f=(d?i_(s.height):s.height)/a;return(!h||!Number.isFinite(h))&&(h=1),(!f||!Number.isFinite(f))&&(f=1),{x:h,y:f}}const A1=Vi(0);function $0(t){const r=Fs(t);return!Gb()||!r.visualViewport?A1:{x:r.visualViewport.offsetLeft,y:r.visualViewport.offsetTop}}function N1(t,r,s){return r===void 0&&(r=!1),!s||r&&s!==Fs(t)?!1:r}function zu(t,r,s,o){r===void 0&&(r=!1),s===void 0&&(s=!1);const a=t.getBoundingClientRect(),d=jb(t);let h=Vi(1);r&&(o?Qo(o)&&(h=rp(o)):h=rp(t));const f=N1(d,s,o)?$0(d):Vi(0);let g=(a.left+f.x)/h.x,$=(a.top+f.y)/h.y,v=a.width/h.x,y=a.height/h.y;if(d){const w=Fs(d),S=o&&Qo(o)?Fs(o):o;let O=w,I=CT(O);for(;I&&o&&S!==O;){const x=rp(I),A=I.getBoundingClientRect(),M=Zo(I),P=A.left+(I.clientLeft+parseFloat(M.paddingLeft))*x.x,F=A.top+(I.clientTop+parseFloat(M.paddingTop))*x.y;g*=x.x,$*=x.y,v*=x.x,y*=x.y,g+=P,$+=F,O=Fs(I),I=CT(O)}}return a_({width:v,height:y,x:g,y:$})}function Wb(t,r){const s=U_(t).scrollLeft;return r?r.left+s:zu(Wi(t)).left+s}function _0(t,r,s){s===void 0&&(s=!1);const o=t.getBoundingClientRect(),a=o.left+r.scrollLeft-(s?0:Wb(t,o)),d=o.top+r.scrollTop;return{x:a,y:d}}function L1(t){let{elements:r,rect:s,offsetParent:o,strategy:a}=t;const d=a==="fixed",h=Wi(o),f=r?F_(r.floating):!1;if(o===h||f&&d)return s;let g={scrollLeft:0,scrollTop:0},$=Vi(1);const v=Vi(0),y=ji(o);if((y||!y&&!d)&&((vp(o)!=="body"||mg(h))&&(g=U_(o)),ji(o))){const S=zu(o);$=rp(o),v.x=S.x+o.clientLeft,v.y=S.y+o.clientTop}const w=h&&!y&&!d?_0(h,g,!0):Vi(0);return{width:s.width*$.x,height:s.height*$.y,x:s.x*$.x-g.scrollLeft*$.x+v.x+w.x,y:s.y*$.y-g.scrollTop*$.y+v.y+w.y}}function M1(t){return Array.from(t.getClientRects())}function P1(t){const r=Wi(t),s=U_(t),o=t.ownerDocument.body,a=Ps(r.scrollWidth,r.clientWidth,o.scrollWidth,o.clientWidth),d=Ps(r.scrollHeight,r.clientHeight,o.scrollHeight,o.clientHeight);let h=-s.scrollLeft+Wb(t);const f=-s.scrollTop;return Zo(o).direction==="rtl"&&(h+=Ps(r.clientWidth,o.clientWidth)-a),{width:a,height:d,x:h,y:f}}function D1(t,r){const s=Fs(t),o=Wi(t),a=s.visualViewport;let d=o.clientWidth,h=o.clientHeight,f=0,g=0;if(a){d=a.width,h=a.height;const $=Gb();(!$||$&&r==="fixed")&&(f=a.offsetLeft,g=a.offsetTop)}return{width:d,height:h,x:f,y:g}}const B1=new Set(["absolute","fixed"]);function F1(t,r){const s=zu(t,!0,r==="fixed"),o=s.top+t.clientTop,a=s.left+t.clientLeft,d=ji(t)?rp(t):Vi(1),h=t.clientWidth*d.x,f=t.clientHeight*d.y,g=a*d.x,$=o*d.y;return{width:h,height:f,x:g,y:$}}function CC(t,r,s){let o;if(r==="viewport")o=D1(t,s);else if(r==="document")o=P1(Wi(t));else if(Qo(r))o=F1(r,s);else{const a=$0(t);o={x:r.x-a.x,y:r.y-a.y,width:r.width,height:r.height}}return a_(o)}function v0(t,r){const s=ec(t);return s===r||!Qo(s)||cp(s)?!1:Zo(s).position==="fixed"||v0(s,r)}function U1(t,r){const s=r.get(t);if(s)return s;let o=Ym(t,[],!1).filter(f=>Qo(f)&&vp(f)!=="body"),a=null;const d=Zo(t).position==="fixed";let h=d?ec(t):t;for(;Qo(h)&&!cp(h);){const f=Zo(h),g=Hb(h);!g&&f.position==="fixed"&&(a=null),(d?!g&&!a:!g&&f.position==="static"&&!!a&&B1.has(a.position)||mg(h)&&!g&&v0(t,h))?o=o.filter(v=>v!==h):a=f,h=ec(h)}return r.set(t,o),o}function V1(t){let{element:r,boundary:s,rootBoundary:o,strategy:a}=t;const h=[...s==="clippingAncestors"?F_(r)?[]:U1(r,this._c):[].concat(s),o],f=h[0],g=h.reduce(($,v)=>{const y=CC(r,v,a);return $.top=Ps(y.top,$.top),$.right=Za(y.right,$.right),$.bottom=Za(y.bottom,$.bottom),$.left=Ps(y.left,$.left),$},CC(r,f,a));return{width:g.right-g.left,height:g.bottom-g.top,x:g.left,y:g.top}}function H1(t){const{width:r,height:s}=g0(t);return{width:r,height:s}}function G1(t,r,s){const o=ji(r),a=Wi(r),d=s==="fixed",h=zu(t,!0,d,r);let f={scrollLeft:0,scrollTop:0};const g=Vi(0);function $(){g.x=Wb(a)}if(o||!o&&!d)if((vp(r)!=="body"||mg(a))&&(f=U_(r)),o){const S=zu(r,!0,d,r);g.x=S.x+r.clientLeft,g.y=S.y+r.clientTop}else a&&$();d&&!o&&a&&$();const v=a&&!o&&!d?_0(a,f):Vi(0),y=h.left+f.scrollLeft-g.x-v.x,w=h.top+f.scrollTop-g.y-v.y;return{x:y,y:w,width:h.width,height:h.height}}function Ry(t){return Zo(t).position==="static"}function IC(t,r){if(!ji(t)||Zo(t).position==="fixed")return null;if(r)return r(t);let s=t.offsetParent;return Wi(t)===s&&(s=s.ownerDocument.body),s}function y0(t,r){const s=Fs(t);if(F_(t))return s;if(!ji(t)){let a=ec(t);for(;a&&!cp(a);){if(Qo(a)&&!Ry(a))return a;a=ec(a)}return s}let o=IC(t,r);for(;o&&S1(o)&&Ry(o);)o=IC(o,r);return o&&cp(o)&&Ry(o)&&!Hb(o)?s:o||x1(t)||s}const j1=async function(t){const r=this.getOffsetParent||y0,s=this.getDimensions,o=await s(t.floating);return{reference:G1(t.reference,await r(t.floating),t.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}};function W1(t){return Zo(t).direction==="rtl"}const z1={convertOffsetParentRelativeRectToViewportRelativeRect:L1,getDocumentElement:Wi,getClippingRect:V1,getOffsetParent:y0,getElementRects:j1,getClientRects:M1,getDimensions:H1,getScale:rp,isElement:Qo,isRTL:W1};function T0(t,r){return t.x===r.x&&t.y===r.y&&t.width===r.width&&t.height===r.height}function K1(t,r){let s=null,o;const a=Wi(t);function d(){var f;clearTimeout(o),(f=s)==null||f.disconnect(),s=null}function h(f,g){f===void 0&&(f=!1),g===void 0&&(g=1),d();const $=t.getBoundingClientRect(),{left:v,top:y,width:w,height:S}=$;if(f||r(),!w||!S)return;const O=k$(y),I=k$(a.clientWidth-(v+w)),x=k$(a.clientHeight-(y+S)),A=k$(v),P={rootMargin:-O+"px "+-I+"px "+-x+"px "+-A+"px",threshold:Ps(0,Za(1,g))||1};let F=!0;function B(V){const j=V[0].intersectionRatio;if(j!==g){if(!F)return h();j?h(!1,j):o=setTimeout(()=>{h(!1,1e-7)},1e3)}j===1&&!T0($,t.getBoundingClientRect())&&h(),F=!1}try{s=new IntersectionObserver(B,{...P,root:a.ownerDocument})}catch{s=new IntersectionObserver(B,P)}s.observe(t)}return h(!0),d}function X1(t,r,s,o){o===void 0&&(o={});const{ancestorScroll:a=!0,ancestorResize:d=!0,elementResize:h=typeof ResizeObserver=="function",layoutShift:f=typeof IntersectionObserver=="function",animationFrame:g=!1}=o,$=jb(t),v=a||d?[...$?Ym($):[],...Ym(r)]:[];v.forEach(A=>{a&&A.addEventListener("scroll",s,{passive:!0}),d&&A.addEventListener("resize",s)});const y=$&&f?K1($,s):null;let w=-1,S=null;h&&(S=new ResizeObserver(A=>{let[M]=A;M&&M.target===$&&S&&(S.unobserve(r),cancelAnimationFrame(w),w=requestAnimationFrame(()=>{var P;(P=S)==null||P.observe(r)})),s()}),$&&!g&&S.observe($),S.observe(r));let O,I=g?zu(t):null;g&&x();function x(){const A=zu(t);I&&!T0(I,A)&&s(),I=A,O=requestAnimationFrame(x)}return s(),()=>{var A;v.forEach(M=>{a&&M.removeEventListener("scroll",s),d&&M.removeEventListener("resize",s)}),y?.(),(A=S)==null||A.disconnect(),S=null,g&&cancelAnimationFrame(O)}}const Y1=v1,q1=y1,J1=g1,Q1=b1,Z1=$1,RC=m1,eF=T1,tF=(t,r,s)=>{const o=new Map,a={platform:z1,...s},d={...a.platform,_c:o};return f1(t,r,{...a,platform:d})};var nF=typeof document<"u",rF=function(){},X$=nF?E.useLayoutEffect:rF;function c_(t,r){if(t===r)return!0;if(typeof t!=typeof r)return!1;if(typeof t=="function"&&t.toString()===r.toString())return!0;let s,o,a;if(t&&r&&typeof t=="object"){if(Array.isArray(t)){if(s=t.length,s!==r.length)return!1;for(o=s;o--!==0;)if(!c_(t[o],r[o]))return!1;return!0}if(a=Object.keys(t),s=a.length,s!==Object.keys(r).length)return!1;for(o=s;o--!==0;)if(!{}.hasOwnProperty.call(r,a[o]))return!1;for(o=s;o--!==0;){const d=a[o];if(!(d==="_owner"&&t.$$typeof)&&!c_(t[d],r[d]))return!1}return!0}return t!==t&&r!==r}function b0(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function kC(t,r){const s=b0(t);return Math.round(r*s)/s}function ky(t){const r=E.useRef(t);return X$(()=>{r.current=t}),r}function sF(t){t===void 0&&(t={});const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:a,elements:{reference:d,floating:h}={},transform:f=!0,whileElementsMounted:g,open:$}=t,[v,y]=E.useState({x:0,y:0,strategy:s,placement:r,middlewareData:{},isPositioned:!1}),[w,S]=E.useState(o);c_(w,o)||S(o);const[O,I]=E.useState(null),[x,A]=E.useState(null),M=E.useCallback(G=>{G!==V.current&&(V.current=G,I(G))},[]),P=E.useCallback(G=>{G!==j.current&&(j.current=G,A(G))},[]),F=d||O,B=h||x,V=E.useRef(null),j=E.useRef(null),W=E.useRef(v),he=g!=null,we=ky(g),Ee=ky(a),ye=ky($),De=E.useCallback(()=>{if(!V.current||!j.current)return;const G={placement:r,strategy:s,middleware:w};Ee.current&&(G.platform=Ee.current),tF(V.current,j.current,G).then(ee=>{const $e={...ee,isPositioned:ye.current!==!1};ce.current&&!c_(W.current,$e)&&(W.current=$e,mp.flushSync(()=>{y($e)}))})},[w,r,s,Ee,ye]);X$(()=>{$===!1&&W.current.isPositioned&&(W.current.isPositioned=!1,y(G=>({...G,isPositioned:!1})))},[$]);const ce=E.useRef(!1);X$(()=>(ce.current=!0,()=>{ce.current=!1}),[]),X$(()=>{if(F&&(V.current=F),B&&(j.current=B),F&&B){if(we.current)return we.current(F,B,De);De()}},[F,B,De,we,he]);const Oe=E.useMemo(()=>({reference:V,floating:j,setReference:M,setFloating:P}),[M,P]),ie=E.useMemo(()=>({reference:F,floating:B}),[F,B]),pe=E.useMemo(()=>{const G={position:s,left:0,top:0};if(!ie.floating)return G;const ee=kC(ie.floating,v.x),$e=kC(ie.floating,v.y);return f?{...G,transform:"translate("+ee+"px, "+$e+"px)",...b0(ie.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:ee,top:$e}},[s,f,ie.floating,v.x,v.y]);return E.useMemo(()=>({...v,update:De,refs:Oe,elements:ie,floatingStyles:pe}),[v,De,Oe,ie,pe])}const oF=t=>{function r(s){return{}.hasOwnProperty.call(s,"current")}return{name:"arrow",options:t,fn(s){const{element:o,padding:a}=typeof t=="function"?t(s):t;return o&&r(o)?o.current!=null?RC({element:o.current,padding:a}).fn(s):{}:o?RC({element:o,padding:a}).fn(s):{}}}},iF=(t,r)=>({...Y1(t),options:[t,r]}),lF=(t,r)=>({...q1(t),options:[t,r]}),aF=(t,r)=>({...eF(t),options:[t,r]}),cF=(t,r)=>({...J1(t),options:[t,r]}),uF=(t,r)=>({...Q1(t),options:[t,r]}),dF=(t,r)=>({...Z1(t),options:[t,r]}),hF=(t,r)=>({...oF(t),options:[t,r]});var pF="Arrow",E0=E.forwardRef((t,r)=>{const{children:s,width:o=10,height:a=5,...d}=t;return R.jsx(Ze.svg,{...d,ref:r,width:o,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?s:R.jsx("polygon",{points:"0,0 30,0 15,10"})})});E0.displayName=pF;var fF=E0;function mF(t){const[r,s]=E.useState(void 0);return sr(()=>{if(t){s({width:t.offsetWidth,height:t.offsetHeight});const o=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const d=a[0];let h,f;if("borderBoxSize"in d){const g=d.borderBoxSize,$=Array.isArray(g)?g[0]:g;h=$.inlineSize,f=$.blockSize}else h=t.offsetWidth,f=t.offsetHeight;s({width:h,height:f})});return o.observe(t,{box:"border-box"}),()=>o.unobserve(t)}else s(void 0)},[t]),r}var zb="Popper",[w0,yp]=To(zb),[gF,S0]=w0(zb),C0=t=>{const{__scopePopper:r,children:s}=t,[o,a]=E.useState(null);return R.jsx(gF,{scope:r,anchor:o,onAnchorChange:a,children:s})};C0.displayName=zb;var I0="PopperAnchor",R0=E.forwardRef((t,r)=>{const{__scopePopper:s,virtualRef:o,...a}=t,d=S0(I0,s),h=E.useRef(null),f=_t(r,h);return E.useEffect(()=>{d.onAnchorChange(o?.current||h.current)}),o?null:R.jsx(Ze.div,{...a,ref:f})});R0.displayName=I0;var Kb="PopperContent",[$F,_F]=w0(Kb),k0=E.forwardRef((t,r)=>{const{__scopePopper:s,side:o="bottom",sideOffset:a=0,align:d="center",alignOffset:h=0,arrowPadding:f=0,avoidCollisions:g=!0,collisionBoundary:$=[],collisionPadding:v=0,sticky:y="partial",hideWhenDetached:w=!1,updatePositionStrategy:S="optimized",onPlaced:O,...I}=t,x=S0(Kb,s),[A,M]=E.useState(null),P=_t(r,te=>M(te)),[F,B]=E.useState(null),V=mF(F),j=V?.width??0,W=V?.height??0,he=o+(d!=="center"?"-"+d:""),we=typeof v=="number"?v:{top:0,right:0,bottom:0,left:0,...v},Ee=Array.isArray($)?$:[$],ye=Ee.length>0,De={padding:we,boundary:Ee.filter(yF),altBoundary:ye},{refs:ce,floatingStyles:Oe,placement:ie,isPositioned:pe,middlewareData:G}=sF({strategy:"fixed",placement:he,whileElementsMounted:(...te)=>X1(...te,{animationFrame:S==="always"}),elements:{reference:x.anchor},middleware:[iF({mainAxis:a+W,alignmentAxis:h}),g&&lF({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?aF():void 0,...De}),g&&cF({...De}),uF({...De,apply:({elements:te,rects:Se,availableWidth:Le,availableHeight:He})=>{const{width:tt,height:ct}=Se.reference,nt=te.floating.style;nt.setProperty("--radix-popper-available-width",`${Le}px`),nt.setProperty("--radix-popper-available-height",`${He}px`),nt.setProperty("--radix-popper-anchor-width",`${tt}px`),nt.setProperty("--radix-popper-anchor-height",`${ct}px`)}}),F&&hF({element:F,padding:f}),TF({arrowWidth:j,arrowHeight:W}),w&&dF({strategy:"referenceHidden",...De})]}),[ee,$e]=A0(ie),z=Rn(O);sr(()=>{pe&&z?.()},[pe,z]);const se=G.arrow?.x,ae=G.arrow?.y,ne=G.arrow?.centerOffset!==0,[me,fe]=E.useState();return sr(()=>{A&&fe(window.getComputedStyle(A).zIndex)},[A]),R.jsx("div",{ref:ce.setFloating,"data-radix-popper-content-wrapper":"",style:{...Oe,transform:pe?Oe.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:me,"--radix-popper-transform-origin":[G.transformOrigin?.x,G.transformOrigin?.y].join(" "),...G.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:R.jsx($F,{scope:s,placedSide:ee,onArrowChange:B,arrowX:se,arrowY:ae,shouldHideArrow:ne,children:R.jsx(Ze.div,{"data-side":ee,"data-align":$e,...I,ref:P,style:{...I.style,animation:pe?void 0:"none"}})})})});k0.displayName=Kb;var x0="PopperArrow",vF={top:"bottom",right:"left",bottom:"top",left:"right"},O0=E.forwardRef(function(r,s){const{__scopePopper:o,...a}=r,d=_F(x0,o),h=vF[d.placedSide];return R.jsx("span",{ref:d.onArrowChange,style:{position:"absolute",left:d.arrowX,top:d.arrowY,[h]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[d.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[d.placedSide],visibility:d.shouldHideArrow?"hidden":void 0},children:R.jsx(fF,{...a,ref:s,style:{...a.style,display:"block"}})})});O0.displayName=x0;function yF(t){return t!==null}var TF=t=>({name:"transformOrigin",options:t,fn(r){const{placement:s,rects:o,middlewareData:a}=r,h=a.arrow?.centerOffset!==0,f=h?0:t.arrowWidth,g=h?0:t.arrowHeight,[$,v]=A0(s),y={start:"0%",center:"50%",end:"100%"}[v],w=(a.arrow?.x??0)+f/2,S=(a.arrow?.y??0)+g/2;let O="",I="";return $==="bottom"?(O=h?y:`${w}px`,I=`${-g}px`):$==="top"?(O=h?y:`${w}px`,I=`${o.floating.height+g}px`):$==="right"?(O=`${-g}px`,I=h?y:`${S}px`):$==="left"&&(O=`${o.floating.width+g}px`,I=h?y:`${S}px`),{data:{x:O,y:I}}}});function A0(t){const[r,s="center"]=t.split("-");return[r,s]}var N0=C0,Xb=R0,Yb=k0,qb=O0,[V_]=To("Tooltip",[yp]),Jb=yp(),L0="TooltipProvider",bF=700,xC="tooltip.open",[EF,M0]=V_(L0),P0=t=>{const{__scopeTooltip:r,delayDuration:s=bF,skipDelayDuration:o=300,disableHoverableContent:a=!1,children:d}=t,h=E.useRef(!0),f=E.useRef(!1),g=E.useRef(0);return E.useEffect(()=>{const $=g.current;return()=>window.clearTimeout($)},[]),R.jsx(EF,{scope:r,isOpenDelayedRef:h,delayDuration:s,onOpen:E.useCallback(()=>{window.clearTimeout(g.current),h.current=!1},[]),onClose:E.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>h.current=!0,o)},[o]),isPointerInTransitRef:f,onPointerInTransitChange:E.useCallback($=>{f.current=$},[]),disableHoverableContent:a,children:d})};P0.displayName=L0;var D0="Tooltip",[bY,H_]=V_(D0),IT="TooltipTrigger",wF=E.forwardRef((t,r)=>{const{__scopeTooltip:s,...o}=t,a=H_(IT,s),d=M0(IT,s),h=Jb(s),f=E.useRef(null),g=_t(r,f,a.onTriggerChange),$=E.useRef(!1),v=E.useRef(!1),y=E.useCallback(()=>$.current=!1,[]);return E.useEffect(()=>()=>document.removeEventListener("pointerup",y),[y]),R.jsx(Xb,{asChild:!0,...h,children:R.jsx(Ze.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...o,ref:g,onPointerMove:Pe(t.onPointerMove,w=>{w.pointerType!=="touch"&&!v.current&&!d.isPointerInTransitRef.current&&(a.onTriggerEnter(),v.current=!0)}),onPointerLeave:Pe(t.onPointerLeave,()=>{a.onTriggerLeave(),v.current=!1}),onPointerDown:Pe(t.onPointerDown,()=>{a.open&&a.onClose(),$.current=!0,document.addEventListener("pointerup",y,{once:!0})}),onFocus:Pe(t.onFocus,()=>{$.current||a.onOpen()}),onBlur:Pe(t.onBlur,a.onClose),onClick:Pe(t.onClick,a.onClose)})})});wF.displayName=IT;var SF="TooltipPortal",[EY,CF]=V_(SF,{forceMount:void 0}),up="TooltipContent",B0=E.forwardRef((t,r)=>{const s=CF(up,t.__scopeTooltip),{forceMount:o=s.forceMount,side:a="top",...d}=t,h=H_(up,t.__scopeTooltip);return R.jsx(Kr,{present:o||h.open,children:h.disableHoverableContent?R.jsx(F0,{side:a,...d,ref:r}):R.jsx(IF,{side:a,...d,ref:r})})}),IF=E.forwardRef((t,r)=>{const s=H_(up,t.__scopeTooltip),o=M0(up,t.__scopeTooltip),a=E.useRef(null),d=_t(r,a),[h,f]=E.useState(null),{trigger:g,onClose:$}=s,v=a.current,{onPointerInTransitChange:y}=o,w=E.useCallback(()=>{f(null),y(!1)},[y]),S=E.useCallback((O,I)=>{const x=O.currentTarget,A={x:O.clientX,y:O.clientY},M=AF(A,x.getBoundingClientRect()),P=NF(A,M),F=LF(I.getBoundingClientRect()),B=PF([...P,...F]);f(B),y(!0)},[y]);return E.useEffect(()=>()=>w(),[w]),E.useEffect(()=>{if(g&&v){const O=x=>S(x,v),I=x=>S(x,g);return g.addEventListener("pointerleave",O),v.addEventListener("pointerleave",I),()=>{g.removeEventListener("pointerleave",O),v.removeEventListener("pointerleave",I)}}},[g,v,S,w]),E.useEffect(()=>{if(h){const O=I=>{const x=I.target,A={x:I.clientX,y:I.clientY},M=g?.contains(x)||v?.contains(x),P=!MF(A,h);M?w():P&&(w(),$())};return document.addEventListener("pointermove",O),()=>document.removeEventListener("pointermove",O)}},[g,v,h,$,w]),R.jsx(F0,{...t,ref:d})}),[RF,kF]=V_(D0,{isInside:!1}),xF=kP("TooltipContent"),F0=E.forwardRef((t,r)=>{const{__scopeTooltip:s,children:o,"aria-label":a,onEscapeKeyDown:d,onPointerDownOutside:h,...f}=t,g=H_(up,s),$=Jb(s),{onClose:v}=g;return E.useEffect(()=>(document.addEventListener(xC,v),()=>document.removeEventListener(xC,v)),[v]),E.useEffect(()=>{if(g.trigger){const y=w=>{w.target?.contains(g.trigger)&&v()};return window.addEventListener("scroll",y,{capture:!0}),()=>window.removeEventListener("scroll",y,{capture:!0})}},[g.trigger,v]),R.jsx(gp,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:y=>y.preventDefault(),onDismiss:v,children:R.jsxs(Yb,{"data-state":g.stateAttribute,...$,...f,ref:r,style:{...f.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[R.jsx(xF,{children:o}),R.jsx(RF,{scope:s,isInside:!0,children:R.jsx(JP,{id:g.contentId,role:"tooltip",children:a||o})})]})})});B0.displayName=up;var U0="TooltipArrow",OF=E.forwardRef((t,r)=>{const{__scopeTooltip:s,...o}=t,a=Jb(s);return kF(U0,s).isInside?null:R.jsx(qb,{...a,...o,ref:r})});OF.displayName=U0;function AF(t,r){const s=Math.abs(r.top-t.y),o=Math.abs(r.bottom-t.y),a=Math.abs(r.right-t.x),d=Math.abs(r.left-t.x);switch(Math.min(s,o,a,d)){case d:return"left";case a:return"right";case s:return"top";case o:return"bottom";default:throw new Error("unreachable")}}function NF(t,r,s=5){const o=[];switch(r){case"top":o.push({x:t.x-s,y:t.y+s},{x:t.x+s,y:t.y+s});break;case"bottom":o.push({x:t.x-s,y:t.y-s},{x:t.x+s,y:t.y-s});break;case"left":o.push({x:t.x+s,y:t.y-s},{x:t.x+s,y:t.y+s});break;case"right":o.push({x:t.x-s,y:t.y-s},{x:t.x-s,y:t.y+s});break}return o}function LF(t){const{top:r,right:s,bottom:o,left:a}=t;return[{x:a,y:r},{x:s,y:r},{x:s,y:o},{x:a,y:o}]}function MF(t,r){const{x:s,y:o}=t;let a=!1;for(let d=0,h=r.length-1;d<r.length;h=d++){const f=r[d],g=r[h],$=f.x,v=f.y,y=g.x,w=g.y;v>o!=w>o&&s<(y-$)*(o-v)/(w-v)+$&&(a=!a)}return a}function PF(t){const r=t.slice();return r.sort((s,o)=>s.x<o.x?-1:s.x>o.x?1:s.y<o.y?-1:s.y>o.y?1:0),DF(r)}function DF(t){if(t.length<=1)return t.slice();const r=[];for(let o=0;o<t.length;o++){const a=t[o];for(;r.length>=2;){const d=r[r.length-1],h=r[r.length-2];if((d.x-h.x)*(a.y-h.y)>=(d.y-h.y)*(a.x-h.x))r.pop();else break}r.push(a)}r.pop();const s=[];for(let o=t.length-1;o>=0;o--){const a=t[o];for(;s.length>=2;){const d=s[s.length-1],h=s[s.length-2];if((d.x-h.x)*(a.y-h.y)>=(d.y-h.y)*(a.x-h.x))s.pop();else break}s.push(a)}return s.pop(),r.length===1&&s.length===1&&r[0].x===s[0].x&&r[0].y===s[0].y?r:r.concat(s)}var BF=P0,V0=B0;const FF=BF,UF=E.forwardRef(({className:t,sideOffset:r=4,...s},o)=>R.jsx(V0,{ref:o,sideOffset:r,className:pt("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s}));UF.displayName=V0.displayName;var G_=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},j_=typeof window>"u"||"Deno"in globalThis;function Xo(){}function VF(t,r){return typeof t=="function"?t(r):t}function HF(t){return typeof t=="number"&&t>=0&&t!==1/0}function GF(t,r){return Math.max(t+(r||0)-Date.now(),0)}function RT(t,r){return typeof t=="function"?t(r):t}function jF(t,r){return typeof t=="function"?t(r):t}function OC(t,r){const{type:s="all",exact:o,fetchStatus:a,predicate:d,queryKey:h,stale:f}=t;if(h){if(o){if(r.queryHash!==Qb(h,r.options))return!1}else if(!Jm(r.queryKey,h))return!1}if(s!=="all"){const g=r.isActive();if(s==="active"&&!g||s==="inactive"&&g)return!1}return!(typeof f=="boolean"&&r.isStale()!==f||a&&a!==r.state.fetchStatus||d&&!d(r))}function AC(t,r){const{exact:s,status:o,predicate:a,mutationKey:d}=t;if(d){if(!r.options.mutationKey)return!1;if(s){if(qm(r.options.mutationKey)!==qm(d))return!1}else if(!Jm(r.options.mutationKey,d))return!1}return!(o&&r.state.status!==o||a&&!a(r))}function Qb(t,r){return(r?.queryKeyHashFn||qm)(t)}function qm(t){return JSON.stringify(t,(r,s)=>kT(s)?Object.keys(s).sort().reduce((o,a)=>(o[a]=s[a],o),{}):s)}function Jm(t,r){return t===r?!0:typeof t!=typeof r?!1:t&&r&&typeof t=="object"&&typeof r=="object"?Object.keys(r).every(s=>Jm(t[s],r[s])):!1}function H0(t,r){if(t===r)return t;const s=NC(t)&&NC(r);if(s||kT(t)&&kT(r)){const o=s?t:Object.keys(t),a=o.length,d=s?r:Object.keys(r),h=d.length,f=s?[]:{},g=new Set(o);let $=0;for(let v=0;v<h;v++){const y=s?v:d[v];(!s&&g.has(y)||s)&&t[y]===void 0&&r[y]===void 0?(f[y]=void 0,$++):(f[y]=H0(t[y],r[y]),f[y]===t[y]&&t[y]!==void 0&&$++)}return a===h&&$===a?t:f}return r}function NC(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function kT(t){if(!LC(t))return!1;const r=t.constructor;if(r===void 0)return!0;const s=r.prototype;return!(!LC(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function LC(t){return Object.prototype.toString.call(t)==="[object Object]"}function WF(t){return new Promise(r=>{setTimeout(r,t)})}function zF(t,r,s){return typeof s.structuralSharing=="function"?s.structuralSharing(t,r):s.structuralSharing!==!1?H0(t,r):r}function KF(t,r,s=0){const o=[...t,r];return s&&o.length>s?o.slice(1):o}function XF(t,r,s=0){const o=[r,...t];return s&&o.length>s?o.slice(0,-1):o}var Zb=Symbol();function G0(t,r){return!t.queryFn&&r?.initialPromise?()=>r.initialPromise:!t.queryFn||t.queryFn===Zb?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var YF=class extends G_{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!j_&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},j0=new YF,qF=class extends G_{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!j_&&window.addEventListener){const r=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",s)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(s=>{s(t)}))}isOnline(){return this.#e}},u_=new qF;function JF(){let t,r;const s=new Promise((a,d)=>{t=a,r=d});s.status="pending",s.catch(()=>{});function o(a){Object.assign(s,a),delete s.resolve,delete s.reject}return s.resolve=a=>{o({status:"fulfilled",value:a}),t(a)},s.reject=a=>{o({status:"rejected",reason:a}),r(a)},s}function QF(t){return Math.min(1e3*2**t,3e4)}function W0(t){return(t??"online")==="online"?u_.isOnline():!0}var z0=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function xy(t){return t instanceof z0}function K0(t){let r=!1,s=0,o=!1,a;const d=JF(),h=I=>{o||(w(new z0(I)),t.abort?.())},f=()=>{r=!0},g=()=>{r=!1},$=()=>j0.isFocused()&&(t.networkMode==="always"||u_.isOnline())&&t.canRun(),v=()=>W0(t.networkMode)&&t.canRun(),y=I=>{o||(o=!0,t.onSuccess?.(I),a?.(),d.resolve(I))},w=I=>{o||(o=!0,t.onError?.(I),a?.(),d.reject(I))},S=()=>new Promise(I=>{a=x=>{(o||$())&&I(x)},t.onPause?.()}).then(()=>{a=void 0,o||t.onContinue?.()}),O=()=>{if(o)return;let I;const x=s===0?t.initialPromise:void 0;try{I=x??t.fn()}catch(A){I=Promise.reject(A)}Promise.resolve(I).then(y).catch(A=>{if(o)return;const M=t.retry??(j_?0:3),P=t.retryDelay??QF,F=typeof P=="function"?P(s,A):P,B=M===!0||typeof M=="number"&&s<M||typeof M=="function"&&M(s,A);if(r||!B){w(A);return}s++,t.onFail?.(s,A),WF(F).then(()=>$()?void 0:S()).then(()=>{r?w(A):O()})})};return{promise:d,cancel:h,continue:()=>(a?.(),d),cancelRetry:f,continueRetry:g,canStart:v,start:()=>(v()?O():S().then(O),d)}}var ZF=t=>setTimeout(t,0);function eU(){let t=[],r=0,s=f=>{f()},o=f=>{f()},a=ZF;const d=f=>{r?t.push(f):a(()=>{s(f)})},h=()=>{const f=t;t=[],f.length&&a(()=>{o(()=>{f.forEach(g=>{s(g)})})})};return{batch:f=>{let g;r++;try{g=f()}finally{r--,r||h()}return g},batchCalls:f=>(...g)=>{d(()=>{f(...g)})},schedule:d,setNotifyFunction:f=>{s=f},setBatchNotifyFunction:f=>{o=f},setScheduler:f=>{a=f}}}var zr=eU(),X0=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),HF(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(j_?1/0:300*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},tU=class extends X0{#e;#t;#n;#s;#r;#i;#l;constructor(t){super(),this.#l=!1,this.#i=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#s=t.client,this.#n=this.#s.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=rU(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(t){this.options={...this.#i,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,r){const s=zF(this.state.data,t,this.options);return this.#o({data:s,type:"success",dataUpdatedAt:r?.updatedAt,manual:r?.manual}),s}setState(t,r){this.#o({type:"setState",state:t,setStateOptions:r})}cancel(t){const r=this.#r?.promise;return this.#r?.cancel(t),r?r.then(Xo).catch(Xo):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>jF(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Zb||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>RT(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!GF(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(r=>r.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(r=>r.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(this.#r&&(this.#l?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#o({type:"invalidate"})}fetch(t,r){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&r?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(t&&this.setOptions(t),!this.options.queryFn){const g=this.observers.find($=>$.options.queryFn);g&&this.setOptions(g.options)}const s=new AbortController,o=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(this.#l=!0,s.signal)})},a=()=>{const g=G0(this.options,r),v=(()=>{const y={client:this.#s,queryKey:this.queryKey,meta:this.meta};return o(y),y})();return this.#l=!1,this.options.persister?this.options.persister(g,v,this):g(v)},h=(()=>{const g={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:this.#s,state:this.state,fetchFn:a};return o(g),g})();this.options.behavior?.onFetch(h,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==h.fetchOptions?.meta)&&this.#o({type:"fetch",meta:h.fetchOptions?.meta});const f=g=>{xy(g)&&g.silent||this.#o({type:"error",error:g}),xy(g)||(this.#n.config.onError?.(g,this),this.#n.config.onSettled?.(this.state.data,g,this)),this.scheduleGc()};return this.#r=K0({initialPromise:r?.initialPromise,fn:h.fetchFn,abort:s.abort.bind(s),onSuccess:g=>{if(g===void 0){f(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(g)}catch($){f($);return}this.#n.config.onSuccess?.(g,this),this.#n.config.onSettled?.(g,this.state.error,this),this.scheduleGc()},onError:f,onFail:(g,$)=>{this.#o({type:"failed",failureCount:g,error:$})},onPause:()=>{this.#o({type:"pause"})},onContinue:()=>{this.#o({type:"continue"})},retry:h.options.retry,retryDelay:h.options.retryDelay,networkMode:h.options.networkMode,canRun:()=>!0}),this.#r.start()}#o(t){const r=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...nU(s.data,this.options),fetchMeta:t.meta??null};case"success":return this.#t=void 0,{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=t.error;return xy(o)&&o.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=r(this.state),zr.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function nU(t,r){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:W0(r.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function rU(t){const r=typeof t.initialData=="function"?t.initialData():t.initialData,s=r!==void 0,o=s?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:r,dataUpdateCount:0,dataUpdatedAt:s?o??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var sU=class extends G_{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,r,s){const o=r.queryKey,a=r.queryHash??Qb(o,r);let d=this.get(a);return d||(d=new tU({client:t,queryKey:o,queryHash:a,options:t.defaultQueryOptions(r),state:s,defaultOptions:t.getQueryDefaults(o)}),this.add(d)),d}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=this.#e.get(t.queryHash);r&&(t.destroy(),r===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){zr.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const r={exact:!0,...t};return this.getAll().find(s=>OC(r,s))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(s=>OC(t,s)):r}notify(t){zr.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){zr.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){zr.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},oU=class extends X0{#e;#t;#n;constructor(t){super(),this.mutationId=t.mutationId,this.#t=t.mutationCache,this.#e=[],this.state=t.state||iU(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(r=>r!==t),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(t){const r=()=>{this.#s({type:"continue"})};this.#n=K0({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(a,d)=>{this.#s({type:"failed",failureCount:a,error:d})},onPause:()=>{this.#s({type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const s=this.state.status==="pending",o=!this.#n.canStart();try{if(s)r();else{this.#s({type:"pending",variables:t,isPaused:o}),await this.#t.config.onMutate?.(t,this);const d=await this.options.onMutate?.(t);d!==this.state.context&&this.#s({type:"pending",context:d,variables:t,isPaused:o})}const a=await this.#n.start();return await this.#t.config.onSuccess?.(a,t,this.state.context,this),await this.options.onSuccess?.(a,t,this.state.context),await this.#t.config.onSettled?.(a,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(a,null,t,this.state.context),this.#s({type:"success",data:a}),a}catch(a){try{throw await this.#t.config.onError?.(a,t,this.state.context,this),await this.options.onError?.(a,t,this.state.context),await this.#t.config.onSettled?.(void 0,a,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,a,t,this.state.context),a}finally{this.#s({type:"error",error:a})}}finally{this.#t.runNext(this)}}#s(t){const r=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),zr.batch(()=>{this.#e.forEach(s=>{s.onMutationUpdate(t)}),this.#t.notify({mutation:this,type:"updated",action:t})})}};function iU(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var lU=class extends G_{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(t,r,s){const o=new oU({mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(r),state:s});return this.add(o),o}add(t){this.#e.add(t);const r=x$(t);if(typeof r=="string"){const s=this.#t.get(r);s?s.push(t):this.#t.set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const r=x$(t);if(typeof r=="string"){const s=this.#t.get(r);if(s)if(s.length>1){const o=s.indexOf(t);o!==-1&&s.splice(o,1)}else s[0]===t&&this.#t.delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=x$(t);if(typeof r=="string"){const o=this.#t.get(r)?.find(a=>a.state.status==="pending");return!o||o===t}else return!0}runNext(t){const r=x$(t);return typeof r=="string"?this.#t.get(r)?.find(o=>o!==t&&o.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){zr.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const r={exact:!0,...t};return this.getAll().find(s=>AC(r,s))}findAll(t={}){return this.getAll().filter(r=>AC(t,r))}notify(t){zr.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return zr.batch(()=>Promise.all(t.map(r=>r.continue().catch(Xo))))}};function x$(t){return t.options.scope?.id}function MC(t){return{onFetch:(r,s)=>{const o=r.options,a=r.fetchOptions?.meta?.fetchMore?.direction,d=r.state.data?.pages||[],h=r.state.data?.pageParams||[];let f={pages:[],pageParams:[]},g=0;const $=async()=>{let v=!1;const y=O=>{Object.defineProperty(O,"signal",{enumerable:!0,get:()=>(r.signal.aborted?v=!0:r.signal.addEventListener("abort",()=>{v=!0}),r.signal)})},w=G0(r.options,r.fetchOptions),S=async(O,I,x)=>{if(v)return Promise.reject();if(I==null&&O.pages.length)return Promise.resolve(O);const M=(()=>{const V={client:r.client,queryKey:r.queryKey,pageParam:I,direction:x?"backward":"forward",meta:r.options.meta};return y(V),V})(),P=await w(M),{maxPages:F}=r.options,B=x?XF:KF;return{pages:B(O.pages,P,F),pageParams:B(O.pageParams,I,F)}};if(a&&d.length){const O=a==="backward",I=O?aU:PC,x={pages:d,pageParams:h},A=I(o,x);f=await S(x,A,O)}else{const O=t??d.length;do{const I=g===0?h[0]??o.initialPageParam:PC(o,f);if(g>0&&I==null)break;f=await S(f,I),g++}while(g<O)}return f};r.options.persister?r.fetchFn=()=>r.options.persister?.($,{client:r.client,queryKey:r.queryKey,meta:r.options.meta,signal:r.signal},s):r.fetchFn=$}}}function PC(t,{pages:r,pageParams:s}){const o=r.length-1;return r.length>0?t.getNextPageParam(r[o],r,s[o],s):void 0}function aU(t,{pages:r,pageParams:s}){return r.length>0?t.getPreviousPageParam?.(r[0],r,s[0],s):void 0}var cU=class{#e;#t;#n;#s;#r;#i;#l;#o;constructor(t={}){this.#e=t.queryCache||new sU,this.#t=t.mutationCache||new lU,this.#n=t.defaultOptions||{},this.#s=new Map,this.#r=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#l=j0.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#o=u_.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#l?.(),this.#l=void 0,this.#o?.(),this.#o=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const r=this.defaultQueryOptions({queryKey:t});return this.#e.get(r.queryHash)?.state.data}ensureQueryData(t){const r=this.defaultQueryOptions(t),s=this.#e.build(this,r),o=s.state.data;return o===void 0?this.fetchQuery(t):(t.revalidateIfStale&&s.isStaleByTime(RT(r.staleTime,s))&&this.prefetchQuery(r),Promise.resolve(o))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:r,state:s})=>{const o=s.data;return[r,o]})}setQueryData(t,r,s){const o=this.defaultQueryOptions({queryKey:t}),d=this.#e.get(o.queryHash)?.state.data,h=VF(r,d);if(h!==void 0)return this.#e.build(this,o).setData(h,{...s,manual:!0})}setQueriesData(t,r,s){return zr.batch(()=>this.#e.findAll(t).map(({queryKey:o})=>[o,this.setQueryData(o,r,s)]))}getQueryState(t){const r=this.defaultQueryOptions({queryKey:t});return this.#e.get(r.queryHash)?.state}removeQueries(t){const r=this.#e;zr.batch(()=>{r.findAll(t).forEach(s=>{r.remove(s)})})}resetQueries(t,r){const s=this.#e;return zr.batch(()=>(s.findAll(t).forEach(o=>{o.reset()}),this.refetchQueries({type:"active",...t},r)))}cancelQueries(t,r={}){const s={revert:!0,...r},o=zr.batch(()=>this.#e.findAll(t).map(a=>a.cancel(s)));return Promise.all(o).then(Xo).catch(Xo)}invalidateQueries(t,r={}){return zr.batch(()=>(this.#e.findAll(t).forEach(s=>{s.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},r)))}refetchQueries(t,r={}){const s={...r,cancelRefetch:r.cancelRefetch??!0},o=zr.batch(()=>this.#e.findAll(t).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let d=a.fetch(void 0,s);return s.throwOnError||(d=d.catch(Xo)),a.state.fetchStatus==="paused"?Promise.resolve():d}));return Promise.all(o).then(Xo)}fetchQuery(t){const r=this.defaultQueryOptions(t);r.retry===void 0&&(r.retry=!1);const s=this.#e.build(this,r);return s.isStaleByTime(RT(r.staleTime,s))?s.fetch(r):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Xo).catch(Xo)}fetchInfiniteQuery(t){return t.behavior=MC(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Xo).catch(Xo)}ensureInfiniteQueryData(t){return t.behavior=MC(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return u_.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,r){this.#s.set(qm(t),{queryKey:t,defaultOptions:r})}getQueryDefaults(t){const r=[...this.#s.values()],s={};return r.forEach(o=>{Jm(t,o.queryKey)&&Object.assign(s,o.defaultOptions)}),s}setMutationDefaults(t,r){this.#r.set(qm(t),{mutationKey:t,defaultOptions:r})}getMutationDefaults(t){const r=[...this.#r.values()],s={};return r.forEach(o=>{Jm(t,o.mutationKey)&&Object.assign(s,o.defaultOptions)}),s}defaultQueryOptions(t){if(t._defaulted)return t;const r={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return r.queryHash||(r.queryHash=Qb(r.queryKey,r)),r.refetchOnReconnect===void 0&&(r.refetchOnReconnect=r.networkMode!=="always"),r.throwOnError===void 0&&(r.throwOnError=!!r.suspense),!r.networkMode&&r.persister&&(r.networkMode="offlineFirst"),r.queryFn===Zb&&(r.enabled=!1),r}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},uU=E.createContext(void 0),dU=({client:t,children:r})=>(E.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),R.jsx(uU.Provider,{value:t,children:r}));function d_(){return d_=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])}return t},d_.apply(this,arguments)}var Qa;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Qa||(Qa={}));const DC="popstate";function hU(t){t===void 0&&(t={});function r(o,a){let{pathname:d,search:h,hash:f}=o.location;return xT("",{pathname:d,search:h,hash:f},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function s(o,a){return typeof a=="string"?a:q0(a)}return fU(r,s,null,t)}function ps(t,r){if(t===!1||t===null||typeof t>"u")throw new Error(r)}function Y0(t,r){if(!t){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function pU(){return Math.random().toString(36).substr(2,8)}function BC(t,r){return{usr:t.state,key:t.key,idx:r}}function xT(t,r,s,o){return s===void 0&&(s=null),d_({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof r=="string"?W_(r):r,{state:s,key:r&&r.key||o||pU()})}function q0(t){let{pathname:r="/",search:s="",hash:o=""}=t;return s&&s!=="?"&&(r+=s.charAt(0)==="?"?s:"?"+s),o&&o!=="#"&&(r+=o.charAt(0)==="#"?o:"#"+o),r}function W_(t){let r={};if(t){let s=t.indexOf("#");s>=0&&(r.hash=t.substr(s),t=t.substr(0,s));let o=t.indexOf("?");o>=0&&(r.search=t.substr(o),t=t.substr(0,o)),t&&(r.pathname=t)}return r}function fU(t,r,s,o){o===void 0&&(o={});let{window:a=document.defaultView,v5Compat:d=!1}=o,h=a.history,f=Qa.Pop,g=null,$=v();$==null&&($=0,h.replaceState(d_({},h.state,{idx:$}),""));function v(){return(h.state||{idx:null}).idx}function y(){f=Qa.Pop;let x=v(),A=x==null?null:x-$;$=x,g&&g({action:f,location:I.location,delta:A})}function w(x,A){f=Qa.Push;let M=xT(I.location,x,A);$=v()+1;let P=BC(M,$),F=I.createHref(M);try{h.pushState(P,"",F)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;a.location.assign(F)}d&&g&&g({action:f,location:I.location,delta:1})}function S(x,A){f=Qa.Replace;let M=xT(I.location,x,A);$=v();let P=BC(M,$),F=I.createHref(M);h.replaceState(P,"",F),d&&g&&g({action:f,location:I.location,delta:0})}function O(x){let A=a.location.origin!=="null"?a.location.origin:a.location.href,M=typeof x=="string"?x:q0(x);return M=M.replace(/ $/,"%20"),ps(A,"No window.location.(origin|href) available to create URL for href: "+M),new URL(M,A)}let I={get action(){return f},get location(){return t(a,h)},listen(x){if(g)throw new Error("A history only accepts one active listener");return a.addEventListener(DC,y),g=x,()=>{a.removeEventListener(DC,y),g=null}},createHref(x){return r(a,x)},createURL:O,encodeLocation(x){let A=O(x);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:w,replace:S,go(x){return h.go(x)}};return I}var FC;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(FC||(FC={}));function mU(t,r,s){return s===void 0&&(s="/"),gU(t,r,s)}function gU(t,r,s,o){let a=typeof r=="string"?W_(r):r,d=Z0(a.pathname||"/",s);if(d==null)return null;let h=J0(t);$U(h);let f=null;for(let g=0;f==null&&g<h.length;++g){let $=kU(d);f=CU(h[g],$)}return f}function J0(t,r,s,o){r===void 0&&(r=[]),s===void 0&&(s=[]),o===void 0&&(o="");let a=(d,h,f)=>{let g={relativePath:f===void 0?d.path||"":f,caseSensitive:d.caseSensitive===!0,childrenIndex:h,route:d};g.relativePath.startsWith("/")&&(ps(g.relativePath.startsWith(o),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(o.length));let $=sp([o,g.relativePath]),v=s.concat(g);d.children&&d.children.length>0&&(ps(d.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+$+'".')),J0(d.children,r,v,$)),!(d.path==null&&!d.index)&&r.push({path:$,score:wU($,d.index),routesMeta:v})};return t.forEach((d,h)=>{var f;if(d.path===""||!((f=d.path)!=null&&f.includes("?")))a(d,h);else for(let g of Q0(d.path))a(d,h,g)}),r}function Q0(t){let r=t.split("/");if(r.length===0)return[];let[s,...o]=r,a=s.endsWith("?"),d=s.replace(/\?$/,"");if(o.length===0)return a?[d,""]:[d];let h=Q0(o.join("/")),f=[];return f.push(...h.map(g=>g===""?d:[d,g].join("/"))),a&&f.push(...h),f.map(g=>t.startsWith("/")&&g===""?"/":g)}function $U(t){t.sort((r,s)=>r.score!==s.score?s.score-r.score:SU(r.routesMeta.map(o=>o.childrenIndex),s.routesMeta.map(o=>o.childrenIndex)))}const _U=/^:[\w-]+$/,vU=3,yU=2,TU=1,bU=10,EU=-2,UC=t=>t==="*";function wU(t,r){let s=t.split("/"),o=s.length;return s.some(UC)&&(o+=EU),r&&(o+=yU),s.filter(a=>!UC(a)).reduce((a,d)=>a+(_U.test(d)?vU:d===""?TU:bU),o)}function SU(t,r){return t.length===r.length&&t.slice(0,-1).every((o,a)=>o===r[a])?t[t.length-1]-r[r.length-1]:0}function CU(t,r,s){let{routesMeta:o}=t,a={},d="/",h=[];for(let f=0;f<o.length;++f){let g=o[f],$=f===o.length-1,v=d==="/"?r:r.slice(d.length)||"/",y=IU({path:g.relativePath,caseSensitive:g.caseSensitive,end:$},v),w=g.route;if(!y)return null;Object.assign(a,y.params),h.push({params:a,pathname:sp([d,y.pathname]),pathnameBase:xU(sp([d,y.pathnameBase])),route:w}),y.pathnameBase!=="/"&&(d=sp([d,y.pathnameBase]))}return h}function IU(t,r){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,o]=RU(t.path,t.caseSensitive,t.end),a=r.match(s);if(!a)return null;let d=a[0],h=d.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:o.reduce(($,v,y)=>{let{paramName:w,isOptional:S}=v;if(w==="*"){let I=f[y]||"";h=d.slice(0,d.length-I.length).replace(/(.)\/+$/,"$1")}const O=f[y];return S&&!O?$[w]=void 0:$[w]=(O||"").replace(/%2F/g,"/"),$},{}),pathname:d,pathnameBase:h,pattern:t}}function RU(t,r,s){r===void 0&&(r=!1),s===void 0&&(s=!0),Y0(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let o=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,f,g)=>(o.push({paramName:f,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(o.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,r?void 0:"i"),o]}function kU(t){try{return t.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return Y0(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),t}}function Z0(t,r){if(r==="/")return t;if(!t.toLowerCase().startsWith(r.toLowerCase()))return null;let s=r.endsWith("/")?r.length-1:r.length,o=t.charAt(s);return o&&o!=="/"?null:t.slice(s)||"/"}const sp=t=>t.join("/").replace(/\/\/+/g,"/"),xU=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/");function OU(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ex=["post","put","patch","delete"];new Set(ex);const AU=["get",...ex];new Set(AU);function h_(){return h_=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])}return t},h_.apply(this,arguments)}const NU=E.createContext(null),LU=E.createContext(null),tx=E.createContext(null),z_=E.createContext(null),K_=E.createContext({outlet:null,matches:[],isDataRoute:!1}),nx=E.createContext(null);function eE(){return E.useContext(z_)!=null}function rx(){return eE()||ps(!1),E.useContext(z_).location}function MU(t,r){return PU(t,r)}function PU(t,r,s,o){eE()||ps(!1);let{navigator:a}=E.useContext(tx),{matches:d}=E.useContext(K_),h=d[d.length-1],f=h?h.params:{};h&&h.pathname;let g=h?h.pathnameBase:"/";h&&h.route;let $=rx(),v;if(r){var y;let x=typeof r=="string"?W_(r):r;g==="/"||(y=x.pathname)!=null&&y.startsWith(g)||ps(!1),v=x}else v=$;let w=v.pathname||"/",S=w;if(g!=="/"){let x=g.replace(/^\//,"").split("/");S="/"+w.replace(/^\//,"").split("/").slice(x.length).join("/")}let O=mU(t,{pathname:S}),I=VU(O&&O.map(x=>Object.assign({},x,{params:Object.assign({},f,x.params),pathname:sp([g,a.encodeLocation?a.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?g:sp([g,a.encodeLocation?a.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),d,s,o);return r&&I?E.createElement(z_.Provider,{value:{location:h_({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:Qa.Pop}},I):I}function DU(){let t=WU(),r=OU(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},r),s?E.createElement("pre",{style:a},s):null,null)}const BU=E.createElement(DU,null);class FU extends E.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,s){return s.location!==r.location||s.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:s.error,location:s.location,revalidation:r.revalidation||s.revalidation}}componentDidCatch(r,s){console.error("React Router caught the following error during render",r,s)}render(){return this.state.error!==void 0?E.createElement(K_.Provider,{value:this.props.routeContext},E.createElement(nx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function UU(t){let{routeContext:r,match:s,children:o}=t,a=E.useContext(NU);return a&&a.static&&a.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=s.route.id),E.createElement(K_.Provider,{value:r},o)}function VU(t,r,s,o){var a;if(r===void 0&&(r=[]),s===void 0&&(s=null),o===void 0&&(o=null),t==null){var d;if(!s)return null;if(s.errors)t=s.matches;else if((d=o)!=null&&d.v7_partialHydration&&r.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let h=t,f=(a=s)==null?void 0:a.errors;if(f!=null){let v=h.findIndex(y=>y.route.id&&f?.[y.route.id]!==void 0);v>=0||ps(!1),h=h.slice(0,Math.min(h.length,v+1))}let g=!1,$=-1;if(s&&o&&o.v7_partialHydration)for(let v=0;v<h.length;v++){let y=h[v];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&($=v),y.route.id){let{loaderData:w,errors:S}=s,O=y.route.loader&&w[y.route.id]===void 0&&(!S||S[y.route.id]===void 0);if(y.route.lazy||O){g=!0,$>=0?h=h.slice(0,$+1):h=[h[0]];break}}}return h.reduceRight((v,y,w)=>{let S,O=!1,I=null,x=null;s&&(S=f&&y.route.id?f[y.route.id]:void 0,I=y.route.errorElement||BU,g&&($<0&&w===0?(zU("route-fallback"),O=!0,x=null):$===w&&(O=!0,x=y.route.hydrateFallbackElement||null)));let A=r.concat(h.slice(0,w+1)),M=()=>{let P;return S?P=I:O?P=x:y.route.Component?P=E.createElement(y.route.Component,null):y.route.element?P=y.route.element:P=v,E.createElement(UU,{match:y,routeContext:{outlet:v,matches:A,isDataRoute:s!=null},children:P})};return s&&(y.route.ErrorBoundary||y.route.errorElement||w===0)?E.createElement(FU,{location:s.location,revalidation:s.revalidation,component:I,error:S,children:M(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):M()},null)}var sx=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(sx||{});function HU(t){let r=E.useContext(LU);return r||ps(!1),r}function GU(t){let r=E.useContext(K_);return r||ps(!1),r}function jU(t){let r=GU(),s=r.matches[r.matches.length-1];return s.route.id||ps(!1),s.route.id}function WU(){var t;let r=E.useContext(nx),s=HU(sx.UseRouteError),o=jU();return r!==void 0?r:(t=s.errors)==null?void 0:t[o]}const VC={};function zU(t,r,s){VC[t]||(VC[t]=!0)}function KU(t,r){t?.v7_startTransition,t?.v7_relativeSplatPath}function OT(t){ps(!1)}function XU(t){let{basename:r="/",children:s=null,location:o,navigationType:a=Qa.Pop,navigator:d,static:h=!1,future:f}=t;eE()&&ps(!1);let g=r.replace(/^\/*/,"/"),$=E.useMemo(()=>({basename:g,navigator:d,static:h,future:h_({v7_relativeSplatPath:!1},f)}),[g,f,d,h]);typeof o=="string"&&(o=W_(o));let{pathname:v="/",search:y="",hash:w="",state:S=null,key:O="default"}=o,I=E.useMemo(()=>{let x=Z0(v,g);return x==null?null:{location:{pathname:x,search:y,hash:w,state:S,key:O},navigationType:a}},[g,v,y,w,S,O,a]);return I==null?null:E.createElement(tx.Provider,{value:$},E.createElement(z_.Provider,{children:s,value:I}))}function YU(t){let{children:r,location:s}=t;return MU(AT(r),s)}new Promise(()=>{});function AT(t,r){r===void 0&&(r=[]);let s=[];return E.Children.forEach(t,(o,a)=>{if(!E.isValidElement(o))return;let d=[...r,a];if(o.type===E.Fragment){s.push.apply(s,AT(o.props.children,d));return}o.type!==OT&&ps(!1),!o.props.index||!o.props.children||ps(!1);let h={id:o.props.id||d.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(h.children=AT(o.props.children,d)),s.push(h)}),s}const qU="6";try{window.__reactRouterVersion=qU}catch{}const JU="startTransition",HC=N_[JU];function QU(t){let{basename:r,children:s,future:o,window:a}=t,d=E.useRef();d.current==null&&(d.current=hU({window:a,v5Compat:!0}));let h=d.current,[f,g]=E.useState({action:h.action,location:h.location}),{v7_startTransition:$}=o||{},v=E.useCallback(y=>{$&&HC?HC(()=>g(y)):g(y)},[g,$]);return E.useLayoutEffect(()=>h.listen(v),[h,v]),E.useEffect(()=>KU(o),[o]),E.createElement(XU,{basename:r,children:s,location:f.location,navigationType:f.action,navigator:h,future:o})}var GC;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(GC||(GC={}));var jC;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(jC||(jC={}));const NT=(t,r)=>r.some(s=>t instanceof s);let WC,zC;function ZU(){return WC||(WC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eV(){return zC||(zC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const LT=new WeakMap,Oy=new WeakMap,X_=new WeakMap;function tV(t){const r=new Promise((s,o)=>{const a=()=>{t.removeEventListener("success",d),t.removeEventListener("error",h)},d=()=>{s(Fu(t.result)),a()},h=()=>{o(t.error),a()};t.addEventListener("success",d),t.addEventListener("error",h)});return X_.set(r,t),r}function nV(t){if(LT.has(t))return;const r=new Promise((s,o)=>{const a=()=>{t.removeEventListener("complete",d),t.removeEventListener("error",h),t.removeEventListener("abort",h)},d=()=>{s(),a()},h=()=>{o(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",d),t.addEventListener("error",h),t.addEventListener("abort",h)});LT.set(t,r)}let MT={get(t,r,s){if(t instanceof IDBTransaction){if(r==="done")return LT.get(t);if(r==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return Fu(t[r])},set(t,r,s){return t[r]=s,!0},has(t,r){return t instanceof IDBTransaction&&(r==="done"||r==="store")?!0:r in t}};function ox(t){MT=t(MT)}function rV(t){return eV().includes(t)?function(...r){return t.apply(PT(this),r),Fu(this.request)}:function(...r){return Fu(t.apply(PT(this),r))}}function sV(t){return typeof t=="function"?rV(t):(t instanceof IDBTransaction&&nV(t),NT(t,ZU())?new Proxy(t,MT):t)}function Fu(t){if(t instanceof IDBRequest)return tV(t);if(Oy.has(t))return Oy.get(t);const r=sV(t);return r!==t&&(Oy.set(t,r),X_.set(r,t)),r}const PT=t=>X_.get(t);function oV(t,r,{blocked:s,upgrade:o,blocking:a,terminated:d}={}){const h=indexedDB.open(t,r),f=Fu(h);return o&&h.addEventListener("upgradeneeded",g=>{o(Fu(h.result),g.oldVersion,g.newVersion,Fu(h.transaction),g)}),s&&h.addEventListener("blocked",g=>s(g.oldVersion,g.newVersion,g)),f.then(g=>{d&&g.addEventListener("close",()=>d()),a&&g.addEventListener("versionchange",$=>a($.oldVersion,$.newVersion,$))}).catch(()=>{}),f}const iV=["get","getKey","getAll","getAllKeys","count"],lV=["put","add","delete","clear"],Ay=new Map;function KC(t,r){if(!(t instanceof IDBDatabase&&!(r in t)&&typeof r=="string"))return;if(Ay.get(r))return Ay.get(r);const s=r.replace(/FromIndex$/,""),o=r!==s,a=lV.includes(s);if(!(s in(o?IDBIndex:IDBObjectStore).prototype)||!(a||iV.includes(s)))return;const d=async function(h,...f){const g=this.transaction(h,a?"readwrite":"readonly");let $=g.store;return o&&($=$.index(f.shift())),(await Promise.all([$[s](...f),a&&g.done]))[0]};return Ay.set(r,d),d}ox(t=>({...t,get:(r,s,o)=>KC(r,s)||t.get(r,s,o),has:(r,s)=>!!KC(r,s)||t.has(r,s)}));const aV=["continue","continuePrimaryKey","advance"],XC={},DT=new WeakMap,ix=new WeakMap,cV={get(t,r){if(!aV.includes(r))return t[r];let s=XC[r];return s||(s=XC[r]=function(...o){DT.set(this,ix.get(this)[r](...o))}),s}};async function*uV(...t){let r=this;if(r instanceof IDBCursor||(r=await r.openCursor(...t)),!r)return;r=r;const s=new Proxy(r,cV);for(ix.set(s,r),X_.set(s,PT(r));r;)yield s,r=await(DT.get(s)||r.continue()),DT.delete(s)}function YC(t,r){return r===Symbol.asyncIterator&&NT(t,[IDBIndex,IDBObjectStore,IDBCursor])||r==="iterate"&&NT(t,[IDBIndex,IDBObjectStore])}ox(t=>({...t,get(r,s,o){return YC(r,s)?uV:t.get(r,s,o)},has(r,s){return YC(r,s)||t.has(r,s)}}));const dV="arduino-ide-db",hV=1,qC=5;let O$=null;const Ju=async()=>O$||(O$=await oV(dV,hV,{upgrade(t){t.createObjectStore("projects",{keyPath:"id"}).createIndex("by-updated","updatedAt");const s=t.createObjectStore("versions",{keyPath:"id"});s.createIndex("by-project","projectId"),s.createIndex("by-created","createdAt")}}),O$),lx=()=>`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,JC=async(t,r,s,o)=>{const a=await Ju(),d=new Date,h={id:lx(),name:t,blocklyXml:r,generatedCode:s,board:o,createdAt:d,updatedAt:d};return await a.put("projects",h),await ax(h.id,r,s),h},pV=async t=>(await Ju()).get("projects",t),fV=async()=>(await Ju()).getAllFromIndex("projects","by-updated"),QC=async(t,r)=>{const s=await Ju(),o=await s.get("projects",t);if(!o)return;const a={...o,...r,updatedAt:new Date};return await s.put("projects",a),(r.blocklyXml||r.generatedCode)&&await ax(t,r.blocklyXml||o.blocklyXml,r.generatedCode||o.generatedCode),a},mV=async t=>{const r=await Ju();await r.delete("projects",t);const s=await r.getAllFromIndex("versions","by-project",t);for(const o of s)await r.delete("versions",o.id)},ax=async(t,r,s)=>{const o=await Ju(),a={id:lx(),projectId:t,blocklyXml:r,generatedCode:s,createdAt:new Date};await o.put("versions",a);const d=await o.getAllFromIndex("versions","by-project",t);if(d.length>qC){const h=d.sort((f,g)=>f.createdAt.getTime()-g.createdAt.getTime()).slice(0,d.length-qC);for(const f of h)await o.delete("versions",f.id)}return a},gV=async t=>(await(await Ju()).getAllFromIndex("versions","by-project",t)).sort((o,a)=>a.createdAt.getTime()-o.createdAt.getTime()),Xh=[{name:"Arduino Uno",fqbn:"arduino:avr:uno",uploadProtocol:"stk500v1",baudRate:115200},{name:"Arduino Nano",fqbn:"arduino:avr:nano",uploadProtocol:"stk500v1",baudRate:115200},{name:"Arduino Nano (Old Bootloader)",fqbn:"arduino:avr:nano:cpu=atmega328old",uploadProtocol:"stk500v1",baudRate:57600},{name:"Arduino Mega",fqbn:"arduino:avr:mega",uploadProtocol:"stk500v2",baudRate:115200}],cx=()=>"serial"in navigator,ux=async()=>{if(!cx())throw new Error("WebSerial not supported");try{return await navigator.serial.requestPort()}catch(t){if(t instanceof DOMException&&t.name==="NotFoundError")return null;throw t}},$V=async(t,r=9600)=>(await t.open({baudRate:r}),{port:t,reader:t.readable?.getReader()??null,writer:t.writable?.getWriter()??null,isConnected:!0}),ZC=async t=>{const{reader:r,writer:s,port:o}=t;try{r&&(await r.cancel(),r.releaseLock())}catch(a){console.warn(a)}try{s&&(await s.close(),s.releaseLock())}catch(a){console.warn(a)}try{await o.close()}catch(a){console.warn(a)}},_V=async(t,r)=>{if(!t.writer)throw new Error("No writer");await t.writer.write(new TextEncoder().encode(r))},dx=16,hx=20,vV=48,yV=80,TV=81,bV=85,EV=100,Om=32,wV=t=>{const r=t.split(`
`).filter(o=>o.trim().startsWith(":")),s=[];for(const o of r){const a=parseInt(o.substring(1,3),16);if(parseInt(o.substring(7,9),16)===0)for(let h=0;h<a;h++)s.push(parseInt(o.substring(9+h*2,11+h*2),16))}return new Uint8Array(s)},Am=async(t,r,s)=>{const o=[],a=Date.now();for(;Date.now()-a<r;){const d=t.read(),h=new Promise($=>setTimeout(()=>$({value:void 0,done:!1}),20)),{value:f,done:g}=await Promise.race([d,h]);if(f){if(o.push(...f),s){const $=Array.from(f).map(v=>v.toString(16).padStart(2,"0")).join(" ");s(`[RX] ${$}`)}if(o.includes(hx)&&o.includes(dx))break}if(g)break}return new Uint8Array(o)},SV=async(t,r)=>{r&&r("Ejecutando secuencia Auto-Reset..."),await t.setSignals({dataTerminalReady:!1,requestToSend:!1}),await new Promise(s=>setTimeout(s,50)),await t.setSignals({dataTerminalReady:!0,requestToSend:!0}),await new Promise(s=>setTimeout(s,250)),await t.setSignals({dataTerminalReady:!1,requestToSend:!1}),await new Promise(s=>setTimeout(s,250))},CV=async(t,r,s)=>{const o=d=>{s&&s(d)};for(let d=0;d<30;d++){const h=new Uint8Array([vV,Om]);try{await r.write(h);const f=await Am(t,50,s);if(f.includes(hx)&&f.includes(dx))return o(" Bootloader detectado y sincronizado."),!0}catch(f){o(`Error escritura sync: ${f}`)}await new Promise(f=>setTimeout(f,20))}return!1},IV=async(t,r,s,o,a)=>{const d=g=>{console.log(`[WebSerial] ${g}`),a&&a(g)};try{d(`Abriendo puerto a ${s.baudRate}...`),await t.open({baudRate:s.baudRate})}catch(g){if(!(g instanceof DOMException&&g.name==="InvalidStateError"))throw new Error(`Error abriendo puerto: ${g}`)}const h=t.writable?.getWriter(),f=t.readable?.getReader();if(!h||!f)throw new Error("No se pudo obtener writer/reader del puerto.");try{if(o({stage:"syncing",progress:0,message:"Iniciando Auto-Reset..."}),await SV(t,a),o({stage:"syncing",progress:10,message:"Sincronizando..."}),!await CV(f,h,a))throw new Error("Fallo de sincronizacin. No se detect el bootloader tras el Auto-Reset.");d("Entrando en modo programacin..."),await h.write(new Uint8Array([yV,Om])),await Am(f,200,a),o({stage:"uploading",progress:20,message:"Subiendo..."});const $=128,v=Math.ceil(r.length/$);for(let y=0;y<v;y++){const w=y*$,S=r.slice(w,w+$),O=new Uint8Array($);O.fill(255),O.set(S);const I=w>>1,x=new Uint8Array([bV,I&255,I>>8&255,Om]);await h.write(x),await Am(f,50);const A=new Uint8Array([EV,0,$,70]),M=new Uint8Array(A.length+$+1);M.set(A,0),M.set(O,A.length),M[M.length-1]=Om,await h.write(M),await Am(f,300);const P=Math.round((y+1)/v*100);o({stage:"uploading",progress:20+P*.7,message:`Subiendo ${P}%`})}o({stage:"verifying",progress:95,message:"Finalizando..."}),await h.write(new Uint8Array([TV,Om])),await Am(f,200),o({stage:"done",progress:100,message:"Subida exitosa!"}),d(" FIN.")}catch(g){throw d(`Error fatal: ${g}`),o({stage:"error",progress:0,message:g.message}),g}finally{if(f){try{await f.cancel()}catch{}f.releaseLock()}if(h){try{await h.close()}catch{}h.releaseLock()}try{await t.close()}catch{}}},px=E.createContext(null),Qu=()=>{const t=E.useContext(px);if(!t)throw new Error("useIDE must be used within an IDEProvider");return t},RV=({children:t})=>{const[r,s]=E.useState(null),[o,a]=E.useState([]),[d,h]=E.useState([]),[f,g]=E.useState(!1),[$,v]=E.useState(`
    void setup() {
      pinMode(13, OUTPUT);
    }

    void loop() {
      digitalWrite(13, HIGH);
      delay(1000);
      digitalWrite(13, LOW);
      delay(1000);
    }`),[y,w]=E.useState(Xh[1]),[S,O]=E.useState(!1),[I,x]=E.useState(!1),[A,M]=E.useState(0),[P,F]=E.useState([]),[B,V]=E.useState([]),[j,W]=E.useState(9600),[he,we]=E.useState("code"),Ee=E.useCallback((ne,me)=>{F(fe=>[{id:`${Date.now()}-${Math.random()}`,type:ne,message:me,timestamp:new Date},...fe])},[]),ye=E.useCallback(()=>F([]),[]),De=E.useCallback((ne,me)=>{V(fe=>[...fe.slice(-99),{id:`${Date.now()}-${Math.random()}`,type:ne,content:me,timestamp:new Date}])},[]),ce=E.useCallback(()=>V([]),[]),Oe=E.useCallback(async()=>{g(!0);try{const ne=await fV();a(ne.reverse())}catch(ne){Ee("error",`Error al cargar proyectos: ${ne}`)}finally{g(!1)}},[Ee]),ie=E.useCallback(async(ne,me,fe)=>{const te=await JC(ne,me,fe,y.fqbn);return s(te),v(fe),await Oe(),Ee("success",`Proyecto creado: ${ne}`),te},[y.fqbn,Oe,Ee]),pe=E.useCallback(async ne=>{g(!0);try{const me=await pV(ne);if(me){s(me),v(me.generatedCode);const fe=Xh.find(te=>te.fqbn===me.board);fe&&w(fe),Ee("info",`Proyecto abierto: ${me.name}`)}}catch(me){Ee("error",`Error al abrir proyecto: ${me}`)}finally{g(!1)}},[Ee]),G=E.useCallback(async(ne,me)=>{if(!r){await ie("Proyecto sin ttulo",ne,me);return}try{const fe=await QC(r.id,{blocklyXml:ne,generatedCode:me,board:y.fqbn})}catch(fe){Ee("error",`Error al guardar: ${fe}`)}},[r,y.fqbn,ie]),ee=E.useCallback(async()=>{if(r)try{await mV(r.id),s(null),v(""),await Oe(),Ee("info","Proyecto eliminado")}catch(ne){Ee("error",`Error al eliminar: ${ne}`)}},[r,Oe,Ee]),$e=E.useCallback(async()=>{if(!r){h([]);return}try{const ne=await gV(r.id);h(ne)}catch(ne){Ee("error",`Error al cargar versiones: ${ne}`)}},[r,Ee]),z=E.useCallback(async ne=>{if(r)try{const me=await QC(r.id,{name:ne});me&&(s(me),await Oe(),Ee("info",`Proyecto renombrado a: ${ne}`))}catch(me){Ee("error",`Error al renombrar: ${me}`)}},[r,Oe,Ee]),se=E.useCallback(async(ne,me,fe)=>{const te=Xh.find(Le=>Le.fqbn===fe)||Xh[0];w(te);const Se=await JC(me,ne,"",fe);s(Se),await Oe(),Ee("success",`Proyecto importado: ${me}`)},[Oe,Ee]),ae={currentProject:r,projects:o,versions:d,isLoading:f,generatedCode:$,setGeneratedCode:v,selectedBoard:y,setSelectedBoard:w,isConnected:S,setIsConnected:O,isUploading:I,setIsUploading:x,uploadProgress:A,setUploadProgress:M,consoleMessages:P,addConsoleMessage:Ee,clearConsole:ye,serialMessages:B,addSerialMessage:De,clearSerialMessages:ce,serialBaudRate:j,setSerialBaudRate:W,loadProjects:Oe,createNewProject:ie,openProject:pe,saveProject:G,deleteCurrentProject:ee,loadVersions:$e,renameProject:z,importProject:se,activeTab:he,setActiveTab:we};return R.jsx(px.Provider,{value:ae,children:t})};var Y$={exports:{}},q$={exports:{}},kV=q$.exports,eI;function fx(){return eI||(eI=1,(function(t,r){(function(s,o){t.exports=o()})(kV,function(){var s={},o,a,d,h,f,g,$,v,y,w,S,O,I,x,A,M,P,F,B,V,j,W,he,we,Ee,ye,De,ce,Oe,ie,pe,G,ee,$e,z,se,ae,ne,me,fe,te,Se,Le,He,tt,ct,nt,Rt,Wt,Mt,wn,At,Yr,je,at,ft,kn,or,fs,hn,zt,Yn,ti,ue,Ge,k,D,q,Q,xe,kt,qn,qr,ni,Jr,xr,_r,ri,it,yt,gt,on,Jn,Qn,Qr,Sn,vr,si,Ql,Zl,nd,Sg,Cg,ea,oi,ic,Sp,lc,ac,Cp,cc,Ip,rd,Rp,Qt,sd,ta,uc,ii,Ig,Ki,li,Or,Rg,Zr,kg,ai,xn,ci,na,ir,es,xg,kp,ra,od,id,Xi,dc,ld,Et,xp,Op,sa,Ap,Yi,Np,hc,qi,Hs,Gs,Eo,ui,js,ms,Og,ad,Ji,Ag,Lp,Ws,Mp,pc,Bn,oa,Qi,fc,Ng,Lg,cd,mc,gc,zs,Ar,$c,_c,Pp,vc,yc,Dp,yr,Zi,ud,ia,Bp,dd,di,hi,Tc,el,Fp,Up,Vp,la,hd,Hp,Mg,Gp,jp,pd,Wp,zp,Kp,Xp,fd,bc,Yp,md,Ec,Ks,qp,Jp,wc,Qp,Zp,Pg,aa,tl,Dg,ef,tf,nf,rf,nl,pi,sf,ca,gd,of,lf,rl,sl,wo,ua,af,cf,$d,_d,uf,vd,df,hf,Bg,ol,Sc,yd,Tr,gs,Td,Cc,bd,Zt,Ed,da,il,ll,Ic,fi,mi,wd,Xs,Ys,Rc,Sd,kc,pf,ff,Cd,mf,Id,ha,So,Rd,kd,Fg,xc,al,gf,Oc,Ac,Vt,cl,pa,Co,$f,xd,ts,fa,lr,_f,Ug,vf,yf,qs,ma,Od,Ad,Nd,Ld,Vg,Md,Hg,Gg,ga,Io,Tf,gi,Nr,ul,ns,Nc,bf,$a,Lr,Mr,ar,Lc,Pd,dl,Js,Nt,Pt,Ro,Fn,Zn,Qs,$i,Un,Mc,Ef,wf,Pc,Ke,ln,an,Lt,$s,_a,Me,Dt,_i,Dc,_s,cr,ur,ko,Zs,vs,eo,Dd,Bc,Bd,dr,br,Bt,rs,Sf,Cf,Fd,Ud,Vd,Fc,va,to,Hd,If,hl,ya,Gd,Uc,vi,Rf,Vc,Hc,ys,Gc,jd,Ta,Er,pl,Cn,xo,Wd,ba,Ts,no,jc,zd,bs,ro,Ea,Kd,wa,Xd,Sa,Es,Ca,Ia,yi,Yd,Oo,kf,qd,Kt,Ra,Wc,zc,ka,Kc,Ao,Ht,en,$n,Xc,fl,ml,xf,On,Yc,qc,Jc,ss,wr,gl,Jd,Qd,Of,Zd,Af,Nf,Lf,Mf,Pf,ve;o=function(e,n,i,u){if(!(e instanceof Te)&&typeof e!="string"||`${e}`.trim()==="")throw Error('Invalid type "'+e+'". The type must be a non-empty string or a Blockly.registry.Type.');if(e=`${e}`.toLowerCase(),typeof n!="string"||n.trim()==="")throw Error('Invalid name "'+n+'". The name must be a non-empty string.');const m=n.toLowerCase();if(!i)throw Error("Can not register a null value");let T=os[e],N=$l[e];if(T||(T=os[e]=Object.create(null),N=$l[e]=Object.create(null)),a(e,i),!u&&T[m]&&T[m]!==i)throw Error('Name "'+m+'" with type "'+e+'" already registered.');T[m]=i,N[m]=n},a=function(e,n){switch(e){case String(Te.FIELD):if(typeof n.fromJson!="function")throw Error('Type "'+e+'" must have a fromJson function')}},d=function(e,n){e=`${e}`.toLowerCase(),n=n.toLowerCase();const i=os[e];i&&i[n]?(delete os[e][n],delete $l[e][n]):console.warn("Unable to unregister ["+n+"]["+e+"] from the registry.")},h=function(e,n,i){e=`${e}`.toLowerCase(),n=n.toLowerCase();const u=os[e];if(!u||!u[n]){if(n="Unable to find ["+n+"]["+e+"] in the registry.",i)throw Error(n+" You must require or register a "+e+" plugin.");return console.warn(n),null}return u[n]},f=function(e,n){return e=`${e}`.toLowerCase(),n=n.toLowerCase(),(e=os[e])?!!e[n]:!1},g=function(e,n,i){return h(e,n,i)},$=function(e,n,i){return h(e,n,i)},v=function(e,n,i){e=`${e}`.toLowerCase();var u=os[e];if(!u){if(u=`Unable to find [${e}] in the registry.`,i)throw Error(`${u} You must require or register a ${e} plugin.`);return console.warn(u),null}if(!n)return u;e=$l[e],i=Object.create(null);for(const m of Object.keys(u))i[e[m]]=u[m];return i},y=function(e,n,i){return n=n.plugins[String(e)]||Pr,typeof n=="function"?n:g(e,n,i)},w=function(e,n,i,u){e=e+" was deprecated in "+n+" and will be deleted in "+i+".",u&&(e+=`
Use `+u+" instead."),Bf.has(e)||(Bf.add(e),console.warn(e))},S=function(){return"blockly-"+(Wg++).toString(36)},O=function(){return Uf.genUid()},I=function(e){return e.type===oe.BLOCK_CREATE},x=function(e){return e.type===oe.BLOCK_DELETE},A=function(e){return e.type===oe.BLOCK_CHANGE},M=function(e){return e.type===oe.BLOCK_FIELD_INTERMEDIATE_CHANGE},P=function(e){return e.type===oe.BLOCK_MOVE},F=function(e){return e.type===oe.CLICK},B=function(e){return e.type===oe.BUBBLE_OPEN},V=function(e){return e.type===oe.VIEWPORT_CHANGE},s.setRecordUndo$$module$build$src$core$events$utils=function(e){Qc=e},j=function(){return Qc},W=function(e){jf.fireInternal(e)},he=function(e){if(ce()){if(!so.length)try{requestAnimationFrame(()=>{setTimeout(we,0)})}catch{setTimeout(we,0)}Ee(e)}},we=function(){const e=ye(so,!0);so.length=0;for(const n of e){if(!n.workspaceId)continue;let i;(i=$e(n.workspaceId))==null||i.fireChangeListener(n)}},Ee=function(e){if(A(e)&&e.element==="mutation"){let n;for(n=so.length;0<n;n--){const i=so[n-1];if(i.group!==e.group||i.workspaceId!==e.workspaceId||!P(i)||i.newParentId!==e.blockId)break}so.splice(n,0,e)}else so.push(e)},ye=function(e,n=!0){n||(w("filter(queue, /*forward=*/false)","v11.2","v12"),e=e.slice().reverse());const i=[];for(const u of e)if(e=i[i.length-1],!u.isNull())if(e&&e.workspaceId===u.workspaceId&&e.group===u.group)if(P(u)&&P(e)&&u.blockId===e.blockId){if(e.newParentId=u.newParentId,e.newInputName=u.newInputName,e.newCoordinate=u.newCoordinate,e.reason||u.reason){let m,T;e.reason=Array.from(new Set(((m=e.reason)!=null?m:[]).concat((T=u.reason)!=null?T:[])))}}else A(u)&&A(e)&&u.blockId===e.blockId&&u.element===e.element&&u.name===e.name?e.newValue=u.newValue:V(u)&&V(e)?(e.viewTop=u.viewTop,e.viewLeft=u.viewLeft,e.scale=u.scale,e.oldScale=u.oldScale):F(u)&&B(e)||i.push(u);else i.push(u);return e=i.filter(u=>!u.isNull()),n||e.reverse(),e},De=function(){for(let e=0,n;n=so[e];e++)n.recordUndo=!1},s.disable$$module$build$src$core$events$utils=function(){Gf++},s.enable$$module$build$src$core$events$utils=function(){Gf--},ce=function(){return Gf===0},s.getGroup$$module$build$src$core$events$utils=function(){return Hf},s.setGroup$$module$build$src$core$events$utils=function(e){jf.setGroupInternal(e)},Oe=function(e){Hf=typeof e=="boolean"?e?O():"":e},ie=function(e){const n=[];e=e.getDescendants(!1);for(let i=0,u;u=e[i];i++)n[i]=u.id;return n},pe=function(e,n){const i=G(e.type);if(!i)throw Error("Unknown event type.");return i.fromJson(e,n)},G=function(e){const n=g(Te.EVENT,e);if(!n)throw Error(`Event type ${e} not found in registry.`);return n},ee=function(e){if((P(e)||I(e))&&e.workspaceId){var n=$e(e.workspaceId);if(!e.blockId)throw Error("Encountered a blockEvent without a proper blockId");if(e=n.getBlockById(e.blockId)){const i=Qc;try{Qc=!1;const u=e.getParent();if(u&&!u.hasDisabledReason(th)){const m=e.getDescendants(!1);for(let T=0,N;N=m[T];T++)N.setDisabledReason(!1,th)}else if((e.outputConnection||e.previousConnection)&&!n.isDragging())do e.setDisabledReason(!0,th),e=e.getNextBlock();while(e)}finally{Qc=i}}}},$e=function(e){return Ti[e]||null},z=function(){const e=[];for(const n in Ti)e.push(Ti[n]);return e},se=function(e){Ti[e.id]=e},ae=function(e){delete Ti[e.id]},ne=function(){return zg},me=function(e){zg=e},fe=function(){return _l},s.setSelected$$module$build$src$core$common=function(e){if(_l!==e){var n,i,u,m,T,N,H=new(G(oe.SELECTED))((u=(n=_l)==null?void 0:n.id)!=null?u:null,(m=e?.id)!=null?m:null,(N=(T=e?.workspace.id)!=null?T:(i=_l)==null?void 0:i.workspace.id)!=null?N:"");W(H);var ge;(ge=_l)==null||ge.unselect(),_l=e;var Fe;(Fe=_l)==null||Fe.select()}},te=function(){return Kg},Se=function(e){Kg=e},Le=function(e){for(;e.options.parentWorkspace;)e=e.options.parentWorkspace;const n=e.getParentSvg(),i=e.getCachedParentSvgSize();var u=n.parentElement;if(u instanceof HTMLElement){var m=u.offsetWidth;u=u.offsetHeight,i.width!==m&&(n.setAttribute("width",m+"px"),e.setCachedParentSvgSize(m,null)),i.height!==u&&(n.setAttribute("height",u+"px"),e.setCachedParentSvgSize(null,u)),e.resize()}},He=function(e,n){const i=Object.create(null),u=e.getDescendants(!0);n&&(e=e.getNextBlock())&&(e=u.indexOf(e),u.splice(e,u.length-e));for(let m=0,T;T=u[m];m++)i[T.type]?i[T.type]++:i[T.type]=1;return i},tt=function(e){return function(){this.jsonInit(e)}},ct=function(e){nh.defineBlocksWithJsonArrayInternal(e)},nt=function(e){s.defineBlocks$$module$build$src$core$common(s.createBlockDefinitionsFromJsonArray$$module$build$src$core$common(e))},s.createBlockDefinitionsFromJsonArray$$module$build$src$core$common=function(e){const n={};for(let i=0;i<e.length;i++){const u=e[i];if(!u){console.warn(`Block definition #${i} in JSON array is ${u}. Skipping`);continue}const m=u.type;m?n[m]={init:tt(u)}:console.warn(`Block definition #${i} in JSON array is missing a type attribute. Skipping.`)}return n},s.defineBlocks$$module$build$src$core$common=function(e){for(const n of Object.keys(e)){const i=e[n];n in hr&&console.warn(`Block definition "${n}" overwrites previous definition.`),hr[n]=i}},Rt=function(e,n){Wt(),eu=setTimeout(function(){n&&n.handleRightClick(e)},xa)},Wt=function(){eu&&(clearTimeout(eu),eu=0)},Mt=function(){Oa=null},wn=function(e){return!e.type.startsWith("pointer")||e instanceof PointerEvent&&Yr(e)},At=function(e){return`${e.pointerId}`},Yr=function(e){const n=At(e);return Oa?Oa===n:e.type==="pointerdown"?(Oa=n,!0):!1},je=function(e,n,i,u,m){function T(H){(m||wn(H))&&(i?u.call(i,H):u(H))}const N=[];if(n in yl)for(let H=0;H<yl[n].length;H++){const ge=yl[n][H];e.addEventListener(ge,T,!1),N.push([e,ge,T])}else e.addEventListener(n,T,!1),N.push([e,n,T]);return N},at=function(e,n,i,u){function m(N){i?u.call(i,N):u(N)}const T=[];if(n in yl)for(let N=0;N<yl[n].length;N++){const H=yl[n][N];e.addEventListener(H,m,!1),T.push([e,H,m])}else e.addEventListener(n,m,!1),T.push([e,n,m]);return T},ft=function(e){const n=e[e.length-1][2];for(;e.length;){const[i,u,m]=e.pop();i.removeEventListener(u,m,!1)}return n},kn=function(e){if(e.target instanceof HTMLElement){if(e.target.isContentEditable||e.target.getAttribute("data-is-text-input")==="true")return!0;if(e.target instanceof HTMLInputElement)return e=e.target,e.type==="text"||e.type==="number"||e.type==="email"||e.type==="password"||e.type==="search"||e.type==="tel"||e.type==="url";if(e.target instanceof HTMLTextAreaElement)return!0}return!1},or=function(e){return e.ctrlKey&&ru?!0:e.button===2},fs=function(e,n,i){const u=n.createSVGPoint();return u.x=e.clientX,u.y=e.clientY,i||(i=n.getScreenCTM().inverse()),u.matrixTransform(i)},hn=function(e){switch(e.deltaMode){default:return{x:e.deltaX,y:e.deltaY};case 1:return{x:e.deltaX*ch,y:e.deltaY*ch};case 2:return{x:e.deltaX*su,y:e.deltaY*su}}},zt=function(e,n){return n=e.indexOf(n),n===-1?!1:(e.splice(n,1),!0)},Yn=function(e){if(Aa)throw Error("CSS already injected");Cs+=`
`+e},ti=function(e,n){Aa||(Aa=!0,e&&(e=n.replace(/[\\/]$/,""),n=Cs.replace(/<<<PATH>>>/g,e),Cs="",e=document.createElement("style"),e.id="blockly-common-style",n=document.createTextNode(n),e.appendChild(n),document.head.insertBefore(e,document.head.firstChild)))},ue=function(e,n,i){e=document.createElementNS(Tl,`${e}`);for(const u in n)e.setAttribute(u,`${n[u]}`);return i&&i.appendChild(e),e},Ge=function(e,n){return n=n.split(" "),n.every(i=>e.classList.contains(i))?!1:(e.classList.add(...n),!0)},k=function(e,n){e.classList.remove(...n.split(" "))},D=function(e,n){return n=n.split(" "),n.every(i=>!e.classList.contains(i))?!1:(e.classList.remove(...n),!0)},q=function(e,n){return e.classList.contains(n)},Q=function(e){return e&&e.parentNode?e.parentNode.removeChild(e):null},xe=function(e,n){const i=n.nextSibling;if(n=n.parentNode,!n)throw Error("Reference node has no parent.");i?n.insertBefore(e,i):n.appendChild(e)},kt=function(e,n){e.style.transform=n,e.style["-webkit-transform"]=n},qn=function(){em++,Gt||(Gt=Object.create(null))},qr=function(){em--,em||(Gt=null)},ni=function(e){const n=e.textContent+`
`+e.className.baseVal;let i;if(Gt&&(i=Gt[n]))return i;try{i=e.getComputedTextLength()}catch{return 8*e.textContent.length}return Gt&&(Gt[n]=i),i},Jr=function(e,n,i,u){return xr(e,n+"pt",i,u)},xr=function(e,n,i,u){const m=e.textContent;e=m+`
`+e.className.baseVal;var T;return Gt&&(T=Gt[e])||(uh||(T=document.createElement("canvas"),T.className="blocklyComputeCanvas",document.body.appendChild(T),uh=T.getContext("2d")),uh.font=i+" "+n+" "+u,T=m?uh.measureText(m).width:0,Gt&&(Gt[e]=T)),T},_r=function(e,n,i,u){const m=document.createElement("span");m.style.font=i+" "+n+" "+u,m.textContent=e,e=document.createElement("div"),e.style.width="1px",e.style.height="0",n=document.createElement("div"),n.style.display="flex",n.style.position="fixed",n.style.top="0",n.style.left="0",n.appendChild(m),n.appendChild(e),document.body.appendChild(n),i={height:0,baseline:0};try{n.style.alignItems="baseline",i.baseline=e.offsetTop-m.offsetTop,n.style.alignItems="flex-end",i.height=e.offsetTop-m.offsetTop}finally{document.body.removeChild(n)}return i},ri=function(e){return bl.getSizeInternal(e)},it=function(e){if(gt(e,"display")!=="none")return yt(e);const n=e.style,i=n.display,u=n.visibility,m=n.position;n.visibility="hidden",n.position="absolute",n.display="inline";const T=e.offsetWidth;return e=e.offsetHeight,n.display=i,n.position=m,n.visibility=u,new Re(T,e)},yt=function(e){return w("Blockly.utils.style.getSizeWithDisplay()","v11.2","v13"),new Re(e.offsetWidth,e.offsetHeight)},gt=function(e,n){return e=window.getComputedStyle(e),e[n]||e.getPropertyValue(n)},on=function(e){const n=new ke(0,0);e=e.getBoundingClientRect();var i=document.documentElement;return i=new ke(window.pageXOffset||i.scrollLeft,window.pageYOffset||i.scrollTop),n.x=e.left+i.x,n.y=e.top+i.y,n},Jn=function(){const e=document.body,n=document.documentElement;return new ke(e.scrollLeft||n.scrollLeft,e.scrollTop||n.scrollTop)},Qn=function(e){w("Blockly.utils.style.getBorderBox()","v11.2","v13");const n=parseFloat(gt(e,"borderLeftWidth")),i=parseFloat(gt(e,"borderRightWidth")),u=parseFloat(gt(e,"borderTopWidth"));return e=parseFloat(gt(e,"borderBottomWidth")),new St(u,e,n,i)},Qr=function(e,n,i){w("Blockly.utils.style.scrollIntoContainerView()","v11.2","v13","the native Element.scrollIntoView()"),e=Sn(e,n,i),n.scrollLeft=e.x,n.scrollTop=e.y},Sn=function(e,n,i){w("Blockly.utils.style.getContainerOffsetToScrollInto()","v11.2","v13");var u=on(e),m=on(n),T=Qn(n);const N=u.x-m.x-T.left;return u=u.y-m.y-T.top,m=yt(e),e=n.clientWidth-m.width,m=n.clientHeight-m.height,T=n.scrollLeft,n=n.scrollTop,i?(T+=N-e/2,n+=u-m/2):(T+=Math.min(N,Math.max(N-e,0)),n+=Math.min(u,Math.max(u-m,0))),new ke(T,n)},vr=function(e){const n=new ke(0,0);var i=e.x&&e.getAttribute("x");const u=e.y&&e.getAttribute("y");return i&&(n.x=parseInt(i)),u&&(n.y=parseInt(u)),(i=(i=e.getAttribute("transform"))&&i.match(tm))&&(n.x+=Number(i[1]),i[3]&&(n.y+=Number(i[3]))),(e=e.getAttribute("style"))&&e.includes("translate")&&(e=e.match(Jg))&&(n.x+=Number(e[1]),e[3]&&(n.y+=Number(e[3]))),n},si=function(e){let n=0,i=0;for(;e;){const u=vr(e);if(n+=u.x,i+=u.y,(" "+(e.getAttribute("class")||"")+" ").includes(" injectionDiv "))break;e=e.parentNode}return new ke(n,i)},Ql=function(){const e=Jn();return new St(e.y,document.documentElement.clientHeight+e.y,e.x,document.documentElement.clientWidth+e.x)},Zl=function(){const e=document.documentElement,n=window;return new ke(n.pageXOffset||e.scrollLeft,n.pageYOffset||e.scrollTop)},nd=function(e,n){var i=n.x;n=n.y;const u=e.getInjectionDiv().getBoundingClientRect();return i=new ke(i-u.left,n-u.top),n=e.getOriginOffsetInPixels(),ke.difference(i,n).scale(1/e.scale)},Sg=function(e,n){var i=n.scale(e.scale);n=i.x,i=i.y;const u=e.getInjectionDiv().getBoundingClientRect();return e=e.getOriginOffsetInPixels(),new ke(n+u.left+e.x,i+u.top+e.y)},Cg=function(e){({document:lu=lu,DOMParser:El=El,XMLSerializer:wl=wl}=e),iu=new El,dh=new wl},s.createElement$$module$build$src$core$utils$xml=function(e){return lu.createElementNS(Nn,e)},s.createTextNode$$module$build$src$core$utils$xml=function(e){return lu.createTextNode(e)},s.textToDom$$module$build$src$core$utils$xml=function(e){let n=iu.parseFromString(e,"text/xml");if(n&&n.documentElement&&!n.getElementsByTagName("parsererror").length)return n.documentElement;if((n=iu.parseFromString(e,"text/html"))&&n.body.firstChild&&n.body.firstChild.nodeName.toLowerCase()==="xml")return n.body.firstChild;throw Error(`DOMParser was unable to parse: ${e}`)},ea=function(e){return oi(dh.serializeToString(e))},oi=function(e){return e.replace(Rs,n=>`&#${n.charCodeAt(0)};`)},ic=function(e){return e?((e instanceof Element||typeof e=="string")&&(e=Qt(e),e=Ip(e)),Sp(e),e):null},Sp=function(e){const n=e.kind;if(e=e.contents,n&&n!==nm&&n!==hh)throw Error("Invalid toolbox kind "+n+". Please supply either "+nm+" or "+hh);if(!e)throw Error("Toolbox must have a contents attribute.")},lc=function(e){return e?e.contents?e.contents:Array.isArray(e)&&0<e.length&&!e[0].nodeType?e:rd(e):[]},ac=function(e){return rm.hasCategoriesInternal(e)},Cp=function(e){if(!e)return!1;const n=e.kind;return n?n===hh:!!e.contents.filter(i=>i.kind.toUpperCase()==="CATEGORY").length},cc=function(e){return e&&e.contents?!!e.contents.filter(function(n){return n.kind.toUpperCase()==="CATEGORY"}).length:!1},Ip=function(e){const n={contents:rd(e)};return e instanceof Node&&Rp(e,n),n},rd=function(e){const n=[];let i=e.childNodes;i||(i=e);for(let u=0,m;m=i[u];u++){if(!m.tagName)continue;e={};const T=m.tagName.toUpperCase();e.kind=T,T==="BLOCK"?e.blockxml=m:m.childNodes&&0<m.childNodes.length&&(e.contents=rd(m)),Rp(m,e),n.push(e)}return n},Rp=function(e,n){for(let i=0;i<e.attributes.length;i++){const u=e.attributes[i];u.nodeName.includes("css-")?(n.cssconfig=n.cssconfig||{},n.cssconfig[u.nodeName.replace("css-","")]=u.value):n[u.nodeName]=u.value}},Qt=function(e){let n=null;if(e)if(typeof e=="string"){if(n=s.textToDom$$module$build$src$core$utils$xml(e),n.nodeName.toLowerCase()!=="xml")throw TypeError("Toolbox should be an <xml> document.")}else e instanceof Element&&(n=e);return n},sd=function(e,n,i,u,m,T){const N=T.scrollbar&&T.scrollbar.canScrollVertically();return e.horizontal===Sl.LEFT?(i=m.absoluteMetrics.left+i,N&&T.RTL&&(i+=qt.scrollbarThickness)):(i=m.absoluteMetrics.left+m.viewMetrics.width-n.width-i,N&&!T.RTL&&(i-=qt.scrollbarThickness)),e.vertical===Lo.TOP?e=m.absoluteMetrics.top+u:(e=m.absoluteMetrics.top+m.viewMetrics.height-n.height-u,T.scrollbar&&T.scrollbar.canScrollHorizontally()&&(e-=qt.scrollbarThickness)),new St(e,e+n.height,i,i+n.width)},ta=function(e,n){return{horizontal:n.toolboxMetrics.position===qe.LEFT||e.horizontalLayout&&!e.RTL?Sl.RIGHT:Sl.LEFT,vertical:n.toolboxMetrics.position===qe.BOTTOM?Lo.TOP:Lo.BOTTOM}},uc=function(e,n,i,u){const m=e.left,T=e.right-e.left,N=e.bottom-e.top;for(let H=0;H<u.length;H++){const ge=u[H];e.intersects(ge)&&(e=i===Mo.UP?ge.top-N-n:ge.bottom+n,e=new St(e,e+N,m,m+T),H=-1)}return e},ii=function(e,n){o(Te.SERIALIZER,e,n)},Ig=function(e){d(Te.SERIALIZER,e)},Ki=function(e,{addCoordinates:n=!1,saveIds:i=!0}={}){const u=e.workspace,m=Object.create(null);return m.height=e.getSize().height,m.width=e.getSize().width,i&&(m.id=e.id),n&&(n=e.getRelativeToSurfaceXY(),m.x=u.RTL?u.getWidth()-n.x:n.x,m.y=n.y),e.getText()&&(m.text=e.getText()),e.isCollapsed()&&(m.collapsed=!0),e.isOwnEditable()||(m.editable=!1),e.isOwnMovable()||(m.movable=!1),e.isOwnDeletable()||(m.deletable=!1),m},li=function(e,n,{recordUndo:i=!1}={}){const u=j();if(s.setRecordUndo$$module$build$src$core$events$utils(i),i=n.newComment(e.id),e.text!==void 0&&i.setText(e.text),e.x!==void 0||e.y!==void 0){const T=i.getRelativeToSurfaceXY();let N,H=(N=e.x)!=null?N:T.x;H=n.RTL?n.getWidth()-H:H;var m;n=(m=e.y)!=null?m:T.y,i.moveTo(new ke(H,n))}if(e.width!==void 0||e.height){m=i.getSize();let T,N;i.setSize(new Re((T=e.width)!=null?T:m.width,(N=e.height)!=null?N:m.height))}return e.collapsed!==void 0&&i.setCollapsed(e.collapsed),e.editable!==void 0&&i.setEditable(e.editable),e.movable!==void 0&&i.setMovable(e.movable),e.deletable!==void 0&&i.setDeletable(e.deletable),s.setRecordUndo$$module$build$src$core$events$utils(u),i},Or=function(e,n){o(Te.PASTER,e,n)},Rg=function(e){d(Te.PASTER,e)},Zr=function(e){const n=e.workspace,i=e.getRelativeToSurfaceXY(),u=new ke(0,0),m=n.getTopComments(!1).filter(T=>T.id!==e.id).map(T=>T.getRelativeToSurfaceXY());for(;kg(ke.sum(i,u),m);)u.translate(n.RTL?-30:30,30);e.moveTo(ke.sum(i,u))},kg=function(e,n){return n.some(i=>1>=Math.abs(i.x-e.x)&&1>=Math.abs(i.y-e.y))},ai=function(e,n){e.setAttribute(fh,n)},xn=function(e,n,i){Array.isArray(i)&&(i=i.join(" ")),e.setAttribute(Il+n,`${i}`)},ci=function(e){return e.saveState!==void 0&&e.loadState!==void 0},na=function(e){return kp(e),xg()?(ra(),Promise.resolve()):(ao||(ao=new Promise(n=>{uu=n,du=window.requestAnimationFrame(()=>{ra(),n()})})),ao)},ir=function(){return ao||Promise.resolve()},es=function(e){e||window.cancelAnimationFrame(du),ra(e),!e&&uu&&uu()},xg=function(){return lh},kp=function(e){lo.add(e),Na.set(e,s.getGroup$$module$build$src$core$events$utils());const n=e.getParent();n?kp(n):kl.add(e)},ra=function(e){const n=e?new Set([e]):new Set([...kl].map(T=>T.workspace)),i=[...kl].filter(id).filter(T=>n.has(T.workspace));for(var u of i)Xi(u);for(const T of n)T.resizeContents();for(var m of i)u=m.getRelativeToSurfaceXY(),m.updateComponentLocations(u);for(const T of i)m=s.getGroup$$module$build$src$core$events$utils(),(u=Na.get(T))&&s.setGroup$$module$build$src$core$events$utils(u),T.bumpNeighbours(),s.setGroup$$module$build$src$core$events$utils(m);for(const T of i)od(T);e||(ao=null)},od=function(e){kl.delete(e),lo.delete(e),Na.delete(e);for(const n of e.getChildren(!1))od(n)},id=function(e){return!e.isDisposed()&&!e.getParent()},Xi=function(e){if(lo.has(e)&&e.initialized){for(const n of e.getChildren(!1))Xi(n);e.renderEfficiently()}},dc=function(e,n){nr(e,n)},ld=function(e){nr=e},Et=function(e,n){fr.confirmInternal(e,n)},xp=function(e,n){Po(e,n)},Op=function(e){Po=e},sa=function(e,n,i){ls(e,n,i)},Ap=function(e){ls=e},Yi=function(e){return e.getProcedureDef!==void 0},Np=function(e){return e.getProcedureCall!==void 0&&e.renameProcedure!==void 0},hc=function(e){return e.getVariableModel!==void 0},s.allUsedVarModels$$module$build$src$core$variables=function(e){e=e.getAllBlocks(!1);const n=new Set;for(let i=0;i<e.length;i++){const u=e[i].getVarModels();if(u)for(let m=0;m<u.length;m++){const T=u[m];T.getId()&&n.add(T)}}return Array.from(n.values())},s.allDeveloperVariables$$module$build$src$core$variables=function(e){e=e.getAllBlocks(!1);const n=new Set;for(let u=0,m;m=e[u];u++){var i=m.getDeveloperVariables;if(i){i=i();for(let T=0;T<i.length;T++)n.add(i[T])}}return Array.from(n.values())},qi=function(e){let n=[];const i=document.createElement("button");return i.setAttribute("text","%{BKY_NEW_VARIABLE}"),i.setAttribute("callbackKey","CREATE_VARIABLE"),e.registerButtonCallback("CREATE_VARIABLE",function(u){js(u.getTargetWorkspace())}),n.push(i),e=Hs(e),n=n.concat(e)},Hs=function(e){e=e.getVariablesOfType("");const n=[];if(0<e.length){var i=e[e.length-1];if(hr.variables_set){var u=s.createElement$$module$build$src$core$utils$xml("block");u.setAttribute("type","variables_set"),u.setAttribute("gap",hr.math_change?"8":"24"),u.appendChild(Ws(i)),n.push(u)}if(hr.math_change&&(u=s.createElement$$module$build$src$core$utils$xml("block"),u.setAttribute("type","math_change"),u.setAttribute("gap",hr.variables_get?"20":"8"),u.appendChild(Ws(i)),i=s.textToDom$$module$build$src$core$utils$xml('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),u.appendChild(i),n.push(u)),hr.variables_get){e.sort(La.compareByName);for(let m=0,T;T=e[m];m++)i=s.createElement$$module$build$src$core$utils$xml("block"),i.setAttribute("type","variables_get"),i.setAttribute("gap","8"),i.appendChild(Ws(T)),n.push(i)}}return n},Gs=function(e){return gh.generateUniqueNameInternal(e)},Eo=function(e){return ui(Do.charAt(0),e.getAllVariableNames())},ui=function(e,n){if(!n.length)return e;const i=Do;let u="",m=i.indexOf(e);for(;;){let T=!1;for(let N=0;N<n.length;N++)if(n[N].toLowerCase()===e){T=!0;break}if(!T)break;m++,m===i.length&&(m=0,u=`${Number(u)+1}`),e=i.charAt(m)+u}return e},js=function(e,n,i){function u(T){ms(s.Msg$$module$build$src$core$msg.NEW_VARIABLE_TITLE,T,function(N){if(N){var H=ad(N,e);if(H){if(H.type===m)var ge=s.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS.replace("%1",H.name);else ge=s.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,ge=ge.replace("%1",H.name).replace("%2",H.type);dc(ge,function(){u(N)})}else e.createVariable(N,m),n&&n(N)}else n&&n(null)})}const m=i||"";u("")},s.renameVariable$$module$build$src$core$variables=function(e,n,i){function u(m){const T=s.Msg$$module$build$src$core$msg.RENAME_VARIABLE_TITLE.replace("%1",n.name);ms(T,m,function(N){if(N){var H=Og(N,n.type,e),ge=Ji(n.name,N,e);if(H||ge){var Fe="";H?Fe=s.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",H.name).replace("%2",H.type):ge&&(Fe=s.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER.replace("%1",N).replace("%2",ge)),dc(Fe,function(){u(N)})}else e.renameVariableById(n.getId(),N),i&&i(N)}else i&&i(null)})}u("")},ms=function(e,n,i){sa(e,n,function(u){u&&(u=u.replace(/[\s\xa0]+/g," ").trim(),u===s.Msg$$module$build$src$core$msg.RENAME_VARIABLE||u===s.Msg$$module$build$src$core$msg.NEW_VARIABLE)&&(u=null),i(u)})},Og=function(e,n,i){i=i.getVariableMap().getAllVariables(),e=e.toLowerCase();for(let u=0,m;m=i[u];u++)if(m.name.toLowerCase()===e&&m.type!==n)return m;return null},ad=function(e,n){n=n.getVariableMap().getAllVariables(),e=e.toLowerCase();for(let i=0,u;u=n[i];i++)if(u.name.toLowerCase()===e)return u;return null},Ji=function(e,n,i){return i.getProcedureMap().getProcedures().length?Ag(e,n,i):Lp(e,n,i)},Ag=function(e,n,i){e=e.toLowerCase(),n=n.toLowerCase(),i=i.getProcedureMap().getProcedures();for(const m of i){var u=m.getParameters().filter(hc).map(T=>T.getVariableModel().name);if(u&&(i=u.some(T=>T.toLowerCase()===e),u=u.some(T=>T.toLowerCase()===n),i&&u))return m.getName()}return null},Lp=function(e,n,i){e=e.toLowerCase(),n=n.toLowerCase(),i=i.getAllBlocks(!1);for(const m of i){if(!Yi(m))continue;i=m.getProcedureDef();var u=i[1];const T=u.some(N=>N.toLowerCase()===e);if(u=u.some(N=>N.toLowerCase()===n),T&&u)return i[0]}return null},Ws=function(e){const n=s.createElement$$module$build$src$core$utils$xml("field");return n.setAttribute("name","VAR"),n.setAttribute("id",e.getId()),n.setAttribute("variabletype",e.type),e=s.createTextNode$$module$build$src$core$utils$xml(e.name),n.appendChild(e),n},s.getOrCreateVariablePackage$$module$build$src$core$variables=function(e,n,i,u){let m=s.getVariable$$module$build$src$core$variables(e,n,i,u);return m||(m=Mp(e,n,i,u)),m},s.getVariable$$module$build$src$core$variables=function(e,n,i,u){const m=e.getPotentialVariableMap();let T=null;if(n&&(T=e.getVariableById(n),!T&&m&&(T=m.getVariableById(n)),T))return T;if(i){if(u===void 0)throw Error("Tried to look up a variable by name without a type");T=e.getVariable(i,u),!T&&m&&(T=m.getVariable(i,u))}return T},Mp=function(e,n,i,u){const m=e.getPotentialVariableMap();return i||(i=Gs(e.isFlyout?e.targetWorkspace:e)),m?m.createVariable(i,u,n):e.createVariable(i,u,n)},pc=function(e,n){e=e.getAllVariables();const i=[];if(n.length!==e.length)for(let u=0;u<e.length;u++){const m=e[u];n.includes(m)||i.push(m)}return i},Bn=function(e,{addCoordinates:n=!1,addInputBlocks:i=!0,addNextBlocks:u=!0,doFullSerialization:m=!0,saveIds:T=!0}={}){if(e.isInsertionMarker())return null;const N={type:e.type,id:T?e.id:void 0};return n&&Qi(e,N),oa(e,N),fc(e,N,m),Ng(e,N,m),Lg(e,N,m),i&&cd(e,N,m,T),u&&mc(e,N,m,T),N},oa=function(e,n){e.isCollapsed()&&(n.collapsed=!0),e.isEnabled()||(n.disabledReasons=Array.from(e.getDisabledReasons())),e.isOwnDeletable()||(n.deletable=!1),e.isOwnMovable()||(n.movable=!1),e.isOwnEditable()||(n.editable=!1),e.inputsInline!==void 0&&e.inputsInline!==e.inputsInlineDefault&&(n.inline=e.inputsInline),e.data&&(n.data=e.data)},Qi=function(e,n){const i=e.workspace;e=e.getRelativeToSurfaceXY(),n.x=Math.round(i.RTL?i.getWidth()-e.x:e.x),n.y=Math.round(e.y)},fc=function(e,n,i){e.saveExtraState?(e=e.saveExtraState(i),e!==null&&(n.extraState=e)):e.mutationToDom&&(e=e.mutationToDom(),e!==null&&(n.extraState=lr(e).replace(' xmlns="https://developers.google.com/blockly/xml"',"")))},Ng=function(e,n,i){const u=Object.create(null);for(const m of e.getIcons())ci(m)&&(e=m.saveState(i))&&(u[m.getType().toString()]=e);Object.keys(u).length&&(n.icons=u)},Lg=function(e,n,i){const u=Object.create(null);for(let m=0;m<e.inputList.length;m++){const T=e.inputList[m];for(let N=0;N<T.fieldRow.length;N++){const H=T.fieldRow[N];H.isSerializable()&&(u[H.name]=H.saveState(i))}}Object.keys(u).length&&(n.fields=u)},cd=function(e,n,i,u){const m=Object.create(null);for(let T=0;T<e.inputList.length;T++){const N=e.inputList[T];if(!N.connection)continue;const H=gc(N.connection,i,u);H&&(m[N.name]=H)}Object.keys(m).length&&(n.inputs=m)},mc=function(e,n,i,u){e.nextConnection&&(e=gc(e.nextConnection,i,u))&&(n.next=e)},gc=function(e,n,i){const u=e.getShadowState(!0);if(e=e.targetBlock(),!u&&!e)return null;const m=Object.create(null);return u&&(m.shadow=u),e&&!e.isShadow()&&(m.block=Bn(e,{doFullSerialization:n,saveIds:i})),m},zs=function(e,n,{recordUndo:i=!1}={}){return e=Ar(e,n,{recordUndo:i}),n.rendered&&es(),e},Ar=function(e,n,{parentConnection:i,isShadow:u=!1,recordUndo:m=!1}={}){const T=j();s.setRecordUndo$$module$build$src$core$events$utils(m),(m=s.getGroup$$module$build$src$core$events$utils())||s.setGroup$$module$build$src$core$events$utils(!0),s.disable$$module$build$src$core$events$utils();const N=n.getAllVariables();let H;try{H=$c(e,n,{parentConnection:i,isShadow:u})}finally{s.enable$$module$build$src$core$events$utils()}if(_c(n,N),ce()&&W(new(G(oe.BLOCK_CREATE))(H)),s.setGroup$$module$build$src$core$events$utils(m),s.setRecordUndo$$module$build$src$core$events$utils(T),n.rendered){const ge=H;setTimeout(()=>{ge.disposed||ge.setConnectionTracking(!0)},1)}return H},$c=function(e,n,{parentConnection:i,isShadow:u=!1}={}){if(!e.type)throw new sm(e);const m=n.newBlock(e.type,e.id);return m.setShadow(u),Pp(m,e),vc(m,e),yc(m,e),Dp(i,m,e),yr(m,e),Zi(m,e),ud(m,e),ia(m,e),dd(m,n.rendered),m},_c=function(e,n){if(ce())for(e=pc(e,n),n=0;n<e.length;n++){const i=e[n];W(new(G(oe.VAR_CREATE))(i))}},Pp=function(e,n){let i=n.x===void 0?0:n.x;n=n.y===void 0?0:n.y;const u=e.workspace;i=u.RTL?u.getWidth()-i:i,e.moveBy(i,n)},vc=function(e,n){if(n.collapsed&&e.setCollapsed(!0),n.deletable===!1&&e.setDeletable(!1),n.movable===!1&&e.setMovable(!1),n.editable===!1&&e.setEditable(!1),n.enabled===!1&&e.setDisabledReason(!0,Gn),Array.isArray(n.disabledReasons))for(const i of n.disabledReasons)e.setDisabledReason(!0,i);n.inline!==void 0&&e.setInputsInline(n.inline),n.data!==void 0&&(e.data=n.data)},yc=function(e,n){n.extraState&&(e.loadExtraState?e.loadExtraState(n.extraState):e.domToMutation&&e.domToMutation(s.textToDom$$module$build$src$core$utils$xml(n.extraState)))},Dp=function(e,n,i){if(e){if(e.getSourceBlock().isShadow()&&!n.isShadow())throw new Zg(i);if(e.type===s.inputTypes$$module$build$src$core$inputs$input_types.VALUE){var u=n.outputConnection;if(!u)throw new Al("output",n,i)}else if(u=n.previousConnection,!u)throw new Al("previous",n,i);if(!e.connect(u)){const m=n.workspace.connectionChecker;throw new mu(m.getErrorMessage(m.canConnectWithReason(u,e,!1),u,e),e.type===s.inputTypes$$module$build$src$core$inputs$input_types.VALUE?"output connection":"previous connection",n,i)}}},yr=function(e,n){if(n.icons){var i=Object.keys(n.icons);for(const m of i){i=n.icons[m];var u=e.getIcon(m);if(!u){if(u=g(Te.ICON,m,!1),!u)throw new e$(m,e,n);u=new u(e),e.addIcon(u)}ci(u)&&u.loadState(i)}}},Zi=function(e,n){if(n.fields){var i=Object.keys(n.fields);for(let u=0;u<i.length;u++){const m=i[u],T=n.fields[m],N=e.getField(m);N?N.loadState(T):console.warn(`Ignoring non-existant field ${m} in block ${e.type}`)}}},ud=function(e,n){if(n.inputs){var i=Object.keys(n.inputs);for(let u=0;u<i.length;u++){const m=i[u],T=e.getInput(m);if(!T||!T.connection)throw new Al(m,e,n);Bp(T.connection,n.inputs[m])}}},ia=function(e,n){if(n.next){if(!e.nextConnection)throw new Al("next",e,n);Bp(e.nextConnection,n.next)}},Bp=function(e,n){n.shadow&&e.setShadowState(n.shadow),n.block&&$c(n.block,e.getSourceBlock().workspace,{parentConnection:e})},dd=function(e,n){if(n){e.setConnectionTracking(!1),e.initSvg(),e.queueRender();for(const i of e.getIcons())i.onLocationChange(e.getRelativeToSurfaceXY())}else e.initModel()},di=function(e){return e.bubbleIsVisible!==void 0&&e.setBubbleVisible!==void 0},hi=function(e){return e*Math.PI/180},Tc=function(e){return 180*e/Math.PI},el=function(e,n,i){if(i<e){const u=i;i=e,e=u}return Math.max(e,Math.min(n,i))},Fp=function(){document.querySelector(".blocklyDropDownDiv")||(Tt=document.createElement("div"),Tt.className="blocklyDropDownDiv",(te()||document.body).appendChild(Tt),Hr=document.createElement("div"),Hr.className="blocklyDropDownContent",Tt.appendChild(Hr),uo=document.createElement("div"),uo.className="blocklyDropDownArrow",Tt.appendChild(uo),Tt.style.opacity="0",Tt.style.transition="transform "+gu+"s, opacity "+gu+"s",Tt.addEventListener("focusin",function(){Ge(Tt,"blocklyFocused")}),Tt.addEventListener("focusout",function(){D(Tt,"blocklyFocused")}))},Up=function(e){Bo=e},Vp=function(){return xs},la=function(){return Hr},hd=function(){Hr.textContent="",Hr.style.width=""},Hp=function(e,n){Tt.style.backgroundColor=e,Tt.style.borderColor=n},Mg=function(e,n,i,u){return Wp(jp(n),e,i,u)},Gp=function(e,n,i){return vh=!0,Wp(pd(e),e,n,i)},jp=function(e){var n=e.getSvgRoot();const i=e.workspace.scale,u=e.height*i;return e=e.width*i,n=on(n),new St(n.y,n.y+u,n.x,n.x+e)},pd=function(e){return e=e.getScaledBBox(),new St(e.top,e.bottom,e.left,e.right)},Wp=function(e,n,i,u){const m=e.left+(e.right-e.left)/2,T=e.bottom;e=e.top,u&&(e+=u),u=n.getSourceBlock();let N=u.workspace;for(;N.options.parentWorkspace;)N=N.options.parentWorkspace;return Up(N.getParentSvg().parentNode),zp(n,u.RTL,m,T,m,e,i)},zp=function(e,n,i,u,m,T,N){return xs=e,Nl=N||null,Tt.style.direction=n?"rtl":"ltr",e=ne(),jn=e.getRenderer().getClassName(),xi=e.getTheme().getClassName(),jn&&Ge(Tt,jn),xi&&Ge(Tt,xi),qp(i,u,m,T)},Kp=function(e,n,i,u){return e=bc(e,i.left,i.right,u.width),{initialX:e.divX,initialY:n,finalX:e.divX,finalY:n+lm,arrowX:e.arrowX,arrowY:-9,arrowAtTop:!0,arrowVisible:!0}},Xp=function(e,n,i,u){return e=bc(e,i.left,i.right,u.width),{initialX:e.divX,initialY:n-u.height,finalX:e.divX,finalY:n-u.height-lm,arrowX:e.arrowX,arrowY:u.height-2*im-$h/2,arrowAtTop:!1,arrowVisible:!0}},fd=function(e,n,i){return e=bc(e,n.left,n.right,i.width),{initialX:e.divX,initialY:0,finalX:e.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},bc=function(e,n,i,u){return n=el(n,e-u/2,i-u),e=e-$h/2-n,i=t$,e=el(i,e,u-i-$h),{arrowX:e,divX:n}},Yp=function(){return!!xs},md=function(e,n){return xs===e?(n?Ks():Ec(),!0):!1},Ec=function(){Tt.style.transform="translate(0, 0)",Tt.style.opacity="0",_h=setTimeout(function(){Ks()},1e3*gu),Nl&&(Nl(),Nl=null)},Ks=function(){Yp()&&(_h&&clearTimeout(_h),Tt.style.transform="",Tt.style.left="",Tt.style.top="",Tt.style.opacity="0",Tt.style.display="none",Tt.style.backgroundColor="",Tt.style.borderColor="",Nl&&(Nl(),Nl=null),hd(),xs=null,jn&&(D(Tt,jn),jn=""),xi&&(D(Tt,xi),xi=""),ne().markFocused())},qp=function(e,n,i,u){e=$u.getPositionMetrics(e,n,i,u),e.arrowVisible?(uo.style.display="",uo.style.transform="translate("+e.arrowX+"px,"+e.arrowY+"px) rotate(45deg)",uo.setAttribute("class",e.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):uo.style.display="none",n=Math.floor(e.initialX),i=Math.floor(e.initialY),u=Math.floor(e.finalX);const m=Math.floor(e.finalY);return Tt.style.left=n+"px",Tt.style.top=i+"px",Tt.style.display="block",Tt.style.opacity="1",Tt.style.transform="translate("+(u-n)+"px,"+(m-i)+"px)",!!e.arrowAtTop},Jp=function(){if(xs){var e=xs.getSourceBlock();e=vh?pd(xs):jp(e);const n=e.left+(e.right-e.left)/2;qp(n,e.bottom,n,e.top)}else Ec()},wc=function(e){return e.length?e.reduce(function(n,i){return n.length<i.length?n:i}).length:0},Qp=function(e,n){if(!e.length)return 0;if(e.length===1)return e[0].length;let i=0;n=n||wc(e);let u;for(u=0;u<n;u++){for(var m=e[0][u],T=1;T<e.length;T++)if(m!==e[T][u])return i;m===" "&&(i=u+1)}for(m=1;m<e.length;m++)if((T=e[m][u])&&T!==" ")return i;return n},Zp=function(e,n){if(!e.length)return 0;if(e.length===1)return e[0].length;let i=0;n=n||wc(e);let u;for(u=0;u<n;u++){for(var m=e[0].substr(-u-1,1),T=1;T<e.length;T++)if(m!==e[T].substr(-u-1,1))return i;m===" "&&(i=u+1)}for(m=1;m<e.length;m++)if((T=e[m].charAt(e[m].length-u-1))&&T!==" ")return i;return n},s.wrap$$module$build$src$core$utils$string=function(e,n){e=e.split(`
`);for(let i=0;i<e.length;i++)e[i]=Pg(e[i],n);return e.join(`
`)},Pg=function(e,n){if(e.length<=n)return e;const i=e.trim().split(/\s+/);for(var u=0;u<i.length;u++)i[u].length>n&&(n=i[u].length);var m=-1/0;let T,N=1;do{u=m,T=e,e=[],m=i.length/N;let H=1;for(let ge=0;ge<i.length-1;ge++)H<(ge+1.5)/m?(H++,e[ge]=!0):e[ge]=!1;e=tl(i,e,n),m=aa(i,e,n),e=Dg(i,e),N++}while(m>u);return T},aa=function(e,n,i){const u=[0],m=[];for(var T=0;T<e.length;T++)u[u.length-1]+=e[T].length,n[T]===!0?(u.push(0),m.push(e[T].charAt(e[T].length-1))):n[T]===!1&&u[u.length-1]++;for(e=Math.max(...u),n=0,T=0;T<u.length;T++)n-=2*Math.pow(Math.abs(i-u[T]),1.5),n-=Math.pow(e-u[T],1.5),".?!".includes(m[T])?n+=i/3:",;)]}".includes(m[T])&&(n+=i/4);return 1<u.length&&u[u.length-1]<=u[u.length-2]&&(n+=.5),n},tl=function(e,n,i){let u=aa(e,n,i),m;for(let T=0;T<n.length-1;T++){if(n[T]===n[T+1])continue;const N=[].concat(n);N[T]=!N[T],N[T+1]=!N[T+1];const H=aa(e,N,i);H>u&&(u=H,m=N)}return m?tl(e,m,i):n},Dg=function(e,n){const i=[];for(let u=0;u<e.length;u++)i.push(e[u]),n[u]!==void 0&&i.push(n[u]?`
`:" ");return i.join("")},s.isNumber$$module$build$src$core$utils$string=function(e){return/^\s*-?\d+(\.\d+)?\s*$/.test(e)},ef=function(e){_u=e},tf=function(){return _u},nf=function(){return Pa},rf=function(){return yn},nl=function(e){if(e=pi(e)){for(e=e.tooltip;typeof e=="function";)e=e();if(typeof e!="string")throw Error("Tooltip function must return a string.");return e}return""},pi=function(e){for(;e&&e.tooltip;){if(typeof e.tooltip=="string"||typeof e.tooltip=="function")return e;e=e.tooltip}return null},sf=function(){document.querySelector(".blocklyTooltipDiv")||(yn=document.createElement("div"),yn.className="blocklyTooltipDiv",(te()||document.body).appendChild(yn))},ca=function(e){e.mouseOverWrapper_=at(e,"pointerover",null,of),e.mouseOutWrapper_=at(e,"pointerout",null,lf),e.addEventListener("pointermove",rl,!1)},gd=function(e){e&&(ft(e.mouseOverWrapper_),ft(e.mouseOutWrapper_),e.removeEventListener("pointermove",rl))},of=function(e){Fo||(e=pi(e.currentTarget),Cr!==e&&(wo(),Oi=null,Cr=e),clearTimeout(am))},lf=function(e){Fo||(am=setTimeout(function(){Oi=Cr=null,wo()},1),clearTimeout(Uo),Uo=0)},rl=function(e){if(Cr&&Cr.tooltip&&!Fo)if(Pa){const n=cm-e.pageX;e=yh-e.pageY,Math.sqrt(n*n+e*e)>um&&wo()}else Oi!==Cr&&(clearTimeout(Uo),cm=e.pageX,yh=e.pageY,Uo=setTimeout(uf,n$))},sl=function(){Oi=Cr=null,wo()},wo=function(){Pa&&(Pa=!1,yn&&(yn.style.display="none")),Uo&&(clearTimeout(Uo),Uo=0)},ua=function(){wo(),Fo=!0},af=function(){Fo=!1},cf=function(){yn&&Cr&&(typeof _u=="function"?_u(yn,Cr):$d())},$d=function(){var e=nl(Cr);e=s.wrap$$module$build$src$core$utils$string(e,vu),e=e.split(`
`);for(let n=0;n<e.length;n++){const i=document.createElement("div");i.appendChild(document.createTextNode(e[n])),yn.appendChild(i)}},_d=function(e){const n=document.documentElement.clientWidth,i=document.documentElement.clientHeight;let u=cm;u=e?u-(yu+yn.offsetWidth):u+yu;let m=yh+Da;return m+yn.offsetHeight>i+window.scrollY&&(m-=yn.offsetHeight+2*Da),e?u=Math.max(Ml-window.scrollX,u):u+yn.offsetWidth>n+window.scrollX-2*Ml&&(u=n-yn.offsetWidth-2*Ml),{x:u,y:m}},uf=function(){if(!Fo&&(Oi=Cr,yn)){yn.textContent="",cf();var e=Cr.RTL;yn.style.direction=e?"rtl":"ltr",yn.style.display="block",Pa=!0;var{x:n,y:i}=_d(e);yn.style.left=n+"px",yn.style.top=i+"px"}},vd=function(){return dm},df=function(e){dm=e},hf=function(){return Ba},Bg=function(e){Ba=e},ol=function(e){e=`${e}`.toLowerCase().trim();var n=l[e];if(n||(n=e.substring(0,2)==="0x"?"#"+e.substring(2):e,n=n[0]==="#"?n:"#"+n,/^#[0-9a-f]{6}$/.test(n)))return n;if(/^#[0-9a-f]{3}$/.test(n))return["#",n[1],n[1],n[2],n[2],n[3],n[3]].join("");var i=e.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return i&&(e=Number(i[1]),n=Number(i[2]),i=Number(i[3]),0<=e&&256>e&&0<=n&&256>n&&0<=i&&256>i)?Sc(e,n,i):null},Sc=function(e,n,i){return n=e<<16|n<<8|i,16>e?"#"+(16777216|n).toString(16).substr(1):"#"+n.toString(16)},yd=function(e){return e=ol(e),e?(e=parseInt(e.substr(1),16),[e>>16,e>>8&255,e&255]):[0,0,0]},Tr=function(e,n,i){let u=0,m=0,T=0;if(n===0)T=m=u=i;else{const N=Math.floor(e/60),H=e/60-N;e=i*(1-n);const ge=i*(1-n*H);switch(n=i*(1-n*(1-H)),N){case 1:u=ge,m=i,T=e;break;case 2:u=e,m=i,T=n;break;case 3:u=e,m=ge,T=i;break;case 4:u=n,m=e,T=i;break;case 5:u=i,m=e,T=ge;break;case 6:case 0:u=i,m=n,T=e}}return Sc(Math.floor(u),Math.floor(m),Math.floor(T))},gs=function(e,n,i){return e=ol(e),!e||(n=ol(n),!n)?null:(e=yd(e),n=yd(n),Sc(Math.round(n[0]+i*(e[0]-n[0])),Math.round(n[1]+i*(e[1]-n[1])),Math.round(n[2]+i*(e[2]-n[2]))))},Td=function(e){return Tr(e,dm,255*Ba)},Cc=function(e,n,i){const u=[];var m=e.split("");m.push("");var T=0;e=[];let N=null;for(let Fe=0;Fe<m.length;Fe++){var H=m[Fe];if(T===0)if(H==="%")(T=e.join(""))&&u.push(T),e.length=0,T=1;else if(i&&H===`
`){const Yt=e.join("");Yt&&u.push(Yt),e.length=0,u.push(H)}else e.push(H);else if(T===1)H==="%"?(e.push(H),T=0):n&&"0"<=H&&"9">=H?(T=2,N=H,(H=e.join(""))&&u.push(H),e.length=0):H==="{"?T=3:(e.push("%",H),T=0);else if(T===2)if("0"<=H&&"9">=H)N+=H;else{var ge=void 0;u.push(parseInt((ge=N)!=null?ge:"",10)),Fe--,T=0}else T===3&&(H===""?(e.splice(0,0,"%{"),Fe--,T=0):H!=="}"?e.push(H):(T=e.join(""),/[A-Z]\w*/i.test(T)?(H=T.toUpperCase(),(H=H.startsWith("BKY_")?H.substring(4):null)&&H in s.Msg$$module$build$src$core$msg?(T=s.Msg$$module$build$src$core$msg[H],typeof T=="string"?Array.prototype.push.apply(u,Cc(T,n,i)):n?u.push(`${T}`):u.push(T)):u.push("%{"+T+"}")):u.push("%{"+T+"}"),T=e.length=0))}for((n=e.join(""))&&u.push(n),ge=[],e.length=0,m=0;m<u.length;m++)typeof u[m]!="string"||i&&u[m]===`
`?((n=e.join(""))&&ge.push(n),e.length=0,ge.push(u[m])):e.push(u[m]);return(n=e.join(""))&&ge.push(n),e.length=0,ge},bd=function(e){return Cc(e,!0,!0)},Zt=function(e){return typeof e!="string"?e:(e=Cc(e,!1,!1),e.length?String(e[0]):"")},Ed=function(e){let n=!0;const i=s.Msg$$module$build$src$core$msg,u=e.match(/%{BKY_[A-Z]\w*}/gi);if(u)for(let m=0;m<u.length;m++){const T=u[m].toUpperCase();i[T.slice(6,-1)]===void 0&&(console.warn("No message string for "+u[m]+" in "+e),n=!1)}return n},da=function(e){const n=typeof e=="string"?Zt(e):e;var i=Number(n);if(!isNaN(i)&&0<=i&&360>=i)return{hue:i,hex:Tr(i,vd(),255*hf())};if(i=ol(n))return{hue:null,hex:i};throw i='Invalid colour: "'+n+'"',e!==n&&(i+=' (from "'+e+'")'),Error(i)},il=function(){return Ie},ll=function(e){if(Ie=e,e===null){let n;(n=document.querySelector("."+K))==null||n.remove()}},Ic=function(){const e=te()||document.body;document.querySelector("."+K)?Ie=document.querySelector("."+K):(Ie=document.createElement("div"),Ie.className=K),e.appendChild(Ie)},fi=function(e,n,i,u){if(mi(),C=e,U=i,i=Ie){if(i.style.direction=n?"rtl":"ltr",i.style.display="block",!u&&e instanceof _){let N;u=(N=e.getSourceBlock())==null?void 0:N.workspace}var m;L=(m=u)!=null?m:null;var T;e=(T=u)!=null?T:ne(),le=e.getRenderer().getClassName(),Ce=e.getTheme().getClassName(),le&&Ge(i,le),Ce&&Ge(i,Ce)}},mi=function(){if(wd()){C=null;var e=Ie;e&&(e.style.display="none",e.style.left="",e.style.top="",U&&U(),U=null,e.textContent="",le&&(D(e,le),le=""),Ce&&(D(e,Ce),Ce=""),ne().markFocused())}},wd=function(){return!!C},Xs=function(e){C===e&&mi()},Ys=function(e){L!==null&&L!==e||mi()},Rc=function(e,n,i){Ie.style.left=e+"px",Ie.style.top=n+"px",Ie.style.height=i+"px"},Sd=function(e,n,i,u){const m=pf(e,n,i);e=kc(e,n,i,u),0>m?Rc(e,0,i.height+m):Rc(e,m,i.height)},kc=function(e,n,i,u){return u?Math.min(Math.max(n.right-i.width,e.left),e.right-i.width):Math.max(Math.min(n.left,e.right-i.width),e.left)},pf=function(e,n,i){return n.bottom+i.height>=e.bottom?n.top-i.height:n.bottom},ff=function(e){return!(e==null||!e.repositionForWindowResize)},Cd=function(){ff(C)&&C.repositionForWindowResize()||mi()},mf=function(){return Ue},Id=function(e){Ue=e},ha=function(e,n,i,u){if(fi(We,i,al,u),n.length){var m=So(n,i,e);ze=m,Rd(m,e,i),setTimeout(function(){m.focus()},1),Ue=null}else xc()},So=function(e,n,i){const u=new cu;u.setRole(Ur.MENU);for(let m=0;m<e.length;m++){const T=e[m],N=new Si(T.text);N.setRightToLeft(n),N.setRole(Ur.MENUITEM),u.addChild(N),N.setEnabled(T.enabled),T.enabled&&N.onAction(function(){xc(),requestAnimationFrame(()=>{setTimeout(()=>{T.callback(T.scope,i)},0)})},{})}return u},Rd=function(e,n,i){const u=Ql();n=new St(n.clientY+u.top,n.clientY+u.top,n.clientX+u.left,n.clientX+u.left),kd(e);const m=e.getSize();i&&(n.left+=m.width,n.right+=m.width,u.left+=m.width,u.right+=m.width),Sd(u,n,m,i),e.focus()},kd=function(e){var n=il();if(!n)throw Error("Attempting to create a context menu when widget div is null");n=e.render(n),Ge(n,"blocklyContextMenu"),je(n,"contextmenu",null,Fg),e.focus()},Fg=function(e){e.preventDefault(),e.stopPropagation()},xc=function(){Xs(We),Ue=null},al=function(){ze&&(ze.dispose(),ze=null)},s.callbackFactory$$module$build$src$core$contextmenu=function(e,n){return()=>{s.disable$$module$build$src$core$events$utils();let i;try{i=n instanceof Element?qs(n,e.workspace):Ar(n,e.workspace);const u=e.getRelativeToSurfaceXY();u.x=e.RTL?u.x-s.config$$module$build$src$core$config.snapRadius:u.x+s.config$$module$build$src$core$config.snapRadius,u.y+=2*s.config$$module$build$src$core$config.snapRadius,i.moveBy(u.x,u.y)}finally{s.enable$$module$build$src$core$events$utils()}return ce()&&!i.isShadow()&&W(new(G(oe.BLOCK_CREATE))(i)),s.setSelected$$module$build$src$core$common(i),i}},gf=function(e,n){return n=fs(n,e.getParentSvg(),e.getInverseScreenCTM()),n.x/=e.scale,n.y/=e.scale,n},Oc=function(e,n,i){n=gf(e,n),Je.set(e,ke.difference(i,n))},Ac=function(e,n){if(n=gf(e,n),e=Je.get(e),!e)throw Error("Drag not initialized");return ke.sum(e,n)},Vt=function(e,n=!1){const i=s.createElement$$module$build$src$core$utils$xml("xml");var u=pa(s.allUsedVarModels$$module$build$src$core$variables(e));u.hasChildNodes()&&i.appendChild(u);for(const m of e.getTopComments())i.appendChild(cl(m,n));for(e=e.getTopBlocks(!0),u=0;u<e.length;u++)i.appendChild(Co(e[u],n));return i},cl=function(e,n=!1){const i=s.createElement$$module$build$src$core$utils$xml("comment");n||i.setAttribute("id",e.id),n=e.workspace;const u=e.getRelativeToSurfaceXY();return u.x=n.RTL?n.getWidth()-u.x:u.x,i.setAttribute("x",`${u.x}`),i.setAttribute("y",`${u.y}`),i.setAttribute("w",`${e.getSize().width}`),i.setAttribute("h",`${e.getSize().height}`),e.getText()&&(i.textContent=e.getText()),e.isCollapsed()&&i.setAttribute("collapsed","true"),e.isOwnEditable()||i.setAttribute("editable","false"),e.isOwnMovable()||i.setAttribute("movable","false"),e.isOwnDeletable()||i.setAttribute("deletable","false"),i},pa=function(e){const n=s.createElement$$module$build$src$core$utils$xml("variables");for(let i=0;i<e.length;i++){const u=e[i],m=s.createElement$$module$build$src$core$utils$xml("variable");m.appendChild(s.createTextNode$$module$build$src$core$utils$xml(u.name)),u.type&&m.setAttribute("type",u.type),m.id=u.getId(),n.appendChild(m)}return n},Co=function(e,n){if(e.isInsertionMarker()&&(e=e.getChildren(!1)[0],!e))return new DocumentFragment;let i=0;if(e.workspace.RTL&&(i=e.workspace.getWidth()),n=ts(e,n),gi(n)){const u=e.getRelativeToSurfaceXY();n.setAttribute("x",String(Math.round(e.workspace.RTL?i-u.x:u.x))),n.setAttribute("y",String(Math.round(u.y)))}return n},$f=function(e){if(e.isSerializable()){const n=s.createElement$$module$build$src$core$utils$xml("field");return n.setAttribute("name",e.name||""),e.toXml(n)}return null},xd=function(e,n){for(let i=0;i<e.inputList.length;i++){const u=e.inputList[i];for(let m=0;m<u.fieldRow.length;m++){const T=$f(u.fieldRow[m]);T&&n.appendChild(T)}}},ts=function(e,n){if(e.isInsertionMarker())return(n=e.getChildren(!1)[0])?ts(n):new DocumentFragment;const i=s.createElement$$module$build$src$core$utils$xml(e.isShadow()?"shadow":"block");if(i.setAttribute("type",e.type),n||(i.id=e.id),e.mutationToDom){var u=e.mutationToDom();u&&(u.hasChildNodes()||u.hasAttributes())&&i.appendChild(u)}if(xd(e,i),u=e.getCommentText()){var m=e.getIcon(vn.COMMENT),T=m.getBubbleSize();m=m.bubbleIsVisible();var N=s.createElement$$module$build$src$core$utils$xml("comment");N.appendChild(s.createTextNode$$module$build$src$core$utils$xml(u)),N.setAttribute("pinned",`${m}`),N.setAttribute("h",String(T.height)),N.setAttribute("w",String(T.width)),i.appendChild(N)}for(e.data&&(u=s.createElement$$module$build$src$core$utils$xml("data"),u.appendChild(s.createTextNode$$module$build$src$core$utils$xml(e.data)),i.appendChild(u)),u=0;u<e.inputList.length;u++){T=e.inputList[u];var H=void 0;if(m=!0,T.type!==s.inputTypes$$module$build$src$core$inputs$input_types.DUMMY&&T.type!==s.inputTypes$$module$build$src$core$inputs$input_types.END_ROW){N=T.connection.targetBlock(),T.type===s.inputTypes$$module$build$src$core$inputs$input_types.VALUE?H=s.createElement$$module$build$src$core$utils$xml("value"):T.type===s.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT&&(H=s.createElement$$module$build$src$core$utils$xml("statement"));const Fe=T.connection.getShadowDom();!Fe||N&&N.isShadow()||H.appendChild(fa(Fe,n)),N&&(N=ts(N,n),N.nodeType===Dr.ELEMENT_NODE&&(H.appendChild(N),m=!1)),H.setAttribute("name",T.name),m||i.appendChild(H)}}e.inputsInline!==void 0&&e.inputsInline!==e.inputsInlineDefault&&i.setAttribute("inline",String(e.inputsInline)),e.isCollapsed()&&i.setAttribute("collapsed","true"),e.isEnabled()||i.setAttribute("disabled-reasons",Array.from(e.getDisabledReasons()).map(encodeURIComponent).join(",")),e.isOwnDeletable()||i.setAttribute("deletable","false"),e.isOwnMovable()||i.setAttribute("movable","false"),e.isOwnEditable()||i.setAttribute("editable","false"),H=e.getNextBlock();let ge;return H&&(u=ts(H,n),u.nodeType===Dr.ELEMENT_NODE&&(ge=s.createElement$$module$build$src$core$utils$xml("next"),ge.appendChild(u),i.appendChild(ge))),e=e.nextConnection&&e.nextConnection.getShadowDom(),!e||H&&H.isShadow()||ge.appendChild(fa(e,n)),i},fa=function(e,n){let i=e=e.cloneNode(!0),u;for(;i;)if(n&&i.nodeName==="shadow"&&i.removeAttribute("id"),i.firstChild)i=i.firstChild;else{for(;i&&!i.nextSibling;){u=i,i=i.parentNode;let m;u.nodeType===Dr.TEXT_NODE&&u.data.trim()===""&&((m=i)==null?void 0:m.firstChild)!==u&&Q(u)}i&&(u=i,i=i.nextSibling,u.nodeType===Dr.TEXT_NODE&&u.data.trim()===""&&Q(u))}return e},lr=function(e){return ea(e).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},_f=function(e){e=lr(e).split("<");let n="";for(let i=1;i<e.length;i++){const u=e[i];u[0]==="/"&&(n=n.substring(2)),e[i]=n+"<"+u,u[0]!=="/"&&u.slice(-2)!=="/>"&&(n+="  ")}return e=e.join(`
`),e=e.replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>"),e.replace(/^\n/,"")},Ug=function(e,n){return n.setResizesEnabled(!1),n.clear(),e=s.domToWorkspace$$module$build$src$core$xml(e,n),n.setResizesEnabled(!0),e},s.domToWorkspace$$module$build$src$core$xml=function(e,n){let i=0;n.RTL&&(i=n.getWidth());const u=[];qn();const m=s.getGroup$$module$build$src$core$events$utils();m||s.setGroup$$module$build$src$core$events$utils(!0),n.setResizesEnabled&&n.setResizesEnabled(!1);let T=!0;try{for(let N=0,H;H=e.childNodes[N];N++){const ge=H.nodeName.toLowerCase(),Fe=H;if(ge==="block"||ge==="shadow"&&!j()){const Yt=qs(Fe,n);u.push(Yt.id);let jt;const us=parseInt((jt=Fe.getAttribute("x"))!=null?jt:"10",10);let Oh;const Cm=parseInt((Oh=Fe.getAttribute("y"))!=null?Oh:"10",10);isNaN(us)||isNaN(Cm)||Yt.moveBy(n.RTL?i-us:us,Cm,["create"]),T=!1}else{if(ge==="shadow")throw TypeError("Shadow block cannot be a top-level block.");if(ge==="comment")vf(Fe,n);else if(ge==="variables"){if(T)ma(Fe,n);else throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");T=!1}}}}finally{s.setGroup$$module$build$src$core$events$utils(m),n.setResizesEnabled&&n.setResizesEnabled(!0),n.rendered&&es(),qr()}return W(new(G(oe.FINISHED_LOADING))(n)),u},vf=function(e,n){var i;const u=(i=e.getAttribute("id"))!=null?i:void 0;i=n.rendered?new fn(n,u):new et(n,u);var m;i.setText((m=e.textContent)!=null?m:"");var T;m=parseInt((T=e.getAttribute("x"))!=null?T:"",10);let N;T=parseInt((N=e.getAttribute("y"))!=null?N:"",10),isNaN(m)||isNaN(T)||(m=n.RTL?n.getWidth()-m:m,i.moveTo(new ke(m,T)));var H;n=parseInt((H=e.getAttribute("w"))!=null?H:"",10);let ge;return H=parseInt((ge=e.getAttribute("h"))!=null?ge:"",10),isNaN(n)||isNaN(H)||i.setSize(new Re(n,H)),e.getAttribute("collapsed")==="true"&&i.setCollapsed(!0),e.getAttribute("editable")==="false"&&i.setEditable(!1),e.getAttribute("movable")==="false"&&i.setMovable(!1),e.getAttribute("deletable")==="false"&&i.setDeletable(!1),i},yf=function(e,n){if(!n.getBlocksBoundingBox)return s.domToWorkspace$$module$build$src$core$xml(e,n);var i=n.getBlocksBoundingBox();if(e=s.domToWorkspace$$module$build$src$core$xml(e,n),i&&i.top!==i.bottom){var u=i.bottom;i=n.RTL?i.right:i.left;var m=1/0;let T=-1/0,N=1/0;for(let H=0;H<e.length;H++){const ge=n.getBlockById(e[H]).getRelativeToSurfaceXY();ge.y<N&&(N=ge.y),ge.x<m&&(m=ge.x),ge.x>T&&(T=ge.x)}for(u=u-N+10,i=n.RTL?i-T:i-m,m=0;m<e.length;m++)n.getBlockById(e[m]).moveBy(i,u,["create"])}return e},s.domToBlock$$module$build$src$core$xml=function(e,n){return e=qs(e,n),n.rendered&&es(),e},qs=function(e,n){s.disable$$module$build$src$core$events$utils();var i=n.getAllVariables();let u;try{if(u=ga(e,n),n.rendered){const m=u,T=u.getDescendants(!1);m.setConnectionTracking(!1);for(let N=T.length-1;0<=N;N--)T[N].initSvg();for(let N=T.length-1;0<=N;N--)T[N].queueRender();setTimeout(function(){m.disposed||m.setConnectionTracking(!0)},1),n.resizeContents()}else{const m=u.getDescendants(!1);for(let T=m.length-1;0<=T;T--)m[T].initModel()}}finally{s.enable$$module$build$src$core$events$utils()}if(ce()){for(e=pc(n,i),n=0;n<e.length;n++)i=e[n],W(new(G(oe.VAR_CREATE))(i));W(new(G(oe.BLOCK_CREATE))(u))}return u},ma=function(e,n){for(let u=0;u<e.children.length;u++){var i=e.children[u];const m=i.getAttribute("type"),T=i.getAttribute("id");if(i=i.textContent,!i)break;n.createVariable(i,m,T)}},Od=function(e){const n={mutation:[],comment:[],data:[],field:[],input:[],next:[]};for(let i=0;i<e.children.length;i++){const u=e.children[i];if(u.nodeType!==Dr.TEXT_NODE)switch(u.nodeName.toLowerCase()){case"mutation":n.mutation.push(u);break;case"comment":n.comment.push(u);break;case"data":n.data.push(u);break;case"title":case"field":n.field.push(u);break;case"value":case"statement":n.input.push(u);break;case"next":n.next.push(u);break;default:console.warn("Ignoring unknown tag: "+u.nodeName)}}return n},Ad=function(e,n){let i=!1;for(let u=0;u<e.length;u++){const m=e[u];n.domToMutation&&(n.domToMutation(m),n.initSvg&&(i=!0))}return i},Nd=function(e,n){for(let u=0;u<e.length;u++){var i=e[u];const m=i.textContent,T=i.getAttribute("pinned")==="true";let N;const H=parseInt((N=i.getAttribute("w"))!=null?N:"50",10);let ge;i=parseInt((ge=i.getAttribute("h"))!=null?ge:"50",10),n.setCommentText(m);const Fe=n.getIcon(vn.COMMENT);isNaN(H)||isNaN(i)||Fe.setBubbleSize(new Re(H,i)),Fe.setBubbleVisible(T),setTimeout(()=>Fe.setBubbleVisible(T),1)}},Ld=function(e,n){for(let i=0;i<e.length;i++)n.data=e[i].textContent},Vg=function(e,n){for(let i=0;i<e.length;i++){const u=e[i],m=u.getAttribute("name");m?Io(n,m,u):console.warn(`Ignoring unnamed field in block ${n.type}`)}},Md=function(e){let n=null,i=null;for(let u=0;u<e.childNodes.length;u++){const m=e.childNodes[u];gi(m)&&(m.nodeName.toLowerCase()==="block"?n=m:m.nodeName.toLowerCase()==="shadow"&&(i=m))}return{childBlockElement:n,childShadowElement:i}},Hg=function(e,n,i,u){for(let T=0;T<e.length;T++){var m=e[T];const N=m.getAttribute("name"),H=N?i.getInput(N):null;if(!H){console.warn("Ignoring non-existent input "+N+" in block "+u);break}if(m=Md(m),m.childBlockElement){if(!H.connection)throw TypeError("Input connection does not exist.");ga(m.childBlockElement,n,H.connection,!1)}if(m.childShadowElement){let ge;(ge=H.connection)==null||ge.setShadowDom(m.childShadowElement)}}},Gg=function(e,n,i){for(let u=0;u<e.length;u++){const m=Md(e[u]);if(m.childBlockElement){if(!i.nextConnection)throw TypeError("Next statement does not exist.");if(i.nextConnection.isConnected())throw TypeError("Next statement is already connected.");ga(m.childBlockElement,n,i.nextConnection,!0)}m.childShadowElement&&i.nextConnection&&i.nextConnection.setShadowDom(m.childShadowElement)}},ga=function(e,n,i,u){var m;const T=e.getAttribute("type");if(!T)throw TypeError("Block type unspecified: "+e.outerHTML);var N=(m=e.getAttribute("id"))!=null?m:void 0;m=n.newBlock(T,N),N=Od(e);const H=Ad(N.mutation,m);if(Nd(N.comment,m),Ld(N.data,m),i)if(u)if(m.previousConnection)i.connect(m.previousConnection);else throw TypeError("Next block does not have previous statement.");else if(m.outputConnection)i.connect(m.outputConnection);else if(m.previousConnection)i.connect(m.previousConnection);else throw TypeError("Child block does not have output or previous statement.");if(Vg(N.field,m),Hg(N.input,n,m,T),Gg(N.next,n,m),H&&m.initSvg(),(n=e.getAttribute("inline"))&&m.setInputsInline(n==="true"),(n=e.getAttribute("disabled"))&&m.setDisabledReason(n==="true"||n==="disabled",Gn),n=e.getAttribute("disabled-reasons"),n!==null)for(var ge of n.split(","))m.setDisabledReason(!0,decodeURIComponent(ge));if((ge=e.getAttribute("deletable"))&&m.setDeletable(ge==="true"),(ge=e.getAttribute("movable"))&&m.setMovable(ge==="true"),(ge=e.getAttribute("editable"))&&m.setEditable(ge==="true"),(ge=e.getAttribute("collapsed"))&&m.setCollapsed(ge==="true"),e.nodeName.toLowerCase()==="shadow"){for(e=m.getChildren(!1),ge=0;ge<e.length;ge++)if(!e[ge].isShadow())throw TypeError("Shadow block not allowed non-shadow child.");m.setShadow(!0)}return m},Io=function(e,n,i){const u=e.getField(n);u?u.fromXml(i):console.warn("Ignoring non-existent field "+n+" in block "+e.type)},Tf=function(e){for(let n=0;n<e.childNodes.length;n++){const i=e.childNodes[n];if(i.nodeName.toLowerCase()==="next"){e.removeChild(i);break}}},gi=function(e){return e.nodeType===Dr.ELEMENT_NODE},Nr=function(e){if(!(100<e.getDescendants(!1).length)){var n=e.workspace,i=e.getSvgRoot();n.getAudioManager().play("delete");var u=e.getRelativeToSurfaceXY(),m=i.cloneNode(!0);m.setAttribute("transform","translate("+u.x+","+u.y+")");var T;(T=n.getLayerManager())==null||T.appendToAnimationLayer({getSvgRoot:()=>m}),ul(m,{x:u.x,y:u.y,width:e.width,height:e.height},n.RTL,new Date)}},ul=function(e,n,i,u){const m=(new Date().getTime()-u.getTime())/150;1<m?Q(e):(e.setAttribute("transform","translate("+(n.x+(i?-1:1)*n.width/2*m)+","+(n.y+n.height/2*m)+") scale("+(1-m)+")"),setTimeout(ul,10,e,n,i,u))},ns=function(e){var n=e.workspace;const i=n.scale;if(n.getAudioManager().play("click"),!(1>i)){var u=n.getSvgXY(e.getSvgRoot());e.outputConnection?(u.x+=(e.RTL?3:-3)*i,u.y+=13*i):e.previousConnection&&(u.x+=(e.RTL?-23:23)*i,u.y+=3*i);var m=ue(Z.CIRCLE,{cx:u.x,cy:u.y,r:0,fill:"none",stroke:"#888","stroke-width":10},n.getParentSvg());e=ue(Z.ANIMATE,{id:"animationCircle",begin:"indefinite",attributeName:"r",dur:"150ms",from:0,to:25*i},m),n=ue(Z.ANIMATE,{id:"animationOpacity",begin:"indefinite",attributeName:"opacity",dur:"150ms",from:1,to:0},m),e.beginElement(),n.beginElement(),setTimeout(()=>{Q(m)},150)}},Nc=function(e){if($a(),e.workspace.getAudioManager().play("disconnect"),!(1>e.workspace.scale)){var n=e.getHeightWidth().height;n=Math.atan(10/n)/Math.PI*180,e.RTL||(n*=-1),hm=e,bf(e,n,new Date)}},bf=function(e,n,i){const u=(new Date().getTime()-i.getTime())/200;let m="";1>=u&&(m=`skewX(${Math.round(Math.sin(u*Math.PI*3)*(1-u)*n)})`,r$=setTimeout(bf,10,e,n,i)),e.getSvgRoot().setAttribute("transform",`${e.getTranslation()} ${m}`)},$a=function(){hm&&(r$&&(clearTimeout(r$),r$=null),hm.getSvgRoot().setAttribute("transform",hm.getTranslation()),hm=null)},Lr=function(e){return e.getRelativeToSurfaceXY!==void 0&&e.isMovable!==void 0&&e.startDrag!==void 0&&e.drag!==void 0&&e.endDrag!==void 0&&e.revertDrag!==void 0},Mr=function(e,n){for(const i in n)e[i]=n[i]!==null&&typeof n[i]=="object"?Mr(e[i]||Object.create(null),n[i]):n[i];return e},ar=function(e,n){o(Te.FIELD,e,n)},Lc=function(e){d(Te.FIELD,e)},s.fromJson$$module$build$src$core$field_registry=function(e){return _w.fromJsonInternal(e)},Pd=function(e){const n=$(Te.FIELD,e.type);return n?n.fromJson(e):(console.warn("Blockly could not create a field of type "+e.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},s.register$$module$build$src$core$extensions=function(e,n){if(typeof e!="string"||e.trim()==="")throw Error('Error: Invalid extension name "'+e+'"');if(bh[e])throw Error('Error: Extension "'+e+'" is already registered.');if(typeof n!="function")throw Error('Error: Extension "'+e+'" must be a function');bh[e]=n},s.registerMixin$$module$build$src$core$extensions=function(e,n){if(!n||typeof n!="object")throw Error('Error: Mixin "'+e+'" must be a object');s.register$$module$build$src$core$extensions(e,function(){this.mixin(n)})},s.registerMutator$$module$build$src$core$extensions=function(e,n,i,u){const m='Error when registering mutator "'+e+'": ';$i(m,n);const T=Zn(n,m);if(i&&typeof i!="function")throw Error(m+'Extension "'+e+'" is not a function');s.register$$module$build$src$core$extensions(e,function(){T&&this.setMutator(new s.MutatorIcon$$module$build$src$core$icons$mutator_icon(u||[],this)),this.mixin(n),i&&i.apply(this)})},dl=function(e){Js(e)?delete bh[e]:console.warn('No extension mapping for name "'+e+'" found to unregister')},Js=function(e){return!!bh[e]},Nt=function(e,n,i){const u=bh[e];if(typeof u!="function")throw Error('Error: Extension "'+e+'" not found.');let m;if(i?Pt(e,n):m=Un(n),u.apply(n),i)$i('Error after applying mutator "'+e+'": ',n);else if(!Mc(m,n))throw Error('Error when applying extension "'+e+'": mutation properties changed when applying a non-mutator extension.')},Pt=function(e,n){if(Un(n).length)throw Error('Error: tried to apply mutation "'+e+'" to a block that already has mutator functions.  Block id: '+n.id)},Ro=function(e,n){return Qs(e.mutationToDom,e.domToMutation,n+" mutationToDom/domToMutation")},Fn=function(e,n){return Qs(e.saveExtraState,e.loadExtraState,n+" saveExtraState/loadExtraState")},Zn=function(e,n){return Qs(e.compose,e.decompose,n+" compose/decompose")},Qs=function(e,n,i){if(e&&n){if(typeof e!="function"||typeof n!="function")throw Error(i+" must be a function");return!0}if(!e&&!n)return!1;throw Error(i+"Must have both or neither functions")},$i=function(e,n){const i=Ro(n,e),u=Fn(n,e);if(!i&&!u)throw Error(e+"Mutations must contain either XML hooks, or JSON hooks, or both");Zn(n,e)},Un=function(e){const n=[];return e.domToMutation!==void 0&&n.push(e.domToMutation),e.mutationToDom!==void 0&&n.push(e.mutationToDom),e.saveExtraState!==void 0&&n.push(e.saveExtraState),e.loadExtraState!==void 0&&n.push(e.loadExtraState),e.compose!==void 0&&n.push(e.compose),e.decompose!==void 0&&n.push(e.decompose),n},Mc=function(e,n){if(n=Un(n),n.length!==e.length)return!1;for(let i=0;i<n.length;i++)if(e[i]!==n[i])return!1;return!0},Ef=function(e){if(typeof document!="object")throw Error("runAfterPageLoad() requires browser document.");if(document.readyState==="complete")e();else{const n=setInterval(function(){document.readyState==="complete"&&(clearInterval(n),e())},10)}},s.buildTooltipForDropdown$$module$build$src$core$extensions=function(e,n){const i=[];return function(){i.includes(this.type)||(wf(this,e,n),i.push(this.type)),this.setTooltip((function(){const u=String(this.getFieldValue(e));return Zt(n[u])}).bind(this))}},wf=function(e,n,i){var u=e.getField(n);if(u instanceof cs&&!u.isOptionListDynamic()){u=u.getOptions();for(const[,m]of u)i[m]===void 0&&console.warn(`No tooltip mapping for value ${m} of field ${n} of block type ${e.type}.`)}},s.buildTooltipWithFieldText$$module$build$src$core$extensions=function(e,n){return function(){this.setTooltip((function(){const i=this.getField(n);return Zt(e).replace("%1",i?i.getText():"")}).bind(this))}},Pc=function(){const e=this.tooltip;this.setTooltip((function(){const n=this.getParent();return n&&n.getInputsInline()&&n.tooltip||e}).bind(this))},Ke=function(e,n){return" "+e+","+n+" "},ln=function(e,n){return" "+e+n.join("")},an=function(e,n){return" M "+e+","+n+" "},Lt=function(e,n){return" m "+e+","+n+" "},$s=function(e,n){return" l "+e+","+n+" "},_a=function(e){return" l"+e.join("")},Me=function(e,n){return" "+e+" "+n+" "},Dt=function(e,n,i,u){return e+" "+i+" "+i+" "+n+u},_i=function(e,n){o(Te.ICON,e.toString(),n)},Dc=function(e){d(Te.ICON,e)},_s=function(e){return e.getProcedureModel!==void 0&&e.doProcedureUpdate!==void 0&&e.isProcedureDef!==void 0},cr=function(e){return e.startPublishing!==void 0&&e.stopPublishing!==void 0},ur=function(e){const n=e.getProcedureMap().getProcedures().filter(u=>!u.getReturnTypes()).map(u=>[u.getName(),u.getParameters().map(m=>m.getName()),!1]);e.getBlocksByType("procedures_defnoreturn",!1).forEach(u=>{!_s(u)&&Yi(u)&&n.push(u.getProcedureDef())});const i=e.getProcedureMap().getProcedures().filter(u=>!!u.getReturnTypes()).map(u=>[u.getName(),u.getParameters().map(m=>m.getName()),!0]);return e.getBlocksByType("procedures_defreturn",!1).forEach(u=>{!_s(u)&&Yi(u)&&i.push(u.getProcedureDef())}),n.sort(ko),i.sort(ko),[n,i]},ko=function(e,n){return e[0].localeCompare(n[0],void 0,{sensitivity:"base"})},s.findLegalName$$module$build$src$core$procedures=function(e,n){if(n.isInFlyout)return e;for(e=e||s.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed";!Zs(e,n.workspace,n);){const i=e.match(/^(.*?)(\d+)$/);e=i?i[1]+(parseInt(i[2])+1):e+"2"}return e},Zs=function(e,n,i){return!vs(e,n,i)},vs=function(e,n,i){for(const u of n.getAllBlocks(!1))if(u!==i&&Yi(u)&&s.Names$$module$build$src$core$names.equals(u.getProcedureDef()[0],e))return!0;i=i&&_s(i)?i?.getProcedureModel():void 0;for(const u of n.getProcedureMap().getProcedures())if(u!==i&&s.Names$$module$build$src$core$names.equals(u.getName(),e))return!0;return!1},s.rename$$module$build$src$core$procedures=function(e){var n=this.getSourceBlock();if(!n)throw new b;e=e.trim();const i=s.findLegalName$$module$build$src$core$procedures(e,n);_s(n)&&!n.isInsertionMarker()&&n.getProcedureModel().setName(i);const u=this.getValue();if(u!==e&&u!==i)for(e=n.workspace.getAllBlocks(!1),n=0;n<e.length;n++){const m=e[n];m.renameProcedure&&m.renameProcedure(u,i)}return i},eo=function(e){function n(T,N){for(let ge=0;ge<T.length;ge++){var H=T[ge][0];const Fe=T[ge][1],Yt=s.createElement$$module$build$src$core$utils$xml("block");Yt.setAttribute("type",N),Yt.setAttribute("gap","16");const jt=s.createElement$$module$build$src$core$utils$xml("mutation");for(jt.setAttribute("name",H),Yt.appendChild(jt),H=0;H<Fe.length;H++){const us=s.createElement$$module$build$src$core$utils$xml("arg");us.setAttribute("name",Fe[H]),jt.appendChild(us)}i.push(Yt)}}const i=[];if(hr.procedures_defnoreturn){var u=s.createElement$$module$build$src$core$utils$xml("block");u.setAttribute("type","procedures_defnoreturn"),u.setAttribute("gap","16");var m=s.createElement$$module$build$src$core$utils$xml("field");m.setAttribute("name","NAME"),m.appendChild(s.createTextNode$$module$build$src$core$utils$xml(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_PROCEDURE)),u.appendChild(m),i.push(u)}return hr.procedures_defreturn&&(u=s.createElement$$module$build$src$core$utils$xml("block"),u.setAttribute("type","procedures_defreturn"),u.setAttribute("gap","16"),m=s.createElement$$module$build$src$core$utils$xml("field"),m.setAttribute("name","NAME"),m.appendChild(s.createTextNode$$module$build$src$core$utils$xml(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_PROCEDURE)),u.appendChild(m),i.push(u)),hr.procedures_ifreturn&&(u=s.createElement$$module$build$src$core$utils$xml("block"),u.setAttribute("type","procedures_ifreturn"),u.setAttribute("gap","16"),i.push(u)),i.length&&i[i.length-1].setAttribute("gap","24"),e=ur(e),n(e[0],"procedures_callnoreturn"),n(e[1],"procedures_callreturn"),i},Dd=function(e){var n=[],i=e.getBlocksByType("procedures_mutatorarg",!1);for(let T=0,N;N=i[T];T++)n.push(N.getFieldValue("NAME"));i=s.createElement$$module$build$src$core$utils$xml("xml");const u=s.createElement$$module$build$src$core$utils$xml("block");u.setAttribute("type","procedures_mutatorarg");const m=s.createElement$$module$build$src$core$utils$xml("field");m.setAttribute("name","NAME"),n=ui(s.DEFAULT_ARG$$module$build$src$core$procedures,n),n=s.createTextNode$$module$build$src$core$utils$xml(n),m.appendChild(n),u.appendChild(m),i.appendChild(u),e.updateToolbox(i)},Bc=function(e){if(B(e)&&e.bubbleType==="mutator"&&e.isOpen&&e.blockId){e=$e(e.workspaceId).getBlockById(e.blockId);var n=e.type;(n==="procedures_defnoreturn"||n==="procedures_defreturn")&&(e=e.getIcon(s.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE).getWorkspace(),Dd(e),e.addChangeListener(Bd))}},Bd=function(e){(I(e)||x(e)||A(e)||M(e))&&(e=$e(e.workspaceId),Dd(e))},dr=function(e,n){return n.getAllBlocks(!1).filter(i=>br(i,e)||Np(i)&&s.Names$$module$build$src$core$names.equals(i.getProcedureCall(),e))},br=function(e,n){return _s(e)&&!e.isProcedureDef()&&e.getProcedureModel()&&s.Names$$module$build$src$core$names.equals(e.getProcedureModel().getName(),n)},s.mutateCallers$$module$build$src$core$procedures=function(e){const n=j();var i=e.getProcedureDef()[0];const u=e.mutationToDom(!0);e=dr(i,e.workspace);for(let T=0,N;N=e[T];T++){i=(i=N.mutationToDom())&&ea(i),N.domToMutation&&N.domToMutation(u);var m=N.mutationToDom();m=m&&ea(m),i!==m&&(s.setRecordUndo$$module$build$src$core$events$utils(!1),W(new(G(oe.BLOCK_CHANGE))(N,"mutation",null,i,m)),s.setRecordUndo$$module$build$src$core$events$utils(n))}},s.getDefinition$$module$build$src$core$procedures=function(e,n){for(const i of n.getAllBlocks(!1))if(_s(i)&&i.isProcedureDef()&&s.Names$$module$build$src$core$names.equals(i.getProcedureModel().getName(),e)||Yi(i)&&s.Names$$module$build$src$core$names.equals(i.getProcedureDef()[0],e))return i;return null},Bt=function(e){return e.isDynamic},rs=function(e){return e.pathDown!==void 0&&e.pathUp!==void 0},Sf=function(e){return e.pathLeft!==void 0&&e.pathRight!==void 0},Cf=function(e,n){if(!e||!n)throw Error("Cannot connect null connections.");e.targetConnection=n,n.targetConnection=e},Fd=function(e,n){let i=null;n=n.outputConnection;const u=n?.getConnectionChecker();for(let m=0,T;T=e.inputList[m];m++){const N=T.connection;let H;if(N&&((H=u)!=null&&H.canConnect(n,N,!1))){if(i)return null;i=N}}return i},Ud=function(e,n){let i;for(;i=Fd(e,n);)if(e=i.targetBlock(),!e||e.isShadow())return i;return null},Vd=function(e){return e.getType!==void 0&&e.initView!==void 0&&e.dispose!==void 0&&e.getWeight!==void 0&&e.getSize!==void 0&&e.applyColour!==void 0&&e.hideForInsertionMarker!==void 0&&e.updateEditable!==void 0&&e.updateCollapsed!==void 0&&e.isShownWhenCollapsed!==void 0&&e.setOffsetInBlock!==void 0&&e.onLocationChange!==void 0&&e.onClick!==void 0},Fc=function(e){return Vd(e)&&di(e)&&ci(e)&&e.setText!==void 0&&e.getText!==void 0&&e.setBubbleSize!==void 0&&e.getBubbleSize!==void 0&&e.getType()===vn.COMMENT},va=function(e){let n=e.outputConnection;return(!n||e.previousConnection&&e.previousConnection.isConnected())&&(n=e.previousConnection),n},to=function(e,n){o(Te.RENDERER,e,n)},Hd=function(e){d(Te.RENDERER,e)},If=function(e,n,i){return e=new(g(Te.RENDERER,e))(e),e.init(n,i),e},hl=function(e){js(e.getTargetWorkspace(),void 0,"String")},ya=function(e){js(e.getTargetWorkspace(),void 0,"Number")},Gd=function(e){js(e.getTargetWorkspace(),void 0,"Colour")},Uc=function(e){let n=[],i=document.createElement("button");return i.setAttribute("text",s.Msg$$module$build$src$core$msg.NEW_STRING_VARIABLE),i.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),n.push(i),i=document.createElement("button"),i.setAttribute("text",s.Msg$$module$build$src$core$msg.NEW_NUMBER_VARIABLE),i.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),n.push(i),i=document.createElement("button"),i.setAttribute("text",s.Msg$$module$build$src$core$msg.NEW_COLOUR_VARIABLE),i.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),n.push(i),e.registerButtonCallback("CREATE_VARIABLE_STRING",hl),e.registerButtonCallback("CREATE_VARIABLE_NUMBER",ya),e.registerButtonCallback("CREATE_VARIABLE_COLOUR",Gd),e=vi(e),n=n.concat(e)},vi=function(e){e=e.getAllVariables();const n=[];if(0<e.length){if(hr.variables_set_dynamic){var i=e[e.length-1];const u=s.createElement$$module$build$src$core$utils$xml("block");u.setAttribute("type","variables_set_dynamic"),u.setAttribute("gap","24"),u.appendChild(Ws(i)),n.push(u)}if(hr.variables_get_dynamic){e.sort(La.compareByName);for(let u=0,m;m=e[u];u++)i=s.createElement$$module$build$src$core$utils$xml("block"),i.setAttribute("type","variables_get_dynamic"),i.setAttribute("gap","8"),i.appendChild(Ws(m)),n.push(i)}}return n},Rf=function(e,n){const i=e.workspace,u=s.config$$module$build$src$core$config.snapRadius,m=ke.difference(n,e.getRelativeToSurfaceXY()),T=new ke(0,0),N=i.getAllBlocks(!1).filter(H=>H.id!=e.id).map(H=>H.getRelativeToSurfaceXY());for(;Vc(ke.sum(n,T),N)||Hc(e,ke.sum(m,T),u);)i.RTL?T.translate(-u,2*u):T.translate(u,2*u);e.moveTo(ke.sum(n,T))},Vc=function(e,n){return n.some(i=>1>=Math.abs(i.x-e.x)&&1>=Math.abs(i.y-e.y))},Hc=function(e,n,i){return e.getConnections_(!1).some(u=>!!u.closest(i,n).connection)},ys=function(e,n,i){const u=i.getBoundingRectangle(),m=u.right-u.left,T=el(n.top,u.top,n.top+n.height-(u.bottom-u.top))-u.top;let N=n.left;return n=n.left+n.width-m,e.RTL?N=Math.min(n,N):n=Math.max(N,n),(e=el(N,u.left,n)-u.left)||T?(i.moveBy(e,T,["inbounds"]),!0):!1},Gc=function(e){return n=>{var i=e.getMetricsManager();if(i.hasFixedEdges()&&!e.isDragging()){var u;if(Df.includes((u=n.type)!=null?u:"")){u=i.getScrollMetrics(!0);const m=jd(e,n);m&&(i=s.getGroup$$module$build$src$core$events$utils()||!1,s.setGroup$$module$build$src$core$events$utils(n.group),ys(e,u,m)&&!n.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),s.setGroup$$module$build$src$core$events$utils(i))}else V(n)&&n.scale&&n.oldScale&&n.scale>n.oldScale&&Ta(e)}}},jd=function(e,n){let i=null;switch(n.type){case oe.BLOCK_CREATE:case oe.BLOCK_MOVE:(i=e.getBlockById(n.blockId))&&(i=i.getRootBlock());break;case oe.COMMENT_CREATE:case oe.COMMENT_MOVE:case oe.COMMENT_RESIZE:i=e.getCommentById(n.commentId)}return i},Ta=function(e){var n=e.getMetricsManager();if(n.hasFixedEdges()&&!e.isDragging()){n=n.getScrollMetrics(!0);var i=e.getTopBoundedElements();for(let u=0,m;m=i[u];u++)ys(e,n,m)}},Er=function(e){return e.isDeletable!==void 0&&e.dispose!==void 0&&e.setDeleteStyle!==void 0},pl=function(e){const n=e.toCopyData();Yv=n;let i;return qv=(i=e.workspace)!=null?i:null,n},Cn=function(e,n,i){return e&&n?xo(e,n,i):Yv&&qv?xo(Yv,qv):null},xo=function(e,n,i){let u;n=(u=n.getRootWorkspace())!=null?u:n;let m,T;return(T=(m=$(Te.PASTER,e.paster,!1))==null?void 0:m.paste(e,n,i))!=null?T:null},Wd=function(e){const n=e.toCopyData();return n?Cn(n,e.workspace):null},ba=function(e){return e.toCopyData!==void 0},Ts=function(){wt.registry.register({name:Li.ESCAPE,preconditionFn(e){return!e.options.readOnly},callback(e){return e.hideChaff(),!0},keyCodes:[ut.ESC]})},no=function(){wt.registry.register({name:Li.DELETE,preconditionFn(e){const n=fe();return!e.options.readOnly&&n!=null&&Er(n)&&n.isDeletable()&&!Pl.inProgress()},callback(e,n){return n.preventDefault(),e=fe(),e instanceof $o?e.checkAndDelete():Er(e)&&e.isDeletable()&&(s.setGroup$$module$build$src$core$events$utils(!0),e.dispose(),s.setGroup$$module$build$src$core$events$utils(!1)),!0},keyCodes:[ut.DELETE,ut.BACKSPACE]})},jc=function(){const e=wt.registry.createSerializedKey(ut.C,[ut.CTRL]),n=wt.registry.createSerializedKey(ut.C,[ut.ALT]),i=wt.registry.createSerializedKey(ut.C,[ut.META]);wt.registry.register({name:Li.COPY,preconditionFn(u){const m=fe();return!u.options.readOnly&&!Pl.inProgress()&&m!=null&&Er(m)&&m.isDeletable()&&Lr(m)&&m.isMovable()&&ba(m)},callback(u,m){return m.preventDefault(),u.hideChaff(),m=fe(),!m||!ba(m)?!1:(Ha=m.toCopyData(),Ga=u,Rh=Lr(m)?m.getRelativeToSurfaceXY():null,!!Ha)},keyCodes:[e,n,i]})},zd=function(){const e=wt.registry.createSerializedKey(ut.X,[ut.CTRL]),n=wt.registry.createSerializedKey(ut.X,[ut.ALT]),i=wt.registry.createSerializedKey(ut.X,[ut.META]);wt.registry.register({name:Li.CUT,preconditionFn(u){const m=fe();return!u.options.readOnly&&!Pl.inProgress()&&m!=null&&Er(m)&&m.isDeletable()&&Lr(m)&&m.isMovable()&&!m.workspace.isFlyout},callback(u){const m=fe();return m instanceof $o?(Ha=m.toCopyData(),Ga=u,Rh=m.getRelativeToSurfaceXY(),m.checkAndDelete(),!0):Er(m)&&m.isDeletable()&&ba(m)?(Ha=m.toCopyData(),Ga=u,Rh=Lr(m)?m.getRelativeToSurfaceXY():null,m.dispose(),!0):!1},keyCodes:[e,n,i]})},bs=function(){const e=wt.registry.createSerializedKey(ut.V,[ut.CTRL]),n=wt.registry.createSerializedKey(ut.V,[ut.ALT]),i=wt.registry.createSerializedKey(ut.V,[ut.META]);wt.registry.register({name:Li.PASTE,preconditionFn(u){return!u.options.readOnly&&!Pl.inProgress()},callback(){if(!Ha||!Ga)return!1;if(!Rh)return!!Cn(Ha,Ga);const{left:u,top:m,width:T,height:N}=Ga.getMetricsManager().getViewMetrics(!0);if(new St(m,m+N,u,u+T).contains(Rh.x,Rh.y))return!!Cn(Ha,Ga);const H=new ke(u+T/2,m+N/2);return!!Cn(Ha,Ga,H)},keyCodes:[e,n,i]})},ro=function(){const e=wt.registry.createSerializedKey(ut.Z,[ut.CTRL]),n=wt.registry.createSerializedKey(ut.Z,[ut.ALT]),i=wt.registry.createSerializedKey(ut.Z,[ut.META]);wt.registry.register({name:Li.UNDO,preconditionFn(u){return!u.options.readOnly&&!Pl.inProgress()},callback(u,m){return u.hideChaff(),u.undo(!1),m.preventDefault(),!0},keyCodes:[e,n,i]})},Ea=function(){const e=wt.registry.createSerializedKey(ut.Z,[ut.SHIFT,ut.CTRL]),n=wt.registry.createSerializedKey(ut.Z,[ut.SHIFT,ut.ALT]),i=wt.registry.createSerializedKey(ut.Z,[ut.SHIFT,ut.META]),u=wt.registry.createSerializedKey(ut.Y,[ut.CTRL]);wt.registry.register({name:Li.REDO,preconditionFn(m){return!Pl.inProgress()&&!m.options.readOnly},callback(m,T){return m.hideChaff(),m.undo(!0),T.preventDefault(),!0},keyCodes:[e,n,i,u]})},Kd=function(){Ts(),no(),jc(),zd(),bs(),ro(),Ea()},wa=function(e){const n=e.saveState();return e.getParameters().length&&(n.parameters=e.getParameters().map(i=>i.saveState())),n},Xd=function(e,n,i,u){if(e=e.loadState(i,u),!i.parameters)return e;for(const[m,T]of i.parameters.entries())e.insertParameter(n.loadState(T,u),m);return e},Sa=function(e){const n=Object.create(null),i=v(Te.SERIALIZER,!0);for(const u in i){let m;const T=(m=i[u])==null?void 0:m.save(e);T&&(n[u]=T)}return n},Es=function(e,n,{recordUndo:i=!1}={}){var u=v(Te.SERIALIZER,!0);if(u){u=Object.entries(u).sort((T,N)=>N[1].priority-T[1].priority);var m=j();s.setRecordUndo$$module$build$src$core$events$utils(i),(i=s.getGroup$$module$build$src$core$events$utils())||s.setGroup$$module$build$src$core$events$utils(!0),qn(),n instanceof go&&n.setResizesEnabled(!1);for(const[,T]of u.reverse()){let N;(N=T)==null||N.clear(n)}for(const[T,N]of u.reverse())if(e[T]){let H;(H=N)==null||H.load(e[T],n)}n instanceof go&&n.setResizesEnabled(!0),qr(),W(new(G(oe.FINISHED_LOADING))(n)),s.setGroup$$module$build$src$core$events$utils(i),s.setRecordUndo$$module$build$src$core$events$utils(m)}},Ca=function(e,n){let i=null;i=typeof e=="string"?document.getElementById(e)||document.querySelector(e):e;var u;if(!document.contains(i)&&document!==((u=i)==null?void 0:u.ownerDocument))throw Error("Error: container is not in current document");e=new po(n||{}),u=document.createElement("div"),Ge(u,"injectionDiv"),n!=null&&n.rtl&&Ge(u,"blocklyRTL"),u.tabIndex=0,xn(u,tn.LABEL,s.Msg$$module$build$src$core$msg.WORKSPACE_ARIA_LABEL),i.appendChild(u),n=Ia(u,e);const m=yi(u,n,e);return Yd(m),me(m),Le(m),u.addEventListener("focusin",function(){me(m)}),je(u,"keydown",null,Oo),je(la(),"keydown",null,Oo),(n=il())&&je(n,"keydown",null,Oo),m},Ia=function(e,n){e.setAttribute("dir","LTR"),ti(n.hasCss,n.pathToMedia),e=ue(Z.SVG,{xmlns:Tl,"xmlns:html":Is,"xmlns:xlink":Sr,version:"1.1",class:"blocklySvg",tabindex:"0"},e);const i=ue(Z.DEFS,{},e),u=String(Math.random()).substring(2);return n.gridPattern=Sv.createDom(u,n.gridOptions,i),e},yi=function(e,n,i){i.parentWorkspace=null,i=new go(i);const u=i.options;i.scale=u.zoomOptions.startScale,n.appendChild(i.createDom("blocklyMainBackground",e));var m=i.getRenderer().getClassName();return m&&Ge(e,m),(m=i.getTheme().getClassName())&&Ge(e,m),!u.hasCategories&&u.languageTree&&(e=i.addFlyout(Z.SVG),xe(e,n)),u.hasTrashcan&&i.addTrashcan(),u.zoomOptions&&u.zoomOptions.controls&&i.addZoomControls(),i.getThemeManager().subscribe(n,"workspaceBackgroundColour","background-color"),i.translate(0,0),i.addChangeListener(Gc(i)),Le(i),Ic(),Fp(),sf(),i},Yd=function(e){const n=e.options;var i=e.getParentSvg();if(je(i.parentNode,"contextmenu",null,function(u){kn(u)||u.preventDefault()}),i=je(window,"resize",null,function(){wo(),e.hideComponents(!0),Jp(),Cd(),Le(e),Ta(e)}),e.setResizeHandlerWrapper(i),kf(),n.languageTree){i=e.getToolbox();const u=e.getFlyout(!0);i?i.init():u&&(u.init(e),u.show(n.languageTree),typeof u.scrollToStart=="function"&&u.scrollToStart())}n.hasTrashcan&&e.trashcan.init(),n.zoomOptions&&n.zoomOptions.controls&&e.zoomControls_.init(),n.moveOptions&&n.moveOptions.scrollbars?(e.scrollbar=new Qv(e,n.moveOptions.scrollbars===!0||!!n.moveOptions.scrollbars.horizontal,n.moveOptions.scrollbars===!0||!!n.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),e.scrollbar.resize()):e.setMetrics({x:.5,y:.5}),n.hasSounds&&qd(n.pathToMedia,e)},Oo=function(e){const n=ne();n&&!(kn(e)||n.rendered&&!n.isVisible())&&wt.registry.onKeyDown(n,e)},kf=function(){rS||(je(document,"scroll",null,function(){const e=z();for(let n=0,i;i=e[n];n++)i instanceof go&&i.updateInverseScreenCTM()}),at(document,"touchend",null,Wt),at(document,"touchcancel",null,Wt)),rS=!0},qd=function(e,n){function i(){for(;m.length;){const T=m.pop();T&&ft(T)}u.preload()}const u=n.getAudioManager();u.load([e+"click.mp3",e+"click.wav",e+"click.ogg"],"click"),u.load([e+"disconnect.wav",e+"disconnect.mp3",e+"disconnect.ogg"],"disconnect"),u.load([e+"delete.mp3",e+"delete.ogg",e+"delete.wav"],"delete");const m=[];m.push(je(document,"pointermove",null,i,!0)),m.push(je(document,"touchstart",null,i,!0))},Kt=function(){X.registry.register({displayText(){return s.Msg$$module$build$src$core$msg.UNDO},preconditionFn(e){return 0<e.workspace.getUndoStack().length?"enabled":"disabled"},callback(e){e.workspace.undo(!1)},scopeType:X.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},Ra=function(){X.registry.register({displayText(){return s.Msg$$module$build$src$core$msg.REDO},preconditionFn(e){return 0<e.workspace.getRedoStack().length?"enabled":"disabled"},callback(e){e.workspace.undo(!0)},scopeType:X.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},Wc=function(){X.registry.register({displayText(){return s.Msg$$module$build$src$core$msg.CLEAN_UP},preconditionFn(e){return e.workspace.isMovable()?1<e.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback(e){e.workspace.cleanUp()},scopeType:X.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},zc=function(e,n){function i(T){m--,T.setCollapsed(e),m===0&&s.setGroup$$module$build$src$core$events$utils(!1)}let u=0,m=0;s.setGroup$$module$build$src$core$events$utils(!0);for(let T=0;T<n.length;T++){let N=n[T];for(;N;)m++,setTimeout(i.bind(null,N),u),N=N.getNextBlock(),u+=10}},ka=function(){X.registry.register({displayText(){return s.Msg$$module$build$src$core$msg.COLLAPSE_ALL},preconditionFn(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(let n=0;n<e.length;n++){let i=e[n];for(;i;){if(!i.isCollapsed())return"enabled";i=i.getNextBlock()}}return"disabled"}return"hidden"},callback(e){zc(!0,e.workspace.getTopBlocks(!0))},scopeType:X.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},Kc=function(){X.registry.register({displayText(){return s.Msg$$module$build$src$core$msg.EXPAND_ALL},preconditionFn(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(let n=0;n<e.length;n++){let i=e[n];for(;i;){if(i.isCollapsed())return"enabled";i=i.getNextBlock()}}return"disabled"}return"hidden"},callback(e){zc(!1,e.workspace.getTopBlocks(!0))},scopeType:X.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},Ao=function(e,n){if(e.isDeletable())Array.prototype.push.apply(n,e.getDescendants(!1));else{e=e.getChildren(!1);for(let i=0;i<e.length;i++)Ao(e[i],n)}},Ht=function(e){const n=[];e=e.getTopBlocks(!0);for(let i=0;i<e.length;i++)Ao(e[i],n);return n},en=function(e,n){n?s.setGroup$$module$build$src$core$events$utils(n):(s.setGroup$$module$build$src$core$events$utils(!0),n=s.getGroup$$module$build$src$core$events$utils());const i=e.shift();i&&(i.isDeadOrDying()?en(e,n):(i.dispose(!1,!0),setTimeout(en,10,e,n))),s.setGroup$$module$build$src$core$events$utils(!1)},$n=function(){X.registry.register({displayText(e){return e.workspace?(e=Ht(e.workspace).length,e===1?s.Msg$$module$build$src$core$msg.DELETE_BLOCK:s.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${e}`)):""},preconditionFn(e){return e.workspace&&0<Ht(e.workspace).length?"enabled":"disabled"},callback(e){if(e.workspace){e.workspace.cancelCurrentGesture();var n=Ht(e.workspace);2>n.length?en(n):Et(s.Msg$$module$build$src$core$msg.DELETE_ALL_BLOCKS.replace("%1",String(n.length)),function(i){i&&en(n)})}},scopeType:X.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},Xc=function(){Kt(),Ra(),Wc(),ka(),Kc(),$n()},fl=function(){X.registry.register({displayText(){return s.Msg$$module$build$src$core$msg.DUPLICATE_BLOCK},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.isDeletable()&&e.isMovable()?e.isDuplicatable()?"enabled":"disabled":"hidden"},callback(e){if(e.block){var n=e.block.toCopyData();n&&Cn(n,e.block.workspace)}},scopeType:X.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},ml=function(){X.registry.register({displayText(e){return e.block.hasIcon(Fl.TYPE)?s.Msg$$module$build$src$core$msg.REMOVE_COMMENT:s.Msg$$module$build$src$core$msg.ADD_COMMENT},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.workspace.options.comments&&!e.isCollapsed()&&e.isEditable()?"enabled":"hidden"},callback(e){e=e.block,e.hasIcon(Fl.TYPE)?e.setCommentText(null):e.setCommentText("")},scopeType:X.ScopeType.BLOCK,id:"blockComment",weight:2})},xf=function(){X.registry.register({displayText(e){return e.block.getInputsInline()?s.Msg$$module$build$src$core$msg.EXTERNAL_INPUTS:s.Msg$$module$build$src$core$msg.INLINE_INPUTS},preconditionFn(e){if(e=e.block,!e.isInFlyout&&e.isMovable()&&!e.isCollapsed()){for(let n=1;n<e.inputList.length;n++)if(!(e.inputList[n-1]instanceof b$||e.inputList[n]instanceof b$))return"enabled"}return"hidden"},callback(e){e.block.setInputsInline(!e.block.getInputsInline())},scopeType:X.ScopeType.BLOCK,id:"blockInline",weight:3})},On=function(){X.registry.register({displayText(e){return e.block.isCollapsed()?s.Msg$$module$build$src$core$msg.EXPAND_BLOCK:s.Msg$$module$build$src$core$msg.COLLAPSE_BLOCK},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.isMovable()&&e.workspace.options.collapse?"enabled":"hidden"},callback(e){e.block.setCollapsed(!e.block.isCollapsed())},scopeType:X.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},Yc=function(){X.registry.register({displayText(e){return e.block.hasDisabledReason(Gn)?s.Msg$$module$build$src$core$msg.ENABLE_BLOCK:s.Msg$$module$build$src$core$msg.DISABLE_BLOCK},preconditionFn(e){if(e=e.block,!e.isInFlyout&&e.workspace.options.disable&&e.isEditable()){var n=e.getDisabledReasons();return n=n.size>(n.has(Gn)?1:0),e.getInheritedDisabled()||n?"disabled":"enabled"}return"hidden"},callback(e){e=e.block;const n=s.getGroup$$module$build$src$core$events$utils();n||s.setGroup$$module$build$src$core$events$utils(!0),e.setDisabledReason(!e.hasDisabledReason(Gn),Gn),s.setGroup$$module$build$src$core$events$utils(n)},scopeType:X.ScopeType.BLOCK,id:"blockDisable",weight:5})},qc=function(){X.registry.register({displayText(e){var n=e.block;return e=n.getDescendants(!1).length,(n=n.getNextBlock())&&(e-=n.getDescendants(!1).length),e===1?s.Msg$$module$build$src$core$msg.DELETE_BLOCK:s.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${e}`)},preconditionFn(e){return!e.block.isInFlyout&&e.block.isDeletable()?"enabled":"hidden"},callback(e){e.block&&e.block.checkAndDelete()},scopeType:X.ScopeType.BLOCK,id:"blockDelete",weight:6})},Jc=function(){X.registry.register({displayText(){return s.Msg$$module$build$src$core$msg.HELP},preconditionFn(e){return e=e.block,(typeof e.helpUrl=="function"?e.helpUrl():e.helpUrl)?"enabled":"hidden"},callback(e){e.block.showHelp()},scopeType:X.ScopeType.BLOCK,id:"blockHelp",weight:7})},ss=function(){X.registry.register({displayText:()=>s.Msg$$module$build$src$core$msg.REMOVE_COMMENT,preconditionFn(e){let n;return(n=e.comment)!=null&&n.isDeletable()?"enabled":"hidden"},callback(e){s.setGroup$$module$build$src$core$events$utils(!0);let n;(n=e.comment)==null||n.dispose(),s.setGroup$$module$build$src$core$events$utils(!1)},scopeType:X.ScopeType.COMMENT,id:"commentDelete",weight:6})},wr=function(){X.registry.register({displayText:()=>s.Msg$$module$build$src$core$msg.DUPLICATE_COMMENT,preconditionFn(e){let n;return(n=e.comment)!=null&&n.isMovable()?"enabled":"hidden"},callback(e){if(e.comment){var n=e.comment.toCopyData();n&&Cn(n,e.comment.workspace)}},scopeType:X.ScopeType.COMMENT,id:"commentDuplicate",weight:1})},gl=function(){X.registry.register({displayText:()=>s.Msg$$module$build$src$core$msg.ADD_COMMENT,preconditionFn:()=>"enabled",callback:(e,n)=>{if(e=e.workspace){s.setGroup$$module$build$src$core$events$utils(!0);var i=new fn(e);i.setText(s.Msg$$module$build$src$core$msg.WORKSPACE_COMMENT_DEFAULT_TEXT),i.moveTo(Jd(new ke(n.clientX,n.clientY),e)),s.setSelected$$module$build$src$core$common(i),s.setGroup$$module$build$src$core$events$utils(!1)}},scopeType:X.ScopeType.WORKSPACE,id:"commentCreate",weight:8})},Jd=function(e,n){var i=n.getInjectionDiv().getBoundingClientRect();return e=new ke(e.x-i.left,e.y-i.top),i=n.getOriginOffsetInPixels(),e=ke.difference(e,i),e.scale(1/n.scale),e},Qd=function(){fl(),ml(),xf(),On(),Yc(),qc(),Jc()},Of=function(){wr(),ss(),gl()},Zd=function(){Xc(),Qd()},Af=function(e){return e.paste!==void 0},Nf=function(e){return e.getSvgRoot!==void 0},Lf=function(e){return typeof e.id=="string"&&e.workspace!==void 0&&e.select!==void 0&&e.unselect!==void 0},Mf=function(e){return e.isSelectable()},Pf=function(e){ne().hideChaff(e)},ve=ve||{},ve.scope={},ve.ASSUME_ES5=!1,ve.ASSUME_NO_NATIVE_MAP=!1,ve.ASSUME_NO_NATIVE_SET=!1,ve.SIMPLE_FROUND_POLYFILL=!1,ve.ISOLATE_POLYFILLS=!1,ve.FORCE_POLYFILL_PROMISE=!1,ve.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,ve.defineProperty=ve.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(e,n,i){return e==Array.prototype||e==Object.prototype||(e[n]=i.value),e},ve.getGlobal=function(e){e=[typeof globalThis=="object"&&globalThis,e,typeof window=="object"&&window,typeof self=="object"&&self,typeof JS=="object"&&JS];for(var n=0;n<e.length;++n){var i=e[n];if(i&&i.Math==Math)return i}throw Error("Cannot find global object")},ve.global=ve.getGlobal(this),ve.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",ve.TRUST_ES6_POLYFILLS=!ve.ISOLATE_POLYFILLS||ve.IS_SYMBOL_NATIVE,ve.polyfills={},ve.propertyToPolyfillSymbol={},ve.POLYFILL_PREFIX="$jscp$",ve.polyfill=function(e,n,i,u){n&&(ve.ISOLATE_POLYFILLS?ve.polyfillIsolated(e,n,i,u):ve.polyfillUnisolated(e,n,i,u))},ve.polyfillUnisolated=function(e,n,i,u){for(i=ve.global,e=e.split("."),u=0;u<e.length-1;u++){var m=e[u];if(!(m in i))return;i=i[m]}e=e[e.length-1],u=i[e],n=n(u),n!=u&&n!=null&&ve.defineProperty(i,e,{configurable:!0,writable:!0,value:n})},ve.polyfillIsolated=function(e,n,i,u){var m=e.split(".");e=m.length===1,u=m[0],u=!e&&u in ve.polyfills?ve.polyfills:ve.global;for(var T=0;T<m.length-1;T++){var N=m[T];if(!(N in u))return;u=u[N]}m=m[m.length-1],i=ve.IS_SYMBOL_NATIVE&&i==="es6"?u[m]:null,n=n(i),n!=null&&(e?ve.defineProperty(ve.polyfills,m,{configurable:!0,writable:!0,value:n}):n!==i&&(ve.propertyToPolyfillSymbol[m]===void 0&&(i=1e9*Math.random()>>>0,ve.propertyToPolyfillSymbol[m]=ve.IS_SYMBOL_NATIVE?ve.global.Symbol(m):ve.POLYFILL_PREFIX+i+"$"+m),ve.defineProperty(u,ve.propertyToPolyfillSymbol[m],{configurable:!0,writable:!0,value:n})))},ve.underscoreProtoCanBeSet=function(){var e={a:!0},n={};try{return n.__proto__=e,n.a}catch{}return!1},ve.setPrototypeOf=ve.TRUST_ES6_POLYFILLS&&typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf:ve.underscoreProtoCanBeSet()?function(e,n){if(e.__proto__=n,e.__proto__!==n)throw new TypeError(e+" is not extensible");return e}:null,ve.arrayIteratorImpl=function(e){var n=0;return function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}}},ve.arrayIterator=function(e){return{next:ve.arrayIteratorImpl(e)}},ve.makeIterator=function(e){var n=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];if(n)return n.call(e);if(typeof e.length=="number")return ve.arrayIterator(e);throw Error(String(e)+" is not an iterable or ArrayLike")},ve.generator={},ve.generator.ensureIteratorResultIsObject_=function(e){if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object")},ve.generator.Context=function(){this.isRunning_=!1,this.yieldAllIterator_=null,this.yieldResult=void 0,this.nextAddress=1,this.finallyAddress_=this.catchAddress_=0,this.finallyContexts_=this.abruptCompletion_=null},ve.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0},ve.generator.Context.prototype.stop_=function(){this.isRunning_=!1},ve.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_},ve.generator.Context.prototype.next_=function(e){this.yieldResult=e},ve.generator.Context.prototype.throw_=function(e){this.abruptCompletion_={exception:e,isException:!0},this.jumpToErrorHandler_()},ve.generator.Context.prototype.return=function(e){this.abruptCompletion_={return:e},this.nextAddress=this.finallyAddress_},ve.generator.Context.prototype.jumpThroughFinallyBlocks=function(e){this.abruptCompletion_={jumpTo:e},this.nextAddress=this.finallyAddress_},ve.generator.Context.prototype.yield=function(e,n){return this.nextAddress=n,{value:e}},ve.generator.Context.prototype.yieldAll=function(e,n){e=ve.makeIterator(e);var i=e.next();if(ve.generator.ensureIteratorResultIsObject_(i),i.done)this.yieldResult=i.value,this.nextAddress=n;else return this.yieldAllIterator_=e,this.yield(i.value,n)},ve.generator.Context.prototype.jumpTo=function(e){this.nextAddress=e},ve.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0},ve.generator.Context.prototype.setCatchFinallyBlocks=function(e,n){this.catchAddress_=e,n!=null&&(this.finallyAddress_=n)},ve.generator.Context.prototype.setFinallyBlock=function(e){this.catchAddress_=0,this.finallyAddress_=e||0},ve.generator.Context.prototype.leaveTryBlock=function(e,n){this.nextAddress=e,this.catchAddress_=n||0},ve.generator.Context.prototype.enterCatchBlock=function(e){return this.catchAddress_=e||0,e=this.abruptCompletion_.exception,this.abruptCompletion_=null,e},ve.generator.Context.prototype.enterFinallyBlock=function(e,n,i){i?this.finallyContexts_[i]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_],this.catchAddress_=e||0,this.finallyAddress_=n||0},ve.generator.Context.prototype.leaveFinallyBlock=function(e,n){if(n=this.finallyContexts_.splice(n||0)[0],n=this.abruptCompletion_=this.abruptCompletion_||n){if(n.isException)return this.jumpToErrorHandler_();n.jumpTo!=null&&this.finallyAddress_<n.jumpTo?(this.nextAddress=n.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=e},ve.generator.Context.prototype.forIn=function(e){return new ve.generator.Context.PropertyIterator(e)},ve.generator.Context.PropertyIterator=function(e){this.object_=e,this.properties_=[];for(var n in e)this.properties_.push(n);this.properties_.reverse()},ve.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var e=this.properties_.pop();if(e in this.object_)return e}return null},ve.generator.Engine_=function(e){this.context_=new ve.generator.Context,this.program_=e},ve.generator.Engine_.prototype.next_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.next,e,this.context_.next_):(this.context_.next_(e),this.nextStep_())},ve.generator.Engine_.prototype.return_=function(e){this.context_.start_();var n=this.context_.yieldAllIterator_;return n?this.yieldAllStep_("return"in n?n.return:function(i){return{value:i,done:!0}},e,this.context_.return):(this.context_.return(e),this.nextStep_())},ve.generator.Engine_.prototype.throw_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.throw,e,this.context_.next_):(this.context_.throw_(e),this.nextStep_())},ve.generator.Engine_.prototype.yieldAllStep_=function(e,n,i){try{var u=e.call(this.context_.yieldAllIterator_,n);if(ve.generator.ensureIteratorResultIsObject_(u),!u.done)return this.context_.stop_(),u;var m=u.value}catch(T){return this.context_.yieldAllIterator_=null,this.context_.throw_(T),this.nextStep_()}return this.context_.yieldAllIterator_=null,i.call(this.context_,m),this.nextStep_()},ve.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var e=this.program_(this.context_);if(e)return this.context_.stop_(),{value:e.value,done:!1}}catch(n){this.context_.yieldResult=void 0,this.context_.throw_(n)}if(this.context_.stop_(),this.context_.abruptCompletion_){if(e=this.context_.abruptCompletion_,this.context_.abruptCompletion_=null,e.isException)throw e.exception;return{value:e.return,done:!0}}return{value:void 0,done:!0}},ve.generator.Generator_=function(e){this.next=function(n){return e.next_(n)},this.throw=function(n){return e.throw_(n)},this.return=function(n){return e.return_(n)},this[Symbol.iterator]=function(){return this}},ve.generator.createGenerator=function(e,n){return n=new ve.generator.Generator_(new ve.generator.Engine_(n)),ve.setPrototypeOf&&e.prototype&&ve.setPrototypeOf(n,e.prototype),n},ve.asyncExecutePromiseGenerator=function(e){function n(u){return e.next(u)}function i(u){return e.throw(u)}return new Promise(function(u,m){function T(N){N.done?u(N.value):Promise.resolve(N.value).then(n,i).then(T,m)}T(e.next())})},ve.asyncExecutePromiseGeneratorFunction=function(e){return ve.asyncExecutePromiseGenerator(e())},ve.asyncExecutePromiseGeneratorProgram=function(e){return ve.asyncExecutePromiseGenerator(new ve.generator.Generator_(new ve.generator.Engine_(e)))},ve.polyfill("globalThis",function(e){return e||ve.global},"es_2020","es3"),ve.polyfill("Array.prototype.includes",function(e){return e||function(n,i){var u=this;u instanceof String&&(u=String(u));var m=u.length;for(i=i||0,0>i&&(i=Math.max(i+m,0));i<m;i++){var T=u[i];if(T===n||Object.is(T,n))return!0}return!1}},"es7","es3"),ve.initSymbol=function(){},ve.iteratorPrototype=function(e){return e={next:e},e[Symbol.iterator]=function(){return this},e},ve.iteratorFromArray=function(e,n){e instanceof String&&(e+="");var i=0,u=!1,m={next:function(){if(!u&&i<e.length){var T=i++;return{value:n(T,e[T]),done:!1}}return u=!0,{done:!0,value:void 0}}};return m[Symbol.iterator]=function(){return m},m},ve.polyfill("Array.prototype.values",function(e){return e||function(){return ve.iteratorFromArray(this,function(n,i){return i})}},"es8","es3"),ve.polyfill("Array.prototype.flat",function(e){return e||function(n){n=n===void 0?1:n;var i=[];return Array.prototype.forEach.call(this,function(u){Array.isArray(u)&&0<n?(u=Array.prototype.flat.call(u,n-1),i.push.apply(i,u)):i.push(u)}),i}},"es9","es5"),ve.polyfill("Array.prototype.flatMap",function(e){return e||function(n,i){var u=[];return Array.prototype.forEach.call(this,function(m,T){m=n.call(i,m,T,this),Array.isArray(m)?u.push.apply(u,m):u.push(m)}),u}},"es9","es5"),ve.owns=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},ve.polyfill("Object.entries",function(e){return e||function(n){var i=[],u;for(u in n)ve.owns(n,u)&&i.push([u,n[u]]);return i}},"es8","es3"),ve.polyfill("Object.values",function(e){return e||function(n){var i=[],u;for(u in n)ve.owns(n,u)&&i.push(n[u]);return i}},"es8","es3");var os=Object.create(null),jg={typeMap:os},$l=Object.create(null),Pr="default",Te=class{constructor(e){this.name=e}toString(){return this.name}};Te.CONNECTION_CHECKER=new Te("connectionChecker"),Te.CONNECTION_PREVIEWER=new Te("connectionPreviewer"),Te.CURSOR=new Te("cursor"),Te.EVENT=new Te("event"),Te.FIELD=new Te("field"),Te.INPUT=new Te("input"),Te.RENDERER=new Te("renderer"),Te.TOOLBOX=new Te("toolbox"),Te.THEME=new Te("theme"),Te.TOOLBOX_ITEM=new Te("toolboxItem"),Te.FLYOUTS_VERTICAL_TOOLBOX=new Te("flyoutsVerticalToolbox"),Te.FLYOUTS_HORIZONTAL_TOOLBOX=new Te("flyoutsHorizontalToolbox"),Te.METRICS_MANAGER=new Te("metricsManager"),Te.BLOCK_DRAGGER=new Te("blockDragger"),Te.SERIALIZER=new Te("serializer"),Te.ICON=new Te("icon"),Te.PASTER=new Te("paster");var ws={DEFAULT:Pr,TEST_ONLY:jg};ws.Type=Te,ws.getAllItems=v,ws.getClass=g,ws.getClassFromOptions=y,ws.getObject=$,ws.hasItem=f,ws.register=o,ws.unregister=d;var hr=Object.create(null),oe;(function(e){e.BLOCK_CREATE="create",e.BLOCK_DELETE="delete",e.BLOCK_CHANGE="change",e.BLOCK_FIELD_INTERMEDIATE_CHANGE="block_field_intermediate_change",e.BLOCK_MOVE="move",e.VAR_CREATE="var_create",e.VAR_DELETE="var_delete",e.VAR_RENAME="var_rename",e.UI="ui",e.BLOCK_DRAG="drag",e.SELECTED="selected",e.CLICK="click",e.MARKER_MOVE="marker_move",e.BUBBLE_OPEN="bubble_open",e.TRASHCAN_OPEN="trashcan_open",e.TOOLBOX_ITEM_SELECT="toolbox_item_select",e.THEME_CHANGE="theme_change",e.VIEWPORT_CHANGE="viewport_change",e.COMMENT_CREATE="comment_create",e.COMMENT_DELETE="comment_delete",e.COMMENT_CHANGE="comment_change",e.COMMENT_MOVE="comment_move",e.COMMENT_RESIZE="comment_resize",e.COMMENT_DRAG="comment_drag",e.COMMENT_COLLAPSE="comment_collapse",e.FINISHED_LOADING="finished_loading"})(oe||(oe={}));var Df=[oe.BLOCK_CREATE,oe.BLOCK_MOVE,oe.COMMENT_CREATE,oe.COMMENT_MOVE],Bf=new Set,eh={};eh.warn=w;var Ff="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Uf={genUid:()=>{const e=Ff.length,n=[];for(let i=0;20>i;i++)n[i]=Ff.charAt(Math.random()*e);return n.join("")}},Wg=0,Vf={TEST_ONLY:Uf};Vf.genUid=O,Vf.getNextUniqueId=S;var Hf="",Qc=!0,Gf=0,th="ORPHANED_BLOCK",so=[],jf={FIRE_QUEUE:so,enqueueEvent:Ee,fireNow:we,fireInternal:he,setGroupInternal:Oe};s.disable$$module$build$src$core$events$utils,s.enable$$module$build$src$core$events$utils,s.getGroup$$module$build$src$core$events$utils,s.setGroup$$module$build$src$core$events$utils,s.setRecordUndo$$module$build$src$core$events$utils;var Ti=Object.create(null),zg,_l=null,Kg,pr=[],nh={defineBlocksWithJsonArrayInternal:nt},_n={TEST_ONLY:nh};_n.createBlockDefinitionsFromJsonArray=s.createBlockDefinitionsFromJsonArray$$module$build$src$core$common,_n.defineBlocks=s.defineBlocks$$module$build$src$core$common,_n.defineBlocksWithJsonArray=ct,_n.draggingConnections=pr,_n.getAllWorkspaces=z,_n.getBlockTypeCounts=He,_n.getMainWorkspace=ne,_n.getParentContainer=te,_n.getSelected=fe,_n.getWorkspaceById=$e,_n.registerWorkspace=se,_n.setMainWorkspace=me,_n.setParentContainer=Se,_n.setSelected=s.setSelected$$module$build$src$core$common,_n.svgResize=Le,_n.unregisterWorkpace=ae;var vl=class{constructor(){this.workspaceId=void 0,this.isUiEvent=!1,this.type="",this.group=s.getGroup$$module$build$src$core$events$utils(),this.recordUndo=j()}toJson(){return{type:this.type,group:this.group}}static fromJson(e,n,i){return i.isBlank=!1,i.group=e.group||"",i.workspaceId=n.id,i}isNull(){return!1}run(e){}getEventWorkspace_(){let e;if(this.workspaceId&&(e=$e(this.workspaceId)),!e)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return e}},is=class extends vl{constructor(e){super(),this.recordUndo=!1,this.isUiEvent=!0,this.isBlank=typeof e>"u",this.workspaceId=e||""}},rh=class extends is{constructor(e,n,i){n=e?e.workspace.id:n,n===null&&(n=void 0),super(n),this.type=oe.CLICK,this.blockId=e?e.id:void 0,this.targetType=i}toJson(){const e=super.toJson();if(!this.targetType)throw Error("The click target type is undefined. Either pass a block to the constructor, or call fromJson");return e.targetType=this.targetType,e.blockId=this.blockId,e}static fromJson(e,n,i){return n=super.fromJson(e,n,i??new rh),n.targetType=e.targetType,n.blockId=e.blockId,n}},Zc;(function(e){e.BLOCK="block",e.WORKSPACE="workspace",e.ZOOM_CONTROLS="zoom_controls"})(Zc||(Zc={})),o(Te.EVENT,oe.CLICK,rh);var xa=750,sh="ontouchstart"in globalThis||!!(globalThis.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!globalThis.navigator||!globalThis.navigator.maxTouchPoints&&!globalThis.navigator.msMaxTouchPoints),Oa=null,yl={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]},eu=0,bi={TOUCH_ENABLED:sh,TOUCH_MAP:yl};bi.checkTouchIdentifier=Yr,bi.clearTouchIdentifier=Mt,bi.getTouchIdentifierFromEvent=At,bi.longStart=Rt,bi.longStop=Wt,bi.shouldHandleEvent=wn;var oh,Wf,zf,Xg,Vn,An,ih,Kf,Xf,Yf;(function(e){function n(u){return i.includes(u.toUpperCase())}oh=e;const i=oh.toUpperCase();Wf=n("JavaFX"),zf=n("WebKit"),Xg=n("Gecko")&&!zf,Vn=n("Android"),e=globalThis.navigator&&globalThis.navigator.maxTouchPoints,An=n("iPad")||n("Macintosh")&&0<e,ih=n("iPhone")&&!An,Kf=n("Macintosh"),Xf=An||Vn&&!n("Mobile")||n("Silk"),Yf=!Xf&&(ih||Vn)})(globalThis.navigator&&globalThis.navigator.userAgent||"");var Yg=oh,lh=Wf,qf=Xg,tu=Vn,nu=An,Jf=ih,ru=Kf,ah=Yf,qg={ANDROID:tu,GECKO:qf,IPAD:nu,IPHONE:Jf,JavaFx:lh,MAC:ru,MOBILE:ah,raw:Yg},ch=40,su=125,No={};No.bind=at,No.conditionalBind=je,No.getScrollDeltaPixels=hn,No.isRightButton=or,No.isTargetInput=kn,No.mouseToSvg=fs,No.unbind=ft;var Qf={};Qf.removeElem=zt;var Ss=class{constructor(e){this.name=e}toString(){return this.name}};Ss.POSITIONABLE=new Ss("positionable"),Ss.DRAG_TARGET=new Ss("drag_target"),Ss.DELETE_AREA=new Ss("delete_area"),Ss.AUTOHIDEABLE=new Ss("autohideable");var Ft=class{constructor(){this.componentData=new Map,this.capabilityToComponentIds=new Map}addComponent(e,n){const i=e.component.id;if(!n&&this.componentData.has(i)){var u;throw Error('Plugin "'+i+'" with capabilities "'+((u=this.componentData.get(i))==null?void 0:u.capabilities)+'" already added.')}for(this.componentData.set(i,e),n=[],u=0;u<e.capabilities.length;u++){const m=String(e.capabilities[u]).toLowerCase();if(n.push(m),this.capabilityToComponentIds.has(m)){let T;(T=this.capabilityToComponentIds.get(m))==null||T.push(i)}else this.capabilityToComponentIds.set(m,[i])}this.componentData.get(i).capabilities=n}removeComponent(e){const n=this.componentData.get(e);if(n){for(let i=0;i<n.capabilities.length;i++){const u=String(n.capabilities[i]).toLowerCase();zt(this.capabilityToComponentIds.get(u),e)}this.componentData.delete(e)}}addCapability(e,n){if(!this.getComponent(e))throw Error('Cannot add capability, "'+n+'". Plugin "'+e+'" has not been added to the ComponentManager');if(this.hasCapability(e,n))console.warn('Plugin "'+e+'already has capability "'+n+'"');else{n=`${n}`.toLowerCase();var i;(i=this.componentData.get(e))==null||i.capabilities.push(n);var u;(u=this.capabilityToComponentIds.get(n))==null||u.push(e)}}removeCapability(e,n){if(!this.getComponent(e))throw Error('Cannot remove capability, "'+n+'". Plugin "'+e+'" has not been added to the ComponentManager');this.hasCapability(e,n)?(n=`${n}`.toLowerCase(),zt(this.componentData.get(e).capabilities,n),zt(this.capabilityToComponentIds.get(n),e)):console.warn('Plugin "'+e+`doesn't have capability "`+n+'" to remove')}hasCapability(e,n){return n=`${n}`.toLowerCase(),this.componentData.has(e)&&this.componentData.get(e).capabilities.includes(n)}getComponent(e){let n;return(n=this.componentData.get(e))==null?void 0:n.component}getComponents(e,n){if(e=`${e}`.toLowerCase(),e=this.capabilityToComponentIds.get(e),!e)return[];const i=[];if(n){const u=[];e.forEach(m=>{u.push(this.componentData.get(m))}),u.sort(function(m,T){return m.weight-T.weight}),u.forEach(function(m){i.push(m.component)})}else e.forEach(u=>{i.push(this.componentData.get(u).component)});return i}};Ft.Capability=Ss,(function(e){e=e.ComponentWeight||(e.ComponentWeight={}),e[e.TOOLBOX_WEIGHT=0]="TOOLBOX_WEIGHT",e[e.FLYOUT_WEIGHT=1]="FLYOUT_WEIGHT",e[e.TRASHCAN_WEIGHT=2]="TRASHCAN_WEIGHT",e[e.ZOOM_CONTROLS_WEIGHT=3]="ZOOM_CONTROLS_WEIGHT"})(Ft||(Ft={})),Ft.ComponentWeight;var Aa=!1,Cs=`
.blocklySvg {
  background-color: #fff;
  outline: none;
  overflow: hidden;  /* IE overflows by default. */
  position: absolute;
  display: block;
}

.blocklyWidgetDiv {
  display: none;
  position: absolute;
  z-index: 99999;  /* big value for bootstrap3 compatibility */
}

.injectionDiv {
  height: 100%;
  position: relative;
  overflow: hidden;  /* So blocks in drag surface disappear at edges */
  touch-action: none;
  user-select: none;
  -webkit-user-select: none;
}

.blocklyNonSelectable {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
}

.blocklyBlockCanvas.blocklyCanvasTransitioning,
.blocklyBubbleCanvas.blocklyCanvasTransitioning {
  transition: transform .5s;
}

.blocklyTooltipDiv {
  background-color: #ffffc7;
  border: 1px solid #ddc;
  box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);
  color: #000;
  display: none;
  font: 9pt sans-serif;
  opacity: .9;
  padding: 2px;
  position: absolute;
  z-index: 100000;  /* big value for bootstrap3 compatibility */
}

.blocklyDropDownDiv {
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1000;
  display: none;
  border: 1px solid;
  border-color: #dadce0;
  background-color: #fff;
  border-radius: 2px;
  padding: 4px;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownContent {
  max-height: 300px;  /* @todo: spec for maximum height. */
  overflow: auto;
  overflow-x: hidden;
  position: relative;
}

.blocklyDropDownArrow {
  position: absolute;
  left: 0;
  top: 0;
  width: 16px;
  height: 16px;
  z-index: -1;
  background-color: inherit;
  border-color: inherit;
}

.blocklyDropDownButton {
  display: inline-block;
  float: left;
  padding: 0;
  margin: 4px;
  border-radius: 4px;
  outline: none;
  border: 1px solid;
  transition: box-shadow .1s;
  cursor: pointer;
}

.blocklyArrowTop {
  border-top: 1px solid;
  border-left: 1px solid;
  border-top-left-radius: 4px;
  border-color: inherit;
}

.blocklyArrowBottom {
  border-bottom: 1px solid;
  border-right: 1px solid;
  border-bottom-right-radius: 4px;
  border-color: inherit;
}

.blocklyResizeSE {
  cursor: se-resize;
  fill: #aaa;
}

.blocklyResizeSW {
  cursor: sw-resize;
  fill: #aaa;
}

.blocklyResizeLine {
  stroke: #515A5A;
  stroke-width: 1;
}

.blocklyHighlightedConnectionPath {
  fill: none;
  stroke: #fc3;
  stroke-width: 4px;
}

.blocklyPathLight {
  fill: none;
  stroke-linecap: round;
  stroke-width: 1;
}

.blocklySelected>.blocklyPathLight {
  display: none;
}

.blocklyDraggable {
  cursor: grab;
  cursor: -webkit-grab;
}

.blocklyDragging {
  cursor: grabbing;
  cursor: -webkit-grabbing;
  /* Drag surface disables events to not block the toolbox, so we have to
   * reenable them here for the cursor values to work. */
  pointer-events: auto;
}

  /* Changes cursor on mouse down. Not effective in Firefox because of
     https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */
.blocklyDraggable:active {
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

.blocklyDragging.blocklyDraggingDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyDragging>.blocklyPath,
.blocklyDragging>.blocklyPathLight {
  fill-opacity: .8;
  stroke-opacity: .8;
}

.blocklyDragging>.blocklyPathDark {
  display: none;
}

.blocklyDisabled>.blocklyPath {
  fill-opacity: .5;
  stroke-opacity: .5;
}

.blocklyDisabled>.blocklyPathLight,
.blocklyDisabled>.blocklyPathDark {
  display: none;
}

.blocklyInsertionMarker>.blocklyPath,
.blocklyInsertionMarker>.blocklyPathLight,
.blocklyInsertionMarker>.blocklyPathDark {
  fill-opacity: .2;
  stroke: none;
}

.blocklyNonEditableText>text {
  pointer-events: none;
}

.blocklyFlyout {
  position: absolute;
  z-index: 20;
}

.blocklyText text {
  cursor: default;
}

.blocklyHidden {
  display: none;
}

.blocklyFieldDropdown:not(.blocklyHidden) {
  display: block;
}

.blocklyIconGroup {
  cursor: default;
}

.blocklyIconGroup:not(:hover),
.blocklyIconGroupReadonly {
  opacity: .6;
}

.blocklyIconShape {
  fill: #00f;
  stroke: #fff;
  stroke-width: 1px;
}

.blocklyIconSymbol {
  fill: #fff;
}

.blocklyMinimalBody {
  margin: 0;
  padding: 0;
  height: 100%;
}

.blocklyHtmlInput {
  border: none;
  border-radius: 4px;
  height: 100%;
  margin: 0;
  outline: none;
  padding: 0;
  width: 100%;
  text-align: center;
  display: block;
  box-sizing: border-box;
}

/* Remove the increase and decrease arrows on the field number editor */
input.blocklyHtmlInput[type=number]::-webkit-inner-spin-button,
input.blocklyHtmlInput[type=number]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type=number] {
  -moz-appearance: textfield;
}

.blocklyMainBackground {
  stroke-width: 1;
  stroke: #c6c6c6;  /* Equates to #ddd due to border being off-pixel. */
}

.blocklyMutatorBackground {
  fill: #fff;
  stroke: #ddd;
  stroke-width: 1;
}

.blocklyFlyoutBackground {
  fill: #ddd;
  fill-opacity: .8;
}

.blocklyMainWorkspaceScrollbar {
  z-index: 20;
}

.blocklyFlyoutScrollbar {
  z-index: 30;
}

.blocklyScrollbarHorizontal,
.blocklyScrollbarVertical {
  position: absolute;
  outline: none;
}

.blocklyScrollbarBackground {
  opacity: 0;
}

.blocklyScrollbarHandle {
  fill: #ccc;
}

.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyScrollbarHandle:hover {
  fill: #bbb;
}

/* Darken flyout scrollbars due to being on a grey background. */
/* By contrast, workspace scrollbars are on a white background. */
.blocklyFlyout .blocklyScrollbarHandle {
  fill: #bbb;
}

.blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyFlyout .blocklyScrollbarHandle:hover {
  fill: #aaa;
}

.blocklyInvalidInput {
  background: #faa;
}

.blocklyVerticalMarker {
  stroke-width: 3px;
  fill: rgba(255,255,255,.5);
  pointer-events: none;
}

.blocklyComputeCanvas {
  position: absolute;
  width: 0;
  height: 0;
}

.blocklyNoPointerEvents {
  pointer-events: none;
}

.blocklyContextMenu {
  border-radius: 4px;
  max-height: 100%;
}

.blocklyDropdownMenu {
  border-radius: 2px;
  padding: 0 !important;
}

.blocklyDropdownMenu .blocklyMenuItem {
  /* 28px on the left for icon or checkbox. */
  padding-left: 28px;
}

/* BiDi override for the resting state. */
.blocklyDropdownMenu .blocklyMenuItemRtl {
  /* Flip left/right padding for BiDi. */
  padding-left: 5px;
  padding-right: 28px;
}

.blocklyWidgetDiv .blocklyMenu {
  background: #fff;
  border: 1px solid transparent;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
  font: normal 13px Arial, sans-serif;
  margin: 0;
  outline: none;
  padding: 4px 0;
  position: absolute;
  overflow-y: auto;
  overflow-x: hidden;
  max-height: 100%;
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

.blocklyWidgetDiv .blocklyMenu.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv .blocklyMenu {
  background: inherit;  /* Compatibility with gapi, reset from goog-menu */
  border: inherit;  /* Compatibility with gapi, reset from goog-menu */
  font: normal 13px "Helvetica Neue", Helvetica, sans-serif;
  outline: none;
  position: relative;  /* Compatibility with gapi, reset from goog-menu */
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

/* State: resting. */
.blocklyMenuItem {
  border: none;
  color: #000;
  cursor: pointer;
  list-style: none;
  margin: 0;
  /* 7em on the right for shortcut. */
  min-width: 7em;
  padding: 6px 15px;
  white-space: nowrap;
}

/* State: disabled. */
.blocklyMenuItemDisabled {
  color: #ccc;
  cursor: inherit;
}

/* State: hover. */
.blocklyMenuItemHighlight {
  background-color: rgba(0,0,0,.1);
}

/* State: selected/checked. */
.blocklyMenuItemCheckbox {
  height: 16px;
  position: absolute;
  width: 16px;
}

.blocklyMenuItemSelected .blocklyMenuItemCheckbox {
  background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;
  float: left;
  margin-left: -24px;
  position: static;  /* Scroll with the menu. */
}

.blocklyMenuItemRtl .blocklyMenuItemCheckbox {
  float: right;
  margin-right: -24px;
}

.blocklyBlockDragSurface, .blocklyAnimationLayer {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: visible !important;
  z-index: 80;
  pointer-events: none;
}
`,Zf={};Zf.inject=ti,Zf.register=Yn;var ke=class{constructor(e,n){this.x=e,this.y=n}clone(){return new ke(this.x,this.y)}scale(e){return this.x*=e,this.y*=e,this}translate(e,n){return this.x+=e,this.y+=n,this}static equals(e,n){return e===n?!0:e&&n?e.x===n.x&&e.y===n.y:!1}static distance(e,n){const i=e.x-n.x;return e=e.y-n.y,Math.sqrt(i*i+e*e)}static magnitude(e){return Math.sqrt(e.x*e.x+e.y*e.y)}static difference(e,n){return new ke(e.x-n.x,e.y-n.y)}static sum(e,n){return new ke(e.x+n.x,e.y+n.y)}},Tl="http://www.w3.org/2000/svg",Is="http://www.w3.org/1999/xhtml",Sr="http://www.w3.org/1999/xlink",Dr;(function(e){e[e.ELEMENT_NODE=1]="ELEMENT_NODE",e[e.TEXT_NODE=3]="TEXT_NODE",e[e.COMMENT_NODE=8]="COMMENT_NODE"})(Dr||(Dr={}));var Gt=null,em=0,uh=null,pn={HTML_NS:Is};pn.NodeType=Dr,pn.SVG_NS=Tl,pn.XLINK_NS=Sr,pn.addClass=Ge,pn.createSvgElement=ue,pn.getFastTextWidth=Jr,pn.getFastTextWidthWithSizeString=xr,pn.getTextWidth=ni,pn.hasClass=q,pn.insertAfter=xe,pn.measureFontMetrics=_r,pn.removeClass=D,pn.removeClasses=k,pn.removeNode=Q,pn.setCssTransform=kt,pn.startTextWidthCache=qn,pn.stopTextWidthCache=qr;var Z=class{constructor(e){this.tagName=e}toString(){return this.tagName}};Z.ANIMATE=new Z("animate"),Z.CIRCLE=new Z("circle"),Z.CLIPPATH=new Z("clipPath"),Z.DEFS=new Z("defs"),Z.FECOMPOSITE=new Z("feComposite"),Z.FECOMPONENTTRANSFER=new Z("feComponentTransfer"),Z.FEFLOOD=new Z("feFlood"),Z.FEFUNCA=new Z("feFuncA"),Z.FEGAUSSIANBLUR=new Z("feGaussianBlur"),Z.FEPOINTLIGHT=new Z("fePointLight"),Z.FESPECULARLIGHTING=new Z("feSpecularLighting"),Z.FILTER=new Z("filter"),Z.FOREIGNOBJECT=new Z("foreignObject"),Z.G=new Z("g"),Z.IMAGE=new Z("image"),Z.LINE=new Z("line"),Z.PATH=new Z("path"),Z.PATTERN=new Z("pattern"),Z.POLYGON=new Z("polygon"),Z.RECT=new Z("rect"),Z.SVG=new Z("svg"),Z.TEXT=new Z("text"),Z.TSPAN=new Z("tspan");var St=class{constructor(e,n,i,u){this.top=e,this.bottom=n,this.left=i,this.right=u}clone(){return new St(this.top,this.bottom,this.left,this.right)}getHeight(){return this.bottom-this.top}getWidth(){return this.right-this.left}contains(e,n){return e>=this.left&&e<=this.right&&n>=this.top&&n<=this.bottom}intersects(e){return this.left<=e.right&&this.right>=e.left&&this.bottom>=e.top&&this.top<=e.bottom}static equals(e,n){return e===n?!0:e&&n?e.top===n.top&&e.bottom===n.bottom&&e.left===n.left&&e.right===n.right:!1}static createFromPoint(e,n,i){const u=e.x;return e=e.y,new St(e,e+i,u,u+n)}},Re=class{constructor(e,n){this.width=e,this.height=n}static equals(e,n){return e===n?!0:e&&n?e.width===n.width&&e.height===n.height:!1}static max(e,n){return new Re(Math.max(e.width,n.width),Math.max(e.height,n.height))}static min(e,n){return new Re(Math.min(e.width,n.width),Math.min(e.height,n.height))}},bl={getSizeInternal:it},oo={TEST_ONLY:bl};oo.getBorderBox=Qn,oo.getComputedStyle=gt,oo.getContainerOffsetToScrollInto=Sn,oo.getPageOffset=on,oo.getSize=ri,oo.getViewportPageOffset=Jn,oo.scrollIntoContainerView=Qr;var tm=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,Jg=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,ou={XY_REGEX:tm,XY_STYLE_REGEX:Jg},io={TEST_ONLY:ou};io.getDocumentScroll=Zl,io.getInjectionDivXY=si,io.getRelativeXY=vr,io.getViewportBBox=Ql,io.screenToWsCoordinates=nd,io.wsToScreenCoordinates=Sg;var qt=class{constructor(e,n,i,u,m){this.workspace=e,this.horizontal=n,this.oldHostMetrics=null,this.ratio=1,this.origin=new ke(0,0),this.startDragHandle=this.handlePosition=this.handleLength=this.scrollbarLength=this.startDragMouse=0,this.containerVisible=this.isHandleVisible=!0,this.position=new ke(0,0),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.pair=i||!1,this.margin=m!==void 0?m:qt.DEFAULT_SCROLLBAR_MARGIN,e="blocklyScrollbar"+(this.horizontal?"Horizontal":"Vertical"),u&&(e+=" "+u),this.outerSvg=ue(Z.SVG,{class:e}),u=ue(Z.G,{},this.outerSvg),this.svgBackground=ue(Z.RECT,{class:"blocklyScrollbarBackground"},u),e=Math.floor((qt.scrollbarThickness-5)/2),this.svgHandle=ue(Z.RECT,{class:"blocklyScrollbarHandle",rx:e,ry:e},u),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarColour","fill"),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarOpacity","fill-opacity"),xe(this.outerSvg,this.workspace.getParentSvg()),this.setInitialThickness(),n?(this.lengthAttribute_="width",this.positionAttribute_="x"):(this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=je(this.svgBackground,"pointerdown",this,this.onMouseDownBar),this.onMouseDownHandleWrapper_=je(this.svgHandle,"pointerdown",this,this.onMouseDownHandle)}setInitialThickness(){const e=qt.scrollbarThickness;this.horizontal?(this.svgBackground.setAttribute("height",String(e)),this.outerSvg.setAttribute("height",String(e)),this.svgHandle.setAttribute("height",String(e-5)),this.svgHandle.setAttribute("y","2.5")):(this.svgBackground.setAttribute("width",String(e)),this.outerSvg.setAttribute("width",String(e)),this.svgHandle.setAttribute("width",String(e-5)),this.svgHandle.setAttribute("x","2.5"))}dispose(){this.cleanUp(),ft(this.onMouseDownBarWrapper_),ft(this.onMouseDownHandleWrapper_),Q(this.outerSvg),this.workspace.getThemeManager().unsubscribe(this.svgHandle)}constrainHandleLength(e){return e=0>=e||isNaN(e)?0:Math.min(e,this.scrollbarLength)}setHandleLength(e){this.handleLength=e,this.svgHandle.setAttribute(this.lengthAttribute_,String(this.handleLength))}constrainHandlePosition(e){return e=0>=e||isNaN(e)?0:Math.min(e,this.scrollbarLength-this.handleLength)}setHandlePosition(e){this.handlePosition=e,this.svgHandle.setAttribute(this.positionAttribute_,String(this.handlePosition))}setScrollbarLength(e){this.scrollbarLength=e,this.outerSvg.setAttribute(this.lengthAttribute_,String(this.scrollbarLength)),this.svgBackground.setAttribute(this.lengthAttribute_,String(this.scrollbarLength))}setPosition(e,n){this.position.x=e,this.position.y=n,kt(this.outerSvg,"translate("+(this.position.x+this.origin.x)+"px,"+(this.position.y+this.origin.y)+"px)")}resize(e){!e&&(e=this.workspace.getMetrics(),!e)||this.oldHostMetrics&&qt.metricsAreEquivalent(e,this.oldHostMetrics)||(this.horizontal?this.resizeHorizontal(e):this.resizeVertical(e),this.oldHostMetrics=e,this.updateMetrics())}requiresViewResize(e){return this.oldHostMetrics?this.oldHostMetrics.viewWidth!==e.viewWidth||this.oldHostMetrics.viewHeight!==e.viewHeight||this.oldHostMetrics.absoluteLeft!==e.absoluteLeft||this.oldHostMetrics.absoluteTop!==e.absoluteTop:!0}resizeHorizontal(e){this.requiresViewResize(e)?this.resizeViewHorizontal(e):this.resizeContentHorizontal(e)}resizeViewHorizontal(e){var n=e.viewWidth-2*this.margin;this.pair&&(n-=qt.scrollbarThickness),this.setScrollbarLength(Math.max(0,n)),n=e.absoluteLeft+this.margin,this.pair&&this.workspace.RTL&&(n+=qt.scrollbarThickness),this.setPosition(n,e.absoluteTop+e.viewHeight-qt.scrollbarThickness-this.margin),this.resizeContentHorizontal(e)}resizeContentHorizontal(e){if(e.viewWidth>=e.scrollWidth)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var n=this.scrollbarLength*e.viewWidth/e.scrollWidth;n=this.constrainHandleLength(n),this.setHandleLength(n),n=e.scrollWidth-e.viewWidth;var i=this.scrollbarLength-this.handleLength;e=(e.viewLeft-e.scrollLeft)/n*i,e=this.constrainHandlePosition(e),this.setHandlePosition(e),this.ratio=i/n}}resizeVertical(e){this.requiresViewResize(e)?this.resizeViewVertical(e):this.resizeContentVertical(e)}resizeViewVertical(e){let n=e.viewHeight-2*this.margin;this.pair&&(n-=qt.scrollbarThickness),this.setScrollbarLength(Math.max(0,n)),this.setPosition(this.workspace.RTL?e.absoluteLeft+this.margin:e.absoluteLeft+e.viewWidth-qt.scrollbarThickness-this.margin,e.absoluteTop+this.margin),this.resizeContentVertical(e)}resizeContentVertical(e){if(e.viewHeight>=e.scrollHeight)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var n=this.scrollbarLength*e.viewHeight/e.scrollHeight;n=this.constrainHandleLength(n),this.setHandleLength(n),n=e.scrollHeight-e.viewHeight;var i=this.scrollbarLength-this.handleLength;e=(e.viewTop-e.scrollTop)/n*i,e=this.constrainHandlePosition(e),this.setHandlePosition(e),this.ratio=i/n}}isVisible(){return this.isHandleVisible}setContainerVisible(e){const n=e!==this.containerVisible;this.containerVisible=e,n&&this.updateDisplay_()}setVisible(e){if(this.pair)throw Error("Unable to toggle visibility of paired scrollbars.");this.setVisibleInternal(e)}setVisibleInternal(e){const n=e!==this.isVisible();this.isHandleVisible=e,n&&this.updateDisplay_()}updateDisplay_(){this.containerVisible&&this.isVisible()?this.outerSvg.setAttribute("display","block"):this.outerSvg.setAttribute("display","none")}onMouseDownBar(e){if(this.workspace.markFocused(),Mt(),this.cleanUp(),or(e))e.stopPropagation();else{var n=fs(e,this.workspace.getParentSvg(),this.workspace.getInverseScreenCTM());n=this.horizontal?n.x:n.y;var i=si(this.svgHandle);i=this.horizontal?i.x:i.y;var u=this.handlePosition,m=.95*this.handleLength;n<=i?u-=m:n>=i+this.handleLength&&(u+=m),this.setHandlePosition(this.constrainHandlePosition(u)),this.updateMetrics(),e.stopPropagation(),e.preventDefault()}}onMouseDownHandle(e){this.workspace.markFocused(),this.cleanUp(),or(e)?e.stopPropagation():(this.startDragHandle=this.handlePosition,this.startDragMouse=this.horizontal?e.clientX:e.clientY,this.onMouseUpWrapper_=je(document,"pointerup",this,this.onMouseUpHandle),this.onMouseMoveWrapper_=je(document,"pointermove",this,this.onMouseMoveHandle),e.stopPropagation(),e.preventDefault())}onMouseMoveHandle(e){this.setHandlePosition(this.constrainHandlePosition(this.startDragHandle+((this.horizontal?e.clientX:e.clientY)-this.startDragMouse))),this.updateMetrics()}onMouseUpHandle(){Mt(),this.cleanUp()}cleanUp(){this.workspace.hideChaff(!0),this.onMouseUpWrapper_&&(ft(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(ft(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}getRatio_(){let e=this.handlePosition/(this.scrollbarLength-this.handleLength);return isNaN(e)&&(e=0),e}updateMetrics(){const e=this.getRatio_();this.horizontal?this.workspace.setMetrics({x:e}):this.workspace.setMetrics({y:e})}set(e,n){this.setHandlePosition(this.constrainHandlePosition(e*this.ratio)),(n||n===void 0)&&this.updateMetrics()}setOrigin(e,n){this.origin=new ke(e,n)}static metricsAreEquivalent(e,n){return e.viewWidth===n.viewWidth&&e.viewHeight===n.viewHeight&&e.viewLeft===n.viewLeft&&e.viewTop===n.viewTop&&e.absoluteTop===n.absoluteTop&&e.absoluteLeft===n.absoluteLeft&&e.scrollWidth===n.scrollWidth&&e.scrollHeight===n.scrollHeight&&e.scrollLeft===n.scrollLeft&&e.scrollTop===n.scrollTop}};qt.scrollbarThickness=sh?25:15,qt.DEFAULT_SCROLLBAR_MARGIN=.5;var iu={parseFromString:function(){throw Error("DOMParser was not found in the global scope and was not properly injected using injectDependencies")}},dh={serializeToString:function(){throw Error("XMLSerializer was not foundin the global scope and was not properly injected using injectDependencies")}},{document:lu,DOMParser:El,XMLSerializer:wl}=globalThis;El&&(iu=new El),wl&&(dh=new wl);var Nn="https://developers.google.com/blockly/xml",Rs=/[\x00-\x09\x0B\x0C\x0E-\x1F]/g,Br={NAME_SPACE:Nn};Br.createElement=s.createElement$$module$build$src$core$utils$xml,Br.createTextNode=s.createTextNode$$module$build$src$core$utils$xml,Br.domToText=ea,Br.injectDependencies=Cg,Br.textToDom=s.textToDom$$module$build$src$core$utils$xml;var hh="categoryToolbox",nm="flyoutToolbox",qe;(function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"})(qe||(qe={}));var rm={hasCategoriesInternal:Cp},Hn={};Hn.Position=qe,Hn.TEST_ONLY=rm,Hn.convertFlyoutDefToJsonArray=lc,Hn.convertToolboxDefToJson=ic,Hn.hasCategories=ac,Hn.isCategoryCollapsible=cc,Hn.parseToolboxTree=Qt;var Lo;(function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM"})(Lo||(Lo={}));var Sl;(function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"})(Sl||(Sl={}));var Mo;(function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN"})(Mo||(Mo={}));var Ei={};Ei.bumpDirection=Mo,Ei.bumpPositionRect=uc,Ei.getCornerOppositeToolbox=ta,Ei.getStartPositionRect=sd,Ei.horizontalPosition=Sl,Ei.verticalPosition=Lo;var er={width:96,height:124,url:"sprites.png"},Qg=class{constructor(e){this.workspace=e,this.id="zoomControls",this.boundEvents=[],this.zoomResetGroup=this.zoomOutGroup=this.zoomInGroup=null,this.HEIGHT=this.WIDTH=32,this.SMALL_SPACING=2,this.LARGE_SPACING=11,this.MARGIN_HORIZONTAL=this.MARGIN_VERTICAL=20,this.svgGroup=null,this.top=this.left=0,this.initialized=!1}createDom(){this.svgGroup=ue(Z.G,{});const e=String(Math.random()).substring(2);return this.createZoomOutSvg(e),this.createZoomInSvg(e),this.workspace.isMovable()&&this.createZoomResetSvg(e),this.svgGroup}init(){this.workspace.getComponentManager().addComponent({component:this,weight:Ft.ComponentWeight.ZOOM_CONTROLS_WEIGHT,capabilities:[Ft.Capability.POSITIONABLE]}),this.initialized=!0}dispose(){this.workspace.getComponentManager().removeComponent("zoomControls"),this.svgGroup&&Q(this.svgGroup);for(const e of this.boundEvents)ft(e);this.boundEvents.length=0}getBoundingRectangle(){let e=this.SMALL_SPACING+2*this.HEIGHT;return this.zoomResetGroup&&(e+=this.LARGE_SPACING+this.HEIGHT),new St(this.top,this.top+e,this.left,this.left+this.WIDTH)}position(e,n){if(this.initialized){var i=ta(this.workspace,e),u=this.SMALL_SPACING+2*this.HEIGHT;if(this.zoomResetGroup&&(u+=this.LARGE_SPACING+this.HEIGHT),e=sd(i,new Re(this.WIDTH,u),this.MARGIN_HORIZONTAL,this.MARGIN_VERTICAL,e,this.workspace),i=i.vertical,n=uc(e,this.MARGIN_VERTICAL,i===Lo.TOP?Mo.DOWN:Mo.UP,n),i===Lo.TOP){var m=this.SMALL_SPACING+this.HEIGHT,T;(T=this.zoomInGroup)==null||T.setAttribute("transform","translate(0, "+m+")"),this.zoomResetGroup&&this.zoomResetGroup.setAttribute("transform","translate(0, "+(m+this.LARGE_SPACING+this.HEIGHT)+")")}else{T=this.zoomResetGroup?this.LARGE_SPACING+this.HEIGHT:0;let H;(H=this.zoomInGroup)==null||H.setAttribute("transform","translate(0, "+T+")"),T=T+this.SMALL_SPACING+this.HEIGHT,(m=this.zoomOutGroup)==null||m.setAttribute("transform","translate(0, "+T+")")}this.top=n.top,this.left=n.left;var N;(N=this.svgGroup)==null||N.setAttribute("transform","translate("+this.left+","+this.top+")")}}createZoomOutSvg(e){this.zoomOutGroup=ue(Z.G,{class:"blocklyZoom blocklyZoomOut"},this.svgGroup);const n=ue(Z.CLIPPATH,{id:"blocklyZoomoutClipPath"+e},this.zoomOutGroup);ue(Z.RECT,{width:32,height:32},n),ue(Z.IMAGE,{width:er.width,height:er.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+e+")"},this.zoomOutGroup).setAttributeNS(Sr,"xlink:href",this.workspace.options.pathToMedia+er.url),this.boundEvents.push(je(this.zoomOutGroup,"pointerdown",null,this.zoom.bind(this,-1)))}createZoomInSvg(e){this.zoomInGroup=ue(Z.G,{class:"blocklyZoom blocklyZoomIn"},this.svgGroup);const n=ue(Z.CLIPPATH,{id:"blocklyZoominClipPath"+e},this.zoomInGroup);ue(Z.RECT,{width:32,height:32},n),ue(Z.IMAGE,{width:er.width,height:er.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+e+")"},this.zoomInGroup).setAttributeNS(Sr,"xlink:href",this.workspace.options.pathToMedia+er.url),this.boundEvents.push(je(this.zoomInGroup,"pointerdown",null,this.zoom.bind(this,1)))}zoom(e,n){this.workspace.markFocused(),this.workspace.zoomCenter(e),this.fireZoomEvent(),Mt(),n.stopPropagation(),n.preventDefault()}createZoomResetSvg(e){this.zoomResetGroup=ue(Z.G,{class:"blocklyZoom blocklyZoomReset"},this.svgGroup);const n=ue(Z.CLIPPATH,{id:"blocklyZoomresetClipPath"+e},this.zoomResetGroup);ue(Z.RECT,{width:32,height:32},n),ue(Z.IMAGE,{width:er.width,height:er.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+e+")"},this.zoomResetGroup).setAttributeNS(Sr,"xlink:href",this.workspace.options.pathToMedia+er.url),this.boundEvents.push(je(this.zoomResetGroup,"pointerdown",null,this.resetZoom.bind(this)))}resetZoom(e){this.workspace.markFocused();const n=Math.log(this.workspace.options.zoomOptions.startScale/this.workspace.scale)/Math.log(this.workspace.options.zoomOptions.scaleSpeed);this.workspace.beginCanvasTransition(),this.workspace.zoomCenter(n),this.workspace.scrollCenter(),setTimeout(this.workspace.endCanvasTransition.bind(this.workspace),500),this.fireZoomEvent(),Mt(),e.stopPropagation(),e.preventDefault()}fireZoomEvent(){const e=new(G(oe.CLICK))(null,this.workspace.id,"zoom_controls");W(e)}};Yn(`
.blocklyZoom>image, .blocklyZoom>svg>image {
  opacity: .4;
}

.blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {
  opacity: .6;
}

.blocklyZoom>image:active, .blocklyZoom>svg>image:active {
  opacity: .8;
}
`);var au=100,ph=75,Fr=50,vt=25,Ln={BLOCKS:Fr,PROCEDURES:ph,VARIABLES:au,WORKSPACE_COMMENTS:vt},cn={};cn.register=ii,cn.unregister=Ig;var Mn=class{constructor(){this.priority=vt}save(e){const n=[];for(const i of e.getTopComments())(e=Ki(i,{addCoordinates:!0,saveIds:!0}))&&n.push(e);return n.length?n:null}load(e,n){for(const i of e)li(i,n,{recordUndo:j()})}clear(e){for(const n of e.getTopComments())n.dispose()}};ii("workspaceComments",new Mn);var tr={};tr.WorkspaceCommentSerializer=Mn,tr.append=li,tr.save=Ki;var wi={};wi.register=Or,wi.unregister=Rg;var un=class{paste(e,n,i){e=e.commentState,i&&(e.x=i.x,e.y=i.y),s.disable$$module$build$src$core$events$utils();let u;try{u=li(e,n),Zr(u)}finally{s.enable$$module$build$src$core$events$utils()}return u?(ce()&&W(new(G(oe.COMMENT_CREATE))(u)),s.setSelected$$module$build$src$core$common(u),u):null}};un.TYPE="workspace-comment",Or(un.TYPE,new un);var Cl;Cl=28,s.config$$module$build$src$core$config={dragRadius:5,flyoutDragRadius:10,snapRadius:Cl,connectingSnapRadius:Cl,currentConnectionPreference:8,bumpDelay:250},s.config$$module$build$src$core$config;var Il="aria-",fh="role",Ur;(function(e){e.GRID="grid",e.GRIDCELL="gridcell",e.GROUP="group",e.LISTBOX="listbox",e.MENU="menu",e.MENUITEM="menuitem",e.MENUITEMCHECKBOX="menuitemcheckbox",e.OPTION="option",e.PRESENTATION="presentation",e.ROW="row",e.TREE="tree",e.TREEITEM="treeitem"})(Ur||(Ur={}));var tn;(function(e){e.ACTIVEDESCENDANT="activedescendant",e.COLCOUNT="colcount",e.DISABLED="disabled",e.EXPANDED="expanded",e.INVALID="invalid",e.LABEL="label",e.LABELLEDBY="labelledby",e.LEVEL="level",e.ORIENTATION="orientation",e.POSINSET="posinset",e.ROWCOUNT="rowcount",e.SELECTED="selected",e.SETSIZE="setsize",e.VALUEMAX="valuemax",e.VALUEMIN="valuemin"})(tn||(tn={}));var Pn={};Pn.Role=Ur,Pn.State=tn,Pn.setRole=ai,Pn.setState=xn;var cu=class{constructor(){this.menuItems=[],this.roleName=this.element=this.onKeyDownHandler=this.mouseLeaveHandler=this.mouseEnterHandler=this.clickHandler=this.mouseOverHandler=this.highlightedItem=this.openingCoords=null}addChild(e){this.menuItems.push(e)}render(e){const n=document.createElement("div");n.className="blocklyMenu goog-menu blocklyNonSelectable",n.tabIndex=0,this.roleName&&ai(n,this.roleName),this.element=n;for(let i=0,u;u=this.menuItems[i];i++)n.appendChild(u.createDom());return this.mouseOverHandler=je(n,"pointerover",this,this.handleMouseOver,!0),this.clickHandler=je(n,"pointerup",this,this.handleClick,!0),this.mouseEnterHandler=je(n,"pointerenter",this,this.handleMouseEnter,!0),this.mouseLeaveHandler=je(n,"pointerleave",this,this.handleMouseLeave,!0),this.onKeyDownHandler=je(n,"keydown",this,this.handleKeyEvent),e.appendChild(n),n}getElement(){return this.element}focus(){const e=this.getElement();e&&(e.focus({preventScroll:!0}),Ge(e,"blocklyFocused"))}blur(){const e=this.getElement();e&&(e.blur(),D(e,"blocklyFocused"))}setRole(e){this.roleName=e}dispose(){this.mouseOverHandler&&(ft(this.mouseOverHandler),this.mouseOverHandler=null),this.clickHandler&&(ft(this.clickHandler),this.clickHandler=null),this.mouseEnterHandler&&(ft(this.mouseEnterHandler),this.mouseEnterHandler=null),this.mouseLeaveHandler&&(ft(this.mouseLeaveHandler),this.mouseLeaveHandler=null),this.onKeyDownHandler&&(ft(this.onKeyDownHandler),this.onKeyDownHandler=null);for(let e=0,n;n=this.menuItems[e];e++)n.dispose();this.element=null}getMenuItem(e){const n=this.getElement();for(;e&&e!==n;){if(e.classList.contains("blocklyMenuItem")){for(let i=0,u;u=this.menuItems[i];i++)if(u.getElement()===e)return u}e=e.parentElement}return null}setHighlighted(e){var n=this.highlightedItem;if(n&&(n.setHighlighted(!1),this.highlightedItem=null),e){e.setHighlighted(!0),this.highlightedItem=e,(n=this.getElement())&&xn(n,tn.ACTIVEDESCENDANT,e.getId());let i;(i=e.getElement())==null||i.scrollIntoView({block:"nearest",inline:"start"})}}highlightNext(){const e=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(e,1)}highlightPrevious(){const e=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(0>e?this.menuItems.length:e,-1)}highlightFirst(){this.highlightHelper(-1,1)}highlightLast(){this.highlightHelper(this.menuItems.length,-1)}highlightHelper(e,n){e+=n;let i;for(;i=this.menuItems[e];){if(i.isEnabled()){this.setHighlighted(i);break}e+=n}}handleMouseOver(e){(e=this.getMenuItem(e.target))&&(e.isEnabled()?this.highlightedItem!==e&&this.setHighlighted(e):this.setHighlighted(null))}handleClick(e){const n=this.openingCoords;if(this.openingCoords=null,n&&typeof e.clientX=="number"){const i=new ke(e.clientX,e.clientY);if(1>ke.distance(n,i))return}(e=this.getMenuItem(e.target))&&e.performAction()}handleMouseEnter(e){this.focus()}handleMouseLeave(e){this.getElement()&&(this.blur(),this.setHighlighted(null))}handleKeyEvent(e){if(this.menuItems.length&&!(e.shiftKey||e.ctrlKey||e.metaKey||e.altKey)){var n=this.highlightedItem;switch(e.key){case"Enter":case" ":n&&n.performAction();break;case"ArrowUp":this.highlightPrevious();break;case"ArrowDown":this.highlightNext();break;case"PageUp":case"Home":this.highlightFirst();break;case"PageDown":case"End":this.highlightLast();break;default:return}e.preventDefault(),e.stopPropagation()}}getSize(){const e=this.getElement(),n=ri(e);return n.height=e.scrollHeight,n}},Si=class{constructor(e,n){this.content=e,this.opt_value=n,this.enabled=!0,this.element=null,this.rightToLeft=!1,this.roleName=null,this.highlight=this.checked=this.checkable=!1,this.actionHandler=null}createDom(){const e=document.createElement("div");e.id=S(),this.element=e,e.className="blocklyMenuItem goog-menuitem "+(this.enabled?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft?"blocklyMenuItemRtl goog-menuitem-rtl ":"");const n=document.createElement("div");if(n.className="blocklyMenuItemContent goog-menuitem-content",this.checkable){var i=document.createElement("div");i.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",n.appendChild(i)}return i=this.content,typeof this.content=="string"&&(i=document.createTextNode(this.content)),n.appendChild(i),e.appendChild(n),this.roleName&&ai(e,this.roleName),xn(e,tn.SELECTED,this.checkable&&this.checked||!1),xn(e,tn.DISABLED,!this.enabled),e}dispose(){this.element=null}getElement(){return this.element}getId(){return this.element.id}getValue(){let e;return(e=this.opt_value)!=null?e:null}setRightToLeft(e){this.rightToLeft=e}setRole(e){this.roleName=e}setCheckable(e){this.checkable=e}setChecked(e){this.checked=e}setHighlighted(e){this.highlight=e;const n=this.getElement();n&&this.isEnabled()&&(e?(Ge(n,"blocklyMenuItemHighlight"),Ge(n,"goog-menuitem-highlight")):(D(n,"blocklyMenuItemHighlight"),D(n,"goog-menuitem-highlight")))}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}performAction(){this.isEnabled()&&this.actionHandler&&this.actionHandler(this)}onAction(e,n){this.actionHandler=e.bind(n)}},Vr="_TEMP_COLLAPSED_INPUT",Rl="_TEMP_COLLAPSED_FIELD",Gn="MANUALLY_DISABLED",Ci={COLLAPSED_FIELD_NAME:Rl,COLLAPSED_INPUT_NAME:Vr,MANUALLY_DISABLED:Gn};(function(e){e[e.VALUE=1]="VALUE",e[e.STATEMENT=3]="STATEMENT",e[e.DUMMY=5]="DUMMY",e[e.CUSTOM=6]="CUSTOM",e[e.END_ROW=7]="END_ROW"})(s.inputTypes$$module$build$src$core$inputs$input_types||(s.inputTypes$$module$build$src$core$inputs$input_types={})),s.inputTypes$$module$build$src$core$inputs$input_types;var kl=new Set,lo=new WeakSet,Na=new WeakMap,ao=null,uu=null,du=0,xl={};xl.finishQueuedRenders=ir,xl.queueRender=na,xl.triggerQueuedRenders=es;var nr=function(e,n){window.alert(e),n&&n()},Po=function(e,n){n(window.confirm(e))},ls=function(e,n,i){i(window.prompt(e,n))},fr={confirmInternal:xp},Ii={TEST_ONLY:fr};Ii.alert=dc,Ii.confirm=Et,Ii.prompt=sa,Ii.setAlert=ld,Ii.setConfirm=Op,Ii.setPrompt=Ap;var hu,mh;s.Msg$$module$build$src$core$msg=Object.create(null),hu=function(e){Object.keys(e).forEach(function(n){s.Msg$$module$build$src$core$msg[n]=e[n]})},mh={Msg:s.Msg$$module$build$src$core$msg,setLocale:hu};var pu=class extends vl{constructor(e){super(),this.isBlank=typeof e>"u",e&&(this.varId=e.getId(),this.workspaceId=e.workspace.id)}toJson(){const e=super.toJson();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");return e.varId=this.varId,e}static fromJson(e,n,i){return n=super.fromJson(e,n,i??new pu),n.varId=e.varId,n}},co=class extends pu{constructor(e){super(e),this.type=oe.VAR_CREATE,e&&(this.varType=e.type,this.varName=e.name)}toJson(){const e=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return e.varType=this.varType,e.varName=this.varName,e}static fromJson(e,n,i){return n=super.fromJson(e,n,i??new co),n.varType=e.varType,n.varName=e.varName,n}run(e){const n=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");e?n.createVariable(this.varName,this.varType,this.varId):n.deleteVariableById(this.varId)}};o(Te.EVENT,oe.VAR_CREATE,co);var La=class{constructor(e,n,i,u){this.workspace=e,this.name=n,this.type=i||"",this.id=u||O()}getId(){return this.id}static compareByName(e,n){return e.name.localeCompare(n.name,void 0,{sensitivity:"base"})}},fu="VARIABLE",Do="ijkmnopqrstuvwxyzabcdefgh",gh={generateUniqueNameInternal:Eo},nn={CATEGORY_NAME:fu,TEST_ONLY:gh,VAR_LETTER_OPTIONS:Do};nn.allDeveloperVariables=s.allDeveloperVariables$$module$build$src$core$variables,nn.allUsedVarModels=s.allUsedVarModels$$module$build$src$core$variables,nn.createVariableButtonHandler=js,nn.flyoutCategory=qi,nn.flyoutCategoryBlocks=Hs,nn.generateUniqueName=Gs,nn.generateUniqueNameFromOptions=ui,nn.generateVariableFieldDom=Ws,nn.getAddedVariables=pc,nn.getOrCreateVariablePackage=s.getOrCreateVariablePackage$$module$build$src$core$variables,nn.getVariable=s.getVariable$$module$build$src$core$variables,nn.nameUsedWithAnyType=ad,nn.nameUsedWithConflictingParam=Ji,nn.promptName=ms,nn.renameVariable=s.renameVariable$$module$build$src$core$variables;var Ol=class extends Error{},sm=class extends Ol{constructor(e){super("Expected to find a 'type' property, defining the block type"),this.state=e}},Al=class extends Ol{constructor(e,n,i){super(`The block ${n.toDevString()} is missing a(n) ${e}
connection`),this.block=n,this.state=i}},mu=class extends Ol{constructor(e,n,i,u){super(`The block ${i.toDevString()} could not connect its
${n} to its parent, because: ${e}`),this.childBlock=i,this.childState=u}},Zg=class extends Ol{constructor(e){super(`Encountered a real block which is defined as a child of a shadow
block. It is an invariant of Blockly that shadow blocks only have shadow
children`),this.state=e}},e$=class extends Ol{constructor(e,n,i){super(`Cannot add an icon of type '${e}' to the block ${n.toDevString()}, because there is no icon registered with type '${e}'. Make sure that all of your icons have been registered.`),this.block=n,this.state=i}},Ri={};Ri.BadConnectionCheck=mu,Ri.DeserializationError=Ol,Ri.MissingBlockType=sm,Ri.MissingConnection=Al,Ri.RealChildOfShadow=Zg,Ri.UnregisteredIcon=e$;var om=class{constructor(){this.priority=Fr}save(e){const n=[];for(const i of e.getTopBlocks(!1))(e=Bn(i,{addCoordinates:!0,doFullSerialization:!1}))&&n.push(e);return n.length?{languageVersion:0,blocks:n}:null}load(e,n){e=e.blocks;for(const i of e)zs(i,n,{recordUndo:j()})}clear(e){for(const n of e.getTopBlocks(!1))n.dispose(!1)}};ii("blocks",new om);var ks={};ks.BlockSerializer=om,ks.append=zs,ks.appendInternal=Ar,ks.save=Bn;var vn=class{constructor(e){this.name=e}toString(){return this.name}equals(e){return this.name===e.toString()}};vn.MUTATOR=new vn("mutator"),vn.WARNING=new vn("warning"),vn.COMMENT=new vn("comment");var as=class extends vl{constructor(e){super(),this.isBlank=!e,e&&(this.blockId=e.id,this.workspaceId=e.workspace.id)}toJson(){const e=super.toJson();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return e.blockId=this.blockId,e}static fromJson(e,n,i){return n=super.fromJson(e,n,i??new as),n.blockId=e.blockId,n}},ki=class extends as{constructor(e,n,i,u,m){super(e),this.type=oe.BLOCK_CHANGE,e&&(this.element=n,this.name=i||void 0,this.oldValue=u,this.newValue=m)}toJson(){const e=super.toJson();if(!this.element)throw Error("The changed element is undefined. Either pass an element to the constructor, or call fromJson");return e.element=this.element,e.name=this.name,e.oldValue=this.oldValue,e.newValue=this.newValue,this.disabledReason&&(e.disabledReason=this.disabledReason),e}static fromJson(e,n,i){return n=super.fromJson(e,n,i??new ki),n.element=e.element,n.name=e.name,n.oldValue=e.oldValue,n.newValue=e.newValue,e.disabledReason!==void 0&&(n.disabledReason=e.disabledReason),n}setDisabledReason(e){if(this.element!=="disabled")throw Error('Cannot set the disabled reason for a BlockChange event if the element is not "disabled".');this.disabledReason=e}isNull(){return this.oldValue===this.newValue}run(e){var n=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(n=n.getBlockById(this.blockId),!n)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");const i=n.getIcon(vn.MUTATOR);switch(i&&di(i)&&i.bubbleIsVisible()&&i.setBubbleVisible(!1),e=e?this.newValue:this.oldValue,this.element){case"field":(n=n.getField(this.name))?n.setValue(e):console.warn("Can't set non-existent field: "+this.name);break;case"comment":n.setCommentText(e||null);break;case"collapsed":n.setCollapsed(!!e);break;case"disabled":var u;n.setDisabledReason(!!e,(u=this.disabledReason)!=null?u:Gn);break;case"inline":n.setInputsInline(!!e);break;case"mutation":u=ki.getExtraBlockState_(n),n.loadExtraState?n.loadExtraState(JSON.parse(e||"{}")):n.domToMutation&&n.domToMutation(s.textToDom$$module$build$src$core$utils$xml(e||"<mutation/>")),W(new ki(n,"mutation",null,u,e));break;default:console.warn("Unknown change type: "+this.element)}}static getExtraBlockState_(e){return e.saveExtraState?(e=e.saveExtraState(!0))?JSON.stringify(e):"":e.mutationToDom&&(e=e.mutationToDom())?lr(e):""}};o(Te.EVENT,oe.BLOCK_CHANGE,ki);var Xt={};Xt.clamp=el,Xt.toDegrees=Tc,Xt.toRadians=hi;var $h=16,im=1,t$=12,lm=16,gu=.25,_h=null,Nl=null,jn="",xi="",Tt,Hr,uo,Bo=null,xs=null,vh=null,$u={getBoundsInfo:function(){const e=on(Bo),n=ri(Bo);return{left:e.x,right:e.x+n.width,top:e.y,bottom:e.y+n.height,width:n.width,height:n.height}},getPositionMetrics:function(e,n,i,u){const m=$u.getBoundsInfo(),T=ri(Tt);return n+T.height<m.bottom?Kp(e,n,m,T):u-T.height>m.top?Xp(i,u,m,T):n+T.height<document.documentElement.clientHeight?Kp(e,n,m,T):u-T.height>document.documentElement.clientTop?Xp(i,u,m,T):fd(e,m,T)}},rr={ANIMATION_TIME:gu,ARROW_HORIZONTAL_PADDING:t$,ARROW_SIZE:$h,BORDER_SIZE:im,PADDING_Y:lm,TEST_ONLY:$u};rr.clearContent=hd,rr.createDom=Fp,rr.getContentDiv=la,rr.getOwner=Vp,rr.getPositionX=bc,rr.hide=Ec,rr.hideIfOwner=md,rr.hideWithoutAnimation=Ks,rr.isVisible=Yp,rr.repositionForWindowResize=Jp,rr.setBoundsElement=Up,rr.setColour=Hp,rr.show=zp,rr.showPositionedByBlock=Mg,rr.showPositionedByField=Gp;var Ll=class{constructor(e){this.workspace=e,this.cursorSvg=this.cursor=null,this.markers=new Map,this.markerSvg=null}registerMarker(e,n){this.markers.has(e)&&this.unregisterMarker(e),n.setDrawer(this.workspace.getRenderer().makeMarkerDrawer(this.workspace,n)),this.setMarkerSvg(n.getDrawer().createDom()),this.markers.set(e,n)}unregisterMarker(e){const n=this.markers.get(e);if(n)n.dispose(),this.markers.delete(e);else throw Error("Marker with ID "+e+" does not exist. Can only unregister markers that exist.")}getCursor(){return this.cursor}getMarker(e){return this.markers.get(e)||null}setCursor(e){this.cursor&&this.cursor.getDrawer()&&this.cursor.getDrawer().dispose(),(this.cursor=e)&&(e=this.workspace.getRenderer().makeMarkerDrawer(this.workspace,this.cursor),this.cursor.setDrawer(e),this.setCursorSvg(this.cursor.getDrawer().createDom()))}setCursorSvg(e){e?(this.workspace.getBlockCanvas().appendChild(e),this.cursorSvg=e):this.cursorSvg=null}setMarkerSvg(e){e?this.workspace.getBlockCanvas()&&(this.cursorSvg?this.workspace.getBlockCanvas().insertBefore(e,this.cursorSvg):this.workspace.getBlockCanvas().appendChild(e)):this.markerSvg=null}updateMarkers(){this.workspace.keyboardAccessibilityMode&&this.cursorSvg&&this.workspace.getCursor().draw()}dispose(){const e=Object.keys(this.markers);for(let n=0,i;i=e[n];n++)this.unregisterMarker(i);this.markers.clear(),this.cursor&&(this.cursor.dispose(),this.cursor=null)}};Ll.LOCAL_MARKER="local_marker_1";var Ma={};Ma.commonWordPrefix=Qp,Ma.commonWordSuffix=Zp,Ma.isNumber=s.isNumber$$module$build$src$core$utils$string,Ma.shortestStringLength=wc,Ma.wrap=s.wrap$$module$build$src$core$utils$string;var _u=void 0,Pa=!1,Fo=!1,vu=50,am=0,Uo=0,cm=0,yh=0,Cr=null,Oi=null,yu=0,Da=10,um=10,n$=750,Ml=5,yn=null,Wn={HOVER_MS:n$,LIMIT:vu,MARGINS:Ml,OFFSET_X:yu,OFFSET_Y:Da,RADIUS_OK:um};Wn.bindMouseEvents=ca,Wn.block=ua,Wn.createDom=sf,Wn.dispose=sl,Wn.getCustomTooltip=tf,Wn.getDiv=rf,Wn.getTooltipOfObject=nl,Wn.hide=wo,Wn.isVisible=nf,Wn.setCustomTooltip=ef,Wn.unbindMouseEvents=gd,Wn.unblock=af;var dm=.45,Ba=.65,l={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},c={};c.blend=gs,c.getHsvSaturation=vd,c.getHsvValue=hf,c.hexToRgb=yd,c.hsvToHex=Tr,c.hueToHex=Td,c.names=l,c.parse=ol,c.rgbToHex=Sc,c.setHsvSaturation=df,c.setHsvValue=Bg;var p={};p.checkMessageReferences=Ed,p.parseBlockColour=da,p.replaceMessageReferences=Zt,p.tokenizeInterpolation=bd;var _=class{constructor(e,n,i){this.DEFAULT_VALUE=null,this.name=void 0,this.constants_=this.mouseDownWrapper=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg=this.cursorSvg=this.tooltip=this.validator_=null,this.disposed=!1,this.maxDisplayLength=50,this.sourceBlock_=null,this.enabled_=this.visible_=this.isDirty_=!0,this.suffixField=this.prefixField=this.clickTarget_=null,this.EDITABLE=!0,this.SERIALIZABLE=!1,this.CURSOR="",this.value_="DEFAULT_VALUE"in new.target.prototype?new.target.prototype.DEFAULT_VALUE:this.DEFAULT_VALUE,this.size_=new Re(0,0),e!==_.SKIP_SETUP&&(i&&this.configure_(i),this.setValue(e),n&&this.setValidator(n))}configure_(e){e.tooltip&&this.setTooltip(Zt(e.tooltip))}setSourceBlock(e){if(this.sourceBlock_)throw Error("Field already bound to a block");this.sourceBlock_=e}getConstants(){return!this.constants_&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_}getSourceBlock(){return this.sourceBlock_}init(){this.fieldGroup_||(this.fieldGroup_=ue(Z.G,{}),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip),this.bindEvents_(),this.initModel(),this.applyColour())}initView(){this.createBorderRect_(),this.createTextElement_()}initModel(){}isFullBlockField(){return!this.borderRect_}createBorderRect_(){this.borderRect_=ue(Z.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)}createTextElement_(){this.textElement_=ue(Z.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)}bindEvents_(){const e=this.getClickTarget_();if(!e)throw Error("A click target has not been set.");ca(e),this.mouseDownWrapper=je(e,"pointerdown",this,this.onMouseDown_)}fromXml(e){this.setValue(e.textContent)}toXml(e){return e.textContent=this.getValue(),e}saveState(e){return e=this.saveLegacyState(_),e!==null?e:this.getValue()}loadState(e){this.loadLegacyState(_,e)||this.setValue(e)}saveLegacyState(e){return e.prototype.saveState===this.saveState&&e.prototype.toXml!==this.toXml?(e=s.createElement$$module$build$src$core$utils$xml("field"),e.setAttribute("name",this.name||""),ea(this.toXml(e)).replace(' xmlns="https://developers.google.com/blockly/xml"',"")):null}loadLegacyState(e,n){return e.prototype.loadState===this.loadState&&e.prototype.fromXml!==this.fromXml?(this.fromXml(s.textToDom$$module$build$src$core$utils$xml(n)),!0):!1}dispose(){md(this),Xs(this);let e;(e=this.getSourceBlock())!=null&&e.isDeadOrDying()||Q(this.fieldGroup_),this.disposed=!0}updateEditable(){const e=this.fieldGroup_,n=this.getSourceBlock();this.EDITABLE&&e&&n&&(this.enabled_&&n.isEditable()?(Ge(e,"blocklyEditableText"),D(e,"blocklyNonEditableText"),e.style.cursor=this.CURSOR):(Ge(e,"blocklyNonEditableText"),D(e,"blocklyEditableText"),e.style.cursor=""))}setEnabled(e){this.enabled_=e,this.updateEditable()}isEnabled(){return this.enabled_}isClickable(){return this.enabled_&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&this.showEditor_!==_.prototype.showEditor_}isClickableInFlyout(e){return!e}isCurrentlyEditable(){return this.enabled_&&this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()}isSerializable(){let e=!1;return this.name&&(this.SERIALIZABLE?e=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),e=!0)),e}isVisible(){return this.visible_}setVisible(e){if(this.visible_!==e){this.visible_=e;var n=this.fieldGroup_;n&&(n.style.display=e?"block":"none")}}setValidator(e){this.validator_=e}getValidator(){return this.validator_}getSvgRoot(){return this.fieldGroup_}getBorderRect(){if(!this.borderRect_)throw Error(`The border rectangle is ${this.borderRect_}.`);return this.borderRect_}getTextElement(){if(!this.textElement_)throw Error(`The text element is ${this.textElement_}.`);return this.textElement_}getTextContent(){if(!this.textContent_)throw Error(`The text content is ${this.textContent_}.`);return this.textContent_}applyColour(){}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()}showEditor(e){this.isClickable()&&this.showEditor_(e)}showEditor_(e){}repositionForWindowResize(){return!1}updateSize_(e){const n=this.getConstants();e=e!==void 0?e:this.isFullBlockField()?0:this.getConstants().FIELD_BORDER_RECT_X_PADDING;let i=2*e,u=n.FIELD_TEXT_HEIGHT,m=0;this.textElement_&&(m=Jr(this.textElement_,n.FIELD_TEXT_FONTSIZE,n.FIELD_TEXT_FONTWEIGHT,n.FIELD_TEXT_FONTFAMILY),i+=m),this.isFullBlockField()||(u=Math.max(u,n.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=u,this.size_.width=i,this.positionTextElement_(e,m),this.positionBorderRect_()}positionTextElement_(e,n){if(this.textElement_){var i=this.getConstants(),u=this.size_.height/2,m;this.textElement_.setAttribute("x",String((m=this.getSourceBlock())!=null&&m.RTL?this.size_.width-n-e:e)),this.textElement_.setAttribute("y",String(i.FIELD_TEXT_BASELINE_CENTER?u:u-i.FIELD_TEXT_HEIGHT/2+i.FIELD_TEXT_BASELINE))}}positionBorderRect_(){this.borderRect_&&(this.borderRect_.setAttribute("width",String(this.size_.width)),this.borderRect_.setAttribute("height",String(this.size_.height)),this.borderRect_.setAttribute("rx",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)),this.borderRect_.setAttribute("ry",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)))}getSize(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&this.size_.width===0&&(this.render_(),this.size_.width!==0&&console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead.")),this.size_):new Re(0,0)}getScaledBBox(){let e;var n=this.getSourceBlock();if(!n)throw new b;if(this.isFullBlockField()){var i=this.sourceBlock_.getHeightWidth();const u=n.workspace.scale;e=this.getAbsoluteXY_(),n=(i.width+1)*u,i=(i.height+1)*u,qf?(e.x+=1.5*u,e.y+=1.5*u):(e.x-=.5*u,e.y-=.5*u)}else i=this.borderRect_.getBoundingClientRect(),e=on(this.borderRect_),n=i.width,i=i.height;return new St(e.y,e.y+i,e.x,e.x+n)}onLocationChange(e){}getDisplayText_(){let e=this.getText();return e?(e.length>this.maxDisplayLength&&(e=e.substring(0,this.maxDisplayLength-2)+""),e=e.replace(/\s/g,_.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(e+=""),e):_.NBSP}getText(){const e=this.getText_();return String(e!==null?e:this.getValue())}getText_(){return null}markDirty(){this.isDirty_=!0,this.constants_=null}forceRerender(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&this.sourceBlock_.queueRender()}setValue(e,n=!0){if(e!==null){var i=s.getGroup$$module$build$src$core$events$utils();i||s.setGroup$$module$build$src$core$events$utils(!0);try{const ge=this.doClassValidation_(e),Fe=this.processValidation(e,ge,n);if(!(Fe instanceof Error)){var u,m=(u=this.getValidator())==null?void 0:u.call(this,Fe),T=this.processValidation(Fe,m,n);if(!(T instanceof Error)){var N=this.sourceBlock_;if(!N||!N.disposed){var H=this.getValue();H===T?this.doValueUpdate_(T):(this.doValueUpdate_(T),n&&N&&ce()&&W(new(G(oe.BLOCK_CHANGE))(N,"field",this.name||null,H,T)),this.isDirty_&&this.forceRerender())}}}}finally{s.setGroup$$module$build$src$core$events$utils(i)}}}processValidation(e,n,i){return n===null?(this.doValueInvalid_(e,i),this.isDirty_&&this.forceRerender(),Error()):n===void 0?e:n}getValue(){return this.value_}doClassValidation_(e){return e??null}doValueUpdate_(e){this.value_=e,this.isDirty_=!0}doValueInvalid_(e,n){}onMouseDown_(e){this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&(e=this.sourceBlock_.workspace.getGesture(e))&&e.setStartField(this)}setTooltip(e){e||e===""||(e=this.sourceBlock_);const n=this.getClickTarget_();n?n.tooltip=e:this.tooltip=e}getTooltip(){const e=this.getClickTarget_();return nl(e||{tooltip:this.tooltip})}getClickTarget_(){return this.clickTarget_||this.getSvgRoot()}getAbsoluteXY_(){return on(this.getClickTarget_())}referencesVariables(){return!1}refreshVariableName(){}getParentInput(){let e=null;const n=this.getSourceBlock();if(!n)throw new b;const i=n.inputList;for(let u=0;u<n.inputList.length;u++){const m=i[u],T=m.fieldRow;for(let N=0;N<T.length;N++)if(T[N]===this){e=m;break}}return e}getFlipRtl(){return!1}isTabNavigable(){return!1}onShortcut(e){return!1}setCursorSvg(e){if(e){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(e),this.cursorSvg=e}else this.cursorSvg=null}setMarkerSvg(e){if(e){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(e),this.markerSvg=e}else this.markerSvg=null}updateMarkers_(){var e=this.getSourceBlock();if(!e)throw new b;e=e.workspace,e.keyboardAccessibilityMode&&this.cursorSvg&&e.getCursor().draw(),e.keyboardAccessibilityMode&&this.markerSvg&&e.getMarker(Ll.LOCAL_MARKER).draw()}static fromJson(e){throw Error("Attempted to instantiate a field from the registry that hasn't defined a 'fromJson' method.")}};_.NBSP="",_.SKIP_SETUP=Symbol("SKIP_SETUP");var b=class extends Error{constructor(){super("The field has not yet been attached to its input. Call appendField to attach it.")}},C=null,L=null,U=null,K="blocklyWidgetDiv",le="",Ce="",Ie,be={};be.createDom=Ic,be.getDiv=il,be.hide=mi,be.hideIfOwner=Xs,be.hideIfOwnerIsInWorkspace=Ys,be.isVisible=wd,be.positionWithAnchor=Sd,be.repositionForWindowResize=Cd,be.show=fi,be.testOnly_setDiv=ll;var Ue=null,We={},ze=null,Ut={};Ut.callbackFactory=s.callbackFactory$$module$build$src$core$contextmenu,Ut.dispose=al,Ut.getCurrentBlock=mf,Ut.hide=xc,Ut.setCurrentBlock=Id,Ut.show=ha;var X=class{constructor(){this.registeredItems=new Map,this.reset()}reset(){this.registeredItems.clear()}register(e){if(this.registeredItems.has(e.id))throw Error('Menu item with ID "'+e.id+'" is already registered.');this.registeredItems.set(e.id,e)}unregister(e){if(!this.registeredItems.has(e))throw Error('Menu item with ID "'+e+'" not found.');this.registeredItems.delete(e)}getItem(e){let n;return(n=this.registeredItems.get(e))!=null?n:null}getContextMenuOptions(e,n){const i=[];for(const m of this.registeredItems.values())if(e===m.scopeType){var u=m.preconditionFn(n);u!=="hidden"&&(u={text:typeof m.displayText=="function"?m.displayText(n):m.displayText,enabled:u==="enabled",callback:m.callback,scope:n,weight:m.weight},i.push(u))}return i.sort(function(m,T){return m.weight-T.weight}),i}};(function(e){var n=e.ScopeType||(e.ScopeType={});n.BLOCK="block",n.WORKSPACE="workspace",n.COMMENT="comment",e.registry=new e})(X||(X={})),X.ScopeType;var J=50,re=100,Ae={BLOCK:J,BUBBLE:re},Xe=class{constructor(e){this.comment=e,this.startLoc=null,this.inGroup=!1,this.workspace=e.workspace}isMovable(){return this.comment.isOwnMovable()&&!this.comment.isDeadOrDying()&&!this.workspace.options.readOnly}startDrag(){(this.inGroup=!!s.getGroup$$module$build$src$core$events$utils())||s.setGroup$$module$build$src$core$events$utils(!0),this.fireDragStartEvent(),this.startLoc=this.comment.getRelativeToSurfaceXY(),this.workspace.setResizesEnabled(!1);let e;(e=this.workspace.getLayerManager())==null||e.moveToDragLayer(this.comment),this.comment.setDragging(!0)}drag(e){this.comment.moveDuringDrag(e)}endDrag(){this.fireDragEndEvent(),this.fireMoveEvent();let e;(e=this.workspace.getLayerManager())==null||e.moveOffDragLayer(this.comment,J),this.comment.setDragging(!1),this.comment.snapToGrid(),this.workspace.setResizesEnabled(!0),this.inGroup||s.setGroup$$module$build$src$core$events$utils(!1)}fireDragStartEvent(){const e=new(G(oe.COMMENT_DRAG))(this.comment,!0);W(e)}fireDragEndEvent(){const e=new(G(oe.COMMENT_DRAG))(this.comment,!1);W(e)}fireMoveEvent(){if(!this.comment.isDeadOrDying()){var e=new(G(oe.COMMENT_MOVE))(this.comment);e.setReason(["drag"]),e.oldCoordinate_=this.startLoc,e.recordNew(),W(e)}}revertDrag(){this.startLoc&&this.comment.moveDuringDrag(this.startLoc)}},Je=new WeakMap,Qe=class{constructor(e){this.workspace=e,this.size=new Re(120,100),this.collapsed=!1,this.editable=!0,this.location=new ke(0,0),this.text="",this.textChangeListeners=[],this.sizeChangeListeners=[],this.disposeListeners=[],this.collapseChangeListeners=[],this.resizePointerMoveListener=this.resizePointerUpListener=null,this.disposed=this.disposing=!1,this.svgRoot=ue(Z.G,{class:"blocklyComment blocklyEditable blocklyDraggable"}),this.highlightRect=this.createHighlightRect(this.svgRoot),{topBarGroup:this.topBarGroup,topBarBackground:this.topBarBackground,deleteIcon:this.deleteIcon,foldoutIcon:this.foldoutIcon,textPreview:this.textPreview,textPreviewNode:this.textPreviewNode}=this.createTopBar(this.svgRoot,e),{foreignObject:this.foreignObject,textArea:this.textArea}=this.createTextArea(this.svgRoot),this.resizeHandle=this.createResizeHandle(this.svgRoot,e);let n;(n=e.getLayerManager())==null||n.append(this,J),this.setSizeWithoutFiringEvents(this.size),this.moveTo(new ke(0,0))}createHighlightRect(e){return ue(Z.RECT,{class:"blocklyCommentHighlight"},e)}createTopBar(e,n){e=ue(Z.G,{class:"blocklyCommentTopbar"},e);const i=ue(Z.RECT,{class:"blocklyCommentTopbarBackground"},e),u=ue(Z.IMAGE,{class:"blocklyDeleteIcon",href:`${n.options.pathToMedia}delete-icon.svg`},e);n=ue(Z.IMAGE,{class:"blocklyFoldoutIcon",href:`${n.options.pathToMedia}foldout-icon.svg`},e);const m=ue(Z.TEXT,{class:"blocklyCommentPreview blocklyCommentText blocklyText"},e),T=document.createTextNode("");return m.appendChild(T),je(n,"pointerdown",this,this.onFoldoutDown),je(u,"pointerdown",this,this.onDeleteDown),{topBarGroup:e,topBarBackground:i,deleteIcon:u,foldoutIcon:n,textPreview:m,textPreviewNode:T}}createTextArea(e){e=ue(Z.FOREIGNOBJECT,{class:"blocklyCommentForeignObject"},e);const n=document.createElementNS(Is,"body");n.setAttribute("xmlns",Is),n.className="blocklyMinimalBody";const i=document.createElementNS(Is,"textarea");return Ge(i,"blocklyCommentText"),Ge(i,"blocklyTextarea"),Ge(i,"blocklyText"),n.appendChild(i),e.appendChild(n),je(i,"change",this,this.onTextChange),{foreignObject:e,textArea:i}}createResizeHandle(e,n){return e=ue(Z.IMAGE,{class:"blocklyResizeHandle",href:`${n.options.pathToMedia}resize-handle.svg`},e),je(e,"pointerdown",this,this.onResizePointerDown),e}getSvgRoot(){return this.svgRoot}getSize(){return this.collapsed?this.topBarBackground.getBBox():this.size}setSizeWithoutFiringEvents(e){const n=this.topBarBackground.getBBox(),i=this.deleteIcon.getBBox(),u=this.foldoutIcon.getBBox(),m=this.textPreview.getBBox(),T=this.resizeHandle.getBBox();this.size=e=Re.max(e,this.calcMinSize(n,u,i)),this.svgRoot.setAttribute("height",`${e.height}`),this.svgRoot.setAttribute("width",`${e.width}`),this.updateHighlightRect(e),this.updateTopBarSize(e),this.updateTextAreaSize(e,n),this.updateDeleteIconPosition(e,n,i),this.updateFoldoutIconPosition(n,u),this.updateTextPreviewSize(e,n,m,i,T),this.updateResizeHandlePosition(e,T)}setSize(e){const n=this.preResizeSize||this.size;this.setSizeWithoutFiringEvents(e),this.onSizeChange(n,this.size)}calcMinSize(e,n,i){var u;this.updateTextPreview((u=this.textArea.value)!=null?u:""),u=ni(this.textPreview);const m=this.calcFoldoutMargin(e,n),T=this.calcDeleteMargin(e,i);let N=u;return this.foldoutIcon.checkVisibility()?N+=n.width+2*m:u&&(N+=4),this.deleteIcon.checkVisibility()?N+=i.width+2*T:u&&(N+=4),new Re(N,e.height+20)}calcDeleteMargin(e,n){return(e.height-n.height)/2}calcFoldoutMargin(e,n){return(e.height-n.height)/2}updateHighlightRect(e){this.highlightRect.setAttribute("height",`${e.height}`),this.highlightRect.setAttribute("width",`${e.width}`),this.workspace.RTL&&this.highlightRect.setAttribute("x",`${-e.width}`)}updateTopBarSize(e){this.topBarBackground.setAttribute("width",`${e.width}`)}updateTextAreaSize(e,n){this.foreignObject.setAttribute("height",`${e.height-n.height}`),this.foreignObject.setAttribute("width",`${e.width}`),this.foreignObject.setAttribute("y",`${n.height}`),this.workspace.RTL&&this.foreignObject.setAttribute("x",`${-e.width}`)}updateDeleteIconPosition(e,n,i){n=this.calcDeleteMargin(n,i),this.deleteIcon.setAttribute("y",`${n}`),this.deleteIcon.setAttribute("x",`${e.width-i.width-n}`)}updateFoldoutIconPosition(e,n){e=this.calcFoldoutMargin(e,n),this.foldoutIcon.setAttribute("y",`${e}`),this.foldoutIcon.setAttribute("x",`${e}`)}updateTextPreviewSize(e,n,i,u,m){const T=(n.height-i.height)/2,N=this.calcDeleteMargin(n,u);n=this.calcFoldoutMargin(n,m),e=e.width-m.width-2*n-u.width-2*N,this.textPreview.setAttribute("x",`${m.width+2*n*(this.workspace.RTL?-1:1)}`),this.textPreview.setAttribute("y",`${T+i.height/2}`),this.textPreview.setAttribute("width",`${e}`)}updateResizeHandlePosition(e,n){this.resizeHandle.setAttribute("y",`${e.height-n.height}`),this.resizeHandle.setAttribute("x",`${e.width-n.width}`)}onSizeChange(e,n){for(let i=this.sizeChangeListeners.length-1;0<=i;i--)this.sizeChangeListeners[i](e,n)}addSizeChangeListener(e){this.sizeChangeListeners.push(e)}removeSizeChangeListener(e){this.sizeChangeListeners.splice(this.sizeChangeListeners.indexOf(e),1)}onResizePointerDown(e){this.isEditable()&&(this.bringToFront(),or(e)||(this.preResizeSize=this.getSize(),Oc(this.workspace,e,new ke(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=je(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=je(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),e.stopPropagation())}onResizePointerUp(e){Mt(),this.resizePointerUpListener&&(ft(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(ft(this.resizePointerMoveListener),this.resizePointerMoveListener=null),this.setSize(this.size),this.preResizeSize=void 0}onResizePointerMove(e){e=Ac(this.workspace,e),this.setSizeWithoutFiringEvents(new Re(this.workspace.RTL?-e.x:e.x,e.y))}isCollapsed(){return this.collapsed}setCollapsed(e){(this.collapsed=e)?Ge(this.svgRoot,"blocklyCollapsed"):D(this.svgRoot,"blocklyCollapsed"),this.setSizeWithoutFiringEvents(this.size),this.onCollapse()}onCollapse(){for(let e=this.collapseChangeListeners.length-1;0<=e;e--)this.collapseChangeListeners[e](this.collapsed)}addOnCollapseListener(e){this.collapseChangeListeners.push(e)}removeOnCollapseListener(e){this.collapseChangeListeners.splice(this.collapseChangeListeners.indexOf(e),1)}onFoldoutDown(e){Mt(),this.bringToFront(),or(e)||(this.setCollapsed(!this.collapsed),this.workspace.hideChaff()),e.stopPropagation()}isEditable(){return this.editable}setEditable(e){(this.editable=e)?(Ge(this.svgRoot,"blocklyEditable"),D(this.svgRoot,"blocklyReadonly"),this.textArea.removeAttribute("readonly")):(D(this.svgRoot,"blocklyEditable"),Ge(this.svgRoot,"blocklyReadonly"),this.textArea.setAttribute("readonly","true"))}getRelativeToSurfaceXY(){return this.location}moveTo(e){this.location=e,this.svgRoot.setAttribute("transform",`translate(${e.x}, ${e.y})`)}getText(){return this.text}setText(e){this.textArea.value=e,this.onTextChange()}addTextChangeListener(e){this.textChangeListeners.push(e)}removeTextChangeListener(e){this.textChangeListeners.splice(this.textChangeListeners.indexOf(e),1)}onTextChange(){const e=this.text;this.text=this.textArea.value,this.updateTextPreview(this.text),this.setSize(this.size);for(let n=this.textChangeListeners.length-1;0<=n;n--)this.textChangeListeners[n](e,this.text)}updateTextPreview(e){this.textPreviewNode.textContent=this.truncateText(e)}truncateText(e){return 12<=e.length?`${e.substring(0,9)}...`:e}bringToFront(){const e=this.svgRoot.parentNode,n=e.childNodes;n[n.length-1]!==this.svgRoot&&e.appendChild(this.svgRoot)}onDeleteDown(e){Mt(),or(e)||this.dispose(),e.stopPropagation()}dispose(){this.disposing=!0,Q(this.svgRoot);for(let e=this.disposeListeners.length-1;0<=e;e--)this.disposeListeners[e]();this.disposed=!0}isDisposed(){return this.disposed}isDeadOrDying(){return this.disposing||this.disposed}addDisposeListener(e){this.disposeListeners.push(e)}removeDisposeListener(e){this.disposeListeners.splice(this.disposeListeners.indexOf(e),1)}};Yn(`
.injectionDiv {
  --commentFillColour: #FFFCC7;
  --commentBorderColour: #F2E49B;
}

.blocklyComment .blocklyTextarea {
  background-color: var(--commentFillColour);
  border: 1px solid var(--commentBorderColour);
  box-sizing: border-box;
  display: block;
  outline: 0;
  padding: 5px;
  resize: none;
  width: 100%;
  height: 100%;
}

.blocklyReadonly.blocklyComment .blocklyTextarea {
  cursor: inherit;
}

.blocklyDeleteIcon {
  width: 20px;
  height: 20px;
  display: none;
  cursor: pointer;
}

.blocklyFoldoutIcon {
  width: 20px;
  height: 20px;
  transform-origin: 12px 12px;
  cursor: pointer;
}
.blocklyResizeHandle {
  width: 12px;
  height: 12px;
  cursor: se-resize;
}
.blocklyReadonly.blocklyComment .blocklyResizeHandle {
  cursor: inherit;
}

.blocklyCommentTopbarBackground {
  fill: var(--commentBorderColour);
  height: 24px;
}

.blocklyComment .blocklyCommentPreview.blocklyText {
  fill: #000;
  dominant-baseline: middle;
  visibility: hidden;
}

.blocklyCollapsed.blocklyComment .blocklyCommentPreview {
  visibility: visible;
}

.blocklyCollapsed.blocklyComment .blocklyCommentForeignObject,
.blocklyCollapsed.blocklyComment .blocklyResizeHandle {
  display: none;
}

.blocklyCollapsed.blocklyComment .blocklyFoldoutIcon {
  transform: rotate(-90deg);
}

.blocklyRTL .blocklyCommentTopbar {
  transform: scale(-1, 1);
}

.blocklyRTL .blocklyCommentForeignObject {
  direction: rtl;
}

.blocklyRTL .blocklyCommentPreview {
  /* Revert the scale and control RTL using direction instead. */
  transform: scale(-1, 1);
  direction: rtl;
}

.blocklyRTL .blocklyResizeHandle {
  transform: scale(-1, 1);
  cursor: sw-resize;
}

.blocklyCommentHighlight {
  fill: none;
}

.blocklySelected .blocklyCommentHighlight {
  stroke: #fc3;
  stroke-width: 3px;
}

.blocklyCollapsed.blocklySelected .blocklyCommentHighlight {
  stroke: none;
}

.blocklyCollapsed.blocklySelected .blocklyCommentTopbarBackground {
  stroke: #fc3;
  stroke-width: 3px;
}
`);var et=class{constructor(e,n){this.workspace=e,this.text="",this.size=new Re(120,100),this.collapsed=!1,this.deletable=this.movable=this.editable=!0,this.location=new ke(0,0),this.disposing=this.disposed=!1,this.id=n&&!e.getCommentById(n)?n:O(),e.addTopComment(this),this.fireCreateEvent()}fireCreateEvent(){ce()&&W(new(G(oe.COMMENT_CREATE))(this))}fireDeleteEvent(){ce()&&W(new(G(oe.COMMENT_DELETE))(this))}fireChangeEvent(e,n){ce()&&W(new(G(oe.COMMENT_CHANGE))(this,e,n))}fireCollapseEvent(e){ce()&&W(new(G(oe.COMMENT_COLLAPSE))(this,e))}setText(e){const n=this.text;this.text=e,this.fireChangeEvent(n,e)}getText(){return this.text}setSize(e){const n=new(G(oe.COMMENT_RESIZE))(this);this.size=e,n.recordCurrentSizeAsNewSize(),W(n)}getSize(){return this.size}setCollapsed(e){this.collapsed=e,this.fireCollapseEvent(e)}isCollapsed(){return this.collapsed}setEditable(e){this.editable=e}isEditable(){return this.isOwnEditable()&&!this.workspace.options.readOnly}isOwnEditable(){return this.editable}setMovable(e){this.movable=e}isMovable(){return this.isOwnMovable()&&!this.workspace.options.readOnly}isOwnMovable(){return this.movable}setDeletable(e){this.deletable=e}isDeletable(){return this.isOwnDeletable()&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnDeletable(){return this.deletable}moveTo(e,n){const i=new(G(oe.COMMENT_MOVE))(this);n&&i.setReason(n),this.location=e,i.recordNew(),W(i)}getRelativeToSurfaceXY(){return this.location}dispose(){this.disposing=!0,this.fireDeleteEvent(),this.workspace.removeTopComment(this),this.disposed=!0}isDisposed(){return this.disposed}isDeadOrDying(){return this.disposing||this.disposed}},fn=class extends et{constructor(e,n){super(e,n),this.dragStrategy=new Xe(this),this.workspace=e,this.view=new Qe(e),this.view.setSize(this.getSize()),this.view.setEditable(this.isEditable()),this.view.getSvgRoot().setAttribute("data-id",this.id),this.addModelUpdateBindings(),je(this.view.getSvgRoot(),"pointerdown",this,this.startGesture),je(this.view.getSvgRoot(),"wheel",this,i=>{i.stopPropagation()})}addModelUpdateBindings(){this.view.addTextChangeListener((e,n)=>{super.setText(n)}),this.view.addSizeChangeListener((e,n)=>{super.setSize(n)}),this.view.addOnCollapseListener(()=>{super.setCollapsed(this.view.isCollapsed())}),this.view.addDisposeListener(()=>{this.isDeadOrDying()||this.dispose()})}setText(e){this.view.setText(e)}setSize(e){this.view.setSize(e)}setCollapsed(e){this.view.setCollapsed(e)}setEditable(e){super.setEditable(e),this.view.setEditable(this.isEditable())}getSvgRoot(){return this.view.getSvgRoot()}getSize(){return super.getSize()}getBoundingRectangle(){const e=this.getRelativeToSurfaceXY();var n,i;const u=(i=(n=this.view)==null?void 0:n.getSize())!=null?i:this.getSize();return this.workspace.RTL?(n=e.x-u.width,i=e.x):(n=e.x,i=e.x+u.width),new St(e.y,e.y+u.height,n,i)}moveBy(e,n,i){const u=this.getRelativeToSurfaceXY();e=new ke(u.x+e,u.y+n),this.moveTo(e,i)}moveTo(e,n){super.moveTo(e,n),this.view.moveTo(e)}moveDuringDrag(e){this.location=e,this.view.moveTo(e)}setDragging(e){e?Ge(this.getSvgRoot(),"blocklyDragging"):D(this.getSvgRoot(),"blocklyDragging")}dispose(){this.disposing=!0,this.view.isDeadOrDying()||this.view.dispose(),super.dispose()}startGesture(e){const n=this.workspace.getGesture(e);if(n){n.handleCommentStart(e,this);let i;(i=this.workspace.getLayerManager())==null||i.append(this,J),s.setSelected$$module$build$src$core$common(this)}}setDeleteStyle(e){e?Ge(this.getSvgRoot(),"blocklyDraggingDelete"):D(this.getSvgRoot(),"blocklyDraggingDelete")}isMovable(){return this.dragStrategy.isMovable()}startDrag(){this.dragStrategy.startDrag()}drag(e){this.dragStrategy.drag(e)}endDrag(){this.dragStrategy.endDrag()}revertDrag(){this.dragStrategy.revertDrag()}select(){Ge(this.getSvgRoot(),"blocklySelected")}unselect(){D(this.getSvgRoot(),"blocklySelected")}toCopyData(){return{paster:un.TYPE,commentState:Ki(this,{addCoordinates:!0})}}showContextMenu(e){const n=X.registry.getContextMenuOptions(X.ScopeType.COMMENT,{comment:this});ha(e,n,this.workspace.RTL,this.workspace)}snapToGrid(){if(!this.isDeadOrDying()){var e=this.workspace.getGrid();if(e!=null&&e.shouldSnap()){var n=this.getRelativeToSurfaceXY();e=e.alignXY(n),e!==n&&this.moveTo(e,["snap"])}}}},lt={};lt.appendDomToWorkspace=yf,lt.blockToDom=ts,lt.blockToDomWithXY=Co,lt.clearWorkspaceAndLoadFromXml=Ug,lt.deleteNext=Tf,lt.domToBlock=s.domToBlock$$module$build$src$core$xml,lt.domToBlockInternal=qs,lt.domToPrettyText=_f,lt.domToText=lr,lt.domToVariables=ma,lt.domToWorkspace=s.domToWorkspace$$module$build$src$core$xml,lt.loadWorkspaceComment=vf,lt.saveWorkspaceComment=cl,lt.variablesToDom=pa,lt.workspaceToDom=Vt;var ho=class extends as{constructor(e){super(e),this.type=oe.BLOCK_CREATE,e&&(e.isShadow()&&(this.recordUndo=!1),this.xml=Co(e),this.ids=ie(e),this.json=Bn(e,{addCoordinates:!0}))}toJson(){const e=super.toJson();if(!this.xml)throw Error("The block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=lr(this.xml),e.ids=this.ids,e.json=this.json,this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,n,i){return n=super.fromJson(e,n,i??new ho),n.xml=s.textToDom$$module$build$src$core$utils$xml(e.xml),n.ids=e.ids,n.json=e.json,e.recordUndo!==void 0&&(n.recordUndo=e.recordUndo),n}run(e){const n=this.getEventWorkspace_();if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!bv(n,this.ids))if(e)zs(this.json,n);else for(e=0;e<this.ids.length;e++){const i=this.ids[e],u=n.getBlockById(i);u?u.dispose(!1):i===this.blockId&&console.warn("Can't uncreate non-existent block: "+i)}}},bv=function(e,n){return n.map(i=>e.getBlockById(i)).filter(i=>i&&i.isShadow()).length===n.length};o(Te.EVENT,oe.BLOCK_CREATE,ho);var Ev=class extends is{constructor(e,n){super(n),this.type=oe.THEME_CHANGE,this.themeName=e}toJson(){const e=super.toJson();if(!this.themeName)throw Error("The theme name is undefined. Either pass a theme name to the constructor, or call fromJson");return e.themeName=this.themeName,e}static fromJson(e,n,i){return n=super.fromJson(e,n,i??new Ev),n.themeName=e.themeName,n}};o(Te.EVENT,oe.THEME_CHANGE,Ev);var wv=class extends is{constructor(e,n,i,u,m){super(u),this.type=oe.VIEWPORT_CHANGE,this.viewTop=e,this.viewLeft=n,this.scale=i,this.oldScale=m}toJson(){const e=super.toJson();if(this.viewTop===void 0)throw Error("The view top is undefined. Either pass a value to the constructor, or call fromJson");if(this.viewLeft===void 0)throw Error("The view left is undefined. Either pass a value to the constructor, or call fromJson");if(this.scale===void 0)throw Error("The scale is undefined. Either pass a value to the constructor, or call fromJson");if(this.oldScale===void 0)throw Error("The old scale is undefined. Either pass a value to the constructor, or call fromJson");return e.viewTop=this.viewTop,e.viewLeft=this.viewLeft,e.scale=this.scale,e.oldScale=this.oldScale,e}static fromJson(e,n,i){return n=super.fromJson(e,n,i??new wv),n.viewTop=e.viewTop,n.viewLeft=e.viewLeft,n.scale=e.scale,n.oldScale=e.oldScale,n}};o(Te.EVENT,oe.VIEWPORT_CHANGE,wv);var Ve;(function(e){e[e.INPUT_VALUE=1]="INPUT_VALUE",e[e.OUTPUT_VALUE=2]="OUTPUT_VALUE",e[e.NEXT_STATEMENT=3]="NEXT_STATEMENT",e[e.PREVIOUS_STATEMENT=4]="PREVIOUS_STATEMENT"})(Ve||(Ve={}));var Th=class{constructor(e){this.connectionChecker=e,this.connections=[]}addConnection(e,n){n=this.calculateIndexForYPos(n),this.connections.splice(n,0,e)}findIndexOfConnection(e,n){if(!this.connections.length)return-1;const i=this.calculateIndexForYPos(n);if(i>=this.connections.length)return-1;n=e.y;let u=i;for(;0<=u&&this.connections[u].y===n;){if(this.connections[u]===e)return u;u--}for(u=i;u<this.connections.length&&this.connections[u].y===n;){if(this.connections[u]===e)return u;u++}return-1}calculateIndexForYPos(e){if(!this.connections.length)return 0;let n=0,i=this.connections.length;for(;n<i;){const u=Math.floor((n+i)/2);if(this.connections[u].y<e)n=u+1;else if(this.connections[u].y>e)i=u;else{n=u;break}}return n}removeConnection(e,n){if(e=this.findIndexOfConnection(e,n),e===-1)throw Error("Unable to find connection in connectionDB.");this.connections.splice(e,1)}getNeighbours(e,n){function i(Fe){const Yt=m-u[Fe].x,jt=T-u[Fe].y;return Math.sqrt(Yt*Yt+jt*jt)<=n&&ge.push(u[Fe]),jt<n}const u=this.connections,m=e.x,T=e.y;e=0;let N=u.length-2,H=N;for(;e<H;)u[H].y<T?e=H:N=H,H=Math.floor((e+N)/2);const ge=[];if(N=e=H,u.length){for(;0<=e&&i(e);)e--;do N++;while(N<u.length&&i(N))}return ge}isInYRange(e,n,i){return Math.abs(this.connections[e].y-n)<=i}searchForClosest(e,n,i){if(!this.connections.length)return{connection:null,radius:n};const u=e.y,m=e.x;e.x=m+i.x,e.y=u+i.y;var T=this.calculateIndexForYPos(e.y);i=null;let N=n,H,ge=T-1;for(;0<=ge&&this.isInYRange(ge,e.y,n);)H=this.connections[ge],this.connectionChecker.canConnect(e,H,!0,N)&&(i=H,N=H.distanceFrom(e)),ge--;for(;T<this.connections.length&&this.isInYRange(T,e.y,n);)H=this.connections[T],this.connectionChecker.canConnect(e,H,!0,N)&&(i=H,N=H.distanceFrom(e)),T++;return e.x=m,e.y=u,{connection:i,radius:N}}static init(e){const n=[];return n[Ve.INPUT_VALUE]=new Th(e),n[Ve.OUTPUT_VALUE]=new Th(e),n[Ve.NEXT_STATEMENT]=new Th(e),n[Ve.PREVIOUS_STATEMENT]=new Th(e),n}},r$=null,hm=null,pm={};pm.connectionUiEffect=ns,pm.disconnectUiEffect=Nc,pm.disconnectUiStop=$a,pm.disposeUiEffect=Nr;var gw=class{constructor(e){this.workspace=e,this.horizontalScrollEnabled=this.workspace.isMovableHorizontally(),this.verticalScrollEnabled=this.workspace.isMovableVertically(),this.startScrollXY_=new ke(e.scrollX,e.scrollY)}dispose(){this.workspace=null}startDrag(){fe()&&fe().unselect()}endDrag(e){this.drag(e)}drag(e){if(e=ke.sum(this.startScrollXY_,e),this.horizontalScrollEnabled&&this.verticalScrollEnabled)this.workspace.scroll(e.x,e.y);else if(this.horizontalScrollEnabled)this.workspace.scroll(e.x,this.workspace.scrollY);else if(this.verticalScrollEnabled)this.workspace.scroll(this.workspace.scrollX,e.y);else throw new TypeError("Invalid state.")}},RM=5,kM=6,Pl=class{constructor(e,n){this.creatorWorkspace=n,this.mouseDownXY=new ke(0,0),this.startWorkspace_=this.targetBlock=this.startComment=this.startBlock=this.startIcon=this.startField=this.startBubble=null,this.hasExceededDragRadius=!1,this.boundEvents=[],this.workspaceDragger=this.dragger=null,this.dragging=!1,this.flyout=null,this.multiTouch=this.isEnding_=this.gestureHasStarted=this.calledUpdateIsDragging=!1,this.cachedPoints=new Map,this.startDistance=this.previousScale=0,this.currentDropdownOwner=this.isPinchZoomEnabled=null,this.mostRecentEvent=e,this.currentDragDeltaXY=new ke(0,0)}dispose(){Mt(),af(),this.creatorWorkspace.clearGesture();for(const e of this.boundEvents)ft(e);this.boundEvents.length=0,this.workspaceDragger&&this.workspaceDragger.dispose()}updateFromEvent(e){const n=new ke(e.clientX,e.clientY);this.updateDragDelta(n)&&(this.updateIsDragging(e),Wt()),this.mostRecentEvent=e}updateDragDelta(e){return this.currentDragDeltaXY=ke.difference(e,this.mouseDownXY),this.hasExceededDragRadius?!1:this.hasExceededDragRadius=ke.magnitude(this.currentDragDeltaXY)>(this.flyout?s.config$$module$build$src$core$config.flyoutDragRadius:s.config$$module$build$src$core$config.dragRadius)}updateIsDraggingFromFlyout(){let e;if(!this.targetBlock||(e=this.flyout)==null||!e.isBlockCreatable(this.targetBlock))return!1;if(!this.flyout.targetWorkspace)throw Error(`Cannot update dragging from the flyout because the ' +
          'flyout's target workspace is undefined`);return!this.flyout.isScrollable()||this.flyout.isDragTowardWorkspace(this.currentDragDeltaXY)?(this.startWorkspace_=this.flyout.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),s.getGroup$$module$build$src$core$events$utils()||s.setGroup$$module$build$src$core$events$utils(!0),this.startBlock=null,this.targetBlock=this.flyout.createBlock(this.targetBlock),s.setSelected$$module$build$src$core$common(this.targetBlock),!0):!1}updateIsDraggingWorkspace(){if(!this.startWorkspace_)throw Error("Cannot update dragging the workspace because the start workspace is undefined");(this.flyout?this.flyout.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.dragging=!0,this.workspaceDragger=new gw(this.startWorkspace_),this.workspaceDragger.startDrag())}updateIsDragging(e){if(!this.startWorkspace_)throw Error("Cannot update dragging because the start workspace is undefined");if(this.calledUpdateIsDragging)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging=!0,this.flyout&&this.updateIsDraggingFromFlyout();const n=fe();n&&Lr(n)&&n.isMovable()?(this.dragging=!0,this.dragger=this.createDragger(n,this.startWorkspace_),this.dragger.onDragStart(e),this.dragger.onDrag(e,this.currentDragDeltaXY)):this.updateIsDraggingWorkspace()}createDragger(e,n){return new(y(Te.BLOCK_DRAGGER,this.creatorWorkspace.options,!0))(e,n)}doStart(e){if(!this.startWorkspace_)throw Error("Cannot start the touch gesture becauase the start workspace is undefined");this.isPinchZoomEnabled=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,kn(e)?this.cancel():(this.gestureHasStarted=!0,$a(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.currentDropdownOwner=Vp(),this.startWorkspace_.hideChaff(!!this.flyout),this.startWorkspace_.markFocused(),this.mostRecentEvent=e,ua(),or(e)?this.handleRightClick(e):(e.type.toLowerCase()==="pointerdown"&&e.pointerType!=="mouse"&&Rt(e,this),this.mouseDownXY=new ke(e.clientX,e.clientY),this.bindMouseEvents(e),this.isEnding_||this.handleTouchStart(e)))}bindMouseEvents(e){this.boundEvents.push(je(document,"pointerdown",null,this.handleStart.bind(this),!0)),this.boundEvents.push(je(document,"pointermove",null,this.handleMove.bind(this),!0)),this.boundEvents.push(je(document,"pointerup",null,this.handleUp.bind(this),!0)),e.preventDefault(),e.stopPropagation()}handleStart(e){this.isDragging()||(this.handleTouchStart(e),this.isMultiTouch()&&Wt())}handleMove(e){this.isDragging()&&wn(e)||!this.isMultiTouch()?(this.updateFromEvent(e),this.workspaceDragger?this.workspaceDragger.drag(this.currentDragDeltaXY):this.dragger&&this.dragger.onDrag(this.mostRecentEvent,this.currentDragDeltaXY),e.preventDefault(),e.stopPropagation()):this.isMultiTouch()&&(this.handleTouchMove(e),Wt())}handleUp(e){if(this.isDragging()||this.handleTouchEnd(e),!this.isMultiTouch()||this.isDragging()){if(!wn(e))return;if(this.updateFromEvent(e),Wt(),this.isEnding_){console.log("Trying to end a gesture recursively.");return}this.isEnding_=!0,this.dragger?this.dragger.onDragEnd(e,this.currentDragDeltaXY):this.workspaceDragger?this.workspaceDragger.endDrag(this.currentDragDeltaXY):this.isBubbleClick()||this.isCommentClick()||(this.isFieldClick()?this.doFieldClick():this.isIconClick()?this.doIconClick():this.isBlockClick()?this.doBlockClick():this.isWorkspaceClick()&&this.doWorkspaceClick(e))}e.preventDefault(),e.stopPropagation(),this.dispose()}handleTouchStart(e){var n=At(e);this.cachedPoints.set(n,this.getTouchPoint(e));var i=Array.from(this.cachedPoints.keys());i.length===2&&(n=this.cachedPoints.get(i[0]),i=this.cachedPoints.get(i[1]),this.startDistance=ke.distance(n,i),this.multiTouch=!0,e.preventDefault())}handleTouchMove(e){const n=At(e);this.cachedPoints.set(n,this.getTouchPoint(e)),this.isPinchZoomEnabled&&this.cachedPoints.size===2?this.handlePinch(e):(this.updateFromEvent(e),this.workspaceDragger?this.workspaceDragger.drag(this.currentDragDeltaXY):this.dragger&&this.dragger.onDrag(this.mostRecentEvent,this.currentDragDeltaXY),e.preventDefault(),e.stopPropagation())}handlePinch(e){var n=Array.from(this.cachedPoints.keys()),i=this.cachedPoints.get(n[0]);if(n=this.cachedPoints.get(n[1]),i=ke.distance(i,n)/this.startDistance,0<this.previousScale&&1/0>this.previousScale){if(n=i-this.previousScale,n=0<n?n*RM:n*kM,!this.startWorkspace_)throw Error("Cannot handle a pinch because the start workspace is undefined");const u=this.startWorkspace_,m=fs(e,u.getParentSvg(),u.getInverseScreenCTM());u.zoom(m.x,m.y,n)}this.previousScale=i,e.preventDefault()}handleTouchEnd(e){e=At(e),this.cachedPoints.has(e)&&this.cachedPoints.delete(e),2>this.cachedPoints.size&&(this.cachedPoints.clear(),this.previousScale=0)}getTouchPoint(e){return this.startWorkspace_?new ke(e.pageX,e.pageY):null}isMultiTouch(){return this.multiTouch}cancel(){this.isEnding_||(Wt(),this.dragger?this.dragger.onDragEnd(this.mostRecentEvent,this.currentDragDeltaXY):this.workspaceDragger&&this.workspaceDragger.endDrag(this.currentDragDeltaXY),this.dispose())}handleRightClick(e){this.targetBlock?(this.bringBlockToFront(),this.targetBlock.workspace.hideChaff(!!this.flyout),this.targetBlock.showContextMenu(e)):this.startBubble?this.startBubble.showContextMenu(e):this.startComment?(this.startComment.workspace.hideChaff(),this.startComment.showContextMenu(e)):this.startWorkspace_&&!this.flyout&&(this.startWorkspace_.hideChaff(),this.startWorkspace_.showContextMenu(e)),e.preventDefault(),e.stopPropagation(),this.dispose()}handleWsStart(e,n){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace(n),this.mostRecentEvent=e,this.startBlock||this.startBubble||this.startComment||s.setSelected$$module$build$src$core$common(null),this.doStart(e)}fireWorkspaceClick(e){W(new(G(oe.CLICK))(null,e.id,"workspace"))}handleFlyoutStart(e,n){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout(n),this.handleWsStart(e,n.getWorkspace())}handleBlockStart(e,n){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(n),this.mostRecentEvent=e}handleBubbleStart(e,n){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(n),this.mostRecentEvent=e}handleCommentStart(e,n){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleCommentStart, but the gesture had already been started.");this.setStartComment(n),this.mostRecentEvent=e}doFieldClick(){if(!this.startField)throw Error("Cannot do a field click because the start field is undefined");this.currentDropdownOwner!==this.startField&&this.startField.showEditor(this.mostRecentEvent),this.bringBlockToFront()}doIconClick(){if(!this.startIcon)throw Error("Cannot do an icon click because the start icon is undefined");this.bringBlockToFront(),this.startIcon.onClick()}doBlockClick(){if(this.flyout&&this.flyout.autoClose){if(!this.targetBlock)throw Error("Cannot do a block click because the target block is undefined");if(this.targetBlock.isEnabled()){s.getGroup$$module$build$src$core$events$utils()||s.setGroup$$module$build$src$core$events$utils(!0);var e=this.flyout.createBlock(this.targetBlock);e.snapToGrid(),e.bumpNeighbours()}}else{if(!this.startWorkspace_)throw Error("Cannot do a block click because the start workspace is undefined");e=new(G(oe.CLICK))(this.startBlock,this.startWorkspace_.id,"block"),W(e)}this.bringBlockToFront(),s.setGroup$$module$build$src$core$events$utils(!1)}doWorkspaceClick(e){e=this.creatorWorkspace,fe()&&fe().unselect(),this.fireWorkspaceClick(this.startWorkspace_||e)}bringBlockToFront(){this.targetBlock&&!this.flyout&&this.targetBlock.bringToFront()}setStartField(e){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField||(this.startField=e)}setStartIcon(e){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartIcon, but the gesture had already been started.");this.startIcon||(this.startIcon=e)}setStartBubble(e){this.startBubble||(this.startBubble=e)}setStartComment(e){this.startComment||(this.startComment=e)}setStartBlock(e){this.startBlock||this.startBubble||(this.startBlock=e,s.setSelected$$module$build$src$core$common(this.startBlock),e.isInFlyout&&e!==e.getRootBlock()?this.setTargetBlock(e.getRootBlock()):this.setTargetBlock(e))}setTargetBlock(e){e.isShadow()?this.setTargetBlock(e.getParent()):this.targetBlock=e}setStartWorkspace(e){this.startWorkspace_||(this.startWorkspace_=e)}setStartFlyout(e){this.flyout||(this.flyout=e)}isBubbleClick(){return!!this.startBubble&&!this.hasExceededDragRadius}isCommentClick(){return!!this.startComment&&!this.hasExceededDragRadius}isBlockClick(){return!!this.startBlock&&!this.hasExceededDragRadius&&!this.isFieldClick()&&!this.isIconClick()}isFieldClick(){return this.startField?this.startField.isClickable()&&!this.hasExceededDragRadius&&(!this.flyout||this.startField.isClickableInFlyout(this.flyout.autoClose)):!1}isIconClick(){if(!this.startIcon)return!1;const e=!this.flyout||!this.startIcon.isClickableInFlyout||this.startIcon.isClickableInFlyout(this.flyout.autoClose);return!this.hasExceededDragRadius&&e}isWorkspaceClick(){return!this.startBlock&&!this.startBubble&&!this.startField&&!this.hasExceededDragRadius}getCurrentDragger(){let e,n;return(n=(e=this.workspaceDragger)!=null?e:this.dragger)!=null?n:null}isDragging(){return this.dragging}hasStarted(){return this.gestureHasStarted}static inProgress(){const e=z();for(let n=0,i;i=e[n];n++)if(i.currentGesture_)return!0;return!1}},Sv=class{constructor(e,n){this.pattern=e,this.scale=1;let i;this.spacing=(i=n.spacing)!=null?i:0;let u;this.length=(u=n.length)!=null?u:1,this.line2=(this.line1=e.firstChild)&&this.line1.nextSibling;let m;this.snapToGrid=(m=n.snap)!=null?m:!1}setSpacing(e){this.spacing=e,this.update(this.scale)}getSpacing(){return this.spacing}setLength(e){this.length=e,this.update(this.scale)}getLength(){return this.length}setSnapToGrid(e){this.snapToGrid=e}shouldSnap(){return this.snapToGrid}getPatternId(){return this.pattern.id}update(e){this.scale=e;var n=this.spacing*e;this.pattern.setAttribute("width",`${n}`),this.pattern.setAttribute("height",`${n}`),n=Math.floor(this.spacing/2)+.5;let i=n-this.length/2,u=n+this.length/2;n*=e,i*=e,u*=e,this.setLineAttributes(this.line1,e,i,u,n,n),this.setLineAttributes(this.line2,e,n,n,i,u)}setLineAttributes(e,n,i,u,m,T){e&&(e.setAttribute("stroke-width",`${n}`),e.setAttribute("x1",`${i}`),e.setAttribute("y1",`${m}`),e.setAttribute("x2",`${u}`),e.setAttribute("y2",`${T}`))}moveTo(e,n){this.pattern.setAttribute("x",`${e}`),this.pattern.setAttribute("y",`${n}`)}alignXY(e){var n=this.getSpacing();const i=n/2,u=Math.round(Math.round((e.x-i)/n)*n+i);return n=Math.round(Math.round((e.y-i)/n)*n+i),u===e.x&&n===e.y?e:new ke(u,n)}static createDom(e,n,i){e=ue(Z.PATTERN,{id:"blocklyGridPattern"+e,patternUnits:"userSpaceOnUse"},i);let u,m;if(0<((u=n.length)!=null?u:1)&&0<((m=n.spacing)!=null?m:0)){ue(Z.LINE,{stroke:n.colour},e);let T;(T=n.length)!=null&&T&&ue(Z.LINE,{stroke:n.colour},e)}else ue(Z.LINE,{},e);return e}},xM=class{constructor(e){this.workspace=e,this.layers=new Map,(e=e.getInjectionDiv())&&(this.dragLayer=this.createDragLayer(e),this.animationLayer=this.createAnimationLayer(e)),e=this.createLayer(J),Ge(e,"blocklyBlockCanvas"),e=this.createLayer(re),Ge(e,"blocklyBubbleCanvas")}createDragLayer(e){const n=ue(Z.SVG,{class:"blocklyBlockDragSurface",xmlns:Tl,"xmlns:html":Is,"xmlns:xlink":Sr,version:"1.1"});return e.append(n),ue(Z.G,{},n)}createAnimationLayer(e){const n=ue(Z.SVG,{class:"blocklyAnimationLayer",xmlns:Tl,"xmlns:html":Is,"xmlns:xlink":Sr,version:"1.1"});return e.append(n),ue(Z.G,{},n)}appendToAnimationLayer(e){let n;const i=(n=this.dragLayer)==null?void 0:n.getAttribute("transform");if(i){let m;(m=this.animationLayer)==null||m.setAttribute("transform",i)}let u;(u=this.animationLayer)==null||u.appendChild(e.getSvgRoot())}translateLayers(e,n){e=`translate(${e.x}, ${e.y}) scale(${n})`;let i;(i=this.dragLayer)==null||i.setAttribute("transform",e);for(const[,u]of this.layers)u.setAttribute("transform",e)}moveToDragLayer(e){let n;(n=this.dragLayer)==null||n.appendChild(e.getSvgRoot())}moveOffDragLayer(e,n){this.append(e,n)}append(e,n){this.layers.has(n)||this.createLayer(n);let i;(i=this.layers.get(n))==null||i.appendChild(e.getSvgRoot())}createLayer(e){const n=this.workspace.getSvgGroup(),i=ue(Z.G,{});let u=!1;const m=[...this.layers].sort((T,N)=>T[0]-N[0]);for(const[T,N]of m)if(e<T){n.insertBefore(i,N),u=!0;break}return u||n.appendChild(i),this.layers.set(e,i),i}hasLayer(e){return e===this.dragLayer||new Set(this.layers.values()).has(e)}getBlockLayer(){return this.layers.get(J)}getBubbleLayer(){return this.layers.get(re)}},$w={};$w.deepMerge=Mr;var Tu=class{constructor(e,n,i,u){this.name=e,this.startHats=!1,this.blockStyles=n||Object.create(null),this.categoryStyles=i||Object.create(null),this.componentStyles=u||Object.create(null),this.fontStyle=Object.create(null),o(Te.THEME,e,this,!0)}getClassName(){return this.name+"-theme"}setBlockStyle(e,n){this.blockStyles[e]=n}setCategoryStyle(e,n){this.categoryStyles[e]=n}getComponentStyle(e){if(e=this.componentStyles[e],!e)return null;if(typeof e=="string"){const n=this.getComponentStyle(e);if(n)return n}return`${e}`}setComponentStyle(e,n){this.componentStyles[e]=n}setFontStyle(e){this.fontStyle=e}setStartHats(e){this.startHats=e}static defineTheme(e,n){e=e.toLowerCase();const i=new Tu(e);let u=n.base;if(u){if(typeof u=="string"){let m;u=(m=$(Te.THEME,u))!=null?m:void 0}u instanceof Tu&&(Mr(i,u),i.name=e)}return Mr(i.blockStyles,n.blockStyles),Mr(i.categoryStyles,n.categoryStyles),Mr(i.componentStyles,n.componentStyles),Mr(i.fontStyle,n.fontStyle),n.startHats!==null&&(i.startHats=n.startHats),i}},OM={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},AM={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},s$=new Tu("classic",OM,AM),po=class{constructor(e){this.gridPattern=null,this.getMetrics=this.setMetrics=void 0;let n=null,i=!1;var u=!1,m=!1,T=!1,N=!1,H=!1;const ge=!!e.readOnly;if(!ge){var Fe;n=ic((Fe=e.toolbox)!=null?Fe:null),i=ac(n),u=e.trashcan,u=u===void 0?i:u,m=e.collapse,m=m===void 0?i:m,T=e.comments,T=T===void 0?i:T,N=e.disable,N=N===void 0?i:N,H=e.sounds,H=H===void 0?!0:H}Fe=e.maxTrashcanContents,u?Fe===void 0&&(Fe=32):Fe=0;const Yt=!!e.rtl;let jt=e.horizontalLayout;jt===void 0&&(jt=!1);var us=e.toolboxPosition!=="end";us=jt?us?qe.TOP:qe.BOTTOM:us===Yt?qe.RIGHT:qe.LEFT;let Oh=e.css;Oh===void 0&&(Oh=!0);let Cm="https://blockly-demo.appspot.com/static/media/";e.media&&(Cm=e.media.endsWith("/")?e.media:e.media+"/");const KS=e.oneBasedIndex,aP=e.renderer||"geras",cP=e.plugins||{};let _y=e.modalInputs;_y===void 0&&(_y=!0),this.RTL=Yt,this.oneBasedIndex=KS===void 0?!0:KS,this.collapse=m,this.comments=T,this.disable=N,this.readOnly=ge,this.maxBlocks=e.maxBlocks||1/0;let XS;this.maxInstances=(XS=e.maxInstances)!=null?XS:null,this.modalInputs=_y,this.pathToMedia=Cm,this.hasCategories=i,this.moveOptions=po.parseMoveOptions(e,i),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=u,this.maxTrashcanContents=Fe,this.hasSounds=H,this.hasCss=Oh,this.horizontalLayout=jt,this.languageTree=n,this.gridOptions=po.parseGridOptions(e),this.zoomOptions=po.parseZoomOptions(e),this.toolboxPosition=us,this.theme=po.parseThemeOptions(e),this.renderer=aP;let YS;this.rendererOverrides=(YS=e.rendererOverrides)!=null?YS:null;let qS;this.parentWorkspace=(qS=e.parentWorkspace)!=null?qS:null,this.plugins=cP}static parseMoveOptions(e,n){const i=e.move||{},u={};return i.scrollbars===void 0&&e.scrollbars===void 0?u.scrollbars=n:typeof i.scrollbars=="object"?(u.scrollbars={horizontal:!!i.scrollbars.horizontal,vertical:!!i.scrollbars.vertical},u.scrollbars.horizontal&&u.scrollbars.vertical?u.scrollbars=!0:u.scrollbars.horizontal||u.scrollbars.vertical||(u.scrollbars=!1)):u.scrollbars=!!i.scrollbars||!!e.scrollbars,u.wheel=u.scrollbars&&i.wheel!==void 0?!!i.wheel:typeof u.scrollbars=="object",u.drag=u.scrollbars?i.drag===void 0?!0:!!i.drag:!1,u}static parseZoomOptions(e){e=e.zoom||{};const n={};return n.controls=e.controls===void 0?!1:!!e.controls,n.wheel=e.wheel===void 0?!1:!!e.wheel,n.startScale=e.startScale===void 0?1:Number(e.startScale),n.maxScale=e.maxScale===void 0?3:Number(e.maxScale),n.minScale=e.minScale===void 0?.3:Number(e.minScale),n.scaleSpeed=e.scaleSpeed===void 0?1.2:Number(e.scaleSpeed),n.pinch=e.pinch===void 0?n.wheel||n.controls:!!e.pinch,n}static parseGridOptions(e){e=e.grid||{};const n={};return n.spacing=Number(e.spacing)||0,n.colour=e.colour||"#888",n.length=e.length===void 0?1:Number(e.length),n.snap=0<n.spacing&&!!e.snap,n}static parseThemeOptions(e){return e=e.theme||s$,typeof e=="string"?$(Te.THEME,e):e instanceof Tu?e:Tu.defineTheme(e.name||"builtin"+S(),e)}},_w={fromJsonInternal:Pd},o$={TEST_ONLY:_w};o$.fromJson=s.fromJson$$module$build$src$core$field_registry,o$.register=ar,o$.unregister=Lc;var cs=class extends _{constructor(e,n,i){super(_.SKIP_SETUP),this.svgArrow=this.arrow=this.imageElement=this.menu_=this.selectedMenuItem=null,this.SERIALIZABLE=!0,this.CURSOR="default",this.clickTarget_=this.suffixField=this.prefixField=this.generatedOptions=null,e!==_.SKIP_SETUP&&(Array.isArray(e)?(this.validateOptions(e),e=this.trimOptions(e),this.menuGenerator_=e.options,this.prefixField=e.prefix||null,this.suffixField=e.suffix||null):this.menuGenerator_=e,this.selectedOption=this.getOptions(!1)[0],i&&this.configure_(i),this.setValue(this.selectedOption[1]),n&&this.setValidator(n))}fromXml(e){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(e.textContent)}loadState(e){this.loadLegacyState(cs,e)||(this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(e))}initView(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement=ue(Z.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&Ge(this.borderRect_,"blocklyDropdownRect")}shouldAddBorderRect_(){let e;return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!((e=this.getSourceBlock())!=null&&e.isShadow())}createTextArrow_(){this.arrow=ue(Z.TSPAN,{},this.textElement_);let e;this.arrow.appendChild(document.createTextNode((e=this.getSourceBlock())!=null&&e.RTL?cs.ARROW_CHAR+" ":" "+cs.ARROW_CHAR)),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.arrow.setAttribute("dominant-baseline","central");let n;(n=this.getSourceBlock())!=null&&n.RTL?this.getTextElement().insertBefore(this.arrow,this.textContent_):this.getTextElement().appendChild(this.arrow)}createSVGArrow_(){this.svgArrow=ue(Z.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow.setAttributeNS(Sr,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)}showEditor_(e){var n=this.getSourceBlock();if(!n)throw new b;this.dropdownCreate(),this.menu_.openingCoords=e&&typeof e.clientX=="number"?new ke(e.clientX,e.clientY):null,hd(),e=this.menu_.render(la()),Ge(e,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV&&(n=n.getColour(),Hp(n,this.sourceBlock_.style.colourTertiary)),Gp(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem&&this.menu_.setHighlighted(this.selectedMenuItem),this.applyColour()}dropdownCreate(){const e=this.getSourceBlock();if(!e)throw new b;const n=new cu;n.setRole(Ur.LISTBOX),this.menu_=n;const i=this.getOptions(!1);this.selectedMenuItem=null;for(let m=0;m<i.length;m++){const[T,N]=i[m];if(typeof T=="object"){var u=new Image(T.width,T.height);u.src=T.src,u.alt=T.alt||""}else u=T;u=new Si(u,N),u.setRole(Ur.OPTION),u.setRightToLeft(e.RTL),u.setCheckable(!0),n.addChild(u),u.setChecked(N===this.value_),N===this.value_&&(this.selectedMenuItem=u),u.onAction(this.handleMenuActionEvent,this)}}dropdownDispose_(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem=this.menu_=null,this.applyColour()}handleMenuActionEvent(e){md(this,!0),this.onItemSelected_(this.menu_,e)}onItemSelected_(e,n){this.setValue(n.getValue())}isOptionListDynamic(){return typeof this.menuGenerator_=="function"}getOptions(e){if(!this.menuGenerator_)throw TypeError("A menu generator was never defined.");return Array.isArray(this.menuGenerator_)?this.menuGenerator_:e&&this.generatedOptions?this.generatedOptions:(this.generatedOptions=this.menuGenerator_(),this.validateOptions(this.generatedOptions),this.generatedOptions)}doClassValidation_(e){return this.getOptions(!0).some(n=>n[1]===e)?e:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+e),null)}doValueUpdate_(e){super.doValueUpdate_(e),e=this.getOptions(!0);for(let n=0,i;i=e[n];n++)i[1]===this.value_&&(this.selectedOption=i)}applyColour(){const e=this.sourceBlock_.style;this.borderRect_&&(this.borderRect_.setAttribute("stroke",e.colourTertiary),this.menu_?this.borderRect_.setAttribute("fill",e.colourTertiary):this.borderRect_.setAttribute("fill","transparent")),this.sourceBlock_&&this.arrow&&(this.sourceBlock_.isShadow()?this.arrow.style.fill=e.colourSecondary:this.arrow.style.fill=e.colourPrimary)}render_(){this.getTextContent().nodeValue="",this.imageElement.style.display="none";const e=this.selectedOption&&this.selectedOption[0];e&&typeof e=="object"?this.renderSelectedImage(e):this.renderSelectedText(),this.positionBorderRect_()}renderSelectedImage(e){const n=this.getSourceBlock();if(!n)throw new b;this.imageElement.style.display="",this.imageElement.setAttributeNS(Sr,"xlink:href",e.src),this.imageElement.setAttribute("height",String(e.height)),this.imageElement.setAttribute("width",String(e.width));const i=Number(e.height);e=Number(e.width);var u=!!this.borderRect_;const m=Math.max(u?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,i+cs.IMAGE_Y_PADDING);u=u?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let T;T=this.svgArrow?this.positionSVGArrow(e+u,m/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):Jr(this.arrow,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY),this.size_.width=e+T+2*u,this.size_.height=m;let N=0;n.RTL?this.imageElement.setAttribute("x",`${u+T}`):(N=e+T,this.getTextElement().setAttribute("text-anchor","end"),this.imageElement.setAttribute("x",`${u}`)),this.imageElement.setAttribute("y",String(m/2-i/2)),this.positionTextElement_(N+u,e+T)}renderSelectedText(){this.getTextContent().nodeValue=this.getDisplayText_();var e=this.getTextElement();Ge(e,"blocklyDropdownText"),e.setAttribute("text-anchor","start");var n=!!this.borderRect_;e=Math.max(n?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT);const i=Jr(this.getTextElement(),this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);n=n?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let u=0;this.svgArrow&&(u=this.positionSVGArrow(i+n,e/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=i+u+2*n,this.size_.height=e,this.positionTextElement_(n,i)}positionSVGArrow(e,n){if(!this.svgArrow)return 0;const i=this.getSourceBlock();if(!i)throw new b;const u=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,m=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,T=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow.setAttribute("transform","translate("+(i.RTL?u:e+m)+","+n+")"),T+m}getText_(){if(!this.selectedOption)return null;const e=this.selectedOption[0];return typeof e=="object"?e.alt:e}static fromJson(e){if(!e.options)throw Error("options are required for the dropdown field. The options property must be assigned an array of [humanReadableValue, languageNeutralValue] tuples.");return new this(e.options,void 0,e)}trimOptions(e){let n=!1;const i=e.map(([N,H])=>typeof N=="string"?[Zt(N),H]:(n=!0,[N.alt!==null?Object.assign({},N,{alt:Zt(N.alt)}):Object.assign({},N),H]));if(n||2>e.length)return{options:i};var u=i.map(([N])=>N),m=wc(u);e=Qp(u,m);const T=Zp(u,m);return!e&&!T||m<=e+T?{options:i}:(m=e?u[0].substring(0,e-1):void 0,u=T?u[0].substr(1-T):void 0,{options:this.applyTrim(i,e,T),prefix:m,suffix:u})}applyTrim(e,n,i){return e.map(([u,m])=>[u.substring(n,u.length-i),m])}validateOptions(e){if(!Array.isArray(e))throw TypeError("FieldDropdown options must be an array.");if(!e.length)throw TypeError("FieldDropdown options must not be an empty array.");let n=!1;for(let i=0;i<e.length;i++){const u=e[i];Array.isArray(u)?typeof u[1]!="string"?(n=!0,console.error(`Invalid option[${i}]: Each FieldDropdown option id must be a string. 
          Found ${u[1]} in: ${u}`)):u[0]&&typeof u[0]!="string"&&typeof u[0].src!="string"&&(n=!0,console.error(`Invalid option[${i}]: Each FieldDropdown option must have a string 
          label or image description. Found ${u[0]} in: ${u}`)):(n=!0,console.error(`Invalid option[${i}]: Each FieldDropdown option must be an array.
          Found: ${u}`))}if(n)throw TypeError("Found invalid FieldDropdown options.")}};cs.CHECKMARK_OVERHANG=25,cs.MAX_MENU_HEIGHT_VH=.45,cs.ARROW_CHAR="",cs.IMAGE_Y_OFFSET=5,cs.IMAGE_Y_PADDING=2*cs.IMAGE_Y_OFFSET,ar("field_dropdown",cs);var vw=class{constructor(e,n){this.bubble=e,this.workspace=n,this.startLoc=null,this.inGroup=!1}isMovable(){return!0}startDrag(){(this.inGroup=!!s.getGroup$$module$build$src$core$events$utils())||s.setGroup$$module$build$src$core$events$utils(!0),this.startLoc=this.bubble.getRelativeToSurfaceXY(),this.workspace.setResizesEnabled(!1);let e;(e=this.workspace.getLayerManager())==null||e.moveToDragLayer(this.bubble),this.bubble.setDragging&&this.bubble.setDragging(!0)}drag(e){this.bubble.moveDuringDrag(e)}endDrag(){this.workspace.setResizesEnabled(!0),this.inGroup||s.setGroup$$module$build$src$core$events$utils(!1);let e;(e=this.workspace.getLayerManager())==null||e.moveOffDragLayer(this.bubble,re),this.bubble.setDragging(!1)}revertDrag(){this.startLoc&&this.bubble.moveDuringDrag(this.startLoc)}},Os,xt=class{constructor(e,n,i){this.workspace=e,this.anchor=n,this.ownerRect=i,this.size=new Re(0,0),this.colour="#ffffff",this.disposed=!1,this.relativeLeft=this.relativeTop=0,this.dragStrategy=new vw(this,this.workspace),this.id=S(),this.svgRoot=ue(Z.G,{class:"blocklyBubble"},e.getBubbleCanvas()),e=ue(Z.G,{filter:`url(#${this.workspace.getRenderer().getConstants().embossFilterId})`},this.svgRoot),this.tail=ue(Z.PATH,{class:"blocklyBubbleTail"},e),this.background=ue(Z.RECT,{class:"blocklyDraggable",x:0,y:0,rx:Os.BORDER_WIDTH,ry:Os.BORDER_WIDTH},e),this.contentContainer=ue(Z.G,{},this.svgRoot),je(this.background,"pointerdown",this,this.onMouseDown)}dispose(){Q(this.svgRoot),this.disposed=!0}setAnchorLocation(e,n=!1){this.anchor=e,n?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}setPositionRelativeToAnchor(e,n){this.relativeLeft=e,this.relativeTop=n,this.positionRelativeToAnchor(),this.renderTail()}getSize(){return this.size}setSize(e,n=!1){e.width=Math.max(e.width,Os.MIN_SIZE),e.height=Math.max(e.height,Os.MIN_SIZE),this.size=e,this.background.setAttribute("width",`${e.width}`),this.background.setAttribute("height",`${e.height}`),n?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}getColour(){return this.colour}setColour(e){this.colour=e,this.tail.setAttribute("fill",e),this.background.setAttribute("fill",e)}onMouseDown(e){let n;(n=this.workspace.getGesture(e))==null||n.handleBubbleStart(e,this),this.bringToFront(),s.setSelected$$module$build$src$core$common(this)}positionRelativeToAnchor(){let e=this.anchor.x;e=this.workspace.RTL?e-(this.relativeLeft+this.size.width):e+this.relativeLeft,this.moveTo(e,this.relativeTop+this.anchor.y)}moveTo(e,n){this.svgRoot.setAttribute("transform",`translate(${e}, ${n})`)}positionByRect(e=new St(0,0,0,0)){var n=this.workspace.getMetricsManager().getViewMetrics(!0),i=this.getOptimalRelativeLeft(n),u=this.getOptimalRelativeTop(n);const m={x:i,y:-this.size.height-this.workspace.getRenderer().getConstants().MIN_BLOCK_HEIGHT},T={x:-this.size.width-30,y:u};u={x:e.getWidth(),y:u};var N={x:i,y:e.getHeight()};i=e.getWidth()<e.getHeight()?u:N,e=e.getWidth()<e.getHeight()?N:u,u=this.getOverlap(m,n),N=this.getOverlap(T,n);const H=this.getOverlap(i,n);n=this.getOverlap(e,n),n=Math.max(u,N,H,n),u===n?(this.relativeLeft=m.x,this.relativeTop=m.y):N===n?(this.relativeLeft=T.x,this.relativeTop=T.y):H===n?(this.relativeLeft=i.x,this.relativeTop=i.y):(this.relativeLeft=e.x,this.relativeTop=e.y),this.positionRelativeToAnchor()}getOverlap(e,n){var i=this.workspace.RTL?this.anchor.x-e.x-this.size.width:e.x+this.anchor.x;return e=e.y+this.anchor.y,Math.max(0,Math.min(1,(Math.min(i+this.size.width,n.left+n.width)-Math.max(i,n.left))*(Math.min(e+this.size.height,n.top+n.height)-Math.max(e,n.top))/(this.size.width*this.size.height)))}getOptimalRelativeLeft(e){let n=-this.size.width/4;if(this.size.width>e.width)return n;if(e=this.getWorkspaceViewRect(e),this.workspace.RTL){var i=this.anchor.x-n;i-this.size.width<e.left?n=-(e.left-this.anchor.x+this.size.width):i>e.right&&(n=-(e.right-this.anchor.x))}else{i=n+this.anchor.x;const u=i+this.size.width;i<e.left?n=e.left-this.anchor.x:u>e.right&&(n=e.right-this.anchor.x-this.size.width)}return n}getOptimalRelativeTop(e){let n=-this.size.height/4;if(this.size.height>e.height)return n;const i=this.anchor.y+n,u=i+this.size.height;return e=this.getWorkspaceViewRect(e),i<e.top?n=e.top-this.anchor.y:u>e.bottom&&(n=e.bottom-this.anchor.y-this.size.height),n}getWorkspaceViewRect(e){const n=e.top;let i=e.top+e.height,u=e.left;return e=e.left+e.width,i-=this.getScrollbarThickness(),this.workspace.RTL?u-=this.getScrollbarThickness():e-=this.getScrollbarThickness(),new St(n,i,u,e)}getScrollbarThickness(){return qt.scrollbarThickness/this.workspace.scale}renderTail(){const e=[];var n=this.size.width/2,i=this.size.height/2,u=-this.relativeLeft,m=-this.relativeTop;if(n===u&&i===m)e.push("M "+n+","+i);else{m-=i,u-=n,this.workspace.RTL&&(u*=-1);var T=Math.sqrt(m*m+u*u),N=Math.acos(u/T);0>m&&(N=2*Math.PI-N);var H=N+Math.PI/2;H>2*Math.PI&&(H-=2*Math.PI);var ge=Math.sin(H);const Yt=Math.cos(H);let jt=(this.size.width+this.size.height)/Os.TAIL_THICKNESS;jt=Math.min(jt,this.size.width,this.size.height)/4,H=1-Os.ANCHOR_RADIUS/T,u=n+H*u,m=i+H*m,H=n+jt*Yt;const us=i+jt*ge;n-=jt*Yt,i-=jt*ge,ge=hi(this.workspace.RTL?-Os.TAIL_ANGLE:Os.TAIL_ANGLE),ge=N+ge,ge>2*Math.PI&&(ge-=2*Math.PI),N=Math.sin(ge)*T/Os.TAIL_BEND,T=Math.cos(ge)*T/Os.TAIL_BEND,e.push("M"+H+","+us),e.push("C"+(H+T)+","+(us+N)+" "+u+","+m+" "+u+","+m),e.push("C"+u+","+m+" "+(n+T)+","+(i+N)+" "+n+","+i)}e.push("z");let Fe;(Fe=this.tail)==null||Fe.setAttribute("d",e.join(" "))}bringToFront(){let e;const n=(e=this.svgRoot)==null?void 0:e.parentNode;return this.svgRoot&&n?.lastChild!==this.svgRoot?(n?.appendChild(this.svgRoot),!0):!1}getRelativeToSurfaceXY(){return new ke(this.workspace.RTL?-this.relativeLeft+this.anchor.x-this.size.width:this.anchor.x+this.relativeLeft,this.anchor.y+this.relativeTop)}getSvgRoot(){return this.svgRoot}moveDuringDrag(e){this.moveTo(e.x,e.y),this.relativeLeft=this.workspace.RTL?this.anchor.x-e.x-this.size.width:e.x-this.anchor.x,this.relativeTop=e.y-this.anchor.y,this.renderTail()}setDragging(e){}setDeleteStyle(e){}isDeletable(){return!1}showContextMenu(e){}isMovable(){return!0}startDrag(){this.dragStrategy.startDrag()}drag(e){this.dragStrategy.drag(e)}endDrag(){this.dragStrategy.endDrag()}revertDrag(){this.dragStrategy.revertDrag()}select(){}unselect(){}};Os=xt,xt.BORDER_WIDTH=6,xt.DOUBLE_BORDER=2*Os.BORDER_WIDTH,xt.MIN_SIZE=Os.DOUBLE_BORDER,xt.TAIL_THICKNESS=1,xt.TAIL_ANGLE=20,xt.TAIL_BEND=4,xt.ANCHOR_RADIUS=8;var Dl=class extends xt{constructor(e,n,i,u){super(n,i,u),this.workspace=n,this.anchor=i,this.ownerRect=u,this.autoLayout=!0,n=new po(e),this.validateWorkspaceOptions(n),this.svgDialog=ue(Z.SVG,{x:xt.BORDER_WIDTH,y:xt.BORDER_WIDTH},this.contentContainer),e.parentWorkspace=this.workspace,this.miniWorkspace=this.newWorkspaceSvg(new po(e)),this.miniWorkspace.internalIsMutator=!0,e=this.miniWorkspace.createDom("blocklyMutatorBackground"),this.svgDialog.appendChild(e),n.languageTree&&(e.insertBefore(this.miniWorkspace.addFlyout(Z.G),this.miniWorkspace.getCanvas()),e=this.miniWorkspace.getFlyout(),e?.init(this.miniWorkspace),e?.show(n.languageTree)),this.miniWorkspace.addChangeListener(this.onWorkspaceChange.bind(this));let m,T;(m=this.miniWorkspace.getFlyout())==null||(T=m.getWorkspace())==null||T.addChangeListener(this.onWorkspaceChange.bind(this)),this.updateBubbleSize()}dispose(){this.miniWorkspace.dispose(),super.dispose()}getWorkspace(){return this.miniWorkspace}addWorkspaceChangeListener(e){this.miniWorkspace.addChangeListener(e)}validateWorkspaceOptions(e){if(e.hasCategories)throw Error("The miniworkspace bubble does not support toolboxes with categories");if(e.hasTrashcan)throw Error("The miniworkspace bubble does not support trashcans");if(e.zoomOptions.controls||e.zoomOptions.wheel||e.zoomOptions.pinch)throw Error("The miniworkspace bubble does not support zooming");if(e.moveOptions.scrollbars||e.moveOptions.wheel||e.moveOptions.drag)throw Error("The miniworkspace bubble does not scrolling/moving the workspace");if(e.horizontalLayout)throw Error("The miniworkspace bubble does not support horizontal layouts")}onWorkspaceChange(){this.bumpBlocksIntoBounds(),this.updateBubbleSize()}bumpBlocksIntoBounds(){if(!this.miniWorkspace.isDragging())for(const e of this.miniWorkspace.getTopBlocks(!1)){const n=e.getRelativeToSurfaceXY();if(20>n.y&&e.moveBy(0,20-n.y),e.RTL){let i=-20;const u=this.miniWorkspace.getFlyout();u&&(i-=u.getWidth()),n.x>i&&e.moveBy(i-n.x,0)}else 20>n.x&&e.moveBy(20-n.x,0)}}updateBubbleSize(){if(!this.miniWorkspace.isDragging()){var e=this.getSize(),n=this.calculateWorkspaceSize();Math.abs(e.width-n.width)<Dl.MINIMUM_VIEW_CHANGE&&Math.abs(e.height-n.height)<Dl.MINIMUM_VIEW_CHANGE||(this.svgDialog.setAttribute("width",`${n.width}px`),this.svgDialog.setAttribute("height",`${n.height}px`),this.miniWorkspace.setCachedParentSvgSize(n.width,n.height),this.miniWorkspace.RTL&&this.miniWorkspace.getCanvas().setAttribute("transform",`translate(${n.width}, 0)`),this.setSize(new Re(n.width+xt.DOUBLE_BORDER,n.height+xt.DOUBLE_BORDER),this.autoLayout),this.miniWorkspace.resize(),this.miniWorkspace.recordDragTargets())}}calculateWorkspaceSize(){var e=this.miniWorkspace.getCanvas().getBBox();let n=e.width+Dl.MARGIN;e=e.height+Dl.MARGIN;const i=this.miniWorkspace.getFlyout();if(i){const u=i.getWorkspace().getMetricsManager().getScrollMetrics();e=Math.max(e,u.height+20),n+=i.getWidth()}return new Re(n,e)}updateBlockStyles(){for(var e of this.miniWorkspace.getAllBlocks(!1))e.setStyle(e.getStyleName());let n;if(e=(n=this.miniWorkspace.getFlyout())==null?void 0:n.getWorkspace())for(const i of e.getAllBlocks(!1))i.setStyle(i.getStyleName())}moveDuringDrag(e){super.moveDuringDrag(e),this.autoLayout=!1}moveTo(e,n){super.moveTo(e,n),this.miniWorkspace.recordDragTargets()}newWorkspaceSvg(e){throw Error("The implementation of newWorkspaceSvg should be monkey-patched in by blockly.ts")}};Dl.MINIMUM_VIEW_CHANGE=10,Dl.MARGIN=3*xt.DOUBLE_BORDER;var i$=class{constructor(e){this.sourceBlock=e,this.offsetInBlock=new ke(0,0),this.workspaceLocation=new ke(0,0),this.svgRoot=null,this.tooltip=e}getType(){throw Error("Icons must implement getType")}initView(e){if(!this.svgRoot){var n=this.sourceBlock;this.svgRoot=ue(Z.G,{class:"blocklyIconGroup"}),n.getSvgRoot().appendChild(this.svgRoot),this.updateSvgRootOffset(),je(this.svgRoot,"pointerdown",this,e),this.svgRoot.tooltip=this,ca(this.svgRoot)}}dispose(){gd(this.svgRoot),Q(this.svgRoot)}getWeight(){return-1}getSize(){return new Re(0,0)}setTooltip(e){this.tooltip=e??this.sourceBlock}getTooltip(){return this.tooltip}applyColour(){}updateEditable(){}updateCollapsed(){this.svgRoot&&(this.sourceBlock.isCollapsed()?this.svgRoot.style.display="none":this.svgRoot.style.display="block",di(this)&&this.setBubbleVisible(!1))}hideForInsertionMarker(){this.svgRoot&&(this.svgRoot.style.display="none")}isShownWhenCollapsed(){return!1}setOffsetInBlock(e){this.offsetInBlock=e,this.updateSvgRootOffset()}updateSvgRootOffset(){let e;(e=this.svgRoot)==null||e.setAttribute("transform",`translate(${this.offsetInBlock.x}, ${this.offsetInBlock.y})`)}onLocationChange(e){this.workspaceLocation=ke.sum(e,this.offsetInBlock)}onClick(){}isClickableInFlyout(e){return!0}},l$,a$;l$=17,a$=16,s.MutatorIcon$$module$build$src$core$icons$mutator_icon=class extends i${constructor(e,n){super(n),this.flyoutBlockTypes=e,this.sourceBlock=n,this.saveConnectionsListener=this.updateWorkspacePid=this.rootBlock=this.miniWorkspaceBubble=null}getType(){return s.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE}initView(e){this.svgRoot||(super.initView(e),ue(Z.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},this.svgRoot),ue(Z.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},this.svgRoot),ue(Z.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},this.svgRoot),Ge(this.svgRoot,"blockly-icon-mutator"))}dispose(){super.dispose();let e;(e=this.miniWorkspaceBubble)==null||e.dispose()}getWeight(){return s.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT}getSize(){return new Re(l$,l$)}applyColour(){super.applyColour();let e;(e=this.miniWorkspaceBubble)==null||e.setColour(this.sourceBlock.style.colourPrimary);let n;(n=this.miniWorkspaceBubble)==null||n.updateBlockStyles()}updateCollapsed(){super.updateCollapsed(),this.sourceBlock.isCollapsed()&&this.setBubbleVisible(!1)}onLocationChange(e){super.onLocationChange(e);let n;(n=this.miniWorkspaceBubble)==null||n.setAnchorLocation(this.getAnchorLocation())}onClick(){super.onClick(),this.sourceBlock.isEditable()&&this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.miniWorkspaceBubble}setBubbleVisible(e){const n=this;return ve.asyncExecutePromiseGeneratorFunction(function*(){if(n.bubbleIsVisible()!==e){if(yield ir(),e){n.miniWorkspaceBubble=new Dl(n.getMiniWorkspaceConfig(),n.sourceBlock.workspace,n.getAnchorLocation(),n.getBubbleOwnerRect()),n.applyColour(),n.createRootBlock(),n.addSaveConnectionsListener();let i;(i=n.miniWorkspaceBubble)==null||i.addWorkspaceChangeListener(n.createMiniWorkspaceChangeListener())}else{let i;(i=n.miniWorkspaceBubble)==null||i.dispose(),n.miniWorkspaceBubble=null,n.saveConnectionsListener&&n.sourceBlock.workspace.removeChangeListener(n.saveConnectionsListener),n.saveConnectionsListener=null}W(new(G(oe.BUBBLE_OPEN))(n.sourceBlock,e,"mutator"))}})}getMiniWorkspaceConfig(){let e;const n={disable:!1,media:this.sourceBlock.workspace.options.pathToMedia,rtl:this.sourceBlock.RTL,renderer:this.sourceBlock.workspace.options.renderer,rendererOverrides:(e=this.sourceBlock.workspace.options.rendererOverrides)!=null?e:void 0};return this.flyoutBlockTypes.length&&(n.toolbox={kind:"flyoutToolbox",contents:this.flyoutBlockTypes.map(i=>({kind:"block",type:i}))}),n}getAnchorLocation(){const e=l$/2;return ke.sum(this.workspaceLocation,new ke(e,e))}getBubbleOwnerRect(){const e=this.sourceBlock.getSvgRoot().getBBox();return new St(e.y,e.y+e.height,e.x,e.x+e.width)}createRootBlock(){if(!this.sourceBlock.decompose)throw Error("Blocks with mutator icons must include a decompose method");this.rootBlock=this.sourceBlock.decompose(this.miniWorkspaceBubble.getWorkspace());for(var e of this.rootBlock.getDescendants(!1))e.queueRender();this.rootBlock.setMovable(!1),this.rootBlock.setDeletable(!1);let n,i,u,m;e=(m=(n=this.miniWorkspaceBubble)==null||(i=n.getWorkspace())==null||(u=i.getFlyout())==null?void 0:u.getWidth())!=null?m:0,this.rootBlock.moveBy(this.rootBlock.RTL?-(e+a$):a$,a$)}addSaveConnectionsListener(){this.sourceBlock.saveConnections&&this.rootBlock&&(this.saveConnectionsListener=()=>{this.sourceBlock.saveConnections&&this.rootBlock&&this.sourceBlock.saveConnections(this.rootBlock)},this.saveConnectionsListener(),this.sourceBlock.workspace.addChangeListener(this.saveConnectionsListener))}createMiniWorkspaceChangeListener(){return e=>{s.MutatorIcon$$module$build$src$core$icons$mutator_icon.isIgnorableMutatorEvent(e)||this.updateWorkspacePid||(this.updateWorkspacePid=setTimeout(()=>{this.updateWorkspacePid=null,this.recomposeSourceBlock()},0))}}static isIgnorableMutatorEvent(e){return e.isUiEvent||I(e)||A(e)&&e.element==="disabled"}recomposeSourceBlock(){if(this.rootBlock){if(!this.sourceBlock.compose)throw Error("Blocks with mutator icons must include a compose method");var e=s.getGroup$$module$build$src$core$events$utils();e||s.setGroup$$module$build$src$core$events$utils(!0);var n=ki.getExtraBlockState_(this.sourceBlock);this.sourceBlock.compose(this.rootBlock);var i=ki.getExtraBlockState_(this.sourceBlock);n!==i&&W(new(G(oe.BLOCK_CHANGE))(this.sourceBlock,"mutation",null,n,i)),s.setGroup$$module$build$src$core$events$utils(e)}}getWorkspace(){let e;return(e=this.miniWorkspaceBubble)==null?void 0:e.getWorkspace()}},s.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE=vn.MUTATOR,s.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT=1,s.MutatorIcon$$module$build$src$core$icons$mutator_icon;var bh=Object.create(null),NM={allExtensions:bh};s.register$$module$build$src$core$extensions("parent_tooltip_when_inline",Pc);var Vo={TEST_ONLY:NM};Vo.apply=Nt,Vo.buildTooltipForDropdown=s.buildTooltipForDropdown$$module$build$src$core$extensions,Vo.buildTooltipWithFieldText=s.buildTooltipWithFieldText$$module$build$src$core$extensions,Vo.isRegistered=Js,Vo.register=s.register$$module$build$src$core$extensions,Vo.registerMixin=s.registerMixin$$module$build$src$core$extensions,Vo.registerMutator=s.registerMutator$$module$build$src$core$extensions,Vo.runAfterPageLoad=Ef,Vo.unregister=dl;var ut;(function(e){e[e.WIN_KEY_FF_LINUX=0]="WIN_KEY_FF_LINUX",e[e.MAC_ENTER=3]="MAC_ENTER",e[e.BACKSPACE=8]="BACKSPACE",e[e.TAB=9]="TAB",e[e.NUM_CENTER=12]="NUM_CENTER",e[e.ENTER=13]="ENTER",e[e.SHIFT=16]="SHIFT",e[e.CTRL=17]="CTRL",e[e.ALT=18]="ALT",e[e.PAUSE=19]="PAUSE",e[e.CAPS_LOCK=20]="CAPS_LOCK",e[e.ESC=27]="ESC",e[e.SPACE=32]="SPACE",e[e.PAGE_UP=33]="PAGE_UP",e[e.PAGE_DOWN=34]="PAGE_DOWN",e[e.END=35]="END",e[e.HOME=36]="HOME",e[e.LEFT=37]="LEFT",e[e.UP=38]="UP",e[e.RIGHT=39]="RIGHT",e[e.DOWN=40]="DOWN",e[e.PLUS_SIGN=43]="PLUS_SIGN",e[e.PRINT_SCREEN=44]="PRINT_SCREEN",e[e.INSERT=45]="INSERT",e[e.DELETE=46]="DELETE",e[e.ZERO=48]="ZERO",e[e.ONE=49]="ONE",e[e.TWO=50]="TWO",e[e.THREE=51]="THREE",e[e.FOUR=52]="FOUR",e[e.FIVE=53]="FIVE",e[e.SIX=54]="SIX",e[e.SEVEN=55]="SEVEN",e[e.EIGHT=56]="EIGHT",e[e.NINE=57]="NINE",e[e.FF_SEMICOLON=59]="FF_SEMICOLON",e[e.FF_EQUALS=61]="FF_EQUALS",e[e.FF_DASH=173]="FF_DASH",e[e.FF_HASH=163]="FF_HASH",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.AT_SIGN=64]="AT_SIGN",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.META=91]="META",e[e.WIN_KEY_RIGHT=92]="WIN_KEY_RIGHT",e[e.CONTEXT_MENU=93]="CONTEXT_MENU",e[e.NUM_ZERO=96]="NUM_ZERO",e[e.NUM_ONE=97]="NUM_ONE",e[e.NUM_TWO=98]="NUM_TWO",e[e.NUM_THREE=99]="NUM_THREE",e[e.NUM_FOUR=100]="NUM_FOUR",e[e.NUM_FIVE=101]="NUM_FIVE",e[e.NUM_SIX=102]="NUM_SIX",e[e.NUM_SEVEN=103]="NUM_SEVEN",e[e.NUM_EIGHT=104]="NUM_EIGHT",e[e.NUM_NINE=105]="NUM_NINE",e[e.NUM_MULTIPLY=106]="NUM_MULTIPLY",e[e.NUM_PLUS=107]="NUM_PLUS",e[e.NUM_MINUS=109]="NUM_MINUS",e[e.NUM_PERIOD=110]="NUM_PERIOD",e[e.NUM_DIVISION=111]="NUM_DIVISION",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.NUMLOCK=144]="NUMLOCK",e[e.SCROLL_LOCK=145]="SCROLL_LOCK",e[e.FIRST_MEDIA_KEY=166]="FIRST_MEDIA_KEY",e[e.LAST_MEDIA_KEY=183]="LAST_MEDIA_KEY",e[e.SEMICOLON=186]="SEMICOLON",e[e.DASH=189]="DASH",e[e.EQUALS=187]="EQUALS",e[e.COMMA=188]="COMMA",e[e.PERIOD=190]="PERIOD",e[e.SLASH=191]="SLASH",e[e.APOSTROPHE=192]="APOSTROPHE",e[e.TILDE=192]="TILDE",e[e.SINGLE_QUOTE=222]="SINGLE_QUOTE",e[e.OPEN_SQUARE_BRACKET=219]="OPEN_SQUARE_BRACKET",e[e.BACKSLASH=220]="BACKSLASH",e[e.CLOSE_SQUARE_BRACKET=221]="CLOSE_SQUARE_BRACKET",e[e.WIN_KEY=224]="WIN_KEY",e[e.MAC_FF_META=224]="MAC_FF_META",e[e.MAC_WK_CMD_LEFT=91]="MAC_WK_CMD_LEFT",e[e.MAC_WK_CMD_RIGHT=93]="MAC_WK_CMD_RIGHT",e[e.WIN_IME=229]="WIN_IME",e[e.VK_NONAME=252]="VK_NONAME",e[e.PHANTOM=255]="PHANTOM"})(ut||(ut={}));var Bl={};Bl.arc=Dt,Bl.curve=ln,Bl.line=_a,Bl.lineOnAxis=Me,Bl.lineTo=$s,Bl.moveBy=Lt,Bl.moveTo=an,Bl.point=Ke;var dn={};dn.Coordinate=ke,dn.KeyCodes=ut,dn.Rect=St,dn.Size=Re,dn.Svg=Z,dn.aria=Pn,dn.array=Qf,dn.browserEvents=No,dn.colour=c,dn.deprecation=eh,dn.dom=pn,dn.extensions=Vo,dn.idGenerator=Vf,dn.math=Xt,dn.object=$w,dn.parsing=p,dn.string=Ma,dn.style=oo,dn.svgMath=io,dn.svgPaths=Bl,dn.toolbox=Hn,dn.userAgent=qg,dn.xml=Br;var yw=class extends xt{constructor(e,n,i){super(e,n,i),this.workspace=e,this.anchor=n,this.ownerRect=i,this.resizePointerMoveListener=this.resizePointerUpListener=null,this.textChangeListeners=[],this.sizeChangeListeners=[],this.text="",this.DEFAULT_SIZE=new Re(160+xt.DOUBLE_BORDER,80+xt.DOUBLE_BORDER),this.MIN_SIZE=new Re(45+xt.DOUBLE_BORDER,20+xt.DOUBLE_BORDER),this.editable=!0,Ge(this.svgRoot,"blocklyTextInputBubble"),{inputRoot:this.inputRoot,textArea:this.textArea}=this.createEditor(this.contentContainer),this.resizeGroup=this.createResizeHandle(this.svgRoot,e),this.setSize(this.DEFAULT_SIZE,!0)}getText(){return this.text}setText(e){this.text=e,this.textArea.value=e,this.onTextChange()}setEditable(e){(this.editable=e)?this.textArea.removeAttribute("readonly"):this.textArea.setAttribute("readonly","")}isEditable(){return this.editable}addTextChangeListener(e){this.textChangeListeners.push(e)}addSizeChangeListener(e){this.sizeChangeListeners.push(e)}createEditor(e){e=ue(Z.FOREIGNOBJECT,{x:xt.BORDER_WIDTH,y:xt.BORDER_WIDTH},e);const n=document.createElementNS(Is,"body");n.setAttribute("xmlns",Is),n.className="blocklyMinimalBody";const i=document.createElementNS(Is,"textarea");return i.className="blocklyTextarea blocklyText",i.setAttribute("dir",this.workspace.RTL?"RTL":"LTR"),n.appendChild(i),e.appendChild(n),this.bindTextAreaEvents(i),setTimeout(()=>{i.focus()},0),{inputRoot:e,textArea:i}}bindTextAreaEvents(e){je(e,"wheel",this,n=>{n.stopPropagation()}),je(e,"focus",this,this.onStartEdit,!0),je(e,"change",this,this.onTextChange)}createResizeHandle(e,n){return e=ue(Z.IMAGE,{class:"blocklyResizeHandle",href:`${n.options.pathToMedia}resize-handle.svg`},e),je(e,"pointerdown",this,this.onResizePointerDown),e}setSize(e,n=!1){e.width=Math.max(e.width,this.MIN_SIZE.width),e.height=Math.max(e.height,this.MIN_SIZE.height);const i=e.width-xt.DOUBLE_BORDER,u=e.height-xt.DOUBLE_BORDER;this.inputRoot.setAttribute("width",`${i}`),this.inputRoot.setAttribute("height",`${u}`),this.resizeGroup.setAttribute("y",`${u}`),this.workspace.RTL?this.resizeGroup.setAttribute("x",`${-xt.DOUBLE_BORDER}`):this.resizeGroup.setAttribute("x",`${i}`),super.setSize(e,n),this.onSizeChange()}getSize(){return super.getSize()}onResizePointerDown(e){this.bringToFront(),or(e)||(Oc(this.workspace,e,new ke(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=je(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=je(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),e.stopPropagation()}onResizePointerUp(e){Mt(),this.resizePointerUpListener&&(ft(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(ft(this.resizePointerMoveListener),this.resizePointerMoveListener=null)}onResizePointerMove(e){e=Ac(this.workspace,e),this.setSize(new Re(this.workspace.RTL?-e.x:e.x,e.y),!1),this.onSizeChange()}onStartEdit(){this.bringToFront()&&this.textArea.focus()}onTextChange(){this.text=this.textArea.value;for(const e of this.textChangeListeners)e()}onSizeChange(){for(const e of this.sizeChangeListeners)e()}};Yn(`
.blocklyTextInputBubble .blocklyTextarea {
  background-color: var(--commentFillColour);
  border: 0;
  box-sizing: border-box;
  display: block;
  outline: 0;
  padding: 5px;
  resize: none;
  width: 100%;
  height: 100%;
}
`);var Cv={};Cv.register=_i,Cv.unregister=Dc;var Iv=17,Tw=160,bw=80,Fl=class extends i${constructor(e){super(e),this.sourceBlock=e,this.textInputBubble=null,this.text="",this.bubbleSize=new Re(Tw,bw),this.bubbleVisiblity=!1}getType(){return Fl.TYPE}initView(e){this.svgRoot||(super.initView(e),ue(Z.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},this.svgRoot),ue(Z.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},this.svgRoot),ue(Z.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},this.svgRoot),Ge(this.svgRoot,"blockly-icon-comment"))}dispose(){super.dispose();let e;(e=this.textInputBubble)==null||e.dispose()}getWeight(){return Fl.WEIGHT}getSize(){return new Re(Iv,Iv)}applyColour(){super.applyColour();const e=this.sourceBlock.style.colourPrimary;let n;(n=this.textInputBubble)==null||n.setColour(e)}updateEditable(){const e=this,n=()=>super.updateEditable;return ve.asyncExecutePromiseGeneratorFunction(function*(){n().call(e),e.bubbleIsVisible()&&(yield e.setBubbleVisible(!1),yield e.setBubbleVisible(!0))})}onLocationChange(e){super.onLocationChange(e),e=this.getAnchorLocation();let n;(n=this.textInputBubble)==null||n.setAnchorLocation(e)}setText(e){const n=this.text;W(new(G(oe.BLOCK_CHANGE))(this.sourceBlock,"comment",null,n,e)),this.text=e;let i;(i=this.textInputBubble)==null||i.setText(this.text)}getText(){return this.text}setBubbleSize(e){this.bubbleSize=e;let n;(n=this.textInputBubble)==null||n.setSize(this.bubbleSize,!0)}getBubbleSize(){return this.bubbleSize}saveState(){return this.text?{text:this.text,pinned:this.bubbleIsVisible(),height:this.bubbleSize.height,width:this.bubbleSize.width}:null}loadState(e){let n;this.text=(n=e.text)!=null?n:"";let i,u;this.bubbleSize=new Re((i=e.width)!=null?i:Tw,(u=e.height)!=null?u:bw);let m;this.bubbleVisiblity=(m=e.pinned)!=null?m:!1,this.setBubbleVisible(this.bubbleVisiblity)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}onTextChange(){if(this.textInputBubble){var e=this.textInputBubble.getText();this.text!==e&&(W(new(G(oe.BLOCK_CHANGE))(this.sourceBlock,"comment",null,this.text,e)),this.text=e)}}onSizeChange(){this.textInputBubble&&(this.bubbleSize=this.textInputBubble.getSize())}bubbleIsVisible(){return this.bubbleVisiblity}setBubbleVisible(e){const n=this;return ve.asyncExecutePromiseGeneratorFunction(function*(){n.bubbleVisiblity!==e&&(n.bubbleVisiblity=e,yield ir(),!n.sourceBlock.rendered||n.sourceBlock.isInFlyout||n.sourceBlock.isInsertionMarker()||(e?(n.sourceBlock.isEditable()?n.showEditableBubble():n.showNonEditableBubble(),n.applyColour()):n.hideBubble(),W(new(G(oe.BUBBLE_OPEN))(n.sourceBlock,e,"comment"))))})}showEditableBubble(){this.createBubble();let e;(e=this.textInputBubble)==null||e.addTextChangeListener(()=>this.onTextChange());let n;(n=this.textInputBubble)==null||n.addSizeChangeListener(()=>this.onSizeChange())}showNonEditableBubble(){this.createBubble();let e;(e=this.textInputBubble)==null||e.setEditable(!1)}createBubble(){this.textInputBubble=new yw(this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect()),this.textInputBubble.setText(this.getText()),this.textInputBubble.setSize(this.bubbleSize,!0)}hideBubble(){let e;(e=this.textInputBubble)==null||e.dispose(),this.textInputBubble=null}getAnchorLocation(){const e=Iv/2;return ke.sum(this.workspaceLocation,new ke(e,e))}getBubbleOwnerRect(){return this.sourceBlock.getBoundingRectangleWithoutChildren()}};Fl.TYPE=vn.COMMENT,Fl.WEIGHT=3,_i(Fl.TYPE,Fl);var Ew=class extends Error{constructor(e){super(`Tried to append an icon of type ${e.getType()} when an icon of that type already exists on the block. Use getIcon to access the existing icon.`),this.icon=e}},ww={};ww.DuplicateIconType=Ew;var Sw=class extends xt{constructor(e,n,i,u){super(n,i,u),this.text=e,this.workspace=n,this.anchor=i,this.ownerRect=u,this.paragraph=this.stringToSvg(e,this.contentContainer),this.updateBubbleSize()}getText(){return this.text}setText(e){this.text=e,Q(this.paragraph),this.paragraph=this.stringToSvg(e,this.contentContainer),this.updateBubbleSize()}stringToSvg(e,n){return n=this.createParagraph(n),e=this.createSpans(n,e),this.workspace.RTL&&this.rightAlignSpans(n.getBBox().width,e),n}createParagraph(e){return ue(Z.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:xt.BORDER_WIDTH},e)}createSpans(e,n){return n.split(`
`).map(i=>{const u=ue(Z.TSPAN,{dy:"1em",x:xt.BORDER_WIDTH},e);return i=document.createTextNode(i),u.appendChild(i),u})}rightAlignSpans(e,n){for(const i of n)i.setAttribute("text-anchor","end"),i.setAttribute("x",`${e+xt.BORDER_WIDTH}`)}updateBubbleSize(){const e=this.paragraph.getBBox();this.setSize(new Re(e.width+2*xt.BORDER_WIDTH,e.height+2*xt.BORDER_WIDTH),!0)}},Rv=17,Ul=class extends i${constructor(e){super(e),this.sourceBlock=e,this.textMap=new Map,this.textBubble=null}getType(){return Ul.TYPE}initView(e){this.svgRoot||(super.initView(e),ue(Z.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},this.svgRoot),ue(Z.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},this.svgRoot),ue(Z.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},this.svgRoot),Ge(this.svgRoot,"blockly-icon-warning"))}dispose(){super.dispose();let e;(e=this.textBubble)==null||e.dispose()}getWeight(){return Ul.WEIGHT}getSize(){return new Re(Rv,Rv)}applyColour(){super.applyColour();let e;(e=this.textBubble)==null||e.setColour(this.sourceBlock.style.colourPrimary)}updateCollapsed(){}isShownWhenCollapsed(){return!0}onLocationChange(e){super.onLocationChange(e);let n;(n=this.textBubble)==null||n.setAnchorLocation(this.getAnchorLocation())}addMessage(e,n){if(this.textMap.get(n)===e)return this;e?this.textMap.set(n,e):this.textMap.delete(n);let i;return(i=this.textBubble)==null||i.setText(this.getText()),this}getText(){return[...this.textMap.values()].join(`
`)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.textBubble}setBubbleVisible(e){const n=this;return ve.asyncExecutePromiseGeneratorFunction(function*(){if(n.bubbleIsVisible()!==e){if(yield ir(),e)n.textBubble=new Sw(n.getText(),n.sourceBlock.workspace,n.getAnchorLocation(),n.getBubbleOwnerRect()),n.applyColour();else{let i;(i=n.textBubble)==null||i.dispose(),n.textBubble=null}W(new(G(oe.BUBBLE_OPEN))(n.sourceBlock,e,"warning"))}})}getAnchorLocation(){const e=Rv/2;return ke.sum(this.workspaceLocation,new ke(e,e))}getBubbleOwnerRect(){const e=this.sourceBlock.getSvgRoot().getBBox();return new St(e.y,e.y+e.height,e.x,e.x+e.width)}};Ul.TYPE=vn.WARNING,Ul.WEIGHT=2;var Fa={};Fa.CommentIcon=Fl,Fa.Icon=i$,Fa.IconType=vn,Fa.MutatorIcon=s.MutatorIcon$$module$build$src$core$icons$mutator_icon,Fa.WarningIcon=Ul,Fa.exceptions=ww,Fa.registry=Cv,s.Names$$module$build$src$core$names=class{constructor(e,n){this.db=new Map,this.dbReverse=new Set,this.variableMap=null,this.variablePrefix=n||"",this.reservedWords=new Set(e?e.split(","):[])}reset(){this.db.clear(),this.dbReverse.clear(),this.variableMap=null}setVariableMap(e){this.variableMap=e}getNameForUserVariable(e){return this.variableMap?(e=this.variableMap.getVariableById(e))?e.name:null:(console.warn(`Deprecated call to Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:
Blockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());`),null)}populateVariables(e){e=s.allUsedVarModels$$module$build$src$core$variables(e);for(let n=0;n<e.length;n++)this.getName(e[n].getId(),s.NameType$$module$build$src$core$names.VARIABLE)}populateProcedures(e){throw Error("The implementation of populateProcedures should be monkey-patched in by blockly.ts")}getName(e,n){let i=e;n===s.NameType$$module$build$src$core$names.VARIABLE&&(e=this.getNameForUserVariable(e))&&(i=e),e=i.toLowerCase();const u=n===s.NameType$$module$build$src$core$names.VARIABLE||n===s.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"";this.db.has(n)||this.db.set(n,new Map);const m=this.db.get(n);return m.has(e)?u+m.get(e):(n=this.getDistinctName(i,n),m.set(e,n.substr(u.length)),n)}getUserNames(e){let n;return(e=(n=this.db.get(e))==null?void 0:n.keys())?Array.from(e):[]}getDistinctName(e,n){e=this.safeName(e);let i=null,u,m;for(;this.dbReverse.has(e+((u=i)!=null?u:""))||this.reservedWords.has(e+((m=i)!=null?m:""));)i=i?i+1:2;let T;return e+=(T=i)!=null?T:"",this.dbReverse.add(e),(n===s.NameType$$module$build$src$core$names.VARIABLE||n===s.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"")+e}safeName(e){return e?(e=encodeURI(e.replace(/ /g,"_")).replace(/[^\w]/g,"_"),"0123456789".includes(e[0])&&(e="my_"+e)):e=s.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed",e}static equals(e,n){return e.toLowerCase()===n.toLowerCase()}},(function(e){e=e.NameType||(e.NameType={}),e.DEVELOPER_VARIABLE="DEVELOPER_VARIABLE",e.VARIABLE="VARIABLE",e.PROCEDURE="PROCEDURE"})(s.Names$$module$build$src$core$names||(s.Names$$module$build$src$core$names={})),s.NameType$$module$build$src$core$names=s.Names$$module$build$src$core$names.NameType,s.Names$$module$build$src$core$names.DEVELOPER_VARIABLE_TYPE=s.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE,s.NameType$$module$build$src$core$names,s.Names$$module$build$src$core$names;var Cw=class extends Map{constructor(){super()}set(e,n){return this.get(e)===n?this:(super.set(e,n),cr(n)&&n.startPublishing(),this)}delete(e){const n=this.get(e);return e=super.delete(e),e&&(cr(n)&&n.stopPublishing(),e)}clear(){if(this.size)for(const e of this.keys())this.delete(e)}add(e){return this.set(e.getId(),e)}getProcedures(){return[...this.values()]}},c$,Gr;c$="PROCEDURE",s.DEFAULT_ARG$$module$build$src$core$procedures="x",Gr={CATEGORY_NAME:c$,DEFAULT_ARG:s.DEFAULT_ARG$$module$build$src$core$procedures},Gr.ObservableProcedureMap=Cw,Gr.allProcedures=ur,Gr.findLegalName=s.findLegalName$$module$build$src$core$procedures,Gr.flyoutCategory=eo,Gr.getCallers=dr,Gr.getDefinition=s.getDefinition$$module$build$src$core$procedures,Gr.isNameUsed=vs,Gr.isProcedureBlock=_s,Gr.mutateCallers=s.mutateCallers$$module$build$src$core$procedures,Gr.mutatorOpenListener=Bc,Gr.rename=s.rename$$module$build$src$core$procedures;var LM=class{constructor(){this.NONE=0,this.FIELD=1,this.HAT=2,this.ICON=4,this.SPACER=8,this.BETWEEN_ROW_SPACER=16,this.IN_ROW_SPACER=32,this.EXTERNAL_VALUE_INPUT=64,this.INPUT=128,this.INLINE_INPUT=256,this.STATEMENT_INPUT=512,this.CONNECTION=1024,this.PREVIOUS_CONNECTION=2048,this.NEXT_CONNECTION=4096,this.OUTPUT_CONNECTION=8192,this.CORNER=16384,this.LEFT_SQUARE_CORNER=32768,this.LEFT_ROUND_CORNER=65536,this.RIGHT_SQUARE_CORNER=131072,this.RIGHT_ROUND_CORNER=262144,this.JAGGED_EDGE=524288,this.ROW=1048576,this.TOP_ROW=2097152,this.BOTTOM_ROW=4194304,this.INPUT_ROW=8388608,this.LEFT_CORNER=this.LEFT_SQUARE_CORNER|this.LEFT_ROUND_CORNER,this.RIGHT_CORNER=this.RIGHT_SQUARE_CORNER|this.RIGHT_ROUND_CORNER,this.nextTypeValue_=16777216}getType(e){return Object.prototype.hasOwnProperty.call(this,e)||(this[e]=this.nextTypeValue_,this.nextTypeValue_<<=1),this[e]}isField(e){return e.type&this.FIELD}isHat(e){return e.type&this.HAT}isIcon(e){return e.type&this.ICON}isSpacer(e){return e.type&this.SPACER}isInRowSpacer(e){return e.type&this.IN_ROW_SPACER}isInput(e){return e.type&this.INPUT}isExternalInput(e){return e.type&this.EXTERNAL_VALUE_INPUT}isInlineInput(e){return e.type&this.INLINE_INPUT}isStatementInput(e){return e.type&this.STATEMENT_INPUT}isPreviousConnection(e){return e.type&this.PREVIOUS_CONNECTION}isNextConnection(e){return e.type&this.NEXT_CONNECTION}isPreviousOrNextConnection(e){return e.type&(this.PREVIOUS_CONNECTION|this.NEXT_CONNECTION)}isLeftRoundedCorner(e){return e.type&this.LEFT_ROUND_CORNER}isRightRoundedCorner(e){return e.type&this.RIGHT_ROUND_CORNER}isLeftSquareCorner(e){return e.type&this.LEFT_SQUARE_CORNER}isRightSquareCorner(e){return e.type&this.RIGHT_SQUARE_CORNER}isCorner(e){return e.type&this.CORNER}isJaggedEdge(e){return e.type&this.JAGGED_EDGE}isRow(e){return e.type&this.ROW}isBetweenRowSpacer(e){return e.type&this.BETWEEN_ROW_SPACER}isTopRow(e){return e.type&this.TOP_ROW}isBottomRow(e){return e.type&this.BOTTOM_ROW}isTopOrBottomRow(e){return e.type&(this.TOP_ROW|this.BOTTOM_ROW)}isInputRow(e){return e.type&this.INPUT_ROW}},Y=new LM,Ai=class{constructor(e){this.centerline=this.xPos=this.height=this.width=0,this.constants_=e,this.type=Y.NONE,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}},fm=class{constructor(e){this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasStatement=this.hasExternalInput=!1,this.statementEdge=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=!1,this.align=null,this.constants_=e,this.type=Y.ROW,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}getLastInput(){for(let e=this.elements.length-1;0<=e;e--){const n=this.elements[e];if(Y.isInput(n))return n}return null}measure(){throw Error("Unexpected attempt to measure a base Row.")}startsWithElemSpacer(){return!0}endsWithElemSpacer(){return!0}getFirstSpacer(){for(let e=0;e<this.elements.length;e++){const n=this.elements[e];if(Y.isSpacer(n))return n}return null}getLastSpacer(){for(let e=this.elements.length-1;0<=e;e--){const n=this.elements[e];if(Y.isSpacer(n))return n}return null}},kv=class extends fm{constructor(e){super(e),this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0,this.type|=Y.BOTTOM_ROW}hasLeftSquareCorner(e){return!!e.outputConnection||!!e.getNextBlock()}hasRightSquareCorner(e){return!0}measure(){let e=0,n=0,i=0;for(let u=0;u<this.elements.length;u++){const m=this.elements[u];n+=m.width,Y.isSpacer(m)||(Y.isNextConnection(m)?i=Math.max(i,m.height):e=Math.max(e,m.height))}this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,e)+i,this.descenderHeight=i,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},Vl=class extends Ai{constructor(e,n){super(e),this.connectionModel=n,this.type|=Y.CONNECTION,this.shape=this.constants_.shapeFor(n),this.isDynamicShape="isDynamic"in this.shape&&this.shape.isDynamic,this.highlighted=n.isHighlighted()}},Ua=class extends Vl{constructor(e,n){super(e,n.connection),this.input=n,this.connectionOffsetY=this.connectionOffsetX=0,this.type|=Y.INPUT,this.align=n.align,(this.connectedBlock=n.connection&&n.connection.targetBlock()?n.connection.targetBlock():null)?(e=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=e.width,this.connectedBlockHeight=e.height):this.connectedBlockHeight=this.connectedBlockWidth=0}},u$=class extends Ua{constructor(e,n){super(e,n),this.height=0,this.type|=Y.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width}},Eh=class extends Ai{constructor(e,n,i){super(e),this.field=n,this.parentInput=i,this.isEditable=n.EDITABLE,this.flipRtl=n.getFlipRtl(),this.type|=Y.FIELD,e=this.field.getSize(),this.height=e.height,this.width=e.width}},xv=class extends Ai{constructor(e){super(e),this.type|=Y.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height}},Iw=class extends Ai{constructor(e,n){super(e),this.icon=n,this.flipRtl=!1,this.type|=Y.ICON,e=n.getSize(),this.height=e.height,this.width=e.width}},As=class extends Ai{constructor(e,n){super(e),this.type=this.type|Y.SPACER|Y.IN_ROW_SPACER,this.width=n,this.height=this.constants_.SPACER_DEFAULT_HEIGHT}},Ov=class extends Ua{constructor(e,n){super(e,n),this.type|=Y.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY="connectionOffsetY"in this.shape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX="connectionOffsetX"in this.shape?this.shape.connectionOffsetX(this.connectionWidth):0}},mm=class extends Ua{constructor(e,n){super(e,n),this.type|=Y.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width}},Av=class extends fm{constructor(e){super(e),this.connectedBlockWidths=0,this.type|=Y.INPUT_ROW}measure(){this.width=this.minWidth,this.height=this.minHeight;let e=0;for(let n=0;n<this.elements.length;n++){const i=this.elements[n];this.width+=i.width,Y.isInput(i)&&i instanceof Ua&&(Y.isStatementInput(i)&&i instanceof mm?e+=i.connectedBlockWidth:Y.isExternalInput(i)&&i instanceof u$&&i.connectedBlockWidth!==0&&(e+=i.connectedBlockWidth-i.connectionWidth)),Y.isSpacer(i)||(this.height=Math.max(this.height,i.height))}this.connectedBlockWidths=e,this.widthWithConnectedBlocks=this.width+e}endsWithElemSpacer(){return!this.hasExternalInput&&!this.hasStatement}},Rw=class extends Ai{constructor(e){super(e),this.type|=Y.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width}},kw=class extends Vl{constructor(e,n){super(e,n),this.type|=Y.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},xw=class extends Vl{constructor(e,n){super(e,n),this.connectionOffsetX=0,this.type|=Y.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP}},Ow=class extends Vl{constructor(e,n){super(e,n),this.type|=Y.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},gm=class extends Ai{constructor(e,n){super(e),this.type=(n&&n!=="left"?Y.RIGHT_ROUND_CORNER:Y.LEFT_ROUND_CORNER)|Y.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2}},Nv=class extends fm{constructor(e,n,i){super(e),this.height=n,this.width=i,this.precedesStatement=this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.type=this.type|Y.SPACER|Y.BETWEEN_ROW_SPACER,this.elements=[new As(this.constants_,i)]}measure(){}},$m=class extends Ai{constructor(e,n){super(e),this.type=(n&&n!=="left"?Y.RIGHT_SQUARE_CORNER:Y.LEFT_SQUARE_CORNER)|Y.CORNER,this.width=this.height=this.constants_.NO_PADDING}},Lv=class extends fm{constructor(e){super(e),this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null,this.type|=Y.TOP_ROW}hasLeftSquareCorner(e){const n=(e.hat?e.hat==="cap":this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection,i=e.getPreviousBlock();return!!e.outputConnection||n||(i?i.getNextBlock()===e:!1)}hasRightSquareCorner(e){return!0}measure(){let e=0,n=0,i=0;for(let u=0;u<this.elements.length;u++){const m=this.elements[u];n+=m.width,Y.isSpacer(m)||(Y.isHat(m)&&m instanceof xv?i=Math.max(i,m.ascenderHeight):e=Math.max(e,m.height))}this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,e)+i,this.capline=this.ascenderHeight=i,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},d$=class{constructor(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.CORNER_RADIUS=8,this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.defs=null,this.embossFilterId="",this.embossFilter=null,this.disabledPatternId="",this.disabledPattern=null,this.debugFilterId="",this.cssNode=this.debugFilter=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2},this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=Lt(0,0),this.FIELD_TEXT_BASELINE_CENTER=!0,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2)}init(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()}setTheme(e){this.blockStyles=Object.create(null);const n=e.blockStyles;for(const i in n)this.blockStyles[i]=this.validatedBlockStyle_(n[i]);this.setDynamicProperties_(e)}setDynamicProperties_(e){this.setFontConstants_(e),this.setComponentConstants_(e),this.ADD_START_HATS=e.startHats!==void 0?e.startHats:this.ADD_START_HATS}setFontConstants_(e){e.fontStyle&&e.fontStyle.family&&(this.FIELD_TEXT_FONTFAMILY=e.fontStyle.family),e.fontStyle&&e.fontStyle.weight&&(this.FIELD_TEXT_FONTWEIGHT=e.fontStyle.weight),e.fontStyle&&e.fontStyle.size&&(this.FIELD_TEXT_FONTSIZE=e.fontStyle.size),e=_r("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=e.height,this.FIELD_TEXT_BASELINE=e.baseline}setComponentConstants_(e){this.CURSOR_COLOUR=e.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=e.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=e.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(e.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY}getBlockStyleForColour(e){const n="auto_"+e;return this.blockStyles[n]||(this.blockStyles[n]=this.createBlockStyle_(e)),{style:this.blockStyles[n],name:n}}getBlockStyle(e){return this.blockStyles[e||""]||(e&&e.startsWith("auto_")?this.getBlockStyleForColour(e.substring(5)).style:this.createBlockStyle_("#000000"))}createBlockStyle_(e){return this.validatedBlockStyle_({colourPrimary:e})}validatedBlockStyle_(e){const n={};return e&&Object.assign(n,e),e=da(n.colourPrimary||"#000"),n.colourPrimary=e.hex,n.colourSecondary=n.colourSecondary?da(n.colourSecondary).hex:this.generateSecondaryColour_(n.colourPrimary),n.colourTertiary=n.colourTertiary?da(n.colourTertiary).hex:this.generateTertiaryColour_(n.colourPrimary),n.hat=n.hat||"",n}generateSecondaryColour_(e){return gs("#fff",e,.6)||e}generateTertiaryColour_(e){return gs("#fff",e,.3)||e}dispose(){this.embossFilter&&Q(this.embossFilter),this.disabledPattern&&Q(this.disabledPattern),this.debugFilter&&Q(this.debugFilter),this.cssNode=null}makeJaggedTeeth(){const e=this.JAGGED_TEETH_HEIGHT,n=this.JAGGED_TEETH_WIDTH,i=_a([Ke(n,e/4),Ke(2*-n,e/2),Ke(n,e/4)]);return{height:e,width:n,path:i}}makeStartHat(){const e=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH,i=ln("c",[Ke(30,-e),Ke(70,-e),Ke(n,0)]);return{height:e,width:n,path:i}}makePuzzleTab(){function e(T){T=T?-1:1;const N=-T;var H=i/2;const ge=H+2.5,Fe=H+.5,Yt=Ke(-n,T*H);return H=Ke(n,T*H),ln("c",[Ke(0,T*ge),Ke(-n,N*Fe),Yt])+ln("s",[Ke(n,2.5*N),H])}const n=this.TAB_WIDTH,i=this.TAB_HEIGHT,u=e(!0),m=e(!1);return{type:this.SHAPES.PUZZLE,width:n,height:i,pathDown:m,pathUp:u}}makeNotch(){function e(N){return _a([Ke(N*u,i),Ke(3*N,0),Ke(N*u,-i)])}const n=this.NOTCH_WIDTH,i=this.NOTCH_HEIGHT,u=(n-3)/2,m=e(1),T=e(-1);return{type:this.SHAPES.NOTCH,width:n,height:i,pathLeft:m,pathRight:T}}makeInsideCorners(){const e=this.CORNER_RADIUS,n=Dt("a","0 0,0",e,Ke(-e,e)),i=Dt("a","0 0,0",e,Ke(e,e));return{width:e,height:e,pathTop:n,pathBottom:i}}makeOutsideCorners(){const e=this.CORNER_RADIUS,n=Lt(0,e)+Dt("a","0 0,1",e,Ke(e,-e)),i=Dt("a","0 0,1",e,Ke(e,e)),u=Dt("a","0 0,1",e,Ke(-e,-e)),m=Dt("a","0 0,1",e,Ke(-e,e));return{topLeft:n,topRight:i,bottomRight:m,bottomLeft:u,rightHeight:e}}shapeFor(e){switch(e.type){case Ve.INPUT_VALUE:case Ve.OUTPUT_VALUE:return this.PUZZLE_TAB;case Ve.PREVIOUS_STATEMENT:case Ve.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}}createDom(e,n,i){this.injectCSS_(n,i),this.defs=ue(Z.DEFS,{},e),e=ue(Z.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},this.defs),ue(Z.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},e),n=ue(Z.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},e),ue(Z.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},n),ue(Z.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},e),ue(Z.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},e),this.embossFilterId=e.id,this.embossFilter=e,e=ue(Z.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},this.defs),ue(Z.RECT,{width:10,height:10,fill:"#aaa"},e),ue(Z.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},e),this.disabledPatternId=e.id,this.disabledPattern=e,this.createDebugFilter()}createDebugFilter(){if(!this.debugFilter){const e=ue(Z.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},this.defs),n=ue(Z.FECOMPONENTTRANSFER,{result:"outBlur"},e);ue(Z.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),ue(Z.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},e),ue(Z.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),this.debugFilterId=e.id,this.debugFilter=e}}injectCSS_(e,n){n=this.getCSS_(n),e="blockly-renderer-style-"+e,this.cssNode=document.getElementById(e);const i=n.join(`
`);this.cssNode?this.cssNode.firstChild.textContent=i:(n=document.createElement("style"),n.id=e,e=document.createTextNode(i),n.appendChild(e),document.head.insertBefore(n,document.head.firstChild),this.cssNode=n)}getCSS_(e){return[`${e} .blocklyText, `,`${e} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e} .blocklyText {`,"fill: #fff;","}",`${e} .blocklyNonEditableText>rect,`,`${e} .blocklyEditableText>rect {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"fill-opacity: .6;","stroke: none;","}",`${e} .blocklyNonEditableText>text,`,`${e} .blocklyEditableText>text {`,"fill: #000;","}",`${e} .blocklyFlyoutLabelText {`,"fill: #000;","}",`${e} .blocklyText.blocklyBubbleText {`,"fill: #000;","}",`${e} .blocklyEditableText:not(.editing):hover>rect {`,"stroke: #fff;","stroke-width: 2;","}",`${e} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"}",`${e} .blocklySelected>.blocklyPath {`,"stroke: #fc3;","stroke-width: 3px;","}",`${e} .blocklyHighlightedConnectionPath {`,"stroke: #fc3;","}",`${e} .blocklyReplaceable .blocklyPath {`,"fill-opacity: .5;","}",`${e} .blocklyReplaceable .blocklyPathLight,`,`${e} .blocklyReplaceable .blocklyPathDark {`,"display: none;","}",`${e} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},h$=class{constructor(e,n){this.inlinePath_=this.outlinePath_="",this.block_=e,this.info_=n,this.topLeft_=e.getRelativeToSurfaceXY(),this.constants_=n.getRenderer().getConstants()}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),this.block_.pathObject.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),this.recordSizeOnBlock_()}recordSizeOnBlock_(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren,this.block_.childlessWidth=this.info_.width}drawOutline_(){this.drawTop_();for(let e=1;e<this.info_.rows.length-1;e++){const n=this.info_.rows[e];n.hasJaggedEdge?this.drawJaggedEdge_(n):n.hasStatement?this.drawStatementInput_(n):n.hasExternalInput?this.drawValueInput_(n):this.drawRightSideRow_(n)}this.drawBottom_(),this.drawLeft_()}drawTop_(){const e=this.info_.topRow,n=e.elements;this.positionPreviousConnection_(),this.outlinePath_+=Lt(e.xPos,this.info_.startY);for(let i=0,u;u=n[i];i++)Y.isLeftRoundedCorner(u)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:Y.isRightRoundedCorner(u)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:Y.isPreviousConnection(u)&&u instanceof Vl?this.outlinePath_+=u.shape.pathLeft:Y.isHat(u)?this.outlinePath_+=this.constants_.START_HAT.path:Y.isSpacer(u)&&(this.outlinePath_+=Me("h",u.width));this.outlinePath_+=Me("v",e.height)}drawJaggedEdge_(e){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+Me("v",e.height-this.constants_.JAGGED_TEETH.height)}drawValueInput_(e){const n=e.getLastInput();this.positionExternalValueConnection_(e);const i=Bt(n.shape)?n.shape.pathDown(n.height):n.shape.pathDown;this.outlinePath_+=Me("H",n.xPos+n.width)+i+Me("v",e.height-n.connectionHeight)}drawStatementInput_(e){var n=e.getLastInput();if(n){var i=n.xPos+n.notchOffset+n.shape.width;n=n.shape.pathRight+Me("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var u=e.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=Me("H",i)+n+Me("v",u)+this.constants_.INSIDE_CORNERS.pathBottom+Me("H",e.xPos+e.width),this.positionStatementInputConnection_(e)}}drawRightSideRow_(e){this.outlinePath_+=Me("V",e.yPos+e.height)}drawBottom_(){const e=this.info_.bottomRow,n=e.elements;this.positionNextConnection_();let i=0,u="";for(let m=n.length-1,T;T=n[m];m--)Y.isNextConnection(T)&&T instanceof Vl?u+=T.shape.pathRight:Y.isLeftSquareCorner(T)?u+=Me("H",e.xPos):Y.isLeftRoundedCorner(T)?u+=this.constants_.OUTSIDE_CORNERS.bottomLeft:Y.isRightRoundedCorner(T)?(u+=this.constants_.OUTSIDE_CORNERS.bottomRight,i=this.constants_.OUTSIDE_CORNERS.rightHeight):Y.isSpacer(T)&&(u+=Me("h",-1*T.width));this.outlinePath_+=Me("V",e.baseline-i),this.outlinePath_+=u}drawLeft_(){var e=this.info_.outputConnection;if(this.positionOutputConnection_(),e){const n=e.connectionOffsetY+e.height;e=Bt(e.shape)?e.shape.pathUp(e.height):e.shape.pathUp,this.outlinePath_+=Me("V",n)+e}this.outlinePath_+="z"}drawInternals_(){for(let e=0,n;n=this.info_.rows[e];e++)for(let i=0,u;u=n.elements[i];i++)Y.isInlineInput(u)?this.drawInlineInput_(u):(Y.isIcon(u)||Y.isField(u))&&this.layoutField_(u)}layoutField_(e){const n=e.centerline-e.height/2;let i=e.xPos;var u="";this.info_.RTL&&(i=-(i+e.width),e.flipRtl&&(i+=e.width,u="scale(-1 1)")),Y.isIcon(e)?(u=e.icon,u.setOffsetInBlock(new ke(i,n)),this.info_.isInsertionMarker&&u.hideForInsertionMarker()):(e=e.field.getSvgRoot(),e.setAttribute("transform","translate("+i+","+n+")"+u),this.info_.isInsertionMarker&&e.setAttribute("display","none"))}drawInlineInput_(e){const n=e.width,i=e.height,u=e.connectionOffsetY,m=e.connectionHeight+u;this.inlinePath_+=an(e.xPos+e.connectionWidth,e.centerline-i/2)+Me("v",u)+e.shape.pathDown+Me("v",i-m)+Me("h",n-e.connectionWidth)+Me("v",-i)+"z",this.positionInlineInputConnection_(e)}positionInlineInputConnection_(e){const n=e.centerline-e.height/2;if(e.connectionModel){let i=e.xPos+e.connectionWidth+e.connectionOffsetX;this.info_.RTL&&(i*=-1),e.connectionModel.setOffsetInBlock(i,n+e.connectionOffsetY)}}positionStatementInputConnection_(e){const n=e.getLastInput();if(n!=null&&n.connectionModel){let i=e.xPos+e.statementEdge+n.notchOffset;this.info_.RTL&&(i*=-1),n.connectionModel.setOffsetInBlock(i,e.yPos)}}positionExternalValueConnection_(e){const n=e.getLastInput();if(n&&n.connectionModel){let i=e.xPos+e.width;this.info_.RTL&&(i*=-1),n.connectionModel.setOffsetInBlock(i,e.yPos)}}positionPreviousConnection_(){const e=this.info_.topRow;if(e.connection){const n=e.xPos+e.notchOffset;e.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-n:n,0)}}positionNextConnection_(){const e=this.info_.bottomRow;if(e.connection){const n=e.connection,i=n.xPos;n.connectionModel.setOffsetInBlock(this.info_.RTL?-i:i,e.baseline)}}positionOutputConnection_(){if(this.info_.outputConnection){const e=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-e:e,this.info_.outputConnection.connectionOffsetY)}}updateConnectionHighlights(){for(const e of this.info_.rows)for(const n of e.elements)if(n instanceof Vl)if(n.highlighted)this.drawConnectionHighlightPath(n);else{let i,u;(u=(i=this.block_.pathObject).removeConnectionHighlight)==null||u.call(i,n.connectionModel)}}drawConnectionHighlightPath(e){const n=e.connectionModel;e=n.type===Ve.INPUT_VALUE||n.type===Ve.OUTPUT_VALUE?this.getExpressionConnectionHighlightPath(e):this.getStatementConnectionHighlightPath(e);const i=n.getSourceBlock();let u,m;(m=(u=i.pathObject).addConnectionHighlight)==null||m.call(u,n,e,n.getOffsetInBlock(),i.RTL)}getExpressionConnectionHighlightPath(e){let n="";return Bt(e.shape)?n=e.shape.pathDown(e.height):rs(e.shape)&&(n=e.shape.pathDown),e=this.constants_.TAB_OFFSET_FROM_TOP,Lt(0,-e)+Me("v",e)+n+Me("v",e)}getStatementConnectionHighlightPath(e){if(!Sf(e.shape))throw Error("Statement connections should have notch shapes");const n=this.constants_.NOTCH_OFFSET_LEFT-this.constants_.CORNER_RADIUS;return Lt(-n,0)+Me("h",n)+e.shape.pathLeft+Me("h",n)}};(function(e){e[e.LEFT=-1]="LEFT",e[e.CENTRE=0]="CENTRE",e[e.RIGHT=1]="RIGHT"})(s.Align$$module$build$src$core$inputs$align||(s.Align$$module$build$src$core$inputs$align={})),s.Align$$module$build$src$core$inputs$align;var bu=class extends _{constructor(e,n,i){super(_.SKIP_SETUP),this.class=null,this.EDITABLE=!1,this.maxDisplayLength=1/0,e!==_.SKIP_SETUP&&(i?this.configure_(i):this.class=n||null,this.setValue(e))}configure_(e){super.configure_(e),e.class&&(this.class=e.class)}initView(){this.createTextElement_(),this.class&&Ge(this.getTextElement(),this.class)}doClassValidation_(e){return e==null?null:`${e}`}setClass(e){this.textElement_&&(this.class&&D(this.textElement_,this.class),e&&Ge(this.textElement_,e)),this.class=e}static fromJson(e){return new this(Zt(e.text),void 0,e)}};ar("field_label",bu),bu.prototype.DEFAULT_VALUE="";var wh=class{constructor(e,n){this.name=e,this.sourceBlock=n,this.fieldRow=[],this.align=s.Align$$module$build$src$core$inputs$align.LEFT,this.visible=!0,this.type=s.inputTypes$$module$build$src$core$inputs$input_types.CUSTOM,this.connection=null}getSourceBlock(){return this.sourceBlock}appendField(e,n){return this.insertFieldAt(this.fieldRow.length,e,n),this}insertFieldAt(e,n,i){if(0>e||e>this.fieldRow.length)throw Error("index "+e+" out of bounds.");return(n||n===""&&i)&&(typeof n=="string"&&(n=s.fromJson$$module$build$src$core$field_registry({type:"field_label",text:n})),n.setSourceBlock(this.sourceBlock),this.sourceBlock.initialized&&this.initField(n),n.name=i,n.setVisible(this.isVisible()),n.prefixField&&(e=this.insertFieldAt(e,n.prefixField)),this.fieldRow.splice(e,0,n),e++,n.suffixField&&(e=this.insertFieldAt(e,n.suffixField)),this.sourceBlock.rendered&&this.sourceBlock.queueRender()),e}removeField(e,n){for(let i=0,u;u=this.fieldRow[i];i++)if(u.name===e)return u.dispose(),this.fieldRow.splice(i,1),this.sourceBlock.rendered&&this.sourceBlock.queueRender(),!0;if(n)return!1;throw Error('Field "'+e+'" not found.')}isVisible(){return this.visible}setVisible(e){let n=[];if(this.visible===e)return n;this.visible=e;for(let u=0,m;m=this.fieldRow[u];u++)m.setVisible(e);if(this.connection){var i=this.connection;e?n=i.startTrackingAll():i.stopTrackingAll(),(i=i.targetBlock())&&(i.getSvgRoot().style.display=e?"block":"none")}return n}markDirty(){for(let e=0,n;n=this.fieldRow[e];e++)n.markDirty()}setCheck(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(e),this}setAlign(e){return this.align=e,this.sourceBlock.rendered&&this.sourceBlock.queueRender(),this}setShadowDom(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(e),this}getShadowDom(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()}init(){for(const e of this.fieldRow)e.init()}initModel(){for(const e of this.fieldRow)e.initModel()}initField(e){this.sourceBlock.rendered?e.init():e.initModel()}dispose(){for(let e=0,n;n=this.fieldRow[e];e++)n.dispose();this.connection&&this.connection.dispose()}makeConnection(e){return this.sourceBlock.makeConnection_(e)}},Ni=class extends wh{constructor(e,n){super(e,n),this.name=e,this.type=s.inputTypes$$module$build$src$core$inputs$input_types.DUMMY}},Hl=class extends wh{constructor(e,n){super(e,n),this.name=e,this.type=s.inputTypes$$module$build$src$core$inputs$input_types.END_ROW}},Ns=class extends wh{constructor(e,n){if(!e)throw Error("Statement inputs must have a non-empty name");super(e,n),this.name=e,this.type=s.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT,this.connection=this.makeConnection(Ve.NEXT_STATEMENT)}},Aw;s.ValueInput$$module$build$src$core$inputs$value_input=class extends wh{constructor(e,n){if(!e)throw Error("Value inputs must have a non-empty name");super(e,n),this.name=e,this.type=s.inputTypes$$module$build$src$core$inputs$input_types.VALUE,this.connection=this.makeConnection(Ve.INPUT_VALUE)}},Aw={},Aw.ValueInput=s.ValueInput$$module$build$src$core$inputs$value_input;var _m=class{constructor(e,n){this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.startY=this.startX=0,this.renderer_=e,this.block_=n,this.constants_=this.renderer_.getConstants(),this.outputConnection=n.outputConnection?new xw(this.constants_,n.outputConnection):null,this.isInline=n.getInputsInline()&&!n.isCollapsed(),this.isCollapsed=n.isCollapsed(),this.isInsertionMarker=n.isInsertionMarker(),this.RTL=n.RTL,this.topRow=new Lv(this.constants_),this.bottomRow=new kv(this.constants_)}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}createRows_(){this.populateTopRow_(),this.rows.push(this.topRow);let e=new Av(this.constants_);this.inputRows.push(e);var n=this.block_.getIcons();for(let i=0,u;u=n[i];i++){const m=new Iw(this.constants_,u);this.isCollapsed&&!u.isShownWhenCollapsed()||e.elements.push(m)}n=void 0;for(let i=0,u;u=this.block_.inputList[i];i++)if(u.isVisible()){this.shouldStartNewRow_(u,n)&&(this.rows.push(e),e=new Av(this.constants_),this.inputRows.push(e));for(let m=0,T;T=u.fieldRow[m];m++)e.elements.push(new Eh(this.constants_,T,u));this.addInput_(u,e),n=u}this.isCollapsed&&(e.hasJaggedEdge=!0,e.elements.push(new Rw(this.constants_))),(e.elements.length||e.hasDummyInput)&&this.rows.push(e),this.populateBottomRow_(),this.rows.push(this.bottomRow)}populateTopRow_(){var e=!!this.block_.previousConnection;const n=(this.block_.hat?this.block_.hat==="cap":this.constants_.ADD_START_HATS)&&!this.outputConnection&&!e;let i=this.topRow.hasLeftSquareCorner(this.block_)?$m:gm;this.topRow.elements.push(new i(this.constants_)),n?(e=new xv(this.constants_),this.topRow.elements.push(e),this.topRow.capline=e.ascenderHeight):e&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new Ow(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0]instanceof Ns&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,i=this.topRow.hasRightSquareCorner(this.block_)?$m:gm,this.topRow.elements.push(new i(this.constants_,"right"))}populateBottomRow_(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof Ns?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new $m(this.constants_)):this.bottomRow.elements.push(new gm(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new kw(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new $m(this.constants_,"right")):this.bottomRow.elements.push(new gm(this.constants_,"right"))}addInput_(e,n){this.isInline&&e instanceof s.ValueInput$$module$build$src$core$inputs$value_input?(n.elements.push(new Ov(this.constants_,e)),n.hasInlineInput=!0):e instanceof Ns?(n.elements.push(new mm(this.constants_,e)),n.hasStatement=!0):e instanceof s.ValueInput$$module$build$src$core$inputs$value_input?(n.elements.push(new u$(this.constants_,e)),n.hasExternalInput=!0):(e instanceof Ni||e instanceof Hl)&&(n.minHeight=Math.max(n.minHeight,e.getSourceBlock()&&e.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),n.align===null&&(n.align=e.align)}shouldStartNewRow_(e,n){return n?n instanceof Hl||e instanceof Ns||n instanceof Ns?!0:e instanceof s.ValueInput$$module$build$src$core$inputs$value_input||e instanceof Ni||n instanceof s.ValueInput$$module$build$src$core$inputs$value_input?!this.isInline:!1:!1}addElemSpacing_(){for(let e=0,n;n=this.rows[e];e++){const i=n.elements;if(n.elements=[],n.startsWithElemSpacer()&&n.elements.push(new As(this.constants_,this.getInRowSpacing_(null,i[0]))),i.length){for(let u=0;u<i.length-1;u++){n.elements.push(i[u]);const m=this.getInRowSpacing_(i[u],i[u+1]);n.elements.push(new As(this.constants_,m))}n.elements.push(i[i.length-1]),n.endsWithElemSpacer()&&n.elements.push(new As(this.constants_,this.getInRowSpacing_(i[i.length-1],null)))}}}getInRowSpacing_(e,n){if(!e&&n&&Y.isStatementInput(n))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(e&&Y.isInput(e)&&!n){if(Y.isExternalInput(e))return this.constants_.NO_PADDING;if(Y.isInlineInput(e))return this.constants_.LARGE_PADDING;if(Y.isStatementInput(e))return this.constants_.NO_PADDING}return e&&Y.isLeftSquareCorner(e)&&n&&(Y.isPreviousConnection(n)||Y.isNextConnection(n))?n.notchOffset:e&&Y.isLeftRoundedCorner(e)&&n&&(Y.isPreviousConnection(n)||Y.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}computeBounds_(){let e=0,n=0,i=0;for(let m=0,T;T=this.rows[m];m++){if(T.measure(),n=Math.max(n,T.width),T.hasStatement){var u=T.getLastInput();let N,H;u=T.width-((H=(N=u)==null?void 0:N.width)!=null?H:0),e=Math.max(e,u)}i=Math.max(i,T.widthWithConnectedBlocks)}this.statementEdge=e,this.width=n;for(let m=0,T;T=this.rows[m];m++)T.hasStatement&&(T.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(n,i),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)}alignRowElements_(){for(let n=0,i;i=this.rows[n];n++)if(i.hasStatement)this.alignStatementRow_(i);else{var e=i.width;e=this.getDesiredRowWidth_(i)-e,0<e&&this.addAlignmentPadding_(i,e),Y.isTopOrBottomRow(i)&&(i.widthWithConnectedBlocks=i.width)}}getDesiredRowWidth_(e){return this.width-this.startX}addAlignmentPadding_(e,n){const i=e.getFirstSpacer(),u=e.getLastSpacer();if((e.hasExternalInput||e.hasStatement)&&(e.widthWithConnectedBlocks+=n),e.align===s.Align$$module$build$src$core$inputs$align.LEFT&&u)u.width+=n;else if(e.align===s.Align$$module$build$src$core$inputs$align.CENTRE&&i&&u)i.width+=n/2,u.width+=n/2;else if(e.align===s.Align$$module$build$src$core$inputs$align.RIGHT&&i)i.width+=n;else if(u)u.width+=n;else return;e.width+=n}alignStatementRow_(e){const n=e.getLastInput();if(n){var i=e.width-n.width,u=this.statementEdge;i=u-i,0<i&&this.addAlignmentPadding_(e,i),i=e.width,u=this.getDesiredRowWidth_(e),n.width+=u-i,n.height=Math.max(n.height,e.height),e.width+=u-i,e.widthWithConnectedBlocks=Math.max(e.width,this.statementEdge+e.connectedBlockWidths)}}addRowSpacing_(){const e=this.rows;this.rows=[];for(let n=0;n<e.length;n++)this.rows.push(e[n]),n!==e.length-1&&this.rows.push(this.makeSpacerRow_(e[n],e[n+1]))}makeSpacerRow_(e,n){var i=this.getSpacerRowHeight_(e,n);const u=this.getSpacerRowWidth_(e,n);return i=new Nv(this.constants_,i,u),e.hasStatement&&(i.followsStatement=!0),n.hasStatement&&(i.precedesStatement=!0),i}getSpacerRowWidth_(e,n){return this.width-this.startX}getSpacerRowHeight_(e,n){return this.constants_.MEDIUM_PADDING}getElemCenterline_(e,n){return Y.isSpacer(n)?e.yPos+n.height/2:Y.isBottomRow(e)?(e=e.yPos+e.height-e.descenderHeight,Y.isNextConnection(n)?e+n.height/2:e-n.height/2):Y.isTopRow(e)?Y.isHat(n)?e.capline-n.height/2:e.capline+n.height/2:e.yPos+e.height/2}recordElemPositions_(e){let n=e.xPos;for(let i=0,u;u=e.elements[i];i++)Y.isSpacer(u)&&(u.height=e.height),u.xPos=n,u.centerline=this.getElemCenterline_(e,u),n+=u.width}finalize_(){let e=0,n=0;for(let i=0,u;u=this.rows[i];i++)u.yPos=n,u.xPos=this.startX,n+=u.height,e=Math.max(e,u.widthWithConnectedBlocks),this.recordElemPositions_(u);if(this.outputConnection&&this.block_.nextConnection){const i=this.block_.nextConnection.targetBlock();i&&(e=Math.max(e,i.getHeightWidth().width))}this.widthWithChildren=e+this.startX,this.height=n,this.startY=this.topRow.capline,this.bottomRow.baseline=n-this.bottomRow.descenderHeight}getMeasureableForConnection(e){let n;if(((n=this.outputConnection)==null?void 0:n.connectionModel)===e)return this.outputConnection;for(const i of this.rows)for(const u of i.elements)if(u instanceof Vl&&u.connectionModel===e)return u;return null}},Mv=class extends as{constructor(e){if(super(e),this.type=oe.BLOCK_DELETE,e){if(e.getParent())throw Error("Connected blocks cannot be deleted.");e.isShadow()&&(this.recordUndo=!1),this.oldXml=Co(e),this.ids=ie(e),this.wasShadow=e.isShadow(),this.oldJson=Bn(e,{addCoordinates:!0})}}toJson(){const e=super.toJson();if(!this.oldXml)throw Error("The old block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(this.wasShadow===void 0)throw Error("Whether the block was a shadow is undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.oldXml=lr(this.oldXml),e.ids=this.ids,e.wasShadow=this.wasShadow,e.oldJson=this.oldJson,this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,n,i){return n=super.fromJson(e,n,i??new Mv),n.oldXml=s.textToDom$$module$build$src$core$utils$xml(e.oldXml),n.ids=e.ids,n.wasShadow=e.wasShadow||n.oldXml.tagName.toLowerCase()==="shadow",n.oldJson=e.oldJson,e.recordUndo!==void 0&&(n.recordUndo=e.recordUndo),n}run(e){const n=this.getEventWorkspace_();if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(e)for(e=0;e<this.ids.length;e++){const i=this.ids[e],u=n.getBlockById(i);u?u.dispose(!1):i===this.blockId&&console.warn("Can't delete non-existent block: "+i)}else zs(this.oldJson,n)}};o(Te.EVENT,oe.BLOCK_DELETE,Mv);var bt=class{constructor(e,n){this.type=n,this.targetConnection=null,this.disposed=!1,this.shadowDom=this.check=null,this.y=this.x=0,this.shadowState=null,this.sourceBlock_=e}connect_(e){const n=Ve.INPUT_VALUE,i=this.getSourceBlock();var u=e.getSourceBlock();e.isConnected()&&e.disconnectInternal(!1);let m;if(this.isConnected()){const N=this.stashShadowState(),H=this.targetBlock();H.isShadow()?H.dispose(!1):(this.disconnectInternal(),m=H),this.applyShadowState(N)}let T;ce()&&(T=new(G(oe.BLOCK_MOVE))(u),T.setReason(["connect"])),Cf(this,e),u.setParent(i),T&&(T.recordNew(),W(T)),m&&(e=this.type===n?m.outputConnection:m.previousConnection)&&((u=bt.getConnectionForOrphanedConnection(u,e))?e.connect(u):e.onFailedConnect(this))}dispose(){if(this.isConnected()){this.isSuperior()&&this.setShadowStateInternal();const e=this.targetBlock();e&&!e.isDeadOrDying()&&e.unplug()}this.disposed=!0}getSourceBlock(){return this.sourceBlock_}isSuperior(){return this.type===Ve.INPUT_VALUE||this.type===Ve.NEXT_STATEMENT}isConnected(){return!!this.targetConnection}getConnectionChecker(){return this.sourceBlock_.workspace.connectionChecker}onFailedConnect(e){}connect(e){if(this.targetConnection===e)return!0;if(this.getConnectionChecker().canConnect(this,e,!1)){const n=s.getGroup$$module$build$src$core$events$utils();n||s.setGroup$$module$build$src$core$events$utils(!0),this.isSuperior()?this.connect_(e):e.connect_(this),s.setGroup$$module$build$src$core$events$utils(n)}return this.isConnected()}disconnect(){this.disconnectInternal()}disconnectInternal(e=!0){const{parentConnection:n,childConnection:i}=this.getParentAndChildConnections();if(!n||!i)throw Error("Source connection not connected.");const u=s.getGroup$$module$build$src$core$events$utils();u||s.setGroup$$module$build$src$core$events$utils(!0);let m;ce()&&(m=new(G(oe.BLOCK_MOVE))(i.getSourceBlock()),m.setReason(["disconnect"]));const T=this.targetConnection;T&&(T.targetConnection=null),this.targetConnection=null,e&&i.getSourceBlock().setParent(null),m&&(m.recordNew(),W(m)),i.getSourceBlock().isShadow()||n.respawnShadow_(),s.setGroup$$module$build$src$core$events$utils(u)}getParentAndChildConnections(){return this.targetConnection?this.isSuperior()?{parentConnection:this,childConnection:this.targetConnection}:{parentConnection:this.targetConnection,childConnection:this}:{}}respawnShadow_(){this.createShadowBlock(!0)}reconnect(e,n){if(this.getSourceBlock().isDeadOrDying())return!1;var i;return n=(i=e.getInput(n))==null?void 0:i.connection,i=this.targetBlock(),i&&i!==e||!n||n.targetConnection===this?!1:(n.isConnected()&&n.disconnect(),n.connect(this),!0)}targetBlock(){if(this.isConnected()){let e,n;return(n=(e=this.targetConnection)==null?void 0:e.getSourceBlock())!=null?n:null}return null}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(e){return e?(Array.isArray(e)||(e=[e]),this.check=e,this.onCheckChanged_()):this.check=null,this}getCheck(){return this.check}setShadowDom(e){this.setShadowStateInternal({shadowDom:e})}getShadowDom(e){return e&&this.targetBlock().isShadow()?ts(this.targetBlock()):this.shadowDom}setShadowState(e){this.setShadowStateInternal({shadowState:e})}getShadowState(e){return e&&this.targetBlock()&&this.targetBlock().isShadow()?Bn(this.targetBlock()):this.shadowState}neighbours(e){return[]}getParentInput(){let e=null;const n=this.sourceBlock_.inputList;for(let i=0;i<n.length;i++)if(n[i].connection===this){e=n[i];break}return e}toString(){const e=this.sourceBlock_;if(!e)return"Orphan Connection";if(e.outputConnection===this)var n="Output Connection of ";else if(e.previousConnection===this)n="Previous Connection of ";else if(e.nextConnection===this)n="Next Connection of ";else{n=null;for(let i=0,u;u=e.inputList[i];i++)if(u.connection===this){n=u;break}if(n)n='Input "'+n.name+'" connection on ';else return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection"}return n+e.toDevString()}stashShadowState(){const e=this.getShadowDom(!0),n=this.getShadowState(!0);return this.shadowState=this.shadowDom=null,{shadowDom:e,shadowState:n}}applyShadowState({shadowDom:e,shadowState:n}){this.shadowDom=e,this.shadowState=n}setShadowStateInternal({shadowDom:e=null,shadowState:n=null}={}){this.shadowDom=e,this.shadowState=n,this.getSourceBlock().isDeadOrDying()||((e=this.targetBlock())?e.isShadow()?(e.dispose(!1),this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock())):(e=this.createShadowBlock(!1),this.serializeShadow(e),e&&e.dispose(!1)):(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock())))}createShadowBlock(e){var n=this.getSourceBlock();const i=this.getShadowState(),u=this.getShadowDom();if(n.isDeadOrDying()||!i&&!u)return null;if(i)return n=Ar(i,n.workspace,{parentConnection:e?this:void 0,isShadow:!0,recordUndo:!1});if(u){if(n=qs(u,n.workspace),e)if(this.type===Ve.INPUT_VALUE){if(!n.outputConnection)throw Error("Shadow block is missing an output connection");if(!this.connect(n.outputConnection))throw Error("Could not connect shadow block to connection")}else if(this.type===Ve.NEXT_STATEMENT){if(!n.previousConnection)throw Error("Shadow block is missing previous connection");if(!this.connect(n.previousConnection))throw Error("Could not connect shadow block to connection")}else throw Error("Cannot connect a shadow block to a previous/output connection");return n}return null}serializeShadow(e){e&&(this.shadowDom=ts(e),this.shadowState=Bn(e))}static getConnectionForOrphanedConnection(e,n){if(n.type===Ve.OUTPUT_VALUE)return Ud(e,n.getSourceBlock());e=e.lastConnectionInStack(!0);const i=n.getConnectionChecker();return e&&i.canConnect(n,e,!1)?e:null}};bt.CAN_CONNECT=0,bt.REASON_SELF_CONNECTION=1,bt.REASON_WRONG_TYPE=2,bt.REASON_TARGET_NULL=3,bt.REASON_CHECKS_FAILED=4,bt.REASON_DIFFERENT_WORKSPACES=5,bt.REASON_SHADOW_PARENT=6,bt.REASON_DRAG_CHECKS_FAILED=7,bt.REASON_PREVIOUS_AND_OUTPUT=8;var Va=class{constructor(e,n,i){if(this.data=null,this.disposed=!1,this.hue=null,this.colour_="#000000",this.styleName_="",this.suppressPrefixSuffix=!1,this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.icons=[],this.disabledReasons=new Set,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable=this.movable=this.deletable=!0,this.collapsed_=this.shadow=!1,this.outputShape_=null,this.rendered=this.isInsertionMarker_=this.initialized=this.disposing=!1,this.onchangeWrapper=this.helpUrl=null,this.statementInputCount=0,this.workspace=e,this.id=i&&!e.getBlockById(i)?i:O(),e.setBlockById(this.id,this),this.xy=new ke(0,0),this.isInFlyout=e.isFlyout,this.isInMutator=e.isMutator,this.RTL=e.RTL,n){if(this.type=n,i=hr[n],!i||typeof i!="object")throw TypeError("Invalid block definition for type: "+n);Object.assign(this,i)}e.addTopBlock(this),e.addTypedBlock(this),new.target===Va&&this.doInit_()}doInit_(){const e=s.getGroup$$module$build$src$core$events$utils();e||s.setGroup$$module$build$src$core$events$utils(!0);const n=j();try{typeof this.init=="function"&&(s.setRecordUndo$$module$build$src$core$events$utils(!1),this.init(),s.setRecordUndo$$module$build$src$core$events$utils(n)),ce()&&W(new(G(oe.BLOCK_CREATE))(this))}finally{s.setGroup$$module$build$src$core$events$utils(e),s.setRecordUndo$$module$build$src$core$events$utils(n)}this.inputsInlineDefault=this.inputsInline,typeof this.onchange=="function"&&this.setOnChange(this.onchange)}dispose(e=!1){this.disposing=!0,this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.unplug(e),ce()&&W(new(G(oe.BLOCK_DELETE))(this)),this.workspace.removeTopBlock(this),this.disposeInternal()}disposeInternal(){this.disposing=!0,this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),typeof this.destroy=="function"&&this.destroy(),this.childBlocks_.forEach(e=>e.disposeInternal()),this.inputList.forEach(e=>e.dispose()),this.inputList.length=0,this.getConnections_(!0).forEach(e=>e.dispose()),this.disposed=!0}isDeadOrDying(){return this.disposing||this.disposed}initModel(){if(!this.initialized){for(const e of this.inputList)e.initModel();this.initialized=!0}}unplug(e){this.outputConnection&&this.unplugFromRow(e),this.previousConnection&&this.unplugFromStack(e)}unplugFromRow(e){let n=null,i;(i=this.outputConnection)!=null&&i.isConnected()&&(n=this.outputConnection.targetConnection,this.outputConnection.disconnect()),n&&e&&(e=this.getOnlyValueConnection())&&e.isConnected()&&!e.targetBlock().isShadow()&&(e=e.targetConnection,e?.disconnect(),this.workspace.connectionChecker.canConnect(e,n,!1)?n.connect(e):e?.onFailedConnect(n))}getOnlyValueConnection(){let e=null;for(let n=0;n<this.inputList.length;n++){const i=this.inputList[n].connection;if(i&&i.type===Ve.INPUT_VALUE&&i.targetConnection){if(e)return null;e=i}}return e}unplugFromStack(e){let n=null;var i;if((i=this.previousConnection)!=null&&i.isConnected()&&(n=this.previousConnection.targetConnection,this.previousConnection.disconnect()),i=this.getNextBlock(),e&&i&&!i.isShadow()){let u,m;e=(m=(u=this.nextConnection)==null?void 0:u.targetConnection)!=null?m:null,e?.disconnect(),n&&this.workspace.connectionChecker.canConnect(n,e,!1)&&n.connect(e)}}getConnections_(e){e=[],this.outputConnection&&e.push(this.outputConnection),this.previousConnection&&e.push(this.previousConnection),this.nextConnection&&e.push(this.nextConnection);for(let n=0,i;i=this.inputList[n];n++)i.connection&&e.push(i.connection);return e}lastConnectionInStack(e){let n=this.nextConnection;for(;n;){const i=n.targetBlock();if(!i||e&&i.isShadow())return n;n=i.nextConnection}return null}bumpNeighbours(){}getParent(){return this.parentBlock_}getInputWithBlock(e){for(let n=0,i;i=this.inputList[n];n++)if(i.connection&&i.connection.targetBlock()===e)return i;return null}getSurroundParent(){let e=this,n;do if(n=e,e=e.getParent(),!e)return null;while(e.getNextBlock()===n);return e}getNextBlock(){return this.nextConnection&&this.nextConnection.targetBlock()}getPreviousBlock(){return this.previousConnection&&this.previousConnection.targetBlock()}getRootBlock(){let e,n=this;do e=n,n=e.parentBlock_;while(n);return e}getTopStackBlock(){let e=this,n;do n=e.getPreviousBlock();while(n&&n.getNextBlock()===e&&(e=n));return e}getChildren(e){if(!e)return this.childBlocks_;e=[];for(let i=0,u;u=this.inputList[i];i++)if(u.connection){var n=u.connection.targetBlock();n&&e.push(n)}return(n=this.getNextBlock())&&e.push(n),e}setParent(e){if(e!==this.parentBlock_){var n=this.previousConnection&&this.previousConnection.targetBlock()||this.outputConnection&&this.outputConnection.targetBlock(),i=!!n;if(i&&e&&n!==e)throw Error("Block connected to superior one that is not new parent.");if(!i&&e)throw Error("Block not connected to new parent.");if(i&&!e)throw Error("Cannot set parent to null while block is still connected to superior block.");this.parentBlock_?zt(this.parentBlock_.childBlocks_,this):this.workspace.removeTopBlock(this),(this.parentBlock_=e)?e.childBlocks_.push(this):this.workspace.addTopBlock(this)}}getDescendants(e){const n=[this],i=this.getChildren(e);for(let u,m=0;u=i[m];m++)n.push(...u.getDescendants(e));return n}isDeletable(){return this.deletable&&!this.shadow&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnDeletable(){return this.deletable}setDeletable(e){this.deletable=e}isMovable(){return this.movable&&!this.shadow&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnMovable(){return this.movable}setMovable(e){this.movable=e}isDuplicatable(){return this.workspace.hasBlockLimits()?this.workspace.isCapacityAvailable(He(this,!0)):!0}isShadow(){return this.shadow}setShadow(e){this.shadow=e}isInsertionMarker(){return this.isInsertionMarker_}setInsertionMarker(e){this.isInsertionMarker_=e}isEditable(){return this.editable&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnEditable(){return this.editable}setEditable(e){this.editable=e;for(let n=0,i;i=this.inputList[n];n++)for(let u=0,m;m=i.fieldRow[u];u++)m.updateEditable()}isDisposed(){return this.disposed}isSimpleReporter(){if(!this.outputConnection)return!1;for(const e of this.inputList)if(e.connection||1<e.fieldRow.length)return!1;return!0}getMatchingConnection(e,n){const i=this.getConnections_(!0);if(e=e.getConnections_(!0),i.length!==e.length)throw Error("Connection lists did not match in length.");for(let u=0;u<e.length;u++)if(e[u]===n)return i[u];return null}setHelpUrl(e){this.helpUrl=e}setTooltip(e){this.tooltip=e}getTooltip(){return nl(this)}getColour(){return this.colour_}getStyleName(){return this.styleName_}getHue(){return this.hue}setColour(e){e=da(e),this.hue=e.hue,this.colour_=e.hex}setStyle(e){this.styleName_=e}setOnChange(e){if(e&&typeof e!="function")throw Error("onchange must be a function.");this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.onchange=e,this.onchangeWrapper=e.bind(this),this.workspace.addChangeListener(this.onchangeWrapper)}getField(e){if(typeof e!="string")throw TypeError("Block.prototype.getField expects a string with the field name but received "+(e===void 0?"nothing":e+" of type "+typeof e)+" instead");for(let n=0,i;i=this.inputList[n];n++)for(let u=0,m;m=i.fieldRow[u];u++)if(m.name===e)return m;return null}getVars(){const e=[];for(let n=0,i;i=this.inputList[n];n++)for(let u=0,m;m=i.fieldRow[u];u++)m.referencesVariables()&&e.push(m.getValue());return e}getVarModels(){const e=[];for(let n=0,i;i=this.inputList[n];n++)for(let u=0,m;m=i.fieldRow[u];u++)if(m.referencesVariables()){const T=this.workspace.getVariableById(m.getValue());T&&e.push(T)}return e}updateVarName(e){for(let n=0,i;i=this.inputList[n];n++)for(let u=0,m;m=i.fieldRow[u];u++)m.referencesVariables()&&e.getId()===m.getValue()&&m.refreshVariableName()}renameVarById(e,n){for(let i=0,u;u=this.inputList[i];i++)for(let m=0,T;T=u.fieldRow[m];m++)T.referencesVariables()&&e===T.getValue()&&T.setValue(n)}getFieldValue(e){return(e=this.getField(e))?e.getValue():null}setFieldValue(e,n){const i=this.getField(n);if(!i)throw Error('Field "'+n+'" not found.');i.setValue(e)}setPreviousStatement(e,n){if(e)n===void 0&&(n=null),this.previousConnection||(this.previousConnection=this.makeConnection_(Ve.PREVIOUS_STATEMENT)),this.previousConnection.setCheck(n);else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}}setNextStatement(e,n){if(e)n===void 0&&(n=null),this.nextConnection||(this.nextConnection=this.makeConnection_(Ve.NEXT_STATEMENT)),this.nextConnection.setCheck(n);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}}setOutput(e,n){if(e)n===void 0&&(n=null),this.outputConnection||(this.outputConnection=this.makeConnection_(Ve.OUTPUT_VALUE)),this.outputConnection.setCheck(n);else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}}setInputsInline(e){this.inputsInline!==e&&(W(new(G(oe.BLOCK_CHANGE))(this,"inline",null,this.inputsInline,e)),this.inputsInline=e)}getInputsInline(){if(this.inputsInline!==void 0)return this.inputsInline;for(var e=1;e<this.inputList.length;e++)if(this.inputList[e-1]instanceof Ni&&this.inputList[e]instanceof Ni)return!1;for(e=1;e<this.inputList.length;e++)if(this.inputList[e-1]instanceof s.ValueInput$$module$build$src$core$inputs$value_input&&this.inputList[e]instanceof Ni)return!0;for(e=0;e<this.inputList.length;e++)if(this.inputList[e]instanceof Hl)return!0;return!1}setOutputShape(e){this.outputShape_=e}getOutputShape(){return this.outputShape_}isEnabled(){return this.disabledReasons.size===0}get disabled(){return w("disabled","v11","v12","the isEnabled or hasDisabledReason methods of Block"),this.hasDisabledReason(Gn)}set disabled(e){w("disabled","v11","v12","the setDisabledReason method of Block"),this.setDisabledReason(e,Gn)}setEnabled(e){w("setEnabled","v11","v12","the setDisabledReason method of Block"),this.setDisabledReason(!e,Gn)}setDisabledReason(e,n){e||this.workspace.options.disable||!this.hasDisabledReason(Gn)||n==Gn||this.setDisabledReason(!1,Gn),this.disabledReasons.has(n)!==e&&(e?this.disabledReasons.add(n):this.disabledReasons.delete(n),e=new(G(oe.BLOCK_CHANGE))(this,"disabled",null,!e,e),e.setDisabledReason(n),W(e))}getInheritedDisabled(){let e=this.getSurroundParent();for(;e;){if(!e.isEnabled())return!0;e=e.getSurroundParent()}return!1}hasDisabledReason(e){return this.disabledReasons.has(e)}getDisabledReasons(){return this.disabledReasons}isCollapsed(){return this.collapsed_}setCollapsed(e){this.collapsed_!==e&&(W(new(G(oe.BLOCK_CHANGE))(this,"collapsed",null,this.collapsed_,e)),this.collapsed_=e)}toString(e,n){n=this.toTokens(n);for(let u=2;u<n.length;u++)n[u-2]==="("&&n[u]===")"&&(n[u-2]=n[u-1],n.splice(u-1,2));let i="";return n=n.reduce((u,m)=>(u=u+(i==="("||m===")"?"":" ")+m,i=m[m.length-1],u),""),n=n.trim()||"???",e&&n.length>e&&(n=n.substring(0,e-3)+"..."),n}toTokens(e="?"){const n=[];for(const u of this.inputList)if(u.name!=Vr){for(const m of u.fieldRow)n.push(m.getText());if(u.connection){const m=u.connection.targetBlock();if(m){var i=u.connection;let T=i.getCheck();!T&&i.targetConnection&&(T=i.targetConnection.getCheck()),(i=!!T&&(T.includes("Boolean")||T.includes("Number")))&&n.push("("),n.push(...m.toTokens(e)),i&&n.push(")")}else n.push(e)}}return n}appendValueInput(e){return this.appendInput(new s.ValueInput$$module$build$src$core$inputs$value_input(e,this))}appendStatementInput(e){return this.statementInputCount++,this.appendInput(new Ns(e,this))}appendDummyInput(e=""){return this.appendInput(new Ni(e,this))}appendEndRowInput(e=""){return this.appendInput(new Hl(e,this))}appendInput(e){return this.inputList.push(e),e}appendInputFromRegistry(e,n){return(e=g(Te.INPUT,e,!1))?this.appendInput(new e(n,this)):null}jsonInit(e){var n=e.type?'Block "'+e.type+'": ':"";if(e.output&&e.previousStatement)throw Error(n+"Must not have both an output and a previousStatement.");for(var i=0;e["args"+i];){if(e["message"+i]===void 0)throw Error(n+`args${i} must have a corresponding message (message${i}).`);i++}if(e.style&&e.style.hat&&(this.hat=e.style.hat,e.style=null),e.style&&e.colour)throw Error(n+"Must not have both a colour and a style.");for(e.style?this.jsonInitStyle(e,n):this.jsonInitColour(e,n),i=0;e["message"+i]!==void 0;)this.interpolate(e["message"+i],e["args"+i]||[],e["implicitAlign"+i]||e["lastDummyAlign"+i],n),i++;if(e.inputsInline!==void 0&&(s.disable$$module$build$src$core$events$utils(),this.setInputsInline(e.inputsInline),s.enable$$module$build$src$core$events$utils()),e.output!==void 0&&this.setOutput(!0,e.output),e.outputShape!==void 0&&this.setOutputShape(e.outputShape),e.previousStatement!==void 0&&this.setPreviousStatement(!0,e.previousStatement),e.nextStatement!==void 0&&this.setNextStatement(!0,e.nextStatement),e.tooltip!==void 0&&(i=Zt(e.tooltip),this.setTooltip(i)),e.enableContextMenu!==void 0&&(this.contextMenu=!!e.enableContextMenu),e.suppressPrefixSuffix!==void 0&&(this.suppressPrefixSuffix=!!e.suppressPrefixSuffix),e.helpUrl!==void 0&&(i=Zt(e.helpUrl),this.setHelpUrl(i)),typeof e.extensions=="string"&&(console.warn(n+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+e.type+"' block."),e.extensions=[e.extensions]),e.mutator!==void 0&&Nt(e.mutator,this,!0),e=e.extensions,Array.isArray(e))for(n=0;n<e.length;n++)Nt(e[n],this,!1)}jsonInitColour(e,n){if("colour"in e)if(e.colour===void 0)console.warn(n+"Undefined colour value.");else{e=e.colour;try{this.setColour(e)}catch{console.warn(n+"Illegal colour value: ",e)}}}jsonInitStyle(e,n){e=e.style;try{this.setStyle(e)}catch{console.warn(n+"Style does not exist: ",e)}}mixin(e,n){if(n!==void 0&&typeof n!="boolean")throw Error("opt_disableCheck must be a boolean if provided");if(!n){n=[];for(const i in e)this[i]!==void 0&&n.push(i);if(n.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(n))}Object.assign(this,e)}interpolate(e,n,i,u){e=bd(e),this.validateTokens(e,n.length),n=this.interpolateArguments(e,n,i),i=[];for(let m=0,T;T=n[m];m++)if(this.isInputKeyword(T.type)){if(e=this.inputFromJson(T,u)){for(let N=0,H;H=i[N];N++)e.appendField(H[0],H[1]);i.length=0}}else(e=this.fieldFromJson(T))&&i.push([e,T.name])}validateTokens(e,n){const i=[];let u=0;for(let m=0;m<e.length;m++){const T=e[m];if(typeof T=="number"){if(1>T||T>n)throw Error('Block "'+this.type+'": Message index %'+T+" out of range.");if(i[T])throw Error('Block "'+this.type+'": Message index %'+T+" duplicated.");i[T]=!0,u++}}if(u!==n)throw Error('Block "'+this.type+'": Message does not reference all '+n+" arg(s).")}interpolateArguments(e,n,i){const u=[];for(let T=0;T<e.length;T++){var m=e[T];if(typeof m=="number"&&(m=n[m-1]),typeof m=="string"){if(m===`
`)m={type:"input_end_row"},i&&(m.align=i);else if(m=this.stringToFieldJson(m),!m)continue}u.push(m)}return(e=u.length)&&!this.isInputKeyword(u[e-1].type)&&(e={type:"input_dummy"},i&&(e.align=i),u.push(e)),u}fieldFromJson(e){const n=s.fromJson$$module$build$src$core$field_registry(e);return!n&&e.alt?typeof e.alt=="string"?(e=this.stringToFieldJson(e.alt))?this.fieldFromJson(e):null:this.fieldFromJson(e.alt):n}inputFromJson(e,n){var i={LEFT:s.Align$$module$build$src$core$inputs$align.LEFT,RIGHT:s.Align$$module$build$src$core$inputs$align.RIGHT,CENTRE:s.Align$$module$build$src$core$inputs$align.CENTRE,CENTER:s.Align$$module$build$src$core$inputs$align.CENTRE};let u;switch(e.type){case"input_value":u=this.appendValueInput(e.name);break;case"input_statement":u=this.appendStatementInput(e.name);break;case"input_dummy":u=this.appendDummyInput(e.name);break;case"input_end_row":u=this.appendEndRowInput(e.name);break;default:u=this.appendInputFromRegistry(e.type,e.name)}return u?(e.check&&u.setCheck(e.check),e.align&&(i=i[e.align.toUpperCase()],i===void 0?console.warn(n+"Illegal align value: ",e.align):u.setAlign(i)),u):null}isInputKeyword(e){return e==="input_value"||e==="input_statement"||e==="input_dummy"||e==="input_end_row"||f(Te.INPUT,e)}stringToFieldJson(e){return(e=e.trim())?{type:"field_label",text:e}:null}moveInputBefore(e,n){if(e!==n){var i=-1,u=n?-1:this.inputList.length;for(let m=0,T;T=this.inputList[m];m++)if(T.name===e){if(i=m,u!==-1)break}else if(n&&T.name===n&&(u=m,i!==-1))break;if(i===-1)throw Error('Named input "'+e+'" not found.');if(u===-1)throw Error('Reference input "'+n+'" not found.');this.moveNumberedInputBefore(i,u)}}moveNumberedInputBefore(e,n){if(e===n)throw Error("Can't move input to itself.");if(e>=this.inputList.length)throw RangeError("Input index "+e+" out of bounds.");if(n>this.inputList.length)throw RangeError("Reference input "+n+" out of bounds.");const i=this.inputList[e];this.inputList.splice(e,1),e<n&&n--,this.inputList.splice(n,0,i)}removeInput(e,n){for(let i=0,u;u=this.inputList[i];i++)if(u.name===e)return u instanceof Ns&&this.statementInputCount--,u.dispose(),this.inputList.splice(i,1),!0;if(n)return!1;throw Error("Input not found: "+e)}getInput(e){for(let n=0,i;i=this.inputList[n];n++)if(i.name===e)return i;return null}getInputTargetBlock(e){return(e=this.getInput(e))&&e.connection&&e.connection.targetBlock()}getCommentText(){let e,n;return(n=(e=this.getIcon(vn.COMMENT))==null?void 0:e.getText())!=null?n:null}setCommentText(e){var n;let i;const u=(i=(n=this.getIcon(vn.COMMENT))==null?void 0:n.getText())!=null?i:null;if(u!==e){if(e!==null){if(n=this.getIcon(vn.COMMENT),!n){if(n=g(Te.ICON,vn.COMMENT.toString(),!1),!n)throw Error("No comment icon class is registered, so a comment cannot be set");if(n=new n(this),!Fc(n))throw Error("The class registered as a comment icon does not conform to the ICommentIcon interface");n=this.addIcon(n)}s.disable$$module$build$src$core$events$utils(),n.setText(e),s.enable$$module$build$src$core$events$utils()}else this.removeIcon(vn.COMMENT);W(new(G(oe.BLOCK_CHANGE))(this,"comment",null,u,e))}}setWarningText(e,n){}setMutator(e){}addIcon(e){if(this.hasIcon(e.getType()))throw new Ew(e);return this.icons.push(e),this.icons.sort((n,i)=>n.getWeight()-i.getWeight()),e}removeIcon(e){if(!this.hasIcon(e))return!1;let n;return(n=this.getIcon(e))==null||n.dispose(),this.icons=this.icons.filter(i=>!i.getType().equals(e)),!0}hasIcon(e){return this.icons.some(n=>n.getType().equals(e))}getIcon(e){return e instanceof vn?this.icons.find(n=>n.getType().equals(e)):this.icons.find(n=>n.getType().toString()===e)}getIcons(){return[...this.icons]}getRelativeToSurfaceXY(){return this.xy}moveBy(e,n,i){if(this.parentBlock_)throw Error("Block has parent");const u=new(G(oe.BLOCK_MOVE))(this);i&&u.setReason(i),this.xy.translate(e,n),u.recordNew(),W(u)}makeConnection_(e){return new bt(this,e)}allInputsFilled(e){if(e===void 0&&(e=!0),!e&&this.isShadow())return!1;for(let i=0,u;u=this.inputList[i];i++)if(u.connection){var n=u.connection.targetBlock();if(!n||!n.allInputsFilled(e))return!1}return(n=this.getNextBlock())?n.allInputsFilled(e):!0}toDevString(){let e=this.type?'"'+this.type+'" block':"Block";return this.id&&(e+=' (id="'+this.id+'")'),e}};Va.COLLAPSED_INPUT_NAME=Vr,Va.COLLAPSED_FIELD_NAME=Rl;var fo=class{constructor(e,n,i,u){this.workspace=e,this.targetWorkspace=n,this.isFlyoutLabel=u,this.onMouseUpWrapper=null,this.height=this.width=0,this.cursorSvg=this.svgText=this.svgGroup=null,this.text=i.text,this.position=new ke(0,0),this.callbackKey=i.callbackKey||i.callbackkey,this.cssClass=i["web-class"]||null,this.info=i}createDom(){var e=this.isFlyoutLabel?"blocklyFlyoutLabel":"blocklyFlyoutButton";this.cssClass&&(e+=" "+this.cssClass),this.svgGroup=ue(Z.G,{class:e},this.workspace.getCanvas());let n;this.isFlyoutLabel||(n=ue(Z.RECT,{class:"blocklyFlyoutButtonShadow",rx:fo.BORDER_RADIUS,ry:fo.BORDER_RADIUS,x:1,y:1},this.svgGroup)),e=ue(Z.RECT,{class:this.isFlyoutLabel?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:fo.BORDER_RADIUS,ry:fo.BORDER_RADIUS},this.svgGroup);const i=ue(Z.TEXT,{class:this.isFlyoutLabel?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup);var u=Zt(this.text);this.workspace.RTL&&(u+=""),i.textContent=u,this.isFlyoutLabel&&(this.svgText=i,this.workspace.getThemeManager().subscribe(this.svgText,"flyoutForegroundColour","fill"));const m=gt(i,"fontSize"),T=gt(i,"fontWeight"),N=gt(i,"fontFamily");if(this.width=xr(i,m,T,N),u=_r(u,m,T,N),this.height=u.height,!this.isFlyoutLabel){this.width+=2*fo.TEXT_MARGIN_X,this.height+=2*fo.TEXT_MARGIN_Y;let H;(H=n)==null||H.setAttribute("width",String(this.width));let ge;(ge=n)==null||ge.setAttribute("height",String(this.height))}return e.setAttribute("width",String(this.width)),e.setAttribute("height",String(this.height)),i.setAttribute("x",String(this.width/2)),i.setAttribute("y",String(this.height/2-u.height/2+u.baseline)),this.updateTransform(),this.onMouseUpWrapper=je(this.svgGroup,"pointerup",this,this.onMouseUp),this.svgGroup}show(){this.updateTransform(),this.svgGroup.setAttribute("display","block")}updateTransform(){this.svgGroup.setAttribute("transform","translate("+this.position.x+","+this.position.y+")")}moveTo(e,n){this.position.x=e,this.position.y=n,this.updateTransform()}isLabel(){return this.isFlyoutLabel}getPosition(){return this.position}getButtonText(){return this.text}getTargetWorkspace(){return this.targetWorkspace}getWorkspace(){return this.workspace}dispose(){this.onMouseUpWrapper&&ft(this.onMouseUpWrapper),this.svgGroup&&Q(this.svgGroup),this.svgText&&this.workspace.getThemeManager().unsubscribe(this.svgText)}setCursorSvg(e){e?this.svgGroup&&(this.svgGroup.appendChild(e),this.cursorSvg=e):this.cursorSvg=null}setMarkerSvg(){throw Error("Attempted to set a marker on a button.")}onMouseUp(e){(e=this.targetWorkspace.getGesture(e))&&e.cancel(),this.isFlyoutLabel&&this.callbackKey?console.warn("Labels should not have callbacks. Label text: "+this.text):this.isFlyoutLabel||this.callbackKey&&this.targetWorkspace.getButtonCallback(this.callbackKey)?this.isFlyoutLabel||(e=this.targetWorkspace.getButtonCallback(this.callbackKey))&&e(this):console.warn("Buttons should have callbacks. Button text: "+this.text)}};fo.TEXT_MARGIN_X=5,fo.TEXT_MARGIN_Y=2,fo.BORDER_RADIUS=4,Yn(`
.blocklyFlyoutButton {
  fill: #888;
  cursor: default;
}

.blocklyFlyoutButtonShadow {
  fill: #666;
}

.blocklyFlyoutButton:hover {
  fill: #aaa;
}

.blocklyFlyoutLabel {
  cursor: default;
}

.blocklyFlyoutLabelBackground {
  opacity: 0;
}
`);var _e=class{constructor(e,n,i){if(this.wsCoordinate=null,!n)throw Error("Cannot create a node without a location.");this.type=e,this.isConnectionLocation=_e.isConnectionType(e),this.location=n,this.processParams(i||null)}processParams(e){e&&e.wsCoordinate&&(this.wsCoordinate=e.wsCoordinate)}getLocation(){return this.location}getType(){return this.type}getWsCoordinate(){return this.wsCoordinate}isConnection(){return this.isConnectionLocation}findNextForInput(){var e=this.location.getParentInput();const n=e.getSourceBlock();for(e=n.inputList.indexOf(e),e+=1;e<n.inputList.length;e++){const i=n.inputList[e],u=i.fieldRow;for(let m=0;m<u.length;m++){const T=u[m];if(T.isClickable()||_e.NAVIGATE_ALL_FIELDS)return _e.createFieldNode(T)}if(i.connection)return _e.createInputNode(i)}return null}findNextForField(){var e=this.location,n=e.getParentInput();const i=e.getSourceBlock();if(!i)throw Error("The current AST location is not associated with a block");var u=i.inputList.indexOf(n);for(e=n.fieldRow.indexOf(e)+1;u<i.inputList.length;u++){n=i.inputList[u];const m=n.fieldRow;for(;e<m.length;){if(m[e].isClickable()||_e.NAVIGATE_ALL_FIELDS)return _e.createFieldNode(m[e]);e++}if(e=0,n.connection)return _e.createInputNode(n)}return null}findPrevForInput(){const e=this.location.getParentInput(),n=e.getSourceBlock();for(var i=n.inputList.indexOf(e);0<=i;i--){var u=n.inputList[i];if(u.connection&&u!==e)return _e.createInputNode(u);u=u.fieldRow;for(let m=u.length-1;0<=m;m--){const T=u[m];if(T.isClickable()||_e.NAVIGATE_ALL_FIELDS)return _e.createFieldNode(T)}}return null}findPrevForField(){var e=this.location;const n=e.getParentInput(),i=e.getSourceBlock();if(!i)throw Error("The current AST location is not associated with a block");var u=i.inputList.indexOf(n);for(e=n.fieldRow.indexOf(e)-1;0<=u;u--){var m=i.inputList[u];if(m.connection&&m!==n)return _e.createInputNode(m);for(m=m.fieldRow;-1<e;){if(m[e].isClickable()||_e.NAVIGATE_ALL_FIELDS)return _e.createFieldNode(m[e]);e--}0<=u-1&&(e=i.inputList[u-1].fieldRow.length-1)}return null}navigateBetweenStacks(e){var n=this.getLocation();if(n.getSourceBlock){var i=n.getSourceBlock();i&&(n=i)}if(!n||n.isDeadOrDying())return null;if(n.workspace.isFlyout)return this.navigateFlyoutContents(e);i=n.getRootBlock(),n=i.workspace.getTopBlocks(!0);for(let u=0;u<n.length;u++)if(i.id===n[u].id)return e=u+(e?1:-1),e===-1||e===n.length?null:_e.createStackNode(n[e]);throw Error("Couldn't find "+(e?"next":"previous")+" stack?!")}navigateFlyoutContents(e){let n;switch(this.getType()){case _e.types.STACK:n=this.getLocation();var i=n.workspace.targetWorkspace;break;case _e.types.BUTTON:n=this.getLocation(),i=n.getTargetWorkspace();break;default:return null}return i=i.getFlyout(),i&&(e=this.findNextLocationInFlyout(i.getContents(),n,e))?e.type==="button"&&e.button?_e.createButtonNode(e.button):e.type==="block"&&e.block?_e.createStackNode(e.block):null:null}findNextLocationInFlyout(e,n,i){const u=e.findIndex(m=>n instanceof Va&&m.block===n||n instanceof fo&&m.button===n);return 0>u?null:(i=i?u+1:u-1,i===-1||i===e.length?null:e[i])}findTopASTNodeForBlock(e){const n=va(e);return n?_e.createConnectionNode(n):_e.createBlockNode(e)}getOutAstNodeForBlock(e){if(!e)return null;e=e.getTopStackBlock();const n=va(e);return n&&n.targetConnection&&n.targetConnection.getParentInput()?_e.createInputNode(n.targetConnection.getParentInput()):_e.createStackNode(e)}findFirstFieldOrInput(e){e=e.inputList;for(let n=0;n<e.length;n++){const i=e[n],u=i.fieldRow;for(let m=0;m<u.length;m++){const T=u[m];if(T.isClickable()||_e.NAVIGATE_ALL_FIELDS)return _e.createFieldNode(T)}if(i.connection)return _e.createInputNode(i)}return null}getSourceBlock(){return this.getType()===_e.types.BLOCK?this.getLocation():this.getType()===_e.types.STACK?this.getLocation():this.getType()===_e.types.WORKSPACE||this.getType()===_e.types.BUTTON?null:this.getLocation().getSourceBlock()}next(){switch(this.type){case _e.types.STACK:return this.navigateBetweenStacks(!0);case _e.types.OUTPUT:return _e.createBlockNode(this.location.getSourceBlock());case _e.types.FIELD:return this.findNextForField();case _e.types.INPUT:return this.findNextForInput();case _e.types.BLOCK:const e=this.location.nextConnection;if(!e)break;return _e.createConnectionNode(e);case _e.types.PREVIOUS:return _e.createBlockNode(this.location.getSourceBlock());case _e.types.NEXT:return _e.createConnectionNode(this.location.targetConnection);case _e.types.BUTTON:return this.navigateFlyoutContents(!0)}return null}in(){switch(this.type){case _e.types.WORKSPACE:const e=this.location.getTopBlocks(!0);if(0<e.length)return _e.createStackNode(e[0]);break;case _e.types.STACK:return this.findTopASTNodeForBlock(this.location);case _e.types.BLOCK:return this.findFirstFieldOrInput(this.location);case _e.types.INPUT:return _e.createConnectionNode(this.location.targetConnection)}return null}prev(){switch(this.type){case _e.types.STACK:return this.navigateBetweenStacks(!1);case _e.types.FIELD:return this.findPrevForField();case _e.types.INPUT:return this.findPrevForInput();case _e.types.BLOCK:var e=va(this.location);if(!e)break;return _e.createConnectionNode(e);case _e.types.PREVIOUS:if((e=this.location.targetConnection)&&!e.getParentInput())return _e.createConnectionNode(e);break;case _e.types.NEXT:return _e.createBlockNode(this.location.getSourceBlock());case _e.types.BUTTON:return this.navigateFlyoutContents(!1)}return null}out(){switch(this.type){case _e.types.STACK:var e=this.location,n=e.getRelativeToSurfaceXY();return n=new ke(n.x,n.y+_e.DEFAULT_OFFSET_Y),_e.createWorkspaceNode(e.workspace,n);case _e.types.OUTPUT:return e=this.location,(n=e.targetConnection)?_e.createConnectionNode(n):_e.createStackNode(e.getSourceBlock());case _e.types.FIELD:if(e=this.location.getSourceBlock(),!e)throw Error("The current AST location is not associated with a block");return _e.createBlockNode(e);case _e.types.INPUT:return _e.createBlockNode(this.location.getSourceBlock());case _e.types.BLOCK:return this.getOutAstNodeForBlock(this.location);case _e.types.PREVIOUS:return this.getOutAstNodeForBlock(this.location.getSourceBlock());case _e.types.NEXT:return this.getOutAstNodeForBlock(this.location.getSourceBlock())}return null}static isConnectionType(e){switch(e){case _e.types.PREVIOUS:case _e.types.NEXT:case _e.types.INPUT:case _e.types.OUTPUT:return!0}return!1}static createFieldNode(e){return e?new _e(_e.types.FIELD,e):null}static createConnectionNode(e){if(!e)return null;const n=e.type;return n===Ve.INPUT_VALUE||n===Ve.NEXT_STATEMENT&&e.getParentInput()?_e.createInputNode(e.getParentInput()):n===Ve.NEXT_STATEMENT?new _e(_e.types.NEXT,e):n===Ve.OUTPUT_VALUE?new _e(_e.types.OUTPUT,e):n===Ve.PREVIOUS_STATEMENT?new _e(_e.types.PREVIOUS,e):null}static createInputNode(e){return e&&e.connection?new _e(_e.types.INPUT,e.connection):null}static createBlockNode(e){return e?new _e(_e.types.BLOCK,e):null}static createStackNode(e){return e?new _e(_e.types.STACK,e):null}static createButtonNode(e){return e?new _e(_e.types.BUTTON,e):null}static createWorkspaceNode(e,n){return n&&e?new _e(_e.types.WORKSPACE,e,{wsCoordinate:n}):null}static createTopNode(e){const n=va(e);return n?_e.createConnectionNode(n):_e.createBlockNode(e)}};_e.NAVIGATE_ALL_FIELDS=!1,_e.DEFAULT_OFFSET_Y=-20,(function(e){e=e.types||(e.types={}),e.FIELD="field",e.BLOCK="block",e.INPUT="input",e.OUTPUT="output",e.NEXT="next",e.PREVIOUS="previous",e.STACK="stack",e.WORKSPACE="workspace",e.BUTTON="button"})(_e||(_e={}));var Pv=class extends is{constructor(e,n,i,u){let m=e?e.workspace.id:void 0;u&&u.getType()===_e.types.WORKSPACE&&(m=u.getLocation().id),super(m),this.type=oe.MARKER_MOVE,this.blockId=e?.id,this.oldNode=i||void 0,this.newNode=u,this.isCursor=n}toJson(){const e=super.toJson();if(this.isCursor===void 0)throw Error("Whether this is a cursor event or not is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newNode)throw Error("The new node is undefined. Either pass a node to the constructor, or call fromJson");return e.isCursor=this.isCursor,e.blockId=this.blockId,e.oldNode=this.oldNode,e.newNode=this.newNode,e}static fromJson(e,n,i){return n=super.fromJson(e,n,i??new Pv),n.isCursor=e.isCursor,n.blockId=e.blockId,n.oldNode=e.oldNode,n.newNode=e.newNode,n}};o(Te.EVENT,oe.MARKER_MOVE,Pv);var MM="blocklyCursor",PM="blocklyMarker",DM=.75,Dv=class{constructor(e,n,i){this.workspace=e,this.marker=i,this.markerSvgRect_=this.markerSvgLine_=this.markerInput_=this.markerBlock_=this.svgGroup_=this.markerSvg_=this.currentMarkerSvg=this.parent=null,this.constants_=n,e=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=i.colour||e}getSvgRoot(){return this.svgGroup_}getMarker(){return this.marker}isCursor(){return this.marker.type==="cursor"}createDom(){const e=this.isCursor()?MM:PM;return this.svgGroup_=ue(Z.G,{class:e}),this.createDomInternal_(),this.svgGroup_}setParent_(e){this.isCursor()?(this.parent&&this.parent.setCursorSvg(null),e.setCursorSvg(this.getSvgRoot())):(this.parent&&this.parent.setMarkerSvg(null),e.setMarkerSvg(this.getSvgRoot())),this.parent=e}draw(e,n){if(n){this.constants_=this.workspace.getRenderer().getConstants();var i=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker.colour||i,this.applyColour_(n),this.showAtLocation_(n),this.fireMarkerEvent(e,n),e=this.currentMarkerSvg.childNodes[0],e!==void 0&&e.beginElement&&e.beginElement()}else this.hide()}showAtLocation_(e){const n=e.getLocation().type;e.getType()===_e.types.BLOCK?this.showWithBlock_(e):e.getType()===_e.types.OUTPUT?this.showWithOutput_(e):n===Ve.INPUT_VALUE?this.showWithInput_(e):n===Ve.NEXT_STATEMENT?this.showWithNext_(e):e.getType()===_e.types.PREVIOUS?this.showWithPrevious_(e):e.getType()===_e.types.FIELD?this.showWithField_(e):e.getType()===_e.types.WORKSPACE?this.showWithCoordinates_(e):e.getType()===_e.types.STACK?this.showWithStack_(e):e.getType()===_e.types.BUTTON&&this.showWithButton_(e)}showWithBlockPrevOutput(e){e=e.getSourceBlock();const n=e.width;var i=e.height,u=i*DM;const m=this.constants_.CURSOR_BLOCK_PADDING;e.previousConnection?(i=this.constants_.shapeFor(e.previousConnection),this.positionPrevious_(n,m,u,i)):e.outputConnection?(u=this.constants_.shapeFor(e.outputConnection),this.positionOutput_(n,i,u)):this.positionBlock_(n,m,u),this.setParent_(e),this.showCurrent_()}showWithBlock_(e){this.showWithBlockPrevOutput(e)}showWithPrevious_(e){this.showWithBlockPrevOutput(e)}showWithOutput_(e){this.showWithBlockPrevOutput(e)}showWithCoordinates_(e){var n=e.getWsCoordinate();e=n.x,n=n.y,this.workspace.RTL&&(e-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(e,n,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace),this.showCurrent_()}showWithField_(e){e=e.getLocation();const n=e.getSize().width,i=e.getSize().height;this.positionRect_(0,0,n,i),this.setParent_(e),this.showCurrent_()}showWithInput_(e){e=e.getLocation();const n=e.getSourceBlock();this.positionInput_(e),this.setParent_(n),this.showCurrent_()}showWithNext_(e){var n=e.getLocation();e=n.getSourceBlock();let i=0;n=n.getOffsetInBlock().y;const u=e.getHeightWidth().width;this.workspace.RTL&&(i=-u),this.positionLine_(i,n,u),this.setParent_(e),this.showCurrent_()}showWithStack_(e){e=e.getLocation();var n=e.getHeightWidth();const i=n.width+this.constants_.CURSOR_STACK_PADDING;n=n.height+this.constants_.CURSOR_STACK_PADDING;const u=-this.constants_.CURSOR_STACK_PADDING/2,m=-this.constants_.CURSOR_STACK_PADDING/2;let T=u;this.workspace.RTL&&(T=-(i+u)),this.positionRect_(T,m,i,n),this.setParent_(e),this.showCurrent_()}showWithButton_(e){e=e.getLocation();const n=e.width+this.constants_.CURSOR_STACK_PADDING,i=e.height+this.constants_.CURSOR_STACK_PADDING,u=-this.constants_.CURSOR_STACK_PADDING/2,m=-this.constants_.CURSOR_STACK_PADDING/2;let T=u;this.workspace.RTL&&(T=-(n+u)),this.positionRect_(T,m,n,i),this.setParent_(e),this.showCurrent_()}showCurrent_(){this.hide(),this.currentMarkerSvg&&(this.currentMarkerSvg.style.display="")}positionBlock_(e,n,i){if(e=Lt(-n,i)+Me("V",-n)+Me("H",e+2*n)+Me("V",i),!this.markerBlock_)throw Error("createDom should be called before positioning the marker");this.markerBlock_.setAttribute("d",e),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionInput_(e){const n=e.getOffsetInBlock().x,i=e.getOffsetInBlock().y;e=an(0,0)+this.constants_.shapeFor(e).pathDown,this.markerInput_.setAttribute("d",e),this.markerInput_.setAttribute("transform","translate("+n+","+i+")"+(this.workspace.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_}positionLine_(e,n,i){if(!this.markerSvgLine_)throw Error("createDom should be called before positioning the line");this.markerSvgLine_.setAttribute("x",`${e}`),this.markerSvgLine_.setAttribute("y",`${n}`),this.markerSvgLine_.setAttribute("width",`${i}`),this.currentMarkerSvg=this.markerSvgLine_}positionOutput_(e,n,i){if(!this.markerBlock_)throw Error("createDom should be called before positioning the output");e=Lt(e,0)+Me("h",-(e-i.width))+Me("v",this.constants_.TAB_OFFSET_FROM_TOP)+i.pathDown+Me("V",n)+Me("H",e),this.markerBlock_.setAttribute("d",e),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionPrevious_(e,n,i,u){if(!this.markerBlock_)throw Error("createDom should be called before positioning the previous connection marker");e=Lt(-n,i)+Me("V",-n)+Me("H",this.constants_.NOTCH_OFFSET_LEFT)+u.pathLeft+Me("H",e+2*n)+Me("V",i),this.markerBlock_.setAttribute("d",e),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionRect_(e,n,i,u){if(!this.markerSvgRect_)throw Error("createDom should be called before positioning the rect");this.markerSvgRect_.setAttribute("x",`${e}`),this.markerSvgRect_.setAttribute("y",`${n}`),this.markerSvgRect_.setAttribute("width",`${i}`),this.markerSvgRect_.setAttribute("height",`${u}`),this.currentMarkerSvg=this.markerSvgRect_}flipRtl(e){e.setAttribute("transform","scale(-1 1)")}hide(){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before hiding the marker");this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"}fireMarkerEvent(e,n){const i=n.getSourceBlock();e=new(G(oe.MARKER_MOVE))(i,this.isCursor(),e,n),W(e)}getBlinkProperties_(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}}createDomInternal_(){if(this.markerSvg_=ue(Z.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=ue(Z.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.markerSvg_),this.markerSvgRect_=ue(Z.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10},this.markerSvg_),this.markerInput_=ue(Z.PATH,{transform:""},this.markerSvg_),this.markerBlock_=ue(Z.PATH,{transform:"",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.hide(),this.isCursor()){const e=this.getBlinkProperties_();ue(Z.ANIMATE,e,this.markerSvgLine_),ue(Z.ANIMATE,e,this.markerInput_),ue(Z.ANIMATE,Object.assign({},e,{attributeName:"stroke"}),this.markerBlock_)}return this.markerSvg_}applyColour_(e){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before applying color to the markerj");this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(e=this.colour_+";transparent;transparent;",this.markerSvgLine_.firstElementChild.setAttribute("values",e),this.markerInput_.firstElementChild.setAttribute("values",e),this.markerBlock_.firstElementChild.setAttribute("values",e))}dispose(){this.svgGroup_&&Q(this.svgGroup_)}},p$=class{constructor(e,n,i){this.markerSvg=this.cursorSvg=null,this.connectionHighlights=new WeakMap,this.highlightOffsets=new WeakMap,this.constants=i,this.style=n,this.svgRoot=e,this.svgPath=ue(Z.PATH,{class:"blocklyPath"},this.svgRoot)}setPath(e){this.svgPath.setAttribute("d",e)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)")}setCursorSvg(e){e?(this.svgRoot.appendChild(e),this.cursorSvg=e):this.cursorSvg=null}setMarkerSvg(e){e?(this.cursorSvg?this.svgRoot.insertBefore(e,this.cursorSvg):this.svgRoot.appendChild(e),this.markerSvg=e):this.markerSvg=null}applyColour(e){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(e.isShadow()),this.updateDisabled_(!e.isEnabled()||e.getInheritedDisabled())}setStyle(e){this.style=e}setClass_(e,n){e&&(n?Ge(this.svgRoot,e):D(this.svgRoot,e))}updateHighlighted(e){e?this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"):this.svgPath.setAttribute("filter","none")}updateShadow_(e){e&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))}updateDisabled_(e){this.setClass_("blocklyDisabled",e),e&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")}updateSelected(e){this.setClass_("blocklySelected",e)}updateDraggingDelete(e){this.setClass_("blocklyDraggingDelete",e)}updateInsertionMarker(e){this.setClass_("blocklyInsertionMarker",e)}updateMovable(e){this.setClass_("blocklyDraggable",e)}updateReplacementFade(e){this.setClass_("blocklyReplaceable",e)}updateShapeForInputHighlight(e,n){}addConnectionHighlight(e,n,i,u){if(this.connectionHighlights.has(e)){if(this.currentHighlightMatchesNew(e,n,i))return;this.removeConnectionHighlight(e)}n=ue(Z.PATH,{class:"blocklyHighlightedConnectionPath",d:n,transform:`translate(${i.x}, ${i.y})`+(u?" scale(-1 1)":"")},this.svgRoot),this.connectionHighlights.set(e,n)}currentHighlightMatchesNew(e,n,i){let u;const m=(u=this.connectionHighlights.get(e))==null?void 0:u.getAttribute("d");return e=this.highlightOffsets.get(e),m===n&&ke.equals(e,i)}removeConnectionHighlight(e){const n=this.connectionHighlights.get(e);n&&(Q(n),this.connectionHighlights.delete(e))}},mo=class{constructor(e){this.activeCandidate=this.lastMarker=this.lastOnStack=null,this.wouldDeleteBlock=!1,this.fadedBlock=this.highlightedBlock=this.markerConnection=null,s.setSelected$$module$build$src$core$common(e),this.topBlock=e,this.workspace=e.workspace,this.firstMarker=this.createMarkerBlock(this.topBlock),this.availableConnections=this.initAvailableConnections(),this.lastOnStack&&(this.lastMarker=this.createMarkerBlock(this.lastOnStack.getSourceBlock()))}dispose(){this.availableConnections.length=0,this.disposeInsertionMarker(this.firstMarker),this.disposeInsertionMarker(this.lastMarker)}updateAvailableConnections(){this.availableConnections=this.initAvailableConnections()}wouldConnectBlock(){return!!this.activeCandidate}applyConnections(){if(this.activeCandidate){s.disable$$module$build$src$core$events$utils(),this.hidePreview(),s.enable$$module$build$src$core$events$utils();var{local:e,closest:n}=this.activeCandidate;e.connect(n);var i=e.isSuperior()?n:e,u=this.topBlock.getRootBlock();ir().then(()=>{ns(i.getSourceBlock()),setTimeout(()=>{u.bringToFront()},0)})}}update(e,n){const i=this.getCandidate(e);((this.wouldDeleteBlock=this.shouldDelete(!!i,n))||this.shouldUpdatePreviews(i,e))&&(s.disable$$module$build$src$core$events$utils(),this.maybeHidePreview(i),this.maybeShowPreview(i),s.enable$$module$build$src$core$events$utils())}createMarkerBlock(e){s.disable$$module$build$src$core$events$utils();let n;try{const i=Bn(e,{addCoordinates:!1,addInputBlocks:!1,addNextBlocks:!1,doFullSerialization:!1});if(!i)throw Error(`Failed to serialize source block. ${e.toDevString()}`);n=zs(i,this.workspace);for(const u of n.getDescendants(!1))u.setInsertionMarker(!0);n.initSvg(),n.getSvgRoot().setAttribute("visibility","hidden")}finally{s.enable$$module$build$src$core$events$utils()}return n}initAvailableConnections(){const e=this.topBlock.getConnections_(!1),n=this.topBlock.lastConnectionInStack(!0);return n&&n!==this.topBlock.nextConnection&&(e.push(n),this.lastOnStack=n),e}shouldUpdatePreviews(e,n){if(!e)return!!this.activeCandidate;if(!this.activeCandidate)return!0;const{local:i,closest:u}=this.activeCandidate;if(u===e.closest&&i===e.local)return!1;const m=i.x+n.x-u.x;return n=i.y+n.y-u.y,e.radius<Math.sqrt(m*m+n*n)-s.config$$module$build$src$core$config.currentConnectionPreference}getCandidate(e){this.markerConnection&&this.markerConnection.isConnected()||this.updateAvailableConnections();let n=this.getStartRadius(),i=null;for(let u=0;u<this.availableConnections.length;u++){const m=this.availableConnections[u],T=m.closest(n,e);T.connection&&(i={closest:T.connection,local:m,radius:T.radius},n=T.radius)}return i}getStartRadius(){return this.activeCandidate?s.config$$module$build$src$core$config.connectingSnapRadius:s.config$$module$build$src$core$config.snapRadius}shouldDelete(e,n){return n&&this.workspace.getComponentManager().hasCapability(n.id,Ft.Capability.DELETE_AREA)?n.wouldDelete(this.topBlock):!1}maybeShowPreview(e){if(!this.wouldDeleteBlock&&e){var n=e.closest,i;n===((i=this.activeCandidate)==null?void 0:i.closest)||n.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.activeCandidate=e,this.showPreview(this.activeCandidate))}}showPreview(e){const n=this.workspace.getRenderer();switch(n.getConnectionPreviewMethod(e.closest,e.local,this.topBlock)){case mo.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline(e);break;case mo.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker(e);break;case mo.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade(e)}n.shouldHighlightConnection(e.closest)&&e.closest.highlight()}maybeHidePreview(e){if(!e)this.hidePreview();else if(this.activeCandidate){const n=this.activeCandidate.local!==e.local;(this.activeCandidate.closest!==e.closest||n||this.wouldDeleteBlock)&&this.hidePreview()}this.activeCandidate=this.markerConnection=null}hidePreview(){let e;const n=(e=this.activeCandidate)==null?void 0:e.closest;n&&n.targetBlock()&&this.workspace.getRenderer().shouldHighlightConnection(n)&&n.unhighlight(),this.hideReplacementFade(),this.hideInsertionInputOutline(),this.hideInsertionMarker()}showInsertionMarker(e){const{local:n,closest:i}=e;let u=(e=this.lastOnStack&&n===this.lastOnStack)?this.lastMarker:this.firstMarker;if(!u)throw Error("Cannot show the insertion marker because there is no insertion marker block");let m;try{m=u.getMatchingConnection(n.getSourceBlock(),n)}catch{if(e&&this.lastOnStack?(this.disposeInsertionMarker(this.lastMarker),u=this.lastMarker=this.createMarkerBlock(this.lastOnStack.getSourceBlock())):(this.disposeInsertionMarker(this.firstMarker),u=this.firstMarker=this.createMarkerBlock(this.topBlock)),!u)throw Error("Cannot show the insertion marker because there is no insertion marker block");m=u.getMatchingConnection(n.getSourceBlock(),n)}if(!m)throw Error("Cannot show the insertion marker because there is no associated connection");if(m===this.markerConnection)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");u.queueRender(),es(),m.connect(i);const T={x:i.x-m.x,y:i.y-m.y},N=m.getOffsetInBlock().clone(),H=m;ir().then(()=>{let ge;(ge=u)==null||ge.positionNearConnection(H,T,N);let Fe;(Fe=u)==null||Fe.getSvgRoot().setAttribute("visibility","visible")}),this.markerConnection=m}hideInsertionMarker(){if(this.markerConnection){var e=this.markerConnection,n=e.getSourceBlock(),i=n.outputConnection,u;if((u=n.previousConnection)!=null&&u.targetConnection||i!=null&&i.targetConnection)n.unplug(!0);else{let m;(m=e.targetBlock())==null||m.unplug(!1)}if(e.targetConnection)throw Error("markerConnection still connected at the end of disconnectInsertionMarker");this.markerConnection=null,(e=n.getSvgRoot())&&e.setAttribute("visibility","hidden")}}showInsertionInputOutline(e){e=e.closest,this.highlightedBlock=e.getSourceBlock(),this.highlightedBlock.highlightShapeForInput(e,!0)}hideInsertionInputOutline(){if(this.highlightedBlock){if(!this.activeCandidate)throw Error("Cannot hide the insertion marker outline because there is no active candidate");this.highlightedBlock.highlightShapeForInput(this.activeCandidate.closest,!1),this.highlightedBlock=null}}showReplacementFade(e){if(this.fadedBlock=e.closest.targetBlock(),!this.fadedBlock)throw Error("Cannot show the replacement fade because the closest connection does not have a target block");this.fadedBlock.fadeForReplacement(!0)}hideReplacementFade(){this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null)}getInsertionMarkers(){const e=[];return this.firstMarker&&e.push(this.firstMarker),this.lastMarker&&e.push(this.lastMarker),e}disposeInsertionMarker(e){if(e){s.disable$$module$build$src$core$events$utils();try{e.dispose()}finally{s.enable$$module$build$src$core$events$utils()}}}};(function(e){e=e.PREVIEW_TYPE||(e.PREVIEW_TYPE={}),e[e.INSERTION_MARKER=0]="INSERTION_MARKER",e[e.INPUT_OUTLINE=1]="INPUT_OUTLINE",e[e.REPLACEMENT_FADE=2]="REPLACEMENT_FADE"})(mo||(mo={})),mo.PREVIEW_TYPE;var f$=class{constructor(e){this.overrides=null,this.name=e}getClassName(){return this.name+"-renderer"}init(e,n){this.constants_=this.makeConstants_(),n&&(this.overrides=n,Object.assign(this.constants_,n)),this.constants_.setTheme(e),this.constants_.init()}createDom(e,n){this.constants_.createDom(e,this.name+"-"+n.name,"."+this.getClassName()+"."+n.getClassName())}refreshDom(e,n){const i=this.getConstants();i.dispose(),this.constants_=this.makeConstants_(),this.overrides&&Object.assign(this.constants_,this.overrides),this.constants_.randomIdentifier=i.randomIdentifier,this.constants_.setTheme(n),this.constants_.init(),this.createDom(e,n)}dispose(){this.constants_&&this.constants_.dispose()}makeConstants_(){return new d$}makeRenderInfo_(e){return new _m(this,e)}makeDrawer_(e,n){return new h$(e,n)}makeMarkerDrawer(e,n){return new Dv(e,this.getConstants(),n)}makePathObject(e,n){return new p$(e,n,this.constants_)}getConstants(){return this.constants_}shouldHighlightConnection(e){return!0}orphanCanConnectAtEnd(e,n,i){return!!bt.getConnectionForOrphanedConnection(e,i===Ve.OUTPUT_VALUE?n.outputConnection:n.previousConnection)}getConnectionPreviewMethod(e,n,i){return w("getConnectionPreviewMethod","v10","v12","an IConnectionPreviewer, if it fulfills your use case."),n.type===Ve.OUTPUT_VALUE||n.type===Ve.PREVIOUS_STATEMENT?!e.isConnected()||this.orphanCanConnectAtEnd(i,e.targetBlock(),n.type)?mo.PREVIEW_TYPE.INSERTION_MARKER:mo.PREVIEW_TYPE.REPLACEMENT_FADE:mo.PREVIEW_TYPE.INSERTION_MARKER}render(e){const n=this.makeRenderInfo_(e);n.measure(),this.makeDrawer_(e,n).draw()}},Ct={};Ct.BottomRow=kv,Ct.Connection=Vl,Ct.ConstantProvider=d$,Ct.Drawer=h$,Ct.ExternalValueInput=u$,Ct.Field=Eh,Ct.Hat=xv,Ct.Icon=Iw,Ct.InRowSpacer=As,Ct.InlineInput=Ov,Ct.InputConnection=Ua,Ct.InputRow=Av,Ct.JaggedEdge=Rw,Ct.MarkerSvg=Dv,Ct.Measurable=Ai,Ct.NextConnection=kw,Ct.OutputConnection=xw,Ct.PathObject=p$,Ct.PreviousConnection=Ow,Ct.RenderInfo=_m,Ct.Renderer=f$,Ct.RoundCorner=gm,Ct.Row=fm,Ct.SpacerRow=Nv,Ct.SquareCorner=$m,Ct.StatementInput=mm,Ct.TopRow=Lv,Ct.Types=Y,Ct.init=If,Ct.register=to,Ct.unregister=Hd;var Nw=class{constructor(e,n){this.workspace=e,this.theme=n,this.subscribedWorkspaces=[],this.componentDB=new Map}getTheme(){return this.theme}setTheme(e){var n=this.theme;this.theme=e,(e=this.workspace.getInjectionDiv())&&(n&&(n=n.getClassName())&&D(e,n),(n=this.theme.getClassName())&&Ge(e,n));for(let i=0,u;u=this.subscribedWorkspaces[i];i++)u.refreshTheme();for(const[i,u]of this.componentDB)for(const m of u){e=m.element,n=m.propertyName;const T=this.theme&&this.theme.getComponentStyle(i);e.style.setProperty(n,T||"")}for(const i of this.subscribedWorkspaces)i.hideChaff()}subscribeWorkspace(e){this.subscribedWorkspaces.push(e)}unsubscribeWorkspace(e){if(!zt(this.subscribedWorkspaces,e))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.")}subscribe(e,n,i){this.componentDB.has(n)||this.componentDB.set(n,[]),this.componentDB.get(n).push({element:e,propertyName:i}),n=this.theme&&this.theme.getComponentStyle(n),e.style.setProperty(i,n||"")}unsubscribe(e){if(e)for(const[n,i]of this.componentDB){for(let u=i.length-1;0<=u;u--)i[u].element===e&&i.splice(u,1);i.length||this.componentDB.delete(n)}}dispose(){this.subscribedWorkspaces.length=0,this.componentDB.clear()}},Bv="VARIABLE_DYNAMIC",Eu={CATEGORY_NAME:Bv};Eu.flyoutCategory=Uc,Eu.flyoutCategoryBlocks=vi,Eu.onCreateVariableButtonClick_Colour=Gd,Eu.onCreateVariableButtonClick_Number=ya,Eu.onCreateVariableButtonClick_String=hl;var Lw=30,wu=[];wu[Ve.INPUT_VALUE]=Ve.OUTPUT_VALUE,wu[Ve.OUTPUT_VALUE]=Ve.INPUT_VALUE,wu[Ve.NEXT_STATEMENT]=Ve.PREVIOUS_STATEMENT,wu[Ve.PREVIOUS_STATEMENT]=Ve.NEXT_STATEMENT;var Fv="RENAME_VARIABLE_ID",Uv="DELETE_VARIABLE_ID",Mw=class{canConnect(e,n,i,u){return this.canConnectWithReason(e,n,i,u)===bt.CAN_CONNECT}canConnectWithReason(e,n,i,u){const m=this.doSafetyChecks(e,n);return m!==bt.CAN_CONNECT?m:this.doTypeChecks(e,n)?i&&!this.doDragChecks(e,n,u||0)?bt.REASON_DRAG_CHECKS_FAILED:bt.CAN_CONNECT:bt.REASON_CHECKS_FAILED}getErrorMessage(e,n,i){switch(e){case bt.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case bt.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case bt.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case bt.REASON_TARGET_NULL:return"Target connection is null.";case bt.REASON_CHECKS_FAILED:return"Connection checks failed. "+(n+" expected "+n.getCheck()+", found "+i.getCheck());case bt.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case bt.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";case bt.REASON_PREVIOUS_AND_OUTPUT:return"Block would have an output and a previous connection.";default:return"Unknown connection failure: this should never happen!"}}doSafetyChecks(e,n){if(!e||!n)return bt.REASON_TARGET_NULL;let i,u,m;return e.isSuperior()?(i=e.getSourceBlock(),u=n.getSourceBlock(),m=n):(u=e.getSourceBlock(),i=n.getSourceBlock(),m=e,e=n),i===u?bt.REASON_SELF_CONNECTION:m.type!==wu[e.type]?bt.REASON_WRONG_TYPE:i.workspace!==u.workspace?bt.REASON_DIFFERENT_WORKSPACES:i.isShadow()&&!u.isShadow()?bt.REASON_SHADOW_PARENT:m.type===Ve.OUTPUT_VALUE&&u.previousConnection&&u.previousConnection.isConnected()||m.type===Ve.PREVIOUS_STATEMENT&&u.outputConnection&&u.outputConnection.isConnected()?bt.REASON_PREVIOUS_AND_OUTPUT:bt.CAN_CONNECT}doTypeChecks(e,n){if(e=e.getCheck(),n=n.getCheck(),!e||!n)return!0;for(let i=0;i<e.length;i++)if(n.includes(e[i]))return!0;return!1}doDragChecks(e,n,i){if(e.distanceFrom(n)>i||n.getSourceBlock().isInsertionMarker())return!1;switch(n.type){case Ve.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(e,n);case Ve.OUTPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isInsertionMarker()||e.isConnected())return!1;break;case Ve.INPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isMovable()&&!n.targetBlock().isShadow())return!1;break;case Ve.NEXT_STATEMENT:if(n.isConnected()&&!e.getSourceBlock().nextConnection&&!n.targetBlock().isShadow()&&n.targetBlock().nextConnection||n.targetBlock()&&!n.targetBlock().isMovable()&&!n.targetBlock().isShadow())return!1;break;default:return!1}return!pr.includes(n)}canConnectToPrevious_(e,n){return e.targetConnection||pr.includes(n)?!1:n.targetConnection?(e=n.targetBlock(),e.isInsertionMarker()?!e.getPreviousBlock():!1):!0}};o(Te.CONNECTION_CHECKER,Pr,Mw);var Vv=class extends pu{constructor(e){super(e),this.type=oe.VAR_DELETE,e&&(this.varType=e.type,this.varName=e.name)}toJson(){const e=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return e.varType=this.varType,e.varName=this.varName,e}static fromJson(e,n,i){return n=super.fromJson(e,n,i??new Vv),n.varType=e.varType,n.varName=e.varName,n}run(e){const n=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");e?n.deleteVariableById(this.varId):n.createVariable(this.varName,this.varType,this.varId)}};o(Te.EVENT,oe.VAR_DELETE,Vv);var Hv=class extends pu{constructor(e,n){super(e),this.type=oe.VAR_RENAME,e&&(this.oldName=e.name,this.newName=typeof n>"u"?"":n)}toJson(){const e=super.toJson();if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");return e.oldName=this.oldName,e.newName=this.newName,e}static fromJson(e,n,i){return n=super.fromJson(e,n,i??new Hv),n.oldName=e.oldName,n.newName=e.newName,n}run(e){const n=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");e?n.renameVariableById(this.varId,this.newName):n.renameVariableById(this.varId,this.oldName)}};o(Te.EVENT,oe.VAR_RENAME,Hv);var Gv=class{constructor(e){this.workspace=e,this.variableMap=new Map}clear(){for(const e of this.variableMap.values())for(;0<e.length;)this.deleteVariable(e[0]);if(this.variableMap.size!==0)throw Error("Non-empty variable map")}renameVariable(e,n){if(e.name!==n){var i=this.getVariable(n,e.type),u=this.workspace.getAllBlocks(!1),m=s.getGroup$$module$build$src$core$events$utils();m||s.setGroup$$module$build$src$core$events$utils(!0);try{i&&i.getId()!==e.getId()?this.renameVariableWithConflict(e,n,i,u):this.renameVariableAndUses(e,n,u)}finally{s.setGroup$$module$build$src$core$events$utils(m)}}}renameVariableById(e,n){const i=this.getVariableById(e);if(!i)throw Error("Tried to rename a variable that didn't exist. ID: "+e);this.renameVariable(i,n)}renameVariableAndUses(e,n,i){for(W(new(G(oe.VAR_RENAME))(e,n)),e.name=n,n=0;n<i.length;n++)i[n].updateVarName(e)}renameVariableWithConflict(e,n,i,u){const m=e.type;for(n!==i.name&&this.renameVariableAndUses(i,n,u),n=0;n<u.length;n++)u[n].renameVarById(e.getId(),i.getId());W(new(G(oe.VAR_DELETE))(e)),zt(this.variableMap.get(m),e)}createVariable(e,n,i){var u=this.getVariable(e,n);if(u){if(i&&u.getId()!==i)throw Error('Variable "'+e+'" is already in use and its id is "'+u.getId()+'" which conflicts with the passed in id, "'+i+'".');return u}if(i&&this.getVariableById(i))throw Error('Variable id, "'+i+'", is already in use.');return u=i||O(),n=n||"",u=new La(this.workspace,e,n,u),e=this.variableMap.get(n)||[],e.push(u),this.variableMap.delete(n),this.variableMap.set(n,e),W(new(G(oe.VAR_CREATE))(u)),u}deleteVariable(e){const n=e.getId(),i=this.variableMap.get(e.type);if(i){for(let u=0;u<i.length;u++)if(i[u].getId()===n){i.splice(u,1),W(new(G(oe.VAR_DELETE))(e)),i.length===0&&this.variableMap.delete(e.type);break}}}deleteVariableById(e){const n=this.getVariableById(e);if(n){var i=n.name;const u=this.getVariableUsesById(e);for(let m=0,T;T=u[m];m++)if(T.type==="procedures_defnoreturn"||T.type==="procedures_defreturn"){e=String(T.getFieldValue("NAME")),i=s.Msg$$module$build$src$core$msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",i).replace("%2",e),dc(i);return}1<u.length?(i=s.Msg$$module$build$src$core$msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(u.length)).replace("%2",i),Et(i,m=>{m&&n&&this.deleteVariableInternal(n,u)})):this.deleteVariableInternal(n,u)}else console.warn("Can't delete non-existent variable: "+e)}deleteVariableInternal(e,n){const i=s.getGroup$$module$build$src$core$events$utils();i||s.setGroup$$module$build$src$core$events$utils(!0);try{for(let u=0;u<n.length;u++)n[u].dispose(!0);this.deleteVariable(e)}finally{s.setGroup$$module$build$src$core$events$utils(i)}}getVariable(e,n){if(n=this.variableMap.get(n||"")){for(let i=0,u;u=n[i];i++)if(s.Names$$module$build$src$core$names.equals(u.name,e))return u}return null}getVariableById(e){for(const n of this.variableMap.values())for(const i of n)if(i.getId()===e)return i;return null}getVariablesOfType(e){return(e=this.variableMap.get(e||""))?e.slice():[]}getVariableTypes(e){const n=new Set(this.variableMap.keys());if(e&&e.getPotentialVariableMap())for(const i of e.getPotentialVariableMap().variableMap.keys())n.add(i);return n.has("")||n.add(""),Array.from(n.values())}getAllVariables(){let e=[];for(const n of this.variableMap.values())e=e.concat(n);return e}getAllVariableNames(){return Array.from(this.variableMap.values()).flat().map(e=>e.name)}getVariableUsesById(e){const n=[],i=this.workspace.getAllBlocks(!1);for(let u=0;u<i.length;u++){const m=i[u].getVarModels();if(m)for(let T=0;T<m.length;T++)m[T].getId()===e&&n.push(i[u])}return n}},Sh=class{get isFlyout(){return this.internalIsFlyout}get isMutator(){return this.internalIsMutator}constructor(e){this.isClearing=this.internalIsMutator=this.internalIsFlyout=this.rendered=!1,this.MAX_UNDO=1024,this.connectionDBList=[],this.topBlocks=[],this.topComments=[],this.commentDB=new Map,this.listeners=[],this.undoStack_=[],this.redoStack_=[],this.blockDB=new Map,this.typedBlocksDB=new Map,this.procedureMap=new Cw,this.potentialVariableMap=null,this.id=O(),se(this),this.options=e||new po({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(y(Te.CONNECTION_CHECKER,this.options,!0))(this),this.variableMap=new Gv(this)}dispose(){this.listeners.length=0,this.clear(),ae(this)}sortObjects(e,n){const i=Math.sin(hi(Sh.SCAN_ANGLE))*(this.RTL?-1:1);return e=e.getRelativeToSurfaceXY(),n=n.getRelativeToSurfaceXY(),e.y+i*e.x-(n.y+i*n.x)}addTopBlock(e){this.topBlocks.push(e)}removeTopBlock(e){if(!zt(this.topBlocks,e))throw Error("Block not present in workspace's list of top-most blocks.")}getTopBlocks(e=!1){const n=[].concat(this.topBlocks);return e&&1<n.length&&n.sort(this.sortObjects.bind(this)),n}addTypedBlock(e){this.typedBlocksDB.has(e.type)||this.typedBlocksDB.set(e.type,[]),this.typedBlocksDB.get(e.type).push(e)}removeTypedBlock(e){zt(this.typedBlocksDB.get(e.type),e),this.typedBlocksDB.get(e.type).length||this.typedBlocksDB.delete(e.type)}getBlocksByType(e,n=!1){return this.typedBlocksDB.has(e)?(e=this.typedBlocksDB.get(e).slice(0),n&&e&&1<e.length&&e.sort(this.sortObjects.bind(this)),e.filter(i=>!i.isInsertionMarker())):[]}addTopComment(e){this.topComments.push(e),this.commentDB.has(e.id)&&console.warn('Overriding an existing comment on this workspace, with id "'+e.id+'"'),this.commentDB.set(e.id,e)}removeTopComment(e){if(!zt(this.topComments,e))throw Error("Comment not present in workspace's list of top-most comments.");this.commentDB.delete(e.id)}getTopComments(e=!1){const n=[].concat(this.topComments);return e&&1<n.length&&n.sort(this.sortObjects.bind(this)),n}getAllBlocks(e=!1){if(e){var n=this.getTopBlocks(!0);e=[];for(let i=0;i<n.length;i++)e.push(...n[i].getDescendants(!0))}else for(e=this.getTopBlocks(!1),n=0;n<e.length;n++)e.push(...e[n].getChildren(!1));return e.filter(i=>!i.isInsertionMarker())}clear(){this.isClearing=!0;try{const e=s.getGroup$$module$build$src$core$events$utils();for(e||s.setGroup$$module$build$src$core$events$utils(!0);this.topBlocks.length;)this.topBlocks[0].dispose(!1);for(;this.topComments.length;)this.topComments[this.topComments.length-1].dispose();s.setGroup$$module$build$src$core$events$utils(e),this.variableMap.clear(),this.potentialVariableMap&&this.potentialVariableMap.clear()}finally{this.isClearing=!1}}renameVariableById(e,n){this.variableMap.renameVariableById(e,n)}createVariable(e,n,i){return this.variableMap.createVariable(e,n,i)}getVariableUsesById(e){return this.variableMap.getVariableUsesById(e)}deleteVariableById(e){this.variableMap.deleteVariableById(e)}getVariable(e,n){return this.variableMap.getVariable(e,n)}getVariableById(e){return this.variableMap.getVariableById(e)}getVariablesOfType(e){return this.variableMap.getVariablesOfType(e)}getVariableTypes(){return this.variableMap.getVariableTypes(this)}getAllVariables(){return this.variableMap.getAllVariables()}getAllVariableNames(){return this.variableMap.getAllVariableNames()}getWidth(){return 0}newBlock(e,n){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}newComment(e){throw Error("The implementation of newComment should be monkey-patched in by blockly.ts")}remainingCapacity(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length}remainingCapacityOfType(e){return this.options.maxInstances?(this.options.maxInstances[e]!==void 0?this.options.maxInstances[e]:1/0)-this.getBlocksByType(e,!1).length:1/0}isCapacityAvailable(e){if(!this.hasBlockLimits())return!0;let n=0;for(const i in e){if(e[i]>this.remainingCapacityOfType(i))return!1;n+=e[i]}return!(n>this.remainingCapacity())}hasBlockLimits(){return this.options.maxBlocks!==1/0||!!this.options.maxInstances}getUndoStack(){return this.undoStack_}getRedoStack(){return this.redoStack_}undo(e){var n=e?this.redoStack_:this.undoStack_,i=e?this.undoStack_:this.redoStack_;const u=n.pop();if(u){for(var m=[u];n.length&&u.group&&u.group===n[n.length-1].group;){const T=n.pop();T&&m.push(T)}for(n=0;n<m.length;n++)i.push(m[n]);s.setRecordUndo$$module$build$src$core$events$utils(!1);try{for(i=0;i<m.length;i++)m[i].run(e)}finally{s.setRecordUndo$$module$build$src$core$events$utils(!0)}}}clearUndo(){this.undoStack_.length=0,this.redoStack_.length=0,De()}addChangeListener(e){return this.listeners.push(e),e}removeChangeListener(e){zt(this.listeners,e)}fireChangeListener(e){if(e.recordUndo)for(this.undoStack_.push(e),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(let n=0;n<this.listeners.length;n++)(0,this.listeners[n])(e)}getBlockById(e){return this.blockDB.get(e)||null}setBlockById(e,n){this.blockDB.set(e,n)}removeBlockById(e){this.blockDB.delete(e)}getCommentById(e){let n;return(n=this.commentDB.get(e))!=null?n:null}allInputsFilled(e){const n=this.getTopBlocks(!1);for(let i=0;i<n.length;i++)if(!n[i].allInputsFilled(e))return!1;return!0}getPotentialVariableMap(){return this.potentialVariableMap}createPotentialVariableMap(){this.potentialVariableMap=new Gv(this)}getVariableMap(){return this.variableMap}setVariableMap(e){this.variableMap=e}getProcedureMap(){return this.procedureMap}getRootWorkspace(){let e=null;const n=this.options.parentWorkspace;return this.isFlyout?n&&n.options&&(e=n.options.parentWorkspace):n&&(e=n),e}static getById(e){return $e(e)}static getAll(){return z()}};Sh.SCAN_ANGLE=3;var BM=100,Pw=class{constructor(e){this.parentWorkspace=e,this.sounds=new Map,this.lastSound=null,this.muted=!1}dispose(){this.sounds.clear()}load(e,n){if(e.length){try{var i=new globalThis.Audio}catch{return}for(let m=0;m<e.length;m++){const T=e[m],N=T.match(/\.(\w+)$/);if(N&&i.canPlayType("audio/"+N[1])){var u=new globalThis.Audio(T);break}}u&&this.sounds.set(n,u)}}preload(){for(const e of this.sounds.values()){e.volume=.01;const n=e.play();if(n!==void 0?n.then(e.pause).catch(function(){}):e.pause(),nu||Jf)break}}play(e,n){if(!this.muted){var i=this.sounds.get(e);i?(e=new Date,this.lastSound!==null&&e.getTime()-this.lastSound.getTime()<BM||(this.lastSound=e,i=nu||tu?i:i.cloneNode(),i.volume=n===void 0?1:n,i.play())):this.parentWorkspace&&this.parentWorkspace.getAudioManager().play(e,n)}}setMuted(e){this.muted=e}getMuted(){return this.muted}},FM=20,go=class extends Sh{constructor(e){super(e),this.resizeHandlerWrapper=null,this.resizesEnabled=this.visible=this.rendered=!0,this.startScrollY=this.startScrollX=this.scrollY=this.scrollX=0,this.oldScale=this.scale=1,this.oldLeft=this.oldTop=0,this.inverseScreenCTM=this.targetWorkspace=this.dummyWheelListener=this.configureContextMenu=this.lastRecordedPageScroll=this.injectionDiv=this.currentGesture_=this.toolbox=this.flyout=this.scrollbar=this.trashcan=null,this.inverseScreenCTMDirty=!0,this.highlightedBlocks=[],this.toolboxCategoryCallbacks=new Map,this.flyoutButtonCallbacks=new Map,this.cachedParentSvg=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements=[],this.dragTargetAreas=[],this.zoomControls_=this.layerManager=null,this.metricsManager=new(y(Te.METRICS_MANAGER,e,!0))(this),this.getMetrics=e.getMetrics||this.metricsManager.getMetrics.bind(this.metricsManager),this.setMetrics=e.setMetrics||go.setTopLevelWorkspaceMetrics,this.componentManager=new Ft,this.connectionDBList=Th.init(this.connectionChecker),this.audioManager=new Pw(e.parentWorkspace),this.grid=this.options.gridPattern?new Sv(this.options.gridPattern,e.gridOptions):null,this.markerManager=new Ll(this),nn&&qi&&this.registerToolboxCategoryCallback(fu,qi),Eu&&Uc&&this.registerToolboxCategoryCallback(Bv,Uc),Gr&&eo&&(this.registerToolboxCategoryCallback(c$,eo),this.addChangeListener(Bc)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new Nw(this,this.options.theme||s$),this.themeManager_.subscribeWorkspace(this);let n;this.renderer=If(this.options.renderer||"geras",this.getTheme(),(n=this.options.rendererOverrides)!=null?n:void 0),this.cachedParentSvgSize=new Re(0,0)}getMarkerManager(){return this.markerManager}getMetricsManager(){return this.metricsManager}setMetricsManager(e){this.metricsManager=e,this.getMetrics=this.metricsManager.getMetrics.bind(this.metricsManager)}getComponentManager(){return this.componentManager}setCursorSvg(e){this.markerManager.setCursorSvg(e)}setMarkerSvg(e){this.markerManager.setMarkerSvg(e)}getMarker(e){return this.markerManager?this.markerManager.getMarker(e):null}getCursor(){return this.markerManager?this.markerManager.getCursor():null}getRenderer(){return this.renderer}getThemeManager(){return this.themeManager_}getTheme(){return this.themeManager_.getTheme()}setTheme(e){e||(e=s$),this.themeManager_.setTheme(e)}refreshTheme(){this.svgGroup_&&this.renderer.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles(this.getAllBlocks(!1).filter(n=>!!n.getStyleName())),this.refreshToolboxSelection(),this.toolbox&&this.toolbox.refreshTheme(),this.isVisible()&&this.setVisible(!0);const e=new(G(oe.THEME_CHANGE))(this.getTheme().name,this.id);W(e)}updateBlockStyles(e){for(let n=0,i;i=e[n];n++){const u=i.getStyleName();u&&i.setStyle(u)}}getInverseScreenCTM(){if(this.inverseScreenCTMDirty){const e=this.getParentSvg().getScreenCTM();e&&(this.inverseScreenCTM=e.inverse(),this.inverseScreenCTMDirty=!1)}return this.inverseScreenCTM}updateInverseScreenCTM(){this.inverseScreenCTMDirty=!0}isVisible(){return this.visible}getSvgXY(e){let n=0,i=0,u=1;(this.getCanvas().contains(e)||this.getBubbleCanvas().contains(e))&&(u=this.scale);do{const m=vr(e);(e===this.getCanvas()||e===this.getBubbleCanvas())&&(u=1),n+=m.x*u,i+=m.y*u,e=e.parentNode}while(e&&e!==this.getParentSvg()&&e!==this.getInjectionDiv());return new ke(n,i)}getCachedParentSvgSize(){const e=this.cachedParentSvgSize;return new Re(e.width,e.height)}getOriginOffsetInPixels(){return si(this.getCanvas())}getInjectionDiv(){if(!this.injectionDiv){let e=this.svgGroup_;for(;e;){if((" "+(e.getAttribute("class")||"")+" ").includes(" injectionDiv ")){this.injectionDiv=e;break}e=e.parentNode}}return this.injectionDiv}getSvgGroup(){return this.svgGroup_}getBlockCanvas(){return this.getCanvas()}setResizeHandlerWrapper(e){this.resizeHandlerWrapper=e}createDom(e,n){return this.injectionDiv||(this.injectionDiv=n??null),this.svgGroup_=ue(Z.G,{class:"blocklyWorkspace"}),e&&(this.svgBackground_=ue(Z.RECT,{height:"100%",width:"100%",class:e},this.svgGroup_),e==="blocklyMainBackground"&&this.grid?this.svgBackground_.style.fill="url(#"+this.grid.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.layerManager=new xM(this),this.svgBlockCanvas_=this.layerManager.getBlockLayer(),this.svgBubbleCanvas_=this.layerManager.getBubbleLayer(),this.isFlyout||(je(this.svgGroup_,"pointerdown",this,this.onMouseDown,!1),this.dummyWheelListener=()=>{},document.body.addEventListener("wheel",this.dummyWheelListener),je(this.svgGroup_,"wheel",this,this.onMouseWheel)),this.options.hasCategories&&(this.toolbox=new(y(Te.TOOLBOX,this.options,!0))(this)),this.grid&&this.grid.update(this.scale),this.recordDragTargets(),(e=y(Te.CURSOR,this.options))&&this.markerManager.setCursor(new e),this.renderer.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_}dispose(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&Q(this.svgGroup_),this.toolbox&&(this.toolbox.dispose(),this.toolbox=null),this.flyout&&(this.flyout.dispose(),this.flyout=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&this.zoomControls_.dispose(),this.audioManager&&this.audioManager.dispose(),this.grid&&(this.grid=null),this.renderer.dispose(),this.markerManager&&this.markerManager.dispose(),super.dispose(),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||this.themeManager_.dispose()),this.connectionDBList.length=0,this.toolboxCategoryCallbacks.clear(),this.flyoutButtonCallbacks.clear(),!this.options.parentWorkspace){const e=this.getParentSvg();e&&e.parentNode&&Q(e.parentNode)}this.resizeHandlerWrapper&&(ft(this.resizeHandlerWrapper),this.resizeHandlerWrapper=null),this.dummyWheelListener&&(document.body.removeEventListener("wheel",this.dummyWheelListener),this.dummyWheelListener=null)}addTrashcan(){this.trashcan=go.newTrashcan(this);const e=this.trashcan.createDom();this.svgGroup_.insertBefore(e,this.getCanvas())}static newTrashcan(e){throw Error("The implementation of newTrashcan should be monkey-patched in by blockly.ts")}addZoomControls(){this.zoomControls_=new Qg(this);const e=this.zoomControls_.createDom();this.svgGroup_.appendChild(e)}addFlyout(e){const n=new po({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return n.toolboxPosition=this.options.toolboxPosition,this.flyout=this.horizontalLayout?new(y(Te.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(n):new(y(Te.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(n),this.flyout.autoClose=!1,this.flyout.getWorkspace().setVisible(!0),this.flyout.createDom(e)}getFlyout(e){return this.flyout||e?this.flyout:this.toolbox?this.toolbox.getFlyout():null}getToolbox(){return this.toolbox}updateScreenCalculations(){this.updateInverseScreenCTM(),this.recordDragTargets()}resizeContents(){this.resizesEnabled&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())}resize(){this.toolbox&&this.toolbox.position(),this.flyout&&this.flyout.position();const e=this.componentManager.getComponents(Ft.Capability.POSITIONABLE,!0),n=this.getMetricsManager().getUiMetrics(),i=[];for(let u=0,m;m=e[u];u++){m.position(n,i);const T=m.getBoundingRectangle();T&&i.push(T)}this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations()}updateScreenCalculationsIfScrolled(){const e=Zl();ke.equals(this.lastRecordedPageScroll,e)||(this.lastRecordedPageScroll=e,this.updateScreenCalculations())}getLayerManager(){return this.layerManager}getCanvas(){return this.layerManager.getBlockLayer()}setCachedParentSvgSize(e,n){const i=this.getParentSvg();e!=null&&(this.cachedParentSvgSize.width=e,i.setAttribute("data-cached-width",`${e}`)),n!=null&&(this.cachedParentSvgSize.height=n,i.setAttribute("data-cached-height",`${n}`))}getBubbleCanvas(){return this.layerManager.getBubbleLayer()}getParentSvg(){if(!this.cachedParentSvg){let e=this.svgGroup_;for(;e;){if(e.tagName==="svg"){this.cachedParentSvg=e;break}e=e.parentNode}}return this.cachedParentSvg}maybeFireViewportChangeEvent(){if(ce()){var e=this.scale,n=-this.scrollY,i=-this.scrollX;if(!(e===this.oldScale&&1>Math.abs(n-this.oldTop)&&1>Math.abs(i-this.oldLeft))){var u=new(G(oe.VIEWPORT_CHANGE))(n,i,e,this.id,this.oldScale);this.oldScale=e,this.oldTop=n,this.oldLeft=i,W(u)}}}translate(e,n){let i;(i=this.layerManager)==null||i.translateLayers(new ke(e,n),this.scale);let u;(u=this.grid)==null||u.moveTo(e,n),this.maybeFireViewportChangeEvent()}getWidth(){const e=this.getMetrics();return e?e.viewWidth/this.scale:0}setVisible(e){this.visible=e,this.svgGroup_&&(this.scrollbar&&this.scrollbar.setContainerVisible(e),this.getFlyout()&&this.getFlyout().setContainerVisible(e),this.getParentSvg().style.display=e?"block":"none",this.toolbox&&this.toolbox.setVisible(e),e||this.hideChaff(!0))}render(){const e=this.getAllBlocks(!1);for(let n=e.length-1;0<=n;n--)e[n].queueRender();this.getTopBlocks().flatMap(n=>n.getDescendants(!1)).filter(n=>n.isInsertionMarker()).forEach(n=>n.queueRender()),ir().then(()=>{this.markerManager.updateMarkers()})}highlightBlock(e,n){if(n===void 0){for(let i=0,u;u=this.highlightedBlocks[i];i++)u.setHighlighted(!1);this.highlightedBlocks.length=0}(e=e?this.getBlockById(e):null)&&((n=n===void 0||n)?this.highlightedBlocks.includes(e)||this.highlightedBlocks.push(e):zt(this.highlightedBlocks,e),e.setHighlighted(n))}refreshToolboxSelection(){const e=this.isFlyout?this.targetWorkspace:this;e&&!e.currentGesture_&&e.toolbox&&e.toolbox.getFlyout()&&e.toolbox.refreshSelection()}renameVariableById(e,n){super.renameVariableById(e,n),this.refreshToolboxSelection()}deleteVariableById(e){super.deleteVariableById(e),this.refreshToolboxSelection()}createVariable(e,n,i){return e=super.createVariable(e,n,i),this.refreshToolboxSelection(),e}recordDragTargets(){const e=this.componentManager.getComponents(Ft.Capability.DRAG_TARGET,!0);this.dragTargetAreas=[];for(let n=0,i;i=e[n];n++){const u=i.getClientRect();u&&this.dragTargetAreas.push({component:i,clientRect:u})}}newBlock(e,n){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}newComment(e){throw Error("The implementation of newComment should be monkey-patched in by blockly.ts")}getDragTarget(e){for(let n=0,i;i=this.dragTargetAreas[n];n++)if(i.clientRect.contains(e.clientX,e.clientY))return i.component;return null}onMouseDown(e){const n=this.getGesture(e);n&&n.handleWsStart(e,this)}startDrag(e,n){Oc(this,e,n)}moveDrag(e){return Ac(this,e)}isDragging(){return this.currentGesture_!==null&&this.currentGesture_.isDragging()}isDraggable(){return this.options.moveOptions&&this.options.moveOptions.drag}isMovable(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch}isMovableHorizontally(){const e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollHorizontally())}isMovableVertically(){const e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollVertically())}onMouseWheel(e){if(Pl.inProgress())e.preventDefault(),e.stopPropagation();else{var n=this.options.zoomOptions&&this.options.zoomOptions.wheel,i=this.options.moveOptions&&this.options.moveOptions.wheel;if(n||i){var u=hn(e);if(ru)var m=e.metaKey;n&&(e.ctrlKey||m||!i)?(u=-u.y/50,n=fs(e,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(n.x,n.y,u)):(n=this.scrollX-u.x,i=this.scrollY-u.y,e.shiftKey&&!u.x&&(n=this.scrollX-u.y,i=this.scrollY),this.scroll(n,i)),e.preventDefault()}}}getBlocksBoundingBox(){const e=this.getTopBoundedElements();if(!e.length)return new St(0,0,0,0);const n=e[0].getBoundingRectangle();for(let u=1;u<e.length;u++){var i=e[u];i.isInsertionMarker&&i.isInsertionMarker()||(i=i.getBoundingRectangle(),i.top<n.top&&(n.top=i.top),i.bottom>n.bottom&&(n.bottom=i.bottom),i.left<n.left&&(n.left=i.left),i.right>n.right&&(n.right=i.right))}return n}cleanUp(){this.setResizesEnabled(!1),s.setGroup$$module$build$src$core$events$utils(!0);var e=this.getTopBlocks(!0),n=e.filter(T=>T.isMovable());const i=e.filter(T=>!T.isMovable()).map(T=>T.getBoundingRectangle());e=function(T){for(const N of i)if(T.intersects(N))return N;return null};var u=0;const m=this.renderer.getConstants().MIN_BLOCK_HEIGHT;for(const T of n){for(n=T.getBoundingRectangle(),T.moveBy(-n.left,u-n.top,["cleanup"]),T.snapToGrid(),n=T.getBoundingRectangle(),u=e(n);u!=null;)u=u.top+u.getHeight()+m,T.moveBy(0,u-n.top,["cleanup"]),T.snapToGrid(),n=T.getBoundingRectangle(),u=e(n);u=T.getRelativeToSurfaceXY().y+T.getHeightWidth().height+m}s.setGroup$$module$build$src$core$events$utils(!1),this.setResizesEnabled(!0)}showContextMenu(e){if(!this.options.readOnly&&!this.isFlyout){var n=X.registry.getContextMenuOptions(X.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(n,e),ha(e,n,this.RTL,this)}}updateToolbox(e){if(e=ic(e)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(ac(e)){if(!this.toolbox)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=e,this.toolbox.render(e)}else{if(!this.flyout)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=e,this.flyout.show(e)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")}markFocused(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(me(this),this.getParentSvg().focus({preventScroll:!0}))}zoom(e,n,i){i=Math.pow(this.options.zoomOptions.scaleSpeed,i);const u=this.scale*i;if(this.scale!==u){u>this.options.zoomOptions.maxScale?i=this.options.zoomOptions.maxScale/this.scale:u<this.options.zoomOptions.minScale&&(i=this.options.zoomOptions.minScale/this.scale);var m=this.getCanvas().getCTM(),T=this.getParentSvg().createSVGPoint();T.x=e,T.y=n,T=T.matrixTransform(m.inverse()),e=T.x,n=T.y,m=m.translate(e*(1-i),n*(1-i)).scale(i),this.scrollX=m.e,this.scrollY=m.f,this.setScale(u)}}zoomCenter(e){var n=this.getMetrics();let i;this.flyout?(i=n.svgWidth?n.svgWidth/2:0,n=n.svgHeight?n.svgHeight/2:0):(i=n.viewWidth/2+n.absoluteLeft,n=n.viewHeight/2+n.absoluteTop),this.zoom(i,n,e)}zoomToFit(){if(this.isMovable()){var e=this.getMetrics(),n=e.viewWidth;e=e.viewHeight;var i=this.getBlocksBoundingBox(),u=2*FM,m=i.right-i.left+u;if(i=i.bottom-i.top+u,m){this.flyout&&(this.horizontalLayout?(e+=this.flyout.getHeight(),i+=this.flyout.getHeight()/this.scale):(n+=this.flyout.getWidth(),m+=this.flyout.getWidth()/this.scale)),n/=m,e/=i,s.disable$$module$build$src$core$events$utils();try{this.setScale(Math.min(n,e)),this.scrollCenter()}finally{s.enable$$module$build$src$core$events$utils()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}beginCanvasTransition(){Ge(this.getCanvas(),"blocklyCanvasTransitioning"),Ge(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}endCanvasTransition(){D(this.getCanvas(),"blocklyCanvasTransitioning"),D(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}scrollCenter(){if(this.isMovable()){var e=this.getMetrics(),n=(e.scrollWidth-e.viewWidth)/2,i=(e.scrollHeight-e.viewHeight)/2;n=-n-e.scrollLeft,i=-i-e.scrollTop,this.scroll(n,i)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}centerOnBlock(e,n){if(this.isMovable()){var i=e?this.getBlockById(e):null;if(i){e=i.getRelativeToSurfaceXY(),i=n?{height:i.height,width:i.width}:i.getHeightWidth();var u=this.scale;n=(e.x+(this.RTL?-1:1)*i.width/2)*u,e=(e.y+i.height/2)*u,i=this.getMetrics(),this.scroll(-(n-i.viewWidth/2),-(e-i.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}setScale(e){this.options.zoomOptions.maxScale&&e>this.options.zoomOptions.maxScale?e=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&e<this.options.zoomOptions.minScale&&(e=this.options.zoomOptions.minScale),this.scale=e,this.hideChaff(!1),(e=this.getFlyout(!1))&&e.isVisible()&&(e.reflow(),this.recordDragTargets()),this.grid&&this.grid.update(this.scale),e=this.getMetrics(),this.scrollX-=e.absoluteLeft,this.scrollY-=e.absoluteTop,e.viewLeft+=e.absoluteLeft,e.viewTop+=e.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout?this.scrollbar.resizeView(e):this.scrollbar.resizeContent(e))}getScale(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale}scroll(e,n){this.hideChaff(!0);const i=this.getMetrics();e=Math.min(e,-i.scrollLeft),n=Math.min(n,-i.scrollTop);const u=i.scrollTop+Math.max(0,i.scrollHeight-i.viewHeight);e=Math.max(e,-(i.scrollLeft+Math.max(0,i.scrollWidth-i.viewWidth))),n=Math.max(n,-u),this.scrollX=e,this.scrollY=n,this.scrollbar&&this.scrollbar.set(-(e+i.scrollLeft),-(n+i.scrollTop),!1),e+=i.absoluteLeft,n+=i.absoluteTop,this.translate(e,n)}getBlockById(e){return super.getBlockById(e)}getAllBlocks(e=!1){return super.getAllBlocks(e)}getTopBlocks(e=!1){return super.getTopBlocks(e)}addTopBlock(e){this.addTopBoundedElement(e),super.addTopBlock(e)}removeTopBlock(e){this.removeTopBoundedElement(e),super.removeTopBlock(e)}addTopComment(e){this.addTopBoundedElement(e),super.addTopComment(e)}removeTopComment(e){this.removeTopBoundedElement(e),super.removeTopComment(e)}getRootWorkspace(){return super.getRootWorkspace()}addTopBoundedElement(e){this.topBoundedElements.push(e)}removeTopBoundedElement(e){zt(this.topBoundedElements,e)}getTopBoundedElements(){return[].concat(this.topBoundedElements)}setResizesEnabled(e){const n=!this.resizesEnabled&&e;this.resizesEnabled=e,n&&this.resizeContents()}clear(){this.setResizesEnabled(!1),super.clear(),this.topBoundedElements=[],this.setResizesEnabled(!0)}registerButtonCallback(e,n){if(typeof n!="function")throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks.set(e,n)}getButtonCallback(e){let n;return(n=this.flyoutButtonCallbacks.get(e))!=null?n:null}removeButtonCallback(e){this.flyoutButtonCallbacks.delete(e)}registerToolboxCategoryCallback(e,n){if(typeof n!="function")throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks.set(e,n)}getToolboxCategoryCallback(e){return this.toolboxCategoryCallbacks.get(e)||null}removeToolboxCategoryCallback(e){this.toolboxCategoryCallbacks.delete(e)}getGesture(e){const n=e.type==="pointerdown",i=this.currentGesture_;return i?n&&i.hasStarted()?(console.warn("Tried to start the same gesture twice."),i.cancel(),null):i:n?this.currentGesture_=new Pl(e,this):null}clearGesture(){this.currentGesture_=null}cancelCurrentGesture(){this.currentGesture_&&this.currentGesture_.cancel()}getAudioManager(){return this.audioManager}getGrid(){return this.grid}hideChaff(e=!1){wo(),Ys(this),Ks(),this.hideComponents(e)}hideComponents(e=!1){this.getComponentManager().getComponents(Ft.Capability.AUTOHIDEABLE,!0).forEach(n=>n.autoHide(e))}static setTopLevelWorkspaceMetrics(e){const n=this.getMetrics();typeof e.x=="number"&&(this.scrollX=-(n.scrollLeft+(n.scrollWidth-n.viewWidth)*e.x)),typeof e.y=="number"&&(this.scrollY=-(n.scrollTop+(n.scrollHeight-n.viewHeight)*e.y)),this.translate(this.scrollX+n.absoluteLeft,this.scrollY+n.absoluteTop)}},jv=class extends is{constructor(e,n,i){super(i),this.type=oe.SELECTED,this.oldElementId=e??void 0,this.newElementId=n??void 0}toJson(){const e=super.toJson();return e.oldElementId=this.oldElementId,e.newElementId=this.newElementId,e}static fromJson(e,n,i){return n=super.fromJson(e,n,i??new jv),n.oldElementId=e.oldElementId,n.newElementId=e.newElementId,n}};o(Te.EVENT,oe.SELECTED,jv);var vm=class{paste(e,n,i){if(!n.isCapacityAvailable(e.typeCounts))return null;i&&(e.blockState.x=i.x,e.blockState.y=i.y),i=i||new ke(e.blockState.x||0,e.blockState.y||0),s.disable$$module$build$src$core$events$utils();let u;try{u=zs(e.blockState,n),Rf(u,i)}finally{s.enable$$module$build$src$core$events$utils()}return u&&(ce()&&!u.isShadow()&&W(new(G(oe.BLOCK_CREATE))(u)),s.setSelected$$module$build$src$core$common(u),u)}};vm.TYPE="block",Or(vm.TYPE,new vm);var m$={};m$.bumpIntoBounds=ys,m$.bumpIntoBoundsHandler=Gc,m$.bumpTopObjectsIntoBounds=Ta;var Dw=class{constructor(e){this.block=e,this.connectionPreviewer=this.connectionCandidate=this.startLoc=this.startChildConn=this.startParentConn=null,this.dragging=!1,this.dragOffset=new ke(0,0),this.inGroup=!1,this.workspace=e.workspace}isMovable(){if(this.block.isShadow()){let e,n;return(n=(e=this.block.getParent())==null?void 0:e.isMovable())!=null?n:!1}return this.block.isOwnMovable()&&!this.block.isDeadOrDying()&&!this.workspace.options.readOnly&&!this.block.isInFlyout}startDrag(e){if(this.block.isShadow())this.startDraggingShadow(e);else{this.dragging=!0,(this.inGroup=!!s.getGroup$$module$build$src$core$events$utils())||s.setGroup$$module$build$src$core$events$utils(!0),this.fireDragStartEvent(),this.startLoc=this.block.getRelativeToSurfaceXY(),this.connectionCandidate=null,this.connectionPreviewer=new(y(Te.CONNECTION_PREVIEWER,this.workspace.options))(this.block),qn(),this.workspace.setResizesEnabled(!1),$a(),e=!!e&&(e.altKey||e.ctrlKey||e.metaKey),this.shouldDisconnect(e)&&this.disconnectBlock(e),this.block.setDragging(!0);var n;(n=this.workspace.getLayerManager())==null||n.moveToDragLayer(this.block)}}startDraggingShadow(e){const n=this.block.getParent();if(!n)throw Error("Tried to drag a shadow block with no parent. Shadow blocks should always have parents.");this.dragOffset=ke.difference(n.getRelativeToSurfaceXY(),this.block.getRelativeToSurfaceXY()),n.startDrag(e)}shouldDisconnect(e){return!!(this.block.getParent()||e&&this.block.nextConnection&&this.block.nextConnection.targetBlock())}disconnectBlock(e){let n,i,u;if(this.startParentConn=(u=(n=this.block.outputConnection)==null?void 0:n.targetConnection)!=null?u:(i=this.block.previousConnection)==null?void 0:i.targetConnection,e){let m;this.startChildConn=(m=this.block.nextConnection)==null?void 0:m.targetConnection}this.block.unplug(e),Nc(this.block)}fireDragStartEvent(){const e=new(G(oe.BLOCK_DRAG))(this.block,!0,this.block.getDescendants(!1));W(e)}fireDragEndEvent(){const e=new(G(oe.BLOCK_DRAG))(this.block,!1,this.block.getDescendants(!1));W(e)}fireMoveEvent(){if(!this.block.isDeadOrDying()){var e=new(G(oe.BLOCK_MOVE))(this.block);e.setReason(["drag"]),e.oldCoordinate=this.startLoc,e.recordNew(),W(e)}}drag(e){if(this.block.isShadow()){let n;(n=this.block.getParent())==null||n.drag(ke.sum(e,this.dragOffset))}else this.block.moveDuringDrag(e),this.updateConnectionPreview(this.block,ke.difference(e,this.startLoc))}updateConnectionPreview(e,n){var i=this.connectionCandidate;const u=this.getConnectionCandidate(e,n);if(u){this.connectionCandidate=n=i&&this.currCandidateIsBetter(i,n,u)?i:u;var{local:m,neighbour:T}=n;n=m.type===Ve.OUTPUT_VALUE||m.type===Ve.PREVIOUS_STATEMENT,i=T.isConnected()&&!T.targetBlock().isInsertionMarker(),n&&i&&!this.orphanCanConnectAtEnd(e,T.targetBlock(),m.type)?this.connectionPreviewer.previewReplacement(m,T,T.targetBlock()):this.connectionPreviewer.previewConnection(m,T)}else this.connectionPreviewer.hidePreview(),this.connectionCandidate=null}orphanCanConnectAtEnd(e,n,i){return!!bt.getConnectionForOrphanedConnection(e,i===Ve.OUTPUT_VALUE?n.outputConnection:n.previousConnection)}currCandidateIsBetter(e,n,i){const{local:u,neighbour:m}=e;e=new ke(u.x,u.y);const T=new ke(m.x,m.y);return n=ke.distance(ke.sum(e,n),T),i.distance>n-s.config$$module$build$src$core$config.currentConnectionPreference}getConnectionCandidate(e,n){e=this.getLocalConnections(e);let i=this.connectionCandidate?s.config$$module$build$src$core$config.connectingSnapRadius:s.config$$module$build$src$core$config.snapRadius,u=null;for(const m of e){const{connection:T,radius:N}=m.closest(i,n);T&&(u={local:m,neighbour:T,distance:N},i=N)}return u}getLocalConnections(e){const n=e.getConnections_(!1),i=e.lastConnectionInStack(!0);return i&&i!==e.nextConnection&&n.push(i),n}endDrag(e){if(this.block.isShadow()){let n;(n=this.block.getParent())==null||n.endDrag(e)}else{if(this.fireDragEndEvent(),this.fireMoveEvent(),qr(),$a(),this.connectionPreviewer.hidePreview(),!this.block.isDeadOrDying()&&this.dragging){let n;(n=this.workspace.getLayerManager())==null||n.moveOffDragLayer(this.block,J),this.block.setDragging(!1)}this.connectionCandidate?(this.applyConnections(this.connectionCandidate),this.disposeStep()):this.block.queueRender().then(()=>this.disposeStep()),this.inGroup||s.setGroup$$module$build$src$core$events$utils(!1)}}disposeStep(){this.block.snapToGrid(),this.connectionPreviewer.dispose(),this.workspace.setResizesEnabled(!0)}applyConnections(e){const{local:n,neighbour:i}=e;n.connect(i);const u=n.isSuperior()?i:n,m=this.block.getRootBlock();ir().then(()=>{ns(u.getSourceBlock()),setTimeout(()=>{m.bringToFront()},0)})}revertDrag(){if(this.block.isShadow()){let n;(n=this.block.getParent())==null||n.revertDrag()}else{var e;if((e=this.startChildConn)==null||e.connect(this.block.nextConnection),this.startParentConn)switch(this.startParentConn.type){case Ve.INPUT_VALUE:this.startParentConn.connect(this.block.outputConnection);break;case Ve.NEXT_STATEMENT:this.startParentConn.connect(this.block.previousConnection)}else{this.block.moveTo(this.startLoc,["drag"]);let n;(n=this.workspace.getLayerManager())==null||n.moveOffDragLayer(this.block,J),ys(this.workspace,this.workspace.getMetricsManager().getScrollMetrics(!0),this.block)}this.startParentConn=this.startChildConn=null,this.connectionPreviewer.hidePreview(),this.connectionCandidate=null,this.block.setDragging(!1),this.dragging=!1}}},Bw=class{constructor(){this.drawer=this.curNode=this.colour=null,this.type="marker"}setDrawer(e){this.drawer=e}getDrawer(){return this.drawer}getCurNode(){return this.curNode}setCurNode(e){const n=this.curNode;this.curNode=e,this.drawer&&this.drawer.draw(n,this.curNode)}draw(){this.drawer&&this.drawer.draw(this.curNode,this.curNode)}hide(){this.drawer&&this.drawer.hide()}dispose(){this.getDrawer()&&this.getDrawer().dispose()}},Wv=class extends Bw{constructor(){super(),this.type="cursor"}next(){var e=this.getCurNode();if(!e)return null;for(e=e.next();e&&e.next()&&(e.getType()===_e.types.NEXT||e.getType()===_e.types.BLOCK);)e=e.next();return e&&this.setCurNode(e),e}in(){var e=this.getCurNode();if(!e)return null;(e.getType()===_e.types.PREVIOUS||e.getType()===_e.types.OUTPUT)&&(e=e.next());let n,i;return(e=(i=(n=e)==null?void 0:n.in())!=null?i:null)&&this.setCurNode(e),e}prev(){var e=this.getCurNode();if(!e)return null;for(e=e.prev();e&&e.prev()&&(e.getType()===_e.types.NEXT||e.getType()===_e.types.BLOCK);)e=e.prev();return e&&this.setCurNode(e),e}out(){var e=this.getCurNode();return e?((e=e.out())&&e.getType()===_e.types.BLOCK&&(e=e.prev()||e),e&&this.setCurNode(e),e):null}};o(Te.CURSOR,Pr,Wv);var ym=class extends Wv{constructor(){super()}next(){var e=this.getCurNode();return e?((e=this.getNextNode_(e,this.validNode_))&&this.setCurNode(e),e):null}in(){return this.next()}prev(){var e=this.getCurNode();return e?((e=this.getPreviousNode_(e,this.validNode_))&&this.setCurNode(e),e):null}out(){return this.prev()}getNextNode_(e,n){if(!e)return null;const i=e.in()||e.next();return n(i)?i:i?this.getNextNode_(i,n):(e=this.findSiblingOrParent(e.out()),n(e)?e:e?this.getNextNode_(e,n):null)}getPreviousNode_(e,n){if(!e)return null;let i=e.prev();return i=i?this.getRightMostChild(i):e.out(),n(i)?i:i?this.getPreviousNode_(i,n):null}validNode_(e){let n=!1;return e=e&&e.getType(),(e===_e.types.OUTPUT||e===_e.types.INPUT||e===_e.types.FIELD||e===_e.types.NEXT||e===_e.types.PREVIOUS||e===_e.types.WORKSPACE)&&(n=!0),n}findSiblingOrParent(e){if(!e)return null;const n=e.next();return n||this.findSiblingOrParent(e.out())}getRightMostChild(e){if(!e.in())return e;for(e=e.in();e&&e.next();)e=e.next();return this.getRightMostChild(e)}};ym.registrationName="basicCursor",o(Te.CURSOR,ym.registrationName,ym);var Fw=class extends ym{validNode_(e){let n=!1;const i=e&&e.getType();return e&&(e=e.getLocation(),i===_e.types.FIELD&&e&&e.isTabNavigable()&&e.isClickable()&&(n=!0)),n}},Uw=10,jr=class extends bt{constructor(e,n){super(e,n),this.highlighted=!1,this.targetConnection=null,this.db=e.workspace.connectionDBList[n],this.dbOpposite=e.workspace.connectionDBList[wu[n]],this.offsetInBlock=new ke(0,0),this.trackedState=jr.TrackedState.WILL_TRACK}dispose(){super.dispose(),this.trackedState===jr.TrackedState.TRACKED&&this.db.removeConnection(this,this.y);let e,n;(n=(e=this.sourceBlock_.pathObject).removeConnectionHighlight)==null||n.call(e,this)}getSourceBlock(){return super.getSourceBlock()}targetBlock(){return super.targetBlock()}distanceFrom(e){const n=this.x-e.x;return e=this.y-e.y,Math.sqrt(n*n+e*e)}bumpAwayFrom(e,n=!1){if(!this.sourceBlock_.workspace.isDragging()){var i=s.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*Uw),u=s.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*Uw),m=e.sourceBlock_.getRootBlock(),T=this.sourceBlock_.getRootBlock();if(!m.isInFlyout&&!T.isInFlyout){var N=!0;if(T.isMovable())m.isMovable()&&n&&(u=-u);else if(m.isMovable())N=!1,i=-i,u=-u;else return;n=N?e:this,e=N?this:e,m=N?T:m,(T=fe()===m)||m.addSelect(),m.RTL&&(i=-i),m.moveBy(n.x+i-e.x,n.y+u-e.y,["bump"]),T||m.removeSelect()}}}moveTo(e,n){let i=!1;return this.trackedState===jr.TrackedState.WILL_TRACK?(this.db.addConnection(this,n),this.trackedState=jr.TrackedState.TRACKED,i=!0):this.trackedState===jr.TrackedState.TRACKED&&(this.db.removeConnection(this,this.y),this.db.addConnection(this,n),i=!0),this.x=e,this.y=n,i}moveBy(e,n){return this.moveTo(this.x+e,this.y+n)}moveToOffset(e){return this.moveTo(e.x+this.offsetInBlock.x,e.y+this.offsetInBlock.y)}setOffsetInBlock(e,n){this.offsetInBlock.x=e,this.offsetInBlock.y=n}getOffsetInBlock(){return this.offsetInBlock}tightenEfficiently(){var e=this.targetConnection;const n=this.targetBlock();e&&n&&(e=ke.difference(this.offsetInBlock,e.offsetInBlock),n.translate(e.x,e.y))}closest(e,n){return this.dbOpposite.searchForClosest(this,e,n)}highlight(){this.highlighted=!0,this.getSourceBlock().queueRender()}unhighlight(){this.highlighted=!1,this.getSourceBlock().queueRender()}isHighlighted(){return this.highlighted}setTracking(e){e&&this.trackedState===jr.TrackedState.TRACKED||!e&&this.trackedState===jr.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(e?(this.db.addConnection(this,this.y),this.trackedState=jr.TrackedState.TRACKED):(this.trackedState===jr.TrackedState.TRACKED&&this.db.removeConnection(this,this.y),this.trackedState=jr.TrackedState.UNTRACKED))}stopTrackingAll(){if(this.setTracking(!1),this.targetConnection){const e=this.targetBlock().getDescendants(!1);for(let n=0;n<e.length;n++){const i=e[n],u=i.getConnections_(!0);for(let m=0;m<u.length;m++)u[m].setTracking(!1);for(const m of i.getIcons())di(m)&&m.setBubbleVisible(!1)}}}startTrackingAll(){this.setTracking(!0);let e=[];if(this.type!==Ve.INPUT_VALUE&&this.type!==Ve.NEXT_STATEMENT)return e;const n=this.targetBlock();if(n){let i;n.isCollapsed()?(i=[],n.outputConnection&&i.push(n.outputConnection),n.nextConnection&&i.push(n.nextConnection),n.previousConnection&&i.push(n.previousConnection)):i=n.getConnections_(!0);for(let u=0;u<i.length;u++)e.push(...i[u].startTrackingAll());e.length||(e=[n])}return e}onFailedConnect(e){const n=this.getSourceBlock();if(j()){const i=s.getGroup$$module$build$src$core$events$utils();setTimeout((function(){n.isDisposed()||n.getParent()||(s.setGroup$$module$build$src$core$events$utils(i),this.bumpAwayFrom(e),s.setGroup$$module$build$src$core$events$utils(!1))}).bind(this),s.config$$module$build$src$core$config.bumpDelay)}}disconnectInternal(e=!0){const{parentConnection:n,childConnection:i}=this.getParentAndChildConnections();if(n&&i){var u=s.getGroup$$module$build$src$core$events$utils();u||s.setGroup$$module$build$src$core$events$utils(!0);var m=n.getSourceBlock(),T=i.getSourceBlock();super.disconnectInternal(e),m.queueRender(),T.updateDisabled(),T.queueRender(),T.getSvgRoot().style.display="block",s.setGroup$$module$build$src$core$events$utils(u)}}respawnShadow_(){super.respawnShadow_();const e=this.targetBlock();e&&(e.initSvg(),e.queueRender())}neighbours(e){return this.dbOpposite.getNeighbours(this,e)}connect_(e){super.connect_(e);var n=this.getSourceBlock();e=e.getSourceBlock(),n.updateDisabled(),e.updateDisabled(),e.queueRender(),(n=n.getInputWithBlock(e))&&(n=n.isVisible(),e.getSvgRoot().style.display=n?"block":"none")}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(e){return super.setCheck(e),this.sourceBlock_.queueRender(),this}};(function(e){e=e.TrackedState||(e.TrackedState={}),e[e.WILL_TRACK=-1]="WILL_TRACK",e[e.UNTRACKED=0]="UNTRACKED",e[e.TRACKED=1]="TRACKED"})(jr||(jr={})),jr.TrackedState;var $o=class extends Va{constructor(e,n,i){if(super(e,n,i),this.childlessWidth=this.width=this.height=0,this.warningTextDb=new Map,this.mutator=null,this.rendered=!0,this.visuallyDisabled=!1,this.translation="",this.dragging=!1,this.relativeCoords=new ke(0,0),this.dragStrategy=new Dw(this),!e.rendered)throw TypeError("Cannot create a rendered block in a headless workspace");this.workspace=e,this.svgGroup=ue(Z.G,{}),this.style=e.getRenderer().getConstants().getBlockStyle(null),this.pathObject=e.getRenderer().makePathObject(this.svgGroup,this.style),e=this.pathObject.svgPath,e.tooltip=this,ca(e),this.svgGroup.setAttribute("data-id",this.id),this.doInit_()}initSvg(){if(!this.initialized){for(var e of this.inputList)e.init();for(const n of this.getIcons())n.initView(this.createIconPointerDownListener(n)),n.updateEditable();this.applyColour(),this.pathObject.updateMovable(this.isMovable()||this.isInFlyout),e=this.getSvgRoot(),!this.workspace.options.readOnly&&e&&je(e,"pointerdown",this,this.onMouseDown),e.parentNode||this.workspace.getCanvas().appendChild(e),this.initialized=!0}}getColourSecondary(){return this.style.colourSecondary}getColourTertiary(){return this.style.colourTertiary}select(){if(this.isShadow()){let e;(e=this.getParent())==null||e.select()}else this.addSelect()}unselect(){if(this.isShadow()){let e;(e=this.getParent())==null||e.unselect()}else this.removeSelect()}setParent(e){const n=this.parentBlock_;if(e!==n){qn(),super.setParent(e),qr();var i=this.getSvgRoot();if(!this.workspace.isClearing&&i){var u=this.getRelativeToSurfaceXY();e?e.getSvgRoot().appendChild(i):n&&((e=this.workspace.getCanvas().querySelector(".blocklyDragging"))?this.workspace.getCanvas().insertBefore(i,e):this.workspace.getCanvas().appendChild(i),this.translate(u.x,u.y)),this.applyColour()}}}getRelativeToSurfaceXY(){const e=this.workspace.getLayerManager();if(!e)throw Error("Cannot calculate position because the workspace has not been appended");let n=0,i=0,u=this.getSvgRoot();if(u)do{const m=vr(u);n+=m.x,i+=m.y,u=u.parentNode}while(u&&!e.hasLayer(u));return new ke(n,i)}moveBy(e,n,i){if(this.parentBlock_)throw Error("Block has parent");const u=ce();let m=null;u&&(m=new(G(oe.BLOCK_MOVE))(this),i&&m.setReason(i)),e=new ke(e,n),n=this.getRelativeToSurfaceXY(),e=ke.sum(n,e),this.translate(e.x,e.y),this.updateComponentLocations(e),u&&m&&(m.recordNew(),W(m)),this.workspace.resizeContents()}translate(e,n){this.translation=`translate(${e}, ${n})`,this.relativeCoords=new ke(e,n),this.getSvgRoot().setAttribute("transform",this.getTranslation())}getTranslation(){return this.translation}moveTo(e,n){const i=this.getRelativeToSurfaceXY();this.moveBy(e.x-i.x,e.y-i.y,n)}moveDuringDrag(e){this.translate(e.x,e.y),this.getSvgRoot().setAttribute("transform",this.getTranslation()),this.updateComponentLocations(e)}snapToGrid(){if(!this.isDeadOrDying()&&!this.getParent()&&!this.isInFlyout){var e=this.workspace.getGrid();if(e!=null&&e.shouldSnap()){var n=this.getRelativeToSurfaceXY();e=e.alignXY(n),e!==n&&this.moveTo(e,["snap"])}}}getBoundingRectangle(){return this.getBoundingRectangleWithDimensions(this.getHeightWidth())}getBoundingRectangleWithoutChildren(){return this.getBoundingRectangleWithDimensions({height:this.height,width:this.childlessWidth})}getBoundingRectangleWithDimensions(e){const n=this.getRelativeToSurfaceXY();let i,u;return this.RTL?(i=n.x-e.width,u=n.x):(i=n.x,u=n.x+e.width),new St(n.y,n.y+e.height,i,u)}markDirty(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(let e=0,n;n=this.inputList[e];e++)n.markDirty()}setCollapsed(e){this.collapsed_!==e&&(super.setCollapsed(e),this.updateCollapsed())}updateCollapsed(){var e=this.isCollapsed();const n=Vr,i=Rl;for(let m=0,T;T=this.inputList[m];m++)T.name!==n&&T.setVisible(!e);for(var u of this.getIcons())u.updateCollapsed();e?(e=this.toString(Lw),(u=this.getField(i))?u.setValue(e):(this.getInput(n)||this.appendDummyInput(n)).appendField(new bu(e),i)):(this.updateDisabled(),this.removeInput(n))}tab(e,n){const i=new Fw;i.setCurNode(_e.createFieldNode(e)),e=i.getCurNode(),n?i.next():i.prev(),(n=i.getCurNode())&&n!==e&&(n.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(n))}onMouseDown(e){const n=this.workspace.getGesture(e);n&&n.handleBlockStart(e,this)}showHelp(){const e=typeof this.helpUrl=="function"?this.helpUrl():this.helpUrl;e&&window.open(e)}generateContextMenu(){if(this.workspace.options.readOnly||!this.contextMenu)return null;const e=X.registry.getContextMenuOptions(X.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(e),e}showContextMenu(e){const n=this.generateContextMenu();n&&n.length&&(ha(e,n,this.RTL,this.workspace),Id(this))}updateComponentLocations(e){this.dragging||this.updateConnectionLocations(e),this.updateIconLocations(e),this.updateFieldLocations(e);for(const n of this.getChildren(!1))n.updateComponentLocations(ke.sum(e,n.relativeCoords))}updateConnectionLocations(e){for(const n of this.getConnections_(!1))n.moveToOffset(e)}updateIconLocations(e){for(const n of this.getIcons())n.onLocationChange(e)}updateFieldLocations(e){for(const n of this.inputList)for(const i of n.fieldRow)i.onLocationChange(e)}setDragging(e){(this.dragging=e)?(this.translation="",pr.push(...this.getConnections_(!0)),Ge(this.svgGroup,"blocklyDragging")):(pr.length=0,D(this.svgGroup,"blocklyDragging"));for(let n=0;n<this.childBlocks_.length;n++)this.childBlocks_[n].setDragging(e)}setMovable(e){super.setMovable(e),this.pathObject.updateMovable(e)}setEditable(e){super.setEditable(e),e=this.getIcons();for(let n=0;n<e.length;n++)e[n].updateEditable()}setShadow(e){super.setShadow(e),this.applyColour()}setInsertionMarker(e){this.isInsertionMarker_!==e&&(this.isInsertionMarker_=e)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))}getSvgRoot(){return this.svgGroup}dispose(e,n){if(this.disposing=!0,sl(),xc(),n&&(this.unplug(e),Nr(this)),n=fe(),n instanceof Va){let i=n;for(;i!==null;)i===this&&n.unselect(),i=i.getParent()}super.dispose(!!e),Q(this.svgGroup)}disposeInternal(){this.disposing=!0,super.disposeInternal(),fe()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),[...this.warningTextDb.values()].forEach(e=>clearTimeout(e)),this.warningTextDb.clear(),this.getIcons().forEach(e=>e.dispose())}checkAndDelete(){this.workspace.isFlyout||(s.setGroup$$module$build$src$core$events$utils(!0),this.workspace.hideChaff(),this.outputConnection?this.dispose(!1,!0):this.dispose(!0,!0),s.setGroup$$module$build$src$core$events$utils(!1))}toCopyData(){return this.isInsertionMarker_?null:{paster:vm.TYPE,blockState:Bn(this,{addCoordinates:!0,addNextBlocks:!1}),typeCounts:He(this,!0)}}applyColour(){this.pathObject.applyColour(this);const e=this.getIcons();for(let n=0;n<e.length;n++)e[n].applyColour();for(let n=0,i;i=this.inputList[n];n++)for(let u=0,m;m=i.fieldRow[u];u++)m.applyColour()}updateDisabled(){const e=!this.isEnabled()||this.getInheritedDisabled();if(this.visuallyDisabled===e){let n;(n=this.getNextBlock())==null||n.updateDisabled()}else{this.applyColour(),this.visuallyDisabled=e;for(const n of this.getChildren(!1))n.updateDisabled()}}setWarningText(e,n=""){if(n)this.warningTextDb.has(n)&&(clearTimeout(this.warningTextDb.get(n)),this.warningTextDb.delete(n));else{for(var i of this.warningTextDb.values())clearTimeout(i);this.warningTextDb.clear()}if(this.workspace.isDragging())this.warningTextDb.set(n,setTimeout(()=>{this.isDeadOrDying()||(this.warningTextDb.delete(n),this.setWarningText(e,n))},100));else if(this.isInFlyout&&(e=null),i=this.getIcon(Ul.TYPE),e){let u=this.getSurroundParent(),m=null;for(;u;)u.isCollapsed()&&(m=u),u=u.getSurroundParent();m&&m.setWarningText(s.Msg$$module$build$src$core$msg.COLLAPSED_WARNINGS_WARNING,$o.COLLAPSED_WARNING_ID),i?i.addMessage(e,n):this.addIcon(new Ul(this).addMessage(e,n))}else i&&(n?(i.addMessage("",n),i.getText()||this.removeIcon(Ul.TYPE)):this.removeIcon(Ul.TYPE))}setMutator(e){this.removeIcon(s.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE),e&&this.addIcon(e)}addIcon(e){return super.addIcon(e),e instanceof s.MutatorIcon$$module$build$src$core$icons$mutator_icon&&(this.mutator=e),e.initView(this.createIconPointerDownListener(e)),e.applyColour(),e.updateEditable(),this.queueRender(),e}createIconPointerDownListener(e){return n=>{this.isDeadOrDying()||(n=this.workspace.getGesture(n))&&n.setStartIcon(e)}}removeIcon(e){const n=super.removeIcon(e);return e.equals(s.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE)&&(this.mutator=null),this.queueRender(),n}setEnabled(e){w("setEnabled","v11","v12","the setDisabledReason method of BlockSvg");const n=this.isEnabled();super.setEnabled(e),this.isEnabled()===n||this.getInheritedDisabled()||this.updateDisabled()}setDisabledReason(e,n){const i=this.isEnabled();super.setDisabledReason(e,n),this.isEnabled()===i||this.getInheritedDisabled()||this.updateDisabled()}setHighlighted(e){this.pathObject.updateHighlighted(e)}addSelect(){this.pathObject.updateSelected(!0)}removeSelect(){this.pathObject.updateSelected(!1)}setDeleteStyle(e){this.pathObject.updateDraggingDelete(e)}getColour(){return this.style.colourPrimary}setColour(e){super.setColour(e),e=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(e.style),this.style=e.style,this.styleName_=e.name,this.applyColour()}setStyle(e){const n=this.workspace.getRenderer().getConstants().getBlockStyle(e);if(this.styleName_=e,n)this.hat=n.hat,this.pathObject.setStyle(n),this.colour_=n.colourPrimary,this.style=n,this.applyColour();else throw Error("Invalid style name: "+e)}bringToFront(e=!1){let n=this;if(!n.isDeadOrDying())do{const i=n.getSvgRoot(),u=i.parentNode,m=u.childNodes;if(m[m.length-1]!==i&&u.appendChild(i),e)break;n=n.getParent()}while(n)}setPreviousStatement(e,n){super.setPreviousStatement(e,n),this.queueRender()}setNextStatement(e,n){super.setNextStatement(e,n),this.queueRender()}setOutput(e,n){super.setOutput(e,n),this.queueRender()}setInputsInline(e){super.setInputsInline(e),this.queueRender()}removeInput(e,n){return e=super.removeInput(e,n),this.queueRender(),e}moveNumberedInputBefore(e,n){super.moveNumberedInputBefore(e,n),this.queueRender()}appendInput(e){return super.appendInput(e),this.queueRender(),e}setConnectionTracking(e){if(this.previousConnection&&this.previousConnection.setTracking(e),this.outputConnection&&this.outputConnection.setTracking(e),this.nextConnection){this.nextConnection.setTracking(e);var n=this.nextConnection.targetBlock();n&&n.setConnectionTracking(e)}if(!this.collapsed_)for(n=0;n<this.inputList.length;n++){var i=this.inputList[n].connection;i&&(i.setTracking(e),(i=i.targetBlock())&&i.setConnectionTracking(e))}}getConnections_(e){const n=[];if(this.outputConnection&&n.push(this.outputConnection),this.previousConnection&&n.push(this.previousConnection),this.nextConnection&&n.push(this.nextConnection),e||!this.collapsed_)for(let i=0,u;u=this.inputList[i];i++)u.connection&&n.push(u.connection);return n}lastConnectionInStack(e){return super.lastConnectionInStack(e)}getMatchingConnection(e,n){return super.getMatchingConnection(e,n)}makeConnection_(e){return new jr(this,e)}getNextBlock(){return super.getNextBlock()}getPreviousBlock(){return super.getPreviousBlock()}bumpNeighbours(){const e=this.getRootBlock();if(!(this.isDeadOrDying()||this.workspace.isDragging()||e.isInFlyout))for(const n of this.getConnections_(!1)){if(n.isSuperior()){let i;(i=n.targetBlock())==null||i.bumpNeighbours()}for(const i of n.neighbours(s.config$$module$build$src$core$config.snapRadius))i.getSourceBlock().getRootBlock()!==e&&(n.isConnected()&&i.isConnected()||(n.isSuperior()?i.bumpAwayFrom(n,!1):n.bumpAwayFrom(i,!0)))}}scheduleSnapAndBump(){this.snapToGrid(),this.bumpNeighbours()}positionNearConnection(e,n,i){if(e.type===Ve.NEXT_STATEMENT||e.type===Ve.INPUT_VALUE){let u=n.x;n=n.y,u+=i.x-e.getOffsetInBlock().x,n+=i.y-e.getOffsetInBlock().y,this.moveBy(u,n)}}getChildren(e){return super.getChildren(e)}queueRender(){return na(this)}render(){this.queueRender(),es()}renderEfficiently(){qn(),this.isCollapsed()&&this.updateCollapsed(),this.isEnabled()||this.updateDisabled(),this.workspace.getRenderer().render(this),this.tightenChildrenEfficiently(),qr(),this.updateMarkers_()}tightenChildrenEfficiently(){for(const e of this.inputList){const n=e.connection;n&&n.tightenEfficiently()}this.nextConnection&&this.nextConnection.tightenEfficiently()}updateMarkers_(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(Ll.LOCAL_MARKER).draw();for(const e of this.inputList)for(const n of e.fieldRow)n.updateMarkers_()}setCursorSvg(e){this.pathObject.setCursorSvg(e)}setMarkerSvg(e){this.pathObject.setMarkerSvg(e)}getHeightWidth(){let e=this.height,n=this.width;var i=this.getNextBlock();if(i){i=i.getHeightWidth();const u=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;e+=i.height-u,n=Math.max(n,i.width)}return{height:e,width:n}}fadeForReplacement(e){this.pathObject.updateReplacementFade(e)}highlightShapeForInput(e,n){this.pathObject.updateShapeForInputHighlight(e,n)}setDragStrategy(e){this.dragStrategy=e}isMovable(){return this.dragStrategy.isMovable()}startDrag(e){this.dragStrategy.startDrag(e)}drag(e,n){this.dragStrategy.drag(e,n)}endDrag(e){this.dragStrategy.endDrag(e)}revertDrag(){this.dragStrategy.revertDrag()}toFlyoutInfo(){const e=Object.assign({},{kind:"BLOCK"},Bn(this)),n=new Set(["id","height","width","pinned","enabled"]),i=function(u){for(const m in u)n.has(m)?delete u[m]:typeof u[m]=="object"&&i(u[m])};return i(e),[e]}};$o.INLINE=-1,$o.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_";var Vw=class{constructor(){}onDragEnter(e){}onDragOver(e){}onDragExit(e){}onDrop(e){}getClientRect(){return null}shouldPreventMove(e){return!1}},g$=class extends Vw{constructor(){super(),this.wouldDelete_=!1}wouldDelete(e){return e instanceof $o?(e=!e.getParent()&&e.isDeletable(),this.updateWouldDelete_(e)):this.updateWouldDelete_(Er(e)&&e.isDeletable()),this.wouldDelete_}updateWouldDelete_(e){this.wouldDelete_=e}},zv=class extends is{constructor(e,n){super(n),this.type=oe.TRASHCAN_OPEN,this.isOpen=e}toJson(){const e=super.toJson();if(this.isOpen===void 0)throw Error("Whether this is already open or not is undefined. Either pass a value to the constructor, or call fromJson");return e.isOpen=this.isOpen,e}static fromJson(e,n,i){return n=super.fromJson(e,n,i??new zv),n.isOpen=e.isOpen,n}};o(Te.EVENT,oe.TRASHCAN_OPEN,zv);var Hw=class extends g${constructor(e){super(),this.workspace=e,this.id="trashcan",this.contents=[],this.flyout=null,this.isLidOpen=!1,this.minOpenness=0,this.lidTask=this.svgLid=this.svgGroup=null,this.top=this.left=this.lidOpen=0,this.initialized=!1,0>=this.workspace.options.maxTrashcanContents||(e=new po({scrollbars:!0,parentWorkspace:this.workspace,rtl:this.workspace.RTL,oneBasedIndex:this.workspace.options.oneBasedIndex,renderer:this.workspace.options.renderer,rendererOverrides:this.workspace.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace.horizontalLayout?(e.toolboxPosition=this.workspace.toolboxPosition===qe.TOP?qe.BOTTOM:qe.TOP,this.flyout=new(y(Te.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace.options,!0))(e)):(e.toolboxPosition=this.workspace.toolboxPosition===qe.RIGHT?qe.LEFT:qe.RIGHT,this.flyout=new(y(Te.FLYOUTS_VERTICAL_TOOLBOX,this.workspace.options,!0))(e)),this.workspace.addChangeListener(this.onDelete.bind(this)))}createDom(){this.svgGroup=ue(Z.G,{class:"blocklyTrash"});let e;const n=String(Math.random()).substring(2);e=ue(Z.CLIPPATH,{id:"blocklyTrashBodyClipPath"+n},this.svgGroup),ue(Z.RECT,{width:Ch,height:$$,y:Ih},e);const i=ue(Z.IMAGE,{width:er.width,x:-Kv,height:er.height,y:-Xv,"clip-path":"url(#blocklyTrashBodyClipPath"+n+")"},this.svgGroup);return i.setAttributeNS(Sr,"xlink:href",this.workspace.options.pathToMedia+er.url),e=ue(Z.CLIPPATH,{id:"blocklyTrashLidClipPath"+n},this.svgGroup),ue(Z.RECT,{width:Ch,height:Ih},e),this.svgLid=ue(Z.IMAGE,{width:er.width,x:-Kv,height:er.height,y:-Xv,"clip-path":"url(#blocklyTrashLidClipPath"+n+")"},this.svgGroup),this.svgLid.setAttributeNS(Sr,"xlink:href",this.workspace.options.pathToMedia+er.url),at(this.svgGroup,"pointerdown",this,this.blockMouseDownWhenOpenable),at(this.svgGroup,"pointerup",this,this.click),at(i,"pointerover",this,this.mouseOver),at(i,"pointerout",this,this.mouseOut),this.animateLid(),this.svgGroup}init(){0<this.workspace.options.maxTrashcanContents&&(xe(this.flyout.createDom(Z.SVG),this.workspace.getParentSvg()),this.flyout.init(this.workspace)),this.workspace.getComponentManager().addComponent({component:this,weight:Ft.ComponentWeight.TRASHCAN_WEIGHT,capabilities:[Ft.Capability.AUTOHIDEABLE,Ft.Capability.DELETE_AREA,Ft.Capability.DRAG_TARGET,Ft.Capability.POSITIONABLE]}),this.initialized=!0,this.setLidOpen(!1)}dispose(){this.workspace.getComponentManager().removeComponent("trashcan"),this.svgGroup&&Q(this.svgGroup),this.lidTask&&clearTimeout(this.lidTask)}hasContents(){return!!this.contents.length}contentsIsOpen(){return!!this.flyout&&this.flyout.isVisible()}openFlyout(){if(!this.contentsIsOpen()){var e=this.contents.map(function(i){return JSON.parse(i)}),n=this.workspace.getParentSvg().style;n.cursor="wait",setTimeout(()=>{let i;(i=this.flyout)==null||i.show(e),n.cursor="";let u;(u=this.workspace.scrollbar)==null||u.setVisible(!1)},10),this.fireUiEvent(!0)}}closeFlyout(){if(this.contentsIsOpen()){var e;(e=this.flyout)==null||e.hide();var n;(n=this.workspace.scrollbar)==null||n.setVisible(!0),this.fireUiEvent(!1),this.workspace.recordDragTargets()}}autoHide(e){!e&&this.flyout&&this.closeFlyout()}emptyContents(){this.hasContents()&&(this.contents.length=0,this.setMinOpenness(0),this.closeFlyout())}position(e,n){if(this.initialized){var i=ta(this.workspace,e);e=sd(i,new Re(Ch,$$+Ih),UM,Gw,e,this.workspace),n=uc(e,Gw,i.vertical===Lo.TOP?Mo.DOWN:Mo.UP,n),this.top=n.top,this.left=n.left;var u;(u=this.svgGroup)==null||u.setAttribute("transform","translate("+this.left+","+this.top+")")}}getBoundingRectangle(){return new St(this.top,this.top+$$+Ih,this.left,this.left+Ch)}getClientRect(){if(!this.svgGroup)return null;var e=this.svgGroup.getBoundingClientRect();const n=e.top+Xv-_$;return e=e.left+Kv-_$,new St(n,n+Ih+$$+2*_$,e,e+Ch+2*_$)}onDragOver(e){this.setLidOpen(this.wouldDelete_)}onDragExit(e){this.setLidOpen(!1)}onDrop(e){setTimeout(this.setLidOpen.bind(this,!1),100)}setLidOpen(e){this.isLidOpen!==e&&(this.lidTask&&clearTimeout(this.lidTask),this.isLidOpen=e,this.animateLid())}animateLid(){const e=GM;var n=1/(e+1);this.lidOpen+=this.isLidOpen?n:-n,this.lidOpen=Math.min(Math.max(this.lidOpen,this.minOpenness),1),this.setLidAngle(this.lidOpen*Ww),n=jw+this.lidOpen*(jM-jw),this.svgGroup&&(this.svgGroup.style.opacity=`${n}`),this.lidOpen>this.minOpenness&&1>this.lidOpen&&(this.lidTask=setTimeout(this.animateLid.bind(this),HM/e))}setLidAngle(e){const n=this.workspace.toolboxPosition===qe.RIGHT||this.workspace.horizontalLayout&&this.workspace.RTL;let i;(i=this.svgLid)==null||i.setAttribute("transform","rotate("+(n?-e:e)+","+(n?4:Ch-4)+","+(Ih-2)+")")}setMinOpenness(e){this.minOpenness=e,this.isLidOpen||this.setLidAngle(e*Ww)}closeLid(){this.setLidOpen(!1)}click(){this.hasContents()&&!this.workspace.isDragging()&&this.openFlyout()}fireUiEvent(e){e=new(G(oe.TRASHCAN_OPEN))(e,this.workspace.id),W(e)}blockMouseDownWhenOpenable(e){!this.contentsIsOpen()&&this.hasContents()&&e.stopPropagation()}mouseOver(){this.hasContents()&&this.setLidOpen(!0)}mouseOut(){this.setLidOpen(!1)}onDelete(e){if(!(0>=this.workspace.options.maxTrashcanContents||!x(e)||e.wasShadow)){if(!e.oldJson)throw Error("Encountered a delete event without proper oldJson");if(e=JSON.stringify(this.cleanBlockJson(e.oldJson)),!this.contents.includes(e)){for(this.contents.unshift(e);this.contents.length>this.workspace.options.maxTrashcanContents;)this.contents.pop();this.setMinOpenness(VM)}}}cleanBlockJson(e){function n(i){if(i){if(delete i.id,delete i.x,delete i.y,delete i.enabled,delete i.disabledReasons,i.icons&&i.icons.comment){var u=i.icons.comment;delete u.height,delete u.width,delete u.pinned}u=i.inputs;for(var m in u){var T=u[m];const N=T.block;T=T.shadow,N&&n(N),T&&n(T)}i.next&&(m=i.next,i=m.block,m=m.shadow,i&&n(i),m&&n(m))}}return e=JSON.parse(JSON.stringify(e)),n(e),Object.assign({},{kind:"BLOCK"},e)}},Ch=47,$$=44,Ih=16,Gw=20,UM=20,_$=10,Kv=0,Xv=32,VM=.1,HM=80,GM=4,jw=.4,jM=.8,Ww=45,wt=class{constructor(){this.shortcuts=new Map,this.keyMap=new Map,this.reset()}reset(){this.shortcuts.clear(),this.keyMap.clear()}register(e,n){if(this.shortcuts.get(e.name)&&!n)throw Error(`Shortcut named "${e.name}" already exists.`);if(this.shortcuts.set(e.name,e),n=e.keyCodes,n!=null&&n.length)for(const i of n)this.addKeyMapping(i,e.name,!!e.allowCollision)}unregister(e){return this.shortcuts.get(e)?(this.removeAllKeyMappings(e),this.shortcuts.delete(e),!0):(console.warn(`Keyboard shortcut named "${e}" not found.`),!1)}addKeyMapping(e,n,i){e=`${e}`;const u=this.keyMap.get(e);if(u&&!i)throw Error(`Shortcut named "${n}" collides with shortcuts "${u}"`);u&&i?u.unshift(n):this.keyMap.set(e,[n])}removeKeyMapping(e,n,i){const u=this.keyMap.get(e);if(!u)return i||console.warn(`No keyboard shortcut named "${n}" registered with key code "${e}"`),!1;const m=u.indexOf(n);return-1<m?(u.splice(m,1),u.length===0&&this.keyMap.delete(e),!0):(i||console.warn(`No keyboard shortcut named "${n}" registered with key code "${e}"`),!1)}removeAllKeyMappings(e){for(const n of this.keyMap.keys())this.removeKeyMapping(n,e,!0)}setKeyMap(e){this.keyMap.clear();for(const n in e)this.keyMap.set(n,e[n])}getKeyMap(){const e=Object.create(null);for(const[n,i]of this.keyMap)e[n]=i;return e}getRegistry(){const e=Object.create(null);for(const[n,i]of this.shortcuts)e[n]=i;return Mr(Object.create(null),e)}onKeyDown(e,n){var i=this.serializeKeyEvent(n);if(i=this.getShortcutNamesByKeyCode(i),!i)return!1;for(const u of i){if(i=this.shortcuts.get(u),!i||i.preconditionFn&&!i.preconditionFn(e))continue;let m,T;if((T=(m=i).callback)!=null&&T.call(m,e,n,i))return!0}return!1}getShortcutNamesByKeyCode(e){return this.keyMap.get(e)||[]}getKeyCodesByShortcutName(e){const n=[];for(const[i,u]of this.keyMap)-1<u.indexOf(e)&&n.push(i);return n}serializeKeyEvent(e){let n="";for(const i in wt.modifierKeys)e.getModifierState(i)&&(n!==""&&(n+="+"),n+=i);return n!==""&&e.keyCode?n+="+"+e.keyCode:e.keyCode&&(n=String(e.keyCode)),n}checkModifiers(e){for(const n of e)if(!(n in wt.modifierKeys))throw Error(n+" is not a valid modifier key.")}createSerializedKey(e,n){let i="";if(n){this.checkModifiers(n);for(const u in wt.modifierKeys)n.includes(wt.modifierKeys[u])&&(i!==""&&(i+="+"),i+=u)}return i!==""&&e?i+="+"+e:e&&(i=`${e}`),i}};wt.registry=new wt,(function(e){e=e.modifierKeys||(e.modifierKeys={}),e[e.Shift=16]="Shift",e[e.Control=17]="Control",e[e.Alt=18]="Alt",e[e.Meta=91]="Meta"})(wt||(wt={}));var Yv=null,qv=null,WM={duplicateInternal:Wd,copyInternal:pl},Tm={};Tm.BlockPaster=vm,Tm.TEST_ONLY=WM,Tm.paste=Cn,Tm.registry=wi;var Li;(function(e){e.ESCAPE="escape",e.DELETE="delete",e.COPY="copy",e.CUT="cut",e.PASTE="paste",e.UNDO="undo",e.REDO="redo"})(Li||(Li={}));var Ha=null,Ga=null,Rh=null;Kd();var Mi={};Mi.names=Li,Mi.registerCopy=jc,Mi.registerCut=zd,Mi.registerDefaultShortcuts=Kd,Mi.registerDelete=no,Mi.registerEscape=Ts,Mi.registerPaste=bs,Mi.registerRedo=Ea,Mi.registerUndo=ro;var zM=class{constructor(e,n){this.procedureModelClass=e,this.parameterModelClass=n,this.priority=ph}save(e){return e=e.getProcedureMap().getProcedures().map(n=>wa(n)),e.length?e:null}load(e,n){const i=n.getProcedureMap();for(const u of e)i.add(Xd(this.procedureModelClass,this.parameterModelClass,u,n))}clear(e){e.getProcedureMap().clear()}},v$={};v$.ProcedureSerializer=zM,v$.loadProcedure=Xd,v$.saveProcedure=wa;var zw=class{constructor(){this.priority=au}save(e){const n=[];for(const i of e.getAllVariables())e={name:i.name,id:i.getId()},i.type&&(e.type=i.type),n.push(e);return n.length?n:null}load(e,n){for(const i of e)n.createVariable(i.name,i.type,i.id)}clear(e){e.getVariableMap().clear()}};ii("variables",new zw);var Kw={};Kw.VariableSerializer=zw;var Jv={};Jv.load=Es,Jv.save=Sa;var KM={blocks:ks,exceptions:Ri,priorities:Ln,procedures:v$,registry:cn,variables:Kw,workspaceComments:tr,workspaces:Jv},Qv=class{constructor(e,n,i,u,m){this.workspace=e,this.oldHostMetrics=this.corner_=this.vScroll=this.hScroll=null,n=n===void 0?!0:n,i=i===void 0?!0:i;const T=n&&i;n&&(this.hScroll=new qt(e,!0,T,u,m)),i&&(this.vScroll=new qt(e,!1,T,u,m)),T&&(this.corner_=ue(Z.RECT,{height:qt.scrollbarThickness,width:qt.scrollbarThickness,class:"blocklyScrollbarBackground"}),xe(this.corner_,e.getBubbleCanvas()))}dispose(){Q(this.corner_),this.oldHostMetrics=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)}resize(){const e=this.workspace.getMetrics();if(e){var n=!1,i=!1;if(this.oldHostMetrics&&this.oldHostMetrics.viewWidth===e.viewWidth&&this.oldHostMetrics.viewHeight===e.viewHeight&&this.oldHostMetrics.absoluteTop===e.absoluteTop&&this.oldHostMetrics.absoluteLeft===e.absoluteLeft?(this.oldHostMetrics&&this.oldHostMetrics.scrollWidth===e.scrollWidth&&this.oldHostMetrics.viewLeft===e.viewLeft&&this.oldHostMetrics.scrollLeft===e.scrollLeft||(n=!0),this.oldHostMetrics&&this.oldHostMetrics.scrollHeight===e.scrollHeight&&this.oldHostMetrics.viewTop===e.viewTop&&this.oldHostMetrics.scrollTop===e.scrollTop||(i=!0)):i=n=!0,n||i){try{s.disable$$module$build$src$core$events$utils(),this.hScroll&&n&&this.hScroll.resize(e),this.vScroll&&i&&this.vScroll.resize(e)}finally{s.enable$$module$build$src$core$events$utils()}this.workspace.maybeFireViewportChangeEvent()}if(this.hScroll&&this.vScroll){if(!this.oldHostMetrics||this.oldHostMetrics.viewWidth!==e.viewWidth||this.oldHostMetrics.absoluteLeft!==e.absoluteLeft){let u;(u=this.corner_)==null||u.setAttribute("x",String(this.vScroll.position.x))}if(!this.oldHostMetrics||this.oldHostMetrics.viewHeight!==e.viewHeight||this.oldHostMetrics.absoluteTop!==e.absoluteTop){let u;(u=this.corner_)==null||u.setAttribute("y",String(this.hScroll.position.y))}}this.oldHostMetrics=e}}canScrollHorizontally(){return!!this.hScroll}canScrollVertically(){return!!this.vScroll}setOrigin(e,n){this.hScroll&&this.hScroll.setOrigin(e,n),this.vScroll&&this.vScroll.setOrigin(e,n)}set(e,n,i){this.hScroll&&this.hScroll.set(e,!1),this.vScroll&&this.vScroll.set(n,!1),(i||i===void 0)&&(e={},this.hScroll&&(e.x=this.hScroll.getRatio_()),this.vScroll&&(e.y=this.vScroll.getRatio_()),this.workspace.setMetrics(e))}setX(e){this.hScroll&&this.hScroll.set(e,!0)}setY(e){this.vScroll&&this.vScroll.set(e,!0)}setContainerVisible(e){this.hScroll&&this.hScroll.setContainerVisible(e),this.vScroll&&this.vScroll.setContainerVisible(e)}isVisible(){let e=!1;return this.hScroll&&(e=this.hScroll.isVisible()),this.vScroll&&(e=e||this.vScroll.isVisible()),e}setVisible(e){this.hScroll&&this.hScroll.setVisibleInternal(e),this.vScroll&&this.vScroll.setVisibleInternal(e)}resizeContent(e){this.hScroll&&this.hScroll.resizeContentHorizontal(e),this.vScroll&&this.vScroll.resizeContentVertical(e)}resizeView(e){this.hScroll&&this.hScroll.resizeViewHorizontal(e),this.vScroll&&this.vScroll.resizeViewVertical(e)}},Zv=class{constructor(e){this.workspace_=e}getDimensionsPx_(e){let n=0,i=0;return e&&(n=e.getWidth(),i=e.getHeight()),new Re(n,i)}getFlyoutMetrics(e){return e=this.getDimensionsPx_(this.workspace_.getFlyout(e)),{width:e.width,height:e.height,position:this.workspace_.toolboxPosition}}getToolboxMetrics(){const e=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:e.width,height:e.height,position:this.workspace_.toolboxPosition}}getSvgMetrics(){return this.workspace_.getCachedParentSvgSize()}getAbsoluteMetrics(){let e=0,n=0;const i=this.getToolboxMetrics(),u=this.getFlyoutMetrics(),m=!!this.workspace_.getToolbox();var T;const N=!((T=this.workspace_.getFlyout())!=null&&T.autoClose);T=m?i.position:u.position;const H=T===qe.TOP;return T===qe.LEFT&&(m&&(e+=i.width),N&&(e+=u.width)),H&&(m&&(n+=i.height),N&&(n+=u.height)),{top:n,left:e}}getViewMetrics(e){e=e?this.workspace_.scale:1;const n=this.getSvgMetrics(),i=this.getToolboxMetrics(),u=this.getFlyoutMetrics(),m=!!this.workspace_.getToolbox();var T;const N=!((T=this.workspace_.getFlyout())!=null&&T.autoClose);T=m?i.position:u.position;const H=T===qe.LEFT||T===qe.RIGHT;return(T===qe.TOP||T===qe.BOTTOM)&&(m&&(n.height-=i.height),N&&(n.height-=u.height)),H&&(m&&(n.width-=i.width),N&&(n.width-=u.width)),{height:n.height/e,width:n.width/e,top:-this.workspace_.scrollY/e,left:-this.workspace_.scrollX/e}}getContentMetrics(e){e=e?1:this.workspace_.scale;const n=this.workspace_.getBlocksBoundingBox();return{height:(n.bottom-n.top)*e,width:(n.right-n.left)*e,top:n.top*e,left:n.left*e}}hasFixedEdges(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()}getComputedFixedEdges_(e){if(!this.hasFixedEdges())return{};const n=this.workspace_.isMovableHorizontally(),i=this.workspace_.isMovableVertically();e=e||this.getViewMetrics(!1);const u={};return i||(u.top=e.top,u.bottom=e.top+e.height),n||(u.left=e.left,u.right=e.left+e.width),u}getPaddedContent_(e,n){const i=n.top+n.height,u=n.left+n.width,m=e.width;e=e.height;const T=m/2,N=e/2;return{top:Math.min(n.top-N,i-e),bottom:Math.max(i+N,n.top+e),left:Math.min(n.left-T,u-m),right:Math.max(u+T,n.left+m)}}getScrollMetrics(e,n,i){e=e?this.workspace_.scale:1,n=n||this.getViewMetrics(!1);var u=i||this.getContentMetrics();i=this.getComputedFixedEdges_(n),n=this.getPaddedContent_(n,u),u=i.top!==void 0?i.top:n.top;const m=i.left!==void 0?i.left:n.left;return{top:u/e,left:m/e,width:((i.right!==void 0?i.right:n.right)-m)/e,height:((i.bottom!==void 0?i.bottom:n.bottom)-u)/e}}getUiMetrics(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}}getMetrics(){const e=this.getToolboxMetrics(),n=this.getFlyoutMetrics(!0),i=this.getSvgMetrics(),u=this.getAbsoluteMetrics(),m=this.getViewMetrics(),T=this.getContentMetrics(),N=this.getScrollMetrics(!1,m,T);return{contentHeight:T.height,contentWidth:T.width,contentTop:T.top,contentLeft:T.left,scrollHeight:N.height,scrollWidth:N.width,scrollTop:N.top,scrollLeft:N.left,viewHeight:m.height,viewWidth:m.width,viewTop:m.top,viewLeft:m.left,absoluteTop:u.top,absoluteLeft:u.left,svgHeight:i.height,svgWidth:i.width,toolboxWidth:e.width,toolboxHeight:e.height,toolboxPosition:e.position,flyoutWidth:n.width,flyoutHeight:n.height}}};o(Te.METRICS_MANAGER,Pr,Zv),"Blockly"in globalThis||(globalThis.Blockly={Msg:mh});var Xw=class extends d${constructor(){super(),this.GRID_UNIT=4,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter=null,this.replacementGlowFilterId="",this.SQUARED=this.ROUNDED=this.HEXAGONAL=this.replacementGlowFilter=null,this.SMALL_PADDING=this.GRID_UNIT,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_DEFAULT_WIDTH=6*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=8*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT}setFontConstants_(e){super.setFontConstants_(e),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING}init(){super.init(),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth}setDynamicProperties_(e){super.setDynamicProperties_(e),this.SELECTED_GLOW_COLOUR=e.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;const n=Number(e.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=n&&!isNaN(n)?n:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=e.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(e=Number(e.getComponentStyle("replacementGlowSize")))&&!isNaN(e)?e:this.REPLACEMENT_GLOW_SIZE}dispose(){super.dispose(),this.selectedGlowFilter&&Q(this.selectedGlowFilter),this.replacementGlowFilter&&Q(this.replacementGlowFilter)}makeStartHat(){const e=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH,i=ln("c",[Ke(25,-e),Ke(71,-e),Ke(n,0)]);return{height:e,width:n,path:i}}makeHexagonal(){function e(i,u,m){var T=i/2;return T=T>n?n:T,m=m?-1:1,i=(u?-1:1)*i/2,$s(-m*T,i)+$s(m*T,i)}const n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width(i){return i/=2,i>n?n:i},height(i){return i},connectionOffsetY(i){return i/2},connectionOffsetX(i){return-i},pathDown(i){return e(i,!1,!1)},pathUp(i){return e(i,!0,!1)},pathRightDown(i){return e(i,!1,!0)},pathRightUp(i){return e(i,!1,!0)}}}makeRounded(){function e(u,m,T){const N=u>i?u-i:0;u=(u>i?i:u)/2;const H=T===m?"0":"1";return Dt("a","0 0,"+H,u,Ke((T?1:-1)*u,(m?-1:1)*u))+Me("v",(m?-1:1)*N)+Dt("a","0 0,"+H,u,Ke((T?-1:1)*u,(m?-1:1)*u))}const n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,i=2*n;return{type:this.SHAPES.ROUND,isDynamic:!0,width(u){return u/=2,u>n?n:u},height(u){return u},connectionOffsetY(u){return u/2},connectionOffsetX(u){return-u},pathDown(u){return e(u,!1,!1)},pathUp(u){return e(u,!0,!1)},pathRightDown(u){return e(u,!1,!0)},pathRightUp(u){return e(u,!1,!0)}}}makeSquared(){function e(i,u,m){i-=2*n;const T=m===u?"0":"1";return Dt("a","0 0,"+T,n,Ke((m?1:-1)*n,(u?-1:1)*n))+Me("v",(u?-1:1)*i)+Dt("a","0 0,"+T,n,Ke((m?-1:1)*n,(u?-1:1)*n))}const n=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width(i){return n},height(i){return i},connectionOffsetY(i){return i/2},connectionOffsetX(i){return-i},pathDown(i){return e(i,!1,!1)},pathUp(i){return e(i,!0,!1)},pathRightDown(i){return e(i,!1,!0)},pathRightUp(i){return e(i,!1,!0)}}}shapeFor(e){let n=e.getCheck();switch(!n&&e.targetConnection&&(n=e.targetConnection.getCheck()),e.type){case Ve.INPUT_VALUE:case Ve.OUTPUT_VALUE:if(e=e.getSourceBlock().getOutputShape(),e!==null)switch(e){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return n&&n.includes("Boolean")?this.HEXAGONAL:n&&n.includes("Number")?this.ROUNDED:(n&&n.includes("String"),this.ROUNDED);case Ve.PREVIOUS_STATEMENT:case Ve.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}}makeNotch(){function e(Fe){return ln("c",[Ke(Fe*m/2,0),Ke(Fe*m*3/4,N/2),Ke(Fe*m,N)])+_a([Ke(Fe*m,T)])+ln("c",[Ke(Fe*m/4,N/2),Ke(Fe*m/2,N),Ke(Fe*m,N)])+Me("h",Fe*u)+ln("c",[Ke(Fe*m/2,0),Ke(Fe*m*3/4,-(N/2)),Ke(Fe*m,-N)])+_a([Ke(Fe*m,-T)])+ln("c",[Ke(Fe*m/4,-(N/2)),Ke(Fe*m/2,-N),Ke(Fe*m,-N)])}const n=this.NOTCH_WIDTH,i=this.NOTCH_HEIGHT,u=n/3,m=u/3,T=i/2,N=T/2,H=e(1),ge=e(-1);return{type:this.SHAPES.NOTCH,width:n,height:i,pathLeft:H,pathRight:ge}}makeInsideCorners(){const e=this.CORNER_RADIUS,n=Dt("a","0 0,0",e,Ke(-e,e)),i=Dt("a","0 0,1",e,Ke(-e,e)),u=Dt("a","0 0,0",e,Ke(e,e)),m=Dt("a","0 0,1",e,Ke(e,e));return{width:e,height:e,pathTop:n,pathBottom:u,rightWidth:e,rightHeight:e,pathTopRight:i,pathBottomRight:m}}generateSecondaryColour_(e){return gs("#000",e,.15)||e}generateTertiaryColour_(e){return gs("#000",e,.25)||e}createDom(e,n,i){super.createDom(e,n,i),e=ue(Z.DEFS,{},e),n=ue(Z.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),ue(Z.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},n),i=ue(Z.FECOMPONENTTRANSFER,{result:"outBlur"},n),ue(Z.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},i),ue(Z.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},n),ue(Z.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},n),this.selectedGlowFilterId=n.id,this.selectedGlowFilter=n,e=ue(Z.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),ue(Z.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},e),n=ue(Z.FECOMPONENTTRANSFER,{result:"outBlur"},e),ue(Z.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),ue(Z.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},e),ue(Z.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),ue(Z.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},e),this.replacementGlowFilterId=e.id,this.replacementGlowFilter=e}getCSS_(e){return[`${e} .blocklyText,`,`${e} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e} .blocklyTextInputBubble textarea {`,"font-weight: normal;","}",`${e} .blocklyText {`,"fill: #fff;","}",`${e} .blocklyNonEditableText>rect:not(.blocklyDropdownRect),`,`${e} .blocklyEditableText>rect:not(.blocklyDropdownRect) {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"}",`${e} .blocklyNonEditableText>text,`,`${e} .blocklyEditableText>text,`,`${e} .blocklyNonEditableText>g>text,`,`${e} .blocklyEditableText>g>text {`,"fill: #575E75;","}",`${e} .blocklyFlyoutLabelText {`,"fill: #575E75;","}",`${e} .blocklyText.blocklyBubbleText {`,"fill: #575E75;","}",`${e} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>rect,",`${e} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",`${e} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"color: #575E75;","}",`${e} .blocklyDropdownText {`,"fill: #fff !important;","}",`${e}.blocklyWidgetDiv .goog-menuitem,`,`${e}.blocklyDropDownDiv .goog-menuitem {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e}.blocklyDropDownDiv .goog-menuitem-content {`,"color: #fff;","}",`${e} .blocklyHighlightedConnectionPath {`,`stroke: ${this.SELECTED_GLOW_COLOUR};`,"}",`${e} .blocklyDisabled > .blocklyOutlinePath {`,`fill: url(#blocklyDisabledPattern${this.randomIdentifier})`,"}",`${e} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},Yw=class extends h${constructor(e,n){super(e,n)}draw(){const e=this.block_.pathObject;e.beginDrawing(),this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),e.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&e.flipRTL(),this.recordSizeOnBlock_(),this.info_.outputConnection&&(e.outputShapeType=this.info_.outputConnection.shape.type),e.endDrawing()}drawOutline_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):super.drawOutline_()}drawLeft_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():super.drawLeft_()}drawRightSideRow_(e){if(!(0>=e.height)){if(Y.isSpacer(e)){const u=e.precedesStatement;var n=e.followsStatement;if(u||n){const m=this.constants_.INSIDE_CORNERS;var i=m.rightHeight;i=e.height-(u?i:0),n=n?m.pathBottomRight:"",e=0<i?Me("V",e.yPos+i):"",this.outlinePath_+=n+e+(u?m.pathTopRight:"");return}}this.outlinePath_+=Me("V",e.yPos+e.height)}}drawRightDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)}drawLeftDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"}drawFlatTop_(){const e=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=Lt(e.xPos,this.info_.startY),this.outlinePath_+=Me("h",e.width)}drawFlatBottom_(){const e=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=Me("V",e.baseline),this.outlinePath_+=Me("h",-e.width)}drawInlineInput_(e){this.positionInlineInputConnection_(e);const n=e.input.name;e.connectedBlock||this.info_.isInsertionMarker||(e=an(e.xPos+e.connectionWidth,e.centerline-e.height/2)+this.getInlineInputPath(e),this.block_.pathObject.setOutlinePath(n,e))}getInlineInputPath(e){const n=e.width-2*e.connectionWidth,i=e.height;return Me("h",n)+e.shape.pathRightDown(i)+Me("h",-n)+e.shape.pathUp(i)+"z"}drawStatementInput_(e){var n=e.getLastInput();const i=n.xPos+n.notchOffset+n.shape.width,u=this.constants_.INSIDE_CORNERS,m=n.shape.pathRight+Me("h",-(n.notchOffset-u.width))+u.pathTop,T=e.height-2*u.height;n=u.pathBottom+Me("h",n.notchOffset-u.width)+(n.connectedBottomNextConnection?"":n.shape.pathLeft),this.outlinePath_+=Me("H",i)+m+Me("v",T)+n+Me("H",e.xPos+e.width),this.positionStatementInputConnection_(e)}drawConnectionHighlightPath(e){const n=e.connectionModel;if(n.type===Ve.NEXT_STATEMENT||n.type===Ve.PREVIOUS_STATEMENT||n.type===Ve.OUTPUT_VALUE&&!e.isDynamicShape)super.drawConnectionHighlightPath(e);else{e=n.type===Ve.INPUT_VALUE?an(e.connectionWidth,-e.height/2)+this.getInlineInputPath(e):an(e.width,-e.height/2)+e.shape.pathDown(e.height);var i=n.getSourceBlock(),u,m;(m=(u=i.pathObject).addConnectionHighlight)==null||m.call(u,n,e,n.getOffsetInBlock(),i.RTL)}}},Su=class extends _{constructor(e,n,i,u,m,T,N){if(super(_.SKIP_SETUP),this.imageElement=this.clickHandler=null,this.flipRtl=this.isDirty_=this.EDITABLE=!1,this.altText="",i=Number(Zt(i)),n=Number(Zt(n)),isNaN(i)||isNaN(n))throw Error("Height and width values of an image field must cast to numbers.");if(0>=i||0>=n)throw Error("Height and width values of an image field must be greater than 0.");this.size_=new Re(n,i+Su.Y_PADDING),this.imageHeight=i,typeof m=="function"&&(this.clickHandler=m),e!==_.SKIP_SETUP&&(N?this.configure_(N):(this.flipRtl=!!T,this.altText=Zt(u)||""),this.setValue(Zt(e)))}configure_(e){super.configure_(e),e.flipRtl&&(this.flipRtl=e.flipRtl),e.alt&&(this.altText=Zt(e.alt))}initView(){this.imageElement=ue(Z.IMAGE,{height:this.imageHeight+"px",width:this.size_.width+"px",alt:this.altText},this.fieldGroup_),this.imageElement.setAttributeNS(Sr,"xlink:href",this.value_),this.clickHandler&&(this.imageElement.style.cursor="pointer")}updateSize_(){}doClassValidation_(e){return typeof e!="string"?null:e}doValueUpdate_(e){this.value_=e,this.imageElement&&this.imageElement.setAttributeNS(Sr,"xlink:href",this.value_)}getFlipRtl(){return this.flipRtl}setAlt(e){e!==this.altText&&(this.altText=e||"",this.imageElement&&this.imageElement.setAttribute("alt",this.altText))}showEditor_(){this.clickHandler&&this.clickHandler(this)}setOnClickHandler(e){this.clickHandler=e}getText_(){return this.altText}static fromJson(e){if(!e.src||!e.width||!e.height)throw Error("src, width, and height values for an image field arerequired. The width and height must be non-zero.");return new this(e.src,e.width,e.height,void 0,void 0,void 0,e)}};Su.Y_PADDING=1,ar("field_image",Su),Su.prototype.DEFAULT_VALUE="";var y$=class extends _{constructor(e,n,i){super(_.SKIP_SETUP),this.spellcheck_=!0,this.htmlInput_=null,this.isTextValid_=this.isBeingEdited_=!1,this.onKeyInputWrapper=this.onKeyDownWrapper=this.valueWhenEditorWasOpened_=null,this.fullBlockClickTarget_=!1,this.workspace_=null,this.SERIALIZABLE=!0,this.CURSOR="text",e!==_.SKIP_SETUP&&(i&&this.configure_(i),this.setValue(e),n&&this.setValidator(n))}configure_(e){super.configure_(e),e.spellcheck!==void 0&&(this.spellcheck_=e.spellcheck)}initView(){if(!this.getSourceBlock())throw new b;super.initView(),this.isFullBlockField()&&(this.clickTarget_=this.sourceBlock_.getSvgRoot())}isFullBlockField(){const e=this.getSourceBlock();if(!e)throw new b;let n;return this.fullBlockClickTarget_=!((n=this.getConstants())==null||!n.FULL_BLOCK_FIELDS)&&e.isSimpleReporter()}doValueInvalid_(e,n=!0){this.isBeingEdited_&&(this.isDirty_=!0,this.isTextValid_=!1,e=this.value_,this.value_=this.valueWhenEditorWasOpened_,this.sourceBlock_&&ce()&&this.value_!==e&&n&&W(new(G(oe.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,e,this.value_)))}doValueUpdate_(e){this.isTextValid_=this.isDirty_=!0,this.value_=e}applyColour(){const e=this.getSourceBlock();if(!e)throw new b;this.getConstants().FULL_BLOCK_FIELDS&&this.fieldGroup_&&(!this.isFullBlockField()&&this.borderRect_?(this.borderRect_.style.display="block",this.borderRect_.setAttribute("stroke",e.style.colourTertiary)):(this.borderRect_.style.display="none",e.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR)))}getSize(){let e;return(e=this.getConstants())!=null&&e.FULL_BLOCK_FIELDS&&(this.render_(),this.isDirty_=!1),super.getSize()}onLocationChange(){this.isBeingEdited_&&this.resizeEditor_()}render_(){if(super.render_(),this.isBeingEdited_){var e=this.htmlInput_;this.isTextValid_?(D(e,"blocklyInvalidInput"),xn(e,tn.INVALID,!1)):(Ge(e,"blocklyInvalidInput"),xn(e,tn.INVALID,!0))}if(e=this.getSourceBlock(),!e)throw new b;this.getConstants().FULL_BLOCK_FIELDS&&e.applyColour()}setSpellcheck(e){e!==this.spellcheck_&&(this.spellcheck_=e,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))}showEditor_(e,n=!1){this.workspace_=this.sourceBlock_.workspace,!n&&this.workspace_.options.modalInputs&&(ah||tu||nu)?this.showPromptEditor():this.showInlineEditor(n)}showPromptEditor(){sa(s.Msg$$module$build$src$core$msg.CHANGE_VALUE_TITLE,this.getText(),e=>{e!==null&&this.setValue(this.getValueFromEditorText_(e)),this.onFinishEditing_(this.value_)})}showInlineEditor(e){const n=this.getSourceBlock();if(!n)throw new b;fi(this,n.RTL,this.widgetDispose_.bind(this),this.workspace_),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,this.valueWhenEditorWasOpened_=this.value_,e||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())}widgetCreate_(){var e=this.getSourceBlock();if(!e)throw new b;s.setGroup$$module$build$src$core$events$utils(!0);const n=il();var i=this.getClickTarget_();if(!i)throw Error("A click target has not been set.");Ge(i,"editing"),i=document.createElement("input"),i.className="blocklyHtmlInput",i.setAttribute("spellcheck",this.spellcheck_);const u=this.workspace_.getScale();var m=this.getConstants().FIELD_TEXT_FONTSIZE*u+"pt";return n.style.fontSize=m,i.style.fontSize=m,m=y$.BORDERRADIUS*u+"px",this.isFullBlockField()&&(m=this.getScaledBBox(),m=(m.bottom-m.top)/2+"px",e=e.getParent()?e.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary,i.style.border=1*u+"px solid "+e,n.style.borderRadius=m,n.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(n.style.boxShadow="rgba(255, 255, 255, 0.3) 0 0 0 "+4*u+"px")),i.style.borderRadius=m,n.appendChild(i),i.value=i.defaultValue=this.getEditorText_(this.value_),i.setAttribute("data-untyped-default-value",String(this.value_)),this.resizeEditor_(),this.bindInputEvents_(i),i}widgetDispose_(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_(this.value_),this.sourceBlock_&&ce()&&this.valueWhenEditorWasOpened_!==null&&this.valueWhenEditorWasOpened_!==this.value_&&(W(new(G(oe.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,this.valueWhenEditorWasOpened_,this.value_)),this.valueWhenEditorWasOpened_=null),s.setGroup$$module$build$src$core$events$utils(!1),this.unbindInputEvents_();var e=il().style;if(e.width="auto",e.height="auto",e.fontSize="",e.transition="",e.boxShadow="",this.htmlInput_=null,e=this.getClickTarget_(),!e)throw Error("A click target has not been set.");D(e,"editing")}onFinishEditing_(e){}bindInputEvents_(e){this.onKeyDownWrapper=je(e,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper=je(e,"input",this,this.onHtmlInputChange)}unbindInputEvents_(){this.onKeyDownWrapper&&(ft(this.onKeyDownWrapper),this.onKeyDownWrapper=null),this.onKeyInputWrapper&&(ft(this.onKeyInputWrapper),this.onKeyInputWrapper=null)}onHtmlInputKeyDown_(e){e.key==="Enter"?(Xs(this),Ks()):e.key==="Escape"?(this.setValue(this.htmlInput_.getAttribute("data-untyped-default-value"),!1),Xs(this),Ks()):e.key==="Tab"&&(Xs(this),Ks(),this.sourceBlock_.tab(this,!e.shiftKey),e.preventDefault())}onHtmlInputChange(e){e=this.value_,this.setValue(this.getValueFromEditorText_(this.htmlInput_.value),!1),this.sourceBlock_&&ce()&&this.value_!==e&&W(new(G(oe.BLOCK_FIELD_INTERMEDIATE_CHANGE))(this.sourceBlock_,this.name||null,e,this.value_))}setEditorValue_(e,n=!0){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(e)),this.setValue(e,n)}resizeEditor_(){ir().then(()=>{const e=this.getSourceBlock();if(!e)throw new b;const n=il(),i=this.getScaledBBox();n.style.width=i.right-i.left+"px",n.style.height=i.bottom-i.top+"px";const u=i.top;n.style.left=`${e.RTL?i.right-n.offsetWidth:i.left}px`,n.style.top=`${u}px`})}repositionForWindowResize(){let e;const n=(e=this.getSourceBlock())==null?void 0:e.getRootBlock();return n instanceof $o?(ys(this.workspace_,this.workspace_.getMetricsManager().getViewMetrics(!0),n)||this.resizeEditor_(),!0):!1}isTabNavigable(){return!0}getText_(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null}getEditorText_(e){return`${e}`}getValueFromEditorText_(e){return e}};y$.BORDERRADIUS=4;var T$=class extends y${constructor(e,n,i){super(e,n,i)}doClassValidation_(e){return e===void 0?null:`${e}`}static fromJson(e){return new this(Zt(e.text),void 0,e)}};ar("field_input",T$),T$.prototype.DEFAULT_VALUE="";var qw=class extends kv{constructor(e){super(e)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(e){return!!e.outputConnection}hasRightSquareCorner(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection}},b$=class extends mm{constructor(e,n){if(super(e,n),this.connectedBottomNextConnection=!1,this.connectedBlock){for(e=this.connectedBlock;n=e.getNextBlock();)e=n;e.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}}},Jw=class extends Ai{constructor(e){super(e),this.width=this.height=0,this.type|=Y.getType("RIGHT_CONNECTION")}},Qw=class extends Lv{constructor(e){super(e)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(e){const n=(e.hat?e.hat==="cap":this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection;return!!e.outputConnection||n}hasRightSquareCorner(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection}},Zw=class extends _m{constructor(e,n){super(e,n),this.isInline=!0,this.renderer_=e,this.constants_=this.renderer_.getConstants(),this.topRow=new Qw(this.constants_),this.bottomRow=new qw(this.constants_),this.isMultiRow=!n.getInputsInline()||n.isCollapsed(),this.hasStatementInput=0<n.statementInputCount,this.rightSide=this.outputConnection?new Jw(this.constants_):null,this.rightAlignedDummyInputs=new WeakMap}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}shouldStartNewRow_(e,n){return n?n instanceof Hl||e instanceof Ns||n instanceof Ns?!0:e instanceof s.ValueInput$$module$build$src$core$inputs$value_input||e instanceof Ni||e instanceof Hl?!this.isInline||this.isMultiRow:!1:!1}getDesiredRowWidth_(e){return e.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):super.getDesiredRowWidth_(e)}getInRowSpacing_(e,n){return e&&n||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!e&&n&&Y.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:e&&Y.isLeftRoundedCorner(e)&&n&&(Y.isPreviousConnection(n)||Y.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:e&&Y.isLeftSquareCorner(e)&&n&&Y.isHat(n)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING}getSpacerRowHeight_(e,n){if(Y.isTopRow(e)&&Y.isBottomRow(n))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;const i=Y.isInputRow(e)&&e.hasStatement,u=Y.isInputRow(n)&&n.hasStatement;return u||i?(e=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),u&&i?Math.max(e,this.constants_.DUMMY_INPUT_MIN_HEIGHT):e):Y.isTopRow(e)?e.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):Y.isBottomRow(n)?this.outputConnection?!n.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}getSpacerRowWidth_(e,n){const i=this.width-this.startX;return Y.isInputRow(e)&&e.hasStatement||Y.isInputRow(n)&&n.hasStatement?Math.max(i,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):i}getElemCenterline_(e,n){if(e.hasStatement&&!Y.isSpacer(n)&&!Y.isStatementInput(n))return e.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(Y.isInlineInput(n)&&n instanceof Ua){const i=n.connectedBlock;if(i&&i.outputConnection&&i.nextConnection)return e.yPos+i.height/2}return super.getElemCenterline_(e,n)}addInput_(e,n){if((e instanceof Ni||e instanceof Hl)&&n.hasDummyInput&&n.align===s.Align$$module$build$src$core$inputs$align.LEFT&&e.align===s.Align$$module$build$src$core$inputs$align.RIGHT)this.rightAlignedDummyInputs.set(n,e);else if(e instanceof Ns){n.elements.push(new b$(this.constants_,e)),n.hasStatement=!0,n.align===null&&(n.align=e.align);return}super.addInput_(e,n)}addAlignmentPadding_(e,n){if(this.rightAlignedDummyInputs.get(e)){let i;for(let u=0;u<e.elements.length;u++){const m=e.elements[u];if(Y.isSpacer(m)&&(i=m),Y.isField(m)&&m instanceof Eh&&m.parentInput===this.rightAlignedDummyInputs.get(e))break}if(i){i.width+=n,e.width+=n;return}}super.addAlignmentPadding_(e,n)}adjustXPosition_(){const e=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH;let n=e;for(let m=2;m<this.rows.length-1;m+=2){var i=this.rows[m-1];const T=this.rows[m];var u=this.rows[m+1];if(i=m===2?!!this.topRow.hasPreviousConnection:!!i.followsStatement,u=m+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!u.precedesStatement,Y.isInputRow(T)&&T.hasStatement){T.measure();let N,H;n=T.width-((H=(N=T.getLastInput())==null?void 0:N.width)!=null?H:0)+e}else if(i&&(m===2||u)&&Y.isInputRow(T)&&!T.hasStatement){u=T.xPos,i=null;for(let N=0;N<T.elements.length;N++){const H=T.elements[N];Y.isSpacer(H)&&(i=H),i&&(Y.isField(H)||Y.isInput(H))&&u<n&&!(Y.isField(H)&&H instanceof Eh&&(H.field instanceof bu||H.field instanceof Su))&&(i.width+=n-u),u+=H.width}}}}finalizeOutputConnection_(){if(this.outputConnection&&this.outputConnection.isDynamicShape){var e=this.outputConnection.shape;if("isDynamic"in e&&e.isDynamic){for(var n=0,i=0;i<this.rows.length;i++){const u=this.rows[i];u.yPos=n,n+=u.height}this.height=n,i=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,n=e.height(i),i=e.width(i),this.outputConnection.height=n,this.outputConnection.width=i,this.outputConnection.startX=i,this.outputConnection.connectionOffsetY=e.connectionOffsetY(n),this.outputConnection.connectionOffsetX=e.connectionOffsetX(i),e=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(e=i,this.rightSide.height=n,this.rightSide.width=e,this.rightSide.centerline=n/2,this.rightSide.xPos=this.width+e),this.startX=i,this.width+=i+e,this.widthWithChildren+=i+e}}}finalizeHorizontalAlignment_(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var e=0,n=0;n<this.rows.length;n++){var i=this.rows[n];if(!Y.isInputRow(i))continue;e=i.elements[i.elements.length-2];let u=this.getNegativeSpacing_(i.elements[1]),m=this.getNegativeSpacing_(e);e=u+m;const T=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-e<T&&(e=this.width-T,u=e/2,m=e/2),i.elements.unshift(new As(this.constants_,-u)),i.elements.push(new As(this.constants_,-m))}if(e)for(this.width-=e,this.widthWithChildren-=e,this.rightSide.xPos-=e,n=0;n<this.rows.length;n++)i=this.rows[n],Y.isTopOrBottomRow(i)&&(i.elements[1].width-=e),i.width-=e,i.widthWithConnectedBlocks-=e}}getNegativeSpacing_(e){if(!e||!this.outputConnection)return 0;const n=this.outputConnection.width;var i=this.outputConnection.shape.type;const u=this.constants_;if(1<this.inputRows.length)return i===u.SHAPES.ROUND?(i=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,i=this.height/2>i?i:this.height/2,n-i*(1-Math.sin(Math.acos((i-this.constants_.SMALL_PADDING)/i)))):0;if(Y.isInlineInput(e)&&e instanceof Ua){const m=e.connectedBlock;return e=m?m.pathObject.outputShapeType:e.shape.type,e==null||m&&m.outputConnection&&(m.statementInputCount||m.nextConnection)||i===u.SHAPES.HEXAGONAL&&i!==e?0:n-this.constants_.SHAPE_IN_SHAPE_PADDING[i][e]}return Y.isField(e)&&e instanceof Eh?i===u.SHAPES.ROUND&&e.field instanceof T$?n-2.75*u.GRID_UNIT:n-this.constants_.SHAPE_IN_SHAPE_PADDING[i][0]:Y.isIcon(e)?this.constants_.SMALL_PADDING:0}finalizeVerticalAlignment_(){if(!this.outputConnection)for(let u=2;u<this.rows.length-1;u+=2){const m=this.rows[u-1],T=this.rows[u],N=this.rows[u+1];var e=u===2,n=u+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!N.precedesStatement;if(e?this.topRow.hasPreviousConnection:m.followsStatement){var i=T.elements[1];if(i=T.elements.length===3&&i instanceof Eh&&(i.field instanceof bu||i.field instanceof Su),!e&&i)m.height-=this.constants_.SMALL_PADDING,N.height-=this.constants_.SMALL_PADDING,T.height-=this.constants_.MEDIUM_PADDING;else if(!e&&!n)m.height+=this.constants_.SMALL_PADDING;else if(n){for(e=!1,n=0;n<T.elements.length;n++)if(i=T.elements[n],i instanceof Ua&&Y.isInlineInput(i)&&i.connectedBlock&&!i.connectedBlock.isShadow()&&40<=i.connectedBlock.getHeightWidth().height){e=!0;break}e&&(m.height-=this.constants_.SMALL_PADDING,N.height-=this.constants_.SMALL_PADDING)}}}}finalize_(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),super.finalize_(),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)}},eS=class extends Dv{constructor(e,n,i){super(e,n,i),this.markerCircle=null}showWithInputOutput(e){const n=e.getSourceBlock();e=e.getLocation().getOffsetInBlock(),this.positionCircle(e.x,e.y),this.setParent_(n),this.showCurrent_()}showWithOutput_(e){this.showWithInputOutput(e)}showWithInput_(e){this.showWithInputOutput(e)}showWithBlock_(e){e=e.getLocation();const n=e.getHeightWidth();this.positionRect_(0,0,n.width,n.height),this.setParent_(e),this.showCurrent_()}positionCircle(e,n){let i;(i=this.markerCircle)==null||i.setAttribute("cx",`${e}`);let u;(u=this.markerCircle)==null||u.setAttribute("cy",`${n}`),this.currentMarkerSvg=this.markerCircle}hide(){super.hide(),this.markerCircle&&(this.markerCircle.style.display="none")}createDomInternal_(){if(super.createDomInternal_(),this.markerCircle=ue(Z.CIRCLE,{r:this.constants_.CURSOR_RADIUS,"stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.hide(),this.isCursor()){const e=this.getBlinkProperties_();ue(Z.ANIMATE,e,this.markerCircle)}return this.markerSvg_}applyColour_(e){super.applyColour_(e);let n;(n=this.markerCircle)==null||n.setAttribute("fill",this.colour_);let i;if((i=this.markerCircle)==null||i.setAttribute("stroke",this.colour_),this.isCursor()){e=this.colour_+";transparent;transparent;";let u;(u=this.markerCircle)==null||u.firstElementChild.setAttribute("values",e)}}},tS=class extends p${constructor(e,n,i){super(e,n,i),this.svgPathSelected=null,this.outlines=new Map,this.remainingOutlines=new Set,this.outputShapeType=null,this.constants=i}setPath(e){super.setPath(e),this.svgPathSelected&&this.svgPathSelected.setAttribute("d",e)}applyColour(e){super.applyColour(e);const n=e.getParent();e.isShadow()&&n&&this.svgPath.setAttribute("stroke",n.style.colourTertiary);for(const i of this.outlines.values())i.setAttribute("fill",this.style.colourTertiary)}flipRTL(){super.flipRTL();for(const e of this.outlines.values())e.setAttribute("transform","scale(-1 1)")}updateSelected(e){this.setClass_("blocklySelected",e),e?this.svgPathSelected||(this.svgPathSelected=this.svgPath.cloneNode(!0),this.svgPathSelected.setAttribute("fill","none"),this.svgPathSelected.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected)):this.svgPathSelected&&(this.svgRoot.removeChild(this.svgPathSelected),this.svgPathSelected=null)}updateReplacementFade(e){this.setClass_("blocklyReplaceable",e),e?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")}updateShapeForInputHighlight(e,n){e=e.getParentInput().name,(e=this.getOutlinePath(e))&&(n?e.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):e.removeAttribute("filter"))}beginDrawing(){this.remainingOutlines.clear();for(const e of this.outlines.keys())this.remainingOutlines.add(e)}endDrawing(){if(this.remainingOutlines.size)for(const e of this.remainingOutlines)this.removeOutlinePath(e);this.remainingOutlines.clear()}setOutlinePath(e,n){e=this.getOutlinePath(e),e.setAttribute("d",n),e.setAttribute("fill",this.style.colourTertiary)}getOutlinePath(e){return this.outlines.has(e)||this.outlines.set(e,ue(Z.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines.delete(e),this.outlines.get(e)}removeOutlinePath(e){let n,i;(n=this.outlines.get(e))==null||(i=n.parentNode)==null||i.removeChild(this.outlines.get(e)),this.outlines.delete(e)}},ey=class extends f${constructor(e){super(e)}makeConstants_(){return new Xw}makeRenderInfo_(e){return new Zw(this,e)}makeDrawer_(e,n){return new Yw(e,n)}makeMarkerDrawer(e,n){return new eS(e,this.getConstants(),n)}makePathObject(e,n){return new tS(e,n,this.getConstants())}getConstants(){return this.constants_}getConnectionPreviewMethod(e,n,i){return w("getConnectionPreviewMethod","v10","v12","an IConnectionPreviewer, if it fulfills your use case."),n.type===Ve.OUTPUT_VALUE?e.isConnected()?mo.PREVIEW_TYPE.REPLACEMENT_FADE:mo.PREVIEW_TYPE.INPUT_OUTLINE:super.getConnectionPreviewMethod(e,n,i)}};to("zelos",ey);var nS=class{constructor(e){this.staticConn=this.draggedConn=this.markerConn=this.fadedBlock=null,this.workspace=e.workspace}previewReplacement(e,n,i){s.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.fadedBlock=i,i.fadeForReplacement(!0),this.workspace.getRenderer().shouldHighlightConnection(n)&&(n.highlight(),this.staticConn=n)}finally{s.enable$$module$build$src$core$events$utils()}}previewConnection(e,n){if(e!==this.draggedConn||n!==this.staticConn){s.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.shouldUseMarkerPreview(e,n)&&(this.markerConn=this.previewMarker(e,n)),this.workspace.getRenderer().shouldHighlightConnection(n)&&n.highlight(),this.draggedConn=e,this.staticConn=n}finally{s.enable$$module$build$src$core$events$utils()}}}shouldUseMarkerPreview(e,n){return n.type===Ve.PREVIOUS_STATEMENT||n.type===Ve.NEXT_STATEMENT||!(this.workspace.getRenderer()instanceof ey)}previewMarker(e,n){const i=e.getSourceBlock(),u=this.createInsertionMarker(i),m=this.getMatchingConnection(i,u,e);if(!m)return null;u.queueRender(),es(),m.connect(n);const T={x:n.x-m.x,y:n.y-m.y},N=m.getOffsetInBlock().clone();return ir().then(()=>{if(!u.isDeadOrDying()){s.disable$$module$build$src$core$events$utils();try{u?.positionNearConnection(m,T,N),u?.getSvgRoot().setAttribute("visibility","visible")}finally{s.enable$$module$build$src$core$events$utils()}}}),m}createInsertionMarker(e){const n=Bn(e,{addCoordinates:!1,addInputBlocks:!1,addNextBlocks:!1,doFullSerialization:!1});if(!n)throw Error(`Failed to serialize source block. ${e.toDevString()}`);e=zs(n,this.workspace);for(const i of e.getDescendants(!1))i.setInsertionMarker(!0);return e.initSvg(),e.getSvgRoot().setAttribute("visibility","hidden"),e}getMatchingConnection(e,n,i){if(e=e.getConnections_(!0),n=n.getConnections_(!0),e.length!==n.length)return null;for(let u=0;u<e.length;u++)if(e[u]===i)return n[u];return null}hidePreview(){s.disable$$module$build$src$core$events$utils();try{this.staticConn&&(this.staticConn.unhighlight(),this.staticConn=null),this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null),this.markerConn&&(this.hideInsertionMarker(this.markerConn),this.draggedConn=this.markerConn=null)}finally{s.enable$$module$build$src$core$events$utils()}}hideInsertionMarker(e){const n=e.getSourceBlock(),i=n.outputConnection;let u;if((u=n.previousConnection)!=null&&u.targetConnection||i!=null&&i.targetConnection)n.unplug(!0);else{let m;(m=e.targetBlock())==null||m.unplug(!1)}n.dispose()}dispose(){this.hidePreview()}};o(Te.CONNECTION_PREVIEWER,Pr,nS);var ja={};ja.Align=s.Align$$module$build$src$core$inputs$align,ja.DummyInput=Ni,ja.EndRowInput=Hl,ja.Input=wh,ja.StatementInput=Ns,ja.ValueInput=s.ValueInput$$module$build$src$core$inputs$value_input,ja.inputTypes=s.inputTypes$$module$build$src$core$inputs$input_types;var rS=!1,sS;s.CodeGenerator$$module$build$src$core$generator=class{constructor(e){this.forBlock=Object.create(null),this.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",this.STATEMENT_SUFFIX=this.STATEMENT_PREFIX=this.INFINITE_LOOP_TRAP=null,this.INDENT="  ",this.COMMENT_WRAP=60,this.ORDER_OVERRIDES=[],this.isInitialized=null,this.RESERVED_WORDS_="",this.definitions_=Object.create(null),this.functionNames_=Object.create(null),this.nameDB_=void 0,this.name_=e,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")}workspaceToCode(e){e||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),e=ne());var n=[];this.init(e),e=e.getTopBlocks(!0);for(let i=0,u;u=e[i];i++){let m=this.blockToCode(u);Array.isArray(m)&&(m=m[0]),m&&(u.outputConnection&&(m=this.scrubNakedValue(m),this.STATEMENT_PREFIX&&!u.suppressPrefixSuffix&&(m=this.injectId(this.STATEMENT_PREFIX,u)+m),this.STATEMENT_SUFFIX&&!u.suppressPrefixSuffix&&(m+=this.injectId(this.STATEMENT_SUFFIX,u))),n.push(m))}return n=n.join(`
`),n=this.finish(n),n=n.replace(/^\s+\n/,""),n=n.replace(/\n\s+$/,`
`),n=n.replace(/[ \t]+\n/g,`
`)}prefixLines(e,n){return n+e.replace(/(?!\n$)\n/g,`
`+n)}allNestedComments(e){const n=[];e=e.getDescendants(!0);for(let i=0;i<e.length;i++){const u=e[i].getCommentText();u&&n.push(u)}return n.length&&n.push(""),n.join(`
`)}blockToCode(e,n){if(this.isInitialized===!1&&console.warn("CodeGenerator init was not called before blockToCode was called."),!e)return"";if(!e.isEnabled())return n?"":this.blockToCode(e.getNextBlock());if(e.isInsertionMarker())return n?"":this.blockToCode(e.getChildren(!1)[0]);var i=this.forBlock[e.type];if(typeof i!="function")throw Error(`${this.name_} generator does not know how to generate code for block type "${e.type}".`);if(i=i.call(e,e,this),Array.isArray(i)){if(!e.outputConnection)throw TypeError("Expecting string from statement block: "+e.type);return[this.scrub_(e,i[0],n),i[1]]}if(typeof i=="string")return this.STATEMENT_PREFIX&&!e.suppressPrefixSuffix&&(i=this.injectId(this.STATEMENT_PREFIX,e)+i),this.STATEMENT_SUFFIX&&!e.suppressPrefixSuffix&&(i+=this.injectId(this.STATEMENT_SUFFIX,e)),this.scrub_(e,i,n);if(i===null)return"";throw SyntaxError("Invalid code generated: "+i)}valueToCode(e,n,i){if(isNaN(i))throw TypeError("Expecting valid order from block: "+e.type);var u=e.getInputTargetBlock(n);if(!u&&!e.getInput(n))throw ReferenceError(`Input "${n}" doesn't exist on "${e.type}"`);if(!u||(n=this.blockToCode(u),n===""))return"";if(!Array.isArray(n))throw TypeError(`Expecting tuple from value block: ${u.type} See developers.google.com/blockly/guides/create-custom-blocks/generating-code for more information`);if(e=n[0],n=n[1],isNaN(n))throw TypeError("Expecting valid order from value block: "+u.type);if(!e)return"";u=!1;var m=Math.floor(i);const T=Math.floor(n);if(m<=T&&(m!==T||m!==0&&m!==99)){for(u=!0,m=0;m<this.ORDER_OVERRIDES.length;m++)if(this.ORDER_OVERRIDES[m][0]===i&&this.ORDER_OVERRIDES[m][1]===n){u=!1;break}}return u&&(e="("+e+")"),e}statementToCode(e,n){const i=e.getInputTargetBlock(n);if(!i&&!e.getInput(n))throw ReferenceError(`Input "${n}" doesn't exist on "${e.type}"`);if(e=this.blockToCode(i),typeof e!="string")throw TypeError("Expecting code from statement block: "+(i&&i.type));return e&&(e=this.prefixLines(e,this.INDENT)),e}addLoopTrap(e,n){return this.INFINITE_LOOP_TRAP&&(e=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,n),this.INDENT)+e),this.STATEMENT_SUFFIX&&!n.suppressPrefixSuffix&&(e=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,n),this.INDENT)+e),this.STATEMENT_PREFIX&&!n.suppressPrefixSuffix&&(e+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,n),this.INDENT)),e}injectId(e,n){return n=n.id.replace(/\$/g,"$$$$"),e.replace(/%1/g,"'"+n+"'")}addReservedWords(e){this.RESERVED_WORDS_+=e+","}provideFunction_(e,n){if(!this.definitions_[e]){const i=this.nameDB_.getDistinctName(e,s.NameType$$module$build$src$core$names.PROCEDURE);this.functionNames_[e]=i,Array.isArray(n)&&(n=n.join(`
`)),n=n.trim().replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,i);let u;for(;u!==n;)u=n,n=n.replace(/^(( {2})*) {2}/gm,"$1\0");n=n.replace(/\0/g,this.INDENT),this.definitions_[e]=n}return this.functionNames_[e]}getVariableName(e){return this.getName(e,s.NameType$$module$build$src$core$names.VARIABLE)}getProcedureName(e){return this.getName(e,s.NameType$$module$build$src$core$names.PROCEDURE)}getName(e,n){if(!this.nameDB_)throw Error("Name database is not defined. You must initialize `nameDB_` in your generator class and call `init` first.");return this.nameDB_.getName(e,n)}init(e){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)}scrub_(e,n,i){return n}finish(e){return this.definitions_=Object.create(null),this.functionNames_=Object.create(null),e}scrubNakedValue(e){return e}},sS={},sS.CodeGenerator=s.CodeGenerator$$module$build$src$core$generator;var oS=class extends Zv{constructor(e,n){super(e),this.flyout_=n}getBoundingBox(){let e;try{e=this.workspace_.getCanvas().getBBox()}catch{e={height:0,y:0,width:0,x:0}}return e}getContentMetrics(e){const n=this.getBoundingBox();return e=e?1:this.workspace_.scale,{height:n.height*e,width:n.width*e,top:n.y*e,left:n.x*e}}getScrollMetrics(e,n,i){return n=i||this.getContentMetrics(),i=this.flyout_.MARGIN*this.workspace_.scale,e=e?this.workspace_.scale:1,{height:(n.height+2*i)/e,width:(n.width+n.left+i)/e,top:0,left:0}}},kh;(function(e){e.BLOCK="block",e.BUTTON="button"})(kh||(kh={}));var XM="WORKSPACE_AT_BLOCK_CAPACITY",E$=class extends g${constructor(e){super(),this.horizontalLayout=!1,this.boundEvents=[],this.filterWrapper=this.reflowWrapper=null,this.mats=[],this.buttons_=[],this.contents=[],this.listeners=[],this.permanentlyDisabled=[],this.recycledBlocks=[],this.autoClose=!0,this.visible=!1,this.containerVisible=!0,this.CORNER_RADIUS=8,this.SCROLLBAR_MARGIN=2.5,this.height_=this.width_=0,this.dragAngleRange_=70,this.svgGroup_=this.svgBackground_=null,e.setMetrics=this.setMetrics_.bind(this),this.workspace_=new go(e),this.workspace_.setMetricsManager(new oS(this.workspace_,this)),this.workspace_.internalIsFlyout=!0,this.workspace_.setVisible(this.visible),this.id=O(),this.RTL=!!e.RTL,this.toolboxPosition_=e.toolboxPosition,this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.rectMap_=new WeakMap,this.MARGIN=this.CORNER_RADIUS,this.GAP_X=3*this.MARGIN,this.GAP_Y=3*this.MARGIN}createDom(e){return this.svgGroup_=ue(e,{class:"blocklyFlyout"}),this.svgGroup_.style.display="none",this.svgBackground_=ue(Z.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_}init(e){this.targetWorkspace=e,this.workspace_.targetWorkspace=e,this.workspace_.scrollbar=new Qv(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),this.boundEvents.push(je(this.svgGroup_,"wheel",this,this.wheel_)),this.filterWrapper=this.filterForCapacity.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper),this.boundEvents.push(je(this.svgBackground_,"pointerdown",this,this.onMouseDown)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),e.getComponentManager().addComponent({component:this,weight:Ft.ComponentWeight.FLYOUT_WEIGHT,capabilities:[Ft.Capability.AUTOHIDEABLE,Ft.Capability.DELETE_AREA,Ft.Capability.DRAG_TARGET]})}dispose(){this.hide(),this.targetWorkspace.getComponentManager().removeComponent(this.id);for(const e of this.boundEvents)ft(e);this.boundEvents.length=0,this.filterWrapper&&this.targetWorkspace.removeChangeListener(this.filterWrapper),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.dispose()),this.svgGroup_&&Q(this.svgGroup_)}getWidth(){return this.width_}getHeight(){return this.height_}getFlyoutScale(){return this.targetWorkspace.scale}getWorkspace(){return this.workspace_}setAutoClose(e){this.autoClose=e,this.targetWorkspace.recordDragTargets(),this.targetWorkspace.resizeContents()}autoHide(e){!e&&this.targetWorkspace.getFlyout(!0)===this&&this.autoClose&&this.hide()}getTargetWorkspace(){return this.targetWorkspace}isVisible(){return this.visible}setVisible(e){const n=e!==this.isVisible();this.visible=e,n&&(this.autoClose||this.targetWorkspace.recordDragTargets(),this.updateDisplay())}setContainerVisible(e){const n=e!==this.containerVisible;this.containerVisible=e,n&&this.updateDisplay()}getContents(){return this.contents}setContents(e){this.contents=e}updateDisplay(){let e;e=this.containerVisible?this.isVisible():!1,this.svgGroup_&&(this.svgGroup_.style.display=e?"block":"none");let n;(n=this.workspace_.scrollbar)==null||n.setContainerVisible(e)}positionAt_(e,n,i,u){let m;(m=this.svgGroup_)==null||m.setAttribute("width",`${e}`);let T;(T=this.svgGroup_)==null||T.setAttribute("height",`${n}`),this.workspace_.setCachedParentSvgSize(e,n),this.svgGroup_&&kt(this.svgGroup_,"translate("+i+"px,"+u+"px)"),(e=this.workspace_.scrollbar)&&(e.setOrigin(i,u),e.resize(),e.hScroll&&e.hScroll.setPosition(e.hScroll.position.x,e.hScroll.position.y),e.vScroll&&e.vScroll.setPosition(e.vScroll.position.x,e.vScroll.position.y))}hide(){if(this.isVisible()){this.setVisible(!1);for(const e of this.listeners)ft(e);this.listeners.length=0,this.reflowWrapper&&(this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowWrapper=null)}}show(e){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks(),typeof e=="string"&&(e=this.getDynamicCategoryContents(e)),this.setVisible(!0),e=lc(e),e=this.createFlyoutInfo(e),es(this.workspace_),this.setContents(e.contents),this.layout_(e.contents,e.gaps),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity(),this.position(),this.reflowWrapper=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper),this.emptyRecycledBlocks()}createFlyoutInfo(e){const n=[],i=[];this.permanentlyDisabled.length=0;const u=this.horizontalLayout?this.GAP_X:this.GAP_Y;for(const m of e){if("custom"in m){e=this.getDynamicCategoryContents(m.custom),e=lc(e);const{contents:T,gaps:N}=this.createFlyoutInfo(e);n.push(...T),i.push(...N)}switch(m.kind.toUpperCase()){case"BLOCK":e=m;const T=this.createFlyoutBlock(e);n.push({type:kh.BLOCK,block:T}),this.addBlockGap(e,i,u);break;case"SEP":this.addSeparatorGap(m,i,u);break;case"LABEL":e=this.createButton(m,!0),n.push({type:kh.BUTTON,button:e}),i.push(u);break;case"BUTTON":e=this.createButton(m,!1),n.push({type:kh.BUTTON,button:e}),i.push(u)}}return{contents:n,gaps:i}}getDynamicCategoryContents(e){if(e=this.workspace_.targetWorkspace.getToolboxCategoryCallback(e),typeof e!="function")throw TypeError("Couldn't find a callback function when opening a toolbox category.");return e(this.workspace_.targetWorkspace)}createButton(e,n){return new fo(this.workspace_,this.targetWorkspace,e,n)}createFlyoutBlock(e){let n;return e.blockxml?(e=typeof e.blockxml=="string"?s.textToDom$$module$build$src$core$utils$xml(e.blockxml):e.blockxml,(n=this.getRecycledBlock(e.getAttribute("type")))||(n=qs(e,this.workspace_))):(n=this.getRecycledBlock(e.type),n||(e.enabled===void 0&&(e.enabled=e.disabled!=="true"&&e.disabled!==!0),e.disabledReasons===void 0&&e.enabled===!1&&(e.disabledReasons=[Gn]),n=Ar(e,this.workspace_))),n.isEnabled()||this.permanentlyDisabled.push(n),n}getRecycledBlock(e){let n=-1;for(let i=0;i<this.recycledBlocks.length;i++)if(this.recycledBlocks[i].type===e){n=i;break}return n===-1?void 0:this.recycledBlocks.splice(n,1)[0]}addBlockGap(e,n,i){let u;e.gap?u=parseInt(String(e.gap)):e.blockxml&&(e=typeof e.blockxml=="string"?s.textToDom$$module$build$src$core$utils$xml(e.blockxml):e.blockxml,u=parseInt(e.getAttribute("gap"))),n.push(!u||isNaN(u)?i:u)}addSeparatorGap(e,n,i){e=parseInt(String(e.gap)),!isNaN(e)&&0<n.length?n[n.length-1]=e:n.push(i)}clearOldBlocks(){var e=this.workspace_.getTopBlocks(!1);for(let i=0,u;u=e[i];i++)this.blockIsRecyclable_(u)?this.recycleBlock(u):u.dispose(!1,!1);for(e=0;e<this.mats.length;e++){const i=this.mats[e];i&&(gd(i),Q(i))}this.mats.length=0;for(let i=0,u;u=this.buttons_[i];i++)u.dispose();this.buttons_.length=0;let n;(n=this.workspace_.getPotentialVariableMap())==null||n.clear()}emptyRecycledBlocks(){for(let e=0;e<this.recycledBlocks.length;e++)this.recycledBlocks[e].dispose();this.recycledBlocks=[]}blockIsRecyclable_(e){return!1}recycleBlock(e){const n=e.getRelativeToSurfaceXY();e.moveBy(-n.x,-n.y),this.recycledBlocks.push(e)}addBlockListeners_(e,n,i){this.listeners.push(je(e,"pointerdown",null,this.blockMouseDown(n))),this.listeners.push(je(i,"pointerdown",null,this.blockMouseDown(n))),this.listeners.push(at(e,"pointerenter",n,()=>{this.targetWorkspace.isDragging()||n.addSelect()})),this.listeners.push(at(e,"pointerleave",n,()=>{this.targetWorkspace.isDragging()||n.removeSelect()})),this.listeners.push(at(i,"pointerenter",n,()=>{this.targetWorkspace.isDragging()||n.addSelect()})),this.listeners.push(at(i,"pointerleave",n,()=>{this.targetWorkspace.isDragging()||n.removeSelect()}))}blockMouseDown(e){return n=>{const i=this.targetWorkspace.getGesture(n);i&&(i.setStartBlock(e),i.handleFlyoutStart(n,this))}}onMouseDown(e){const n=this.targetWorkspace.getGesture(e);n&&n.handleFlyoutStart(e,this)}isBlockCreatable(e){return e.isEnabled()}createBlock(e){let n=null;s.disable$$module$build$src$core$events$utils();var i=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{n=this.placeNewBlock(e)}finally{s.enable$$module$build$src$core$events$utils()}if(this.targetWorkspace.hideChaff(),e=pc(this.targetWorkspace,i),ce()){for(s.setGroup$$module$build$src$core$events$utils(!0),i=0;i<e.length;i++){const u=e[i];W(new(G(oe.VAR_CREATE))(u))}W(new(G(oe.BLOCK_CREATE))(n))}return this.autoClose?this.hide():this.filterForCapacity(),n}initFlyoutButton_(e,n,i){const u=e.createDom();e.moveTo(n,i),e.show(),this.listeners.push(je(u,"pointerdown",this,this.onMouseDown)),this.buttons_.push(e)}createRect_(e,n,i,u,m){return n=ue(Z.RECT,{"fill-opacity":0,x:n,y:i,height:u.height,width:u.width}),n.tooltip=e,ca(n),this.workspace_.getCanvas().insertBefore(n,e.getSvgRoot()),this.rectMap_.set(e,n),this.mats[m]=n}moveRectToBlock_(e,n){const i=n.getHeightWidth();e.setAttribute("width",String(i.width)),e.setAttribute("height",String(i.height)),n=n.getRelativeToSurfaceXY(),e.setAttribute("y",String(n.y)),e.setAttribute("x",String(this.RTL?n.x-i.width:n.x))}filterForCapacity(){const e=this.workspace_.getTopBlocks(!1);for(let n=0,i;i=e[n];n++)if(!this.permanentlyDisabled.includes(i)){const u=this.targetWorkspace.isCapacityAvailable(He(i));for(;i;)i.setDisabledReason(!u,XM),i=i.getNextBlock()}}reflow(){this.reflowWrapper&&this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowInternal_(),this.reflowWrapper&&this.workspace_.addChangeListener(this.reflowWrapper)}isScrollable(){return this.workspace_.scrollbar?this.workspace_.scrollbar.isVisible():!1}placeNewBlock(e){var n=this.targetWorkspace;if(!e.getSvgRoot())throw Error("oldBlock is not rendered");const i=this.serializeBlock(e);return n.setResizesEnabled(!1),n=zs(i,n),this.positionNewBlock(e,n),n}serializeBlock(e){return Bn(e)}positionNewBlock(e,n){const i=this.targetWorkspace;var u=i.getOriginOffsetInPixels(),m=this.workspace_.getOriginOffsetInPixels();e=e.getRelativeToSurfaceXY(),e.scale(this.workspace_.scale),m=ke.sum(m,e),u=ke.difference(m,u),u.scale(1/i.scale),n.moveTo(new ke(u.x,u.y))}};E$.FlyoutItemType=kh;var ty=class extends E${constructor(e){super(e)}setMetrics_(e){if(this.isVisible()){var n=this.workspace_.getMetricsManager(),i=n.getScrollMetrics(),u=n.getViewMetrics();n=n.getAbsoluteMetrics(),typeof e.y=="number"&&(this.workspace_.scrollY=-(i.top+(i.height-u.height)*e.y)),this.workspace_.translate(this.workspace_.scrollX+n.left,this.workspace_.scrollY+n.top)}}getX(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager();const n=e.getAbsoluteMetrics(),i=e.getViewMetrics();return e=e.getToolboxMetrics(),this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_===qe.LEFT?e.width:i.width-this.width_:this.toolboxPosition_===qe.LEFT?0:i.width:this.toolboxPosition_===qe.LEFT?0:i.width+n.left-this.width_}getY(){return 0}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=e.height,this.setBackgroundPath(this.width_-this.CORNER_RADIUS,e.height-2*this.CORNER_RADIUS),e=this.getX();var n=this.getY();this.positionAt_(this.width_,this.height_,e,n)}}setBackgroundPath(e,n){const i=this.toolboxPosition_===qe.RIGHT;var u=e+this.CORNER_RADIUS;u=["M "+(i?u:0)+",0"],u.push("h",i?-e:e),u.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,i?0:1,i?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),u.push("v",Math.max(0,n)),u.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,i?0:1,i?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),u.push("h",i?e:-e),u.push("z"),this.svgBackground_.setAttribute("d",u.join(" "))}scrollToStart(){let e;(e=this.workspace_.scrollbar)==null||e.setY(0)}wheel_(e){var n=hn(e);if(n.y){const i=this.workspace_.getMetricsManager(),u=i.getScrollMetrics();n=i.getViewMetrics().top-u.top+n.y;let m;(m=this.workspace_.scrollbar)==null||m.setY(n),Ys(this.workspace_),Ks()}e.preventDefault(),e.stopPropagation()}layout_(e,n){this.workspace_.scale=this.targetWorkspace.scale;var i=this.MARGIN;const u=this.RTL?i:i+this.tabWidth_;for(let H=0,ge;ge=e[H];H++)if(ge.type==="block"){var m=ge.block;if(!m)continue;var T=m.getDescendants(!1);for(let Yt=0,jt;jt=T[Yt];Yt++)jt.isInFlyout=!0;T=m.getSvgRoot();const Fe=m.getHeightWidth();var N=m.outputConnection?u-this.tabWidth_:u;m.moveBy(N,i),N=this.createRect_(m,this.RTL?N-Fe.width:N,i,Fe,H),this.addBlockListeners_(T,m,N),i+=Fe.height+n[H]}else ge.type==="button"&&(m=ge.button,this.initFlyoutButton_(m,u,i),i+=m.height+n[H])}isDragTowardWorkspace(e){e=Math.atan2(e.y,e.x)/Math.PI*180;const n=this.dragAngleRange_;return e<n&&e>-n||e<-180+n||e>180-n}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const e=this.svgGroup_.getBoundingClientRect(),n=e.left;return this.toolboxPosition_===qe.LEFT?new St(-1e9,1e9,-1e9,n+e.width):new St(-1e9,1e9,n,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let e=0;var n=this.workspace_.getTopBlocks(!1);for(let u=0,m;m=n[u];u++){var i=m.getHeightWidth().width;m.outputConnection&&(i-=this.tabWidth_),e=Math.max(e,i)}for(let u=0,m;m=this.buttons_[u];u++)e=Math.max(e,m.width);if(e+=1.5*this.MARGIN+this.tabWidth_,e*=this.workspace_.scale,e+=qt.scrollbarThickness,this.width_!==e){for(let u=0,m;m=n[u];u++){if(this.RTL){i=m.getRelativeToSurfaceXY().x;let T=e/this.workspace_.scale-this.MARGIN;m.outputConnection||(T-=this.tabWidth_),m.moveBy(T-i,0)}this.rectMap_.has(m)&&this.moveRectToBlock_(this.rectMap_.get(m),m)}if(this.RTL)for(let u=0,m;m=this.buttons_[u];u++)n=m.getPosition().y,m.moveTo(e/this.workspace_.scale-m.width-this.MARGIN-this.tabWidth_,n);this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==qe.LEFT||this.targetWorkspace.translate(this.targetWorkspace.scrollX+e,this.targetWorkspace.scrollY),this.width_=e,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};ty.registryName="verticalFlyout",o(Te.FLYOUTS_VERTICAL_TOOLBOX,Pr,ty);var iS=class extends E${constructor(e){super(e),this.horizontalLayout=!0}setMetrics_(e){if(this.isVisible()){var n=this.workspace_.getMetricsManager(),i=n.getScrollMetrics(),u=n.getViewMetrics();n=n.getAbsoluteMetrics(),typeof e.x=="number"&&(this.workspace_.scrollX=-(i.left+(i.width-u.width)*e.x)),this.workspace_.translate(this.workspace_.scrollX+n.left,this.workspace_.scrollY+n.top)}}getX(){return 0}getY(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager();const n=e.getAbsoluteMetrics(),i=e.getViewMetrics();e=e.getToolboxMetrics();const u=this.toolboxPosition_===qe.TOP;return this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?u?e.height:i.height-this.height_:u?0:i.height:u?0:i.height+n.top-this.height_}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=e.width,this.setBackgroundPath(e.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),e=this.getX();var n=this.getY();this.positionAt_(this.width_,this.height_,e,n)}}setBackgroundPath(e,n){const i=this.toolboxPosition_===qe.TOP,u=["M 0,"+(i?0:this.CORNER_RADIUS)];i?(u.push("h",e+2*this.CORNER_RADIUS),u.push("v",n),u.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),u.push("h",-e),u.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(u.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),u.push("h",e),u.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),u.push("v",n),u.push("h",-e-2*this.CORNER_RADIUS)),u.push("z"),this.svgBackground_.setAttribute("d",u.join(" "))}scrollToStart(){let e;(e=this.workspace_.scrollbar)==null||e.setX(this.RTL?1/0:0)}wheel_(e){var n=hn(e);if(n=n.x||n.y){const i=this.workspace_.getMetricsManager(),u=i.getScrollMetrics();n=i.getViewMetrics().left-u.left+n;let m;(m=this.workspace_.scrollbar)==null||m.setX(n),Ys(this.workspace_),Ks()}e.preventDefault(),e.stopPropagation()}layout_(e,n){this.workspace_.scale=this.targetWorkspace.scale;const i=this.MARGIN;let u=i+this.tabWidth_;this.RTL&&(e=e.reverse());for(let H=0,ge;ge=e[H];H++)if(ge.type==="block"){var m=ge.block;if(m==null)continue;var T=m.getDescendants(!1);for(let Yt=0,jt;jt=T[Yt];Yt++)jt.isInFlyout=!0;T=m.getSvgRoot();const Fe=m.getHeightWidth();var N=m.outputConnection?this.tabWidth_:0;N=this.RTL?u+Fe.width:u-N,m.moveBy(N,i),N=this.createRect_(m,N,i,Fe,H),u+=Fe.width+n[H],this.addBlockListeners_(T,m,N)}else ge.type==="button"&&(m=ge.button,this.initFlyoutButton_(m,u,i),u+=m.width+n[H])}isDragTowardWorkspace(e){e=Math.atan2(e.y,e.x)/Math.PI*180;const n=this.dragAngleRange_;return e<90+n&&e>90-n||e>-90-n&&e<-90+n}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const e=this.svgGroup_.getBoundingClientRect(),n=e.top;return this.toolboxPosition_===qe.TOP?new St(-1e9,n+e.height,-1e9,1e9):new St(n,1e9,-1e9,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let e=0;const n=this.workspace_.getTopBlocks(!1);for(let u=0,m;m=n[u];u++)e=Math.max(e,m.getHeightWidth().height);const i=this.buttons_;for(let u=0,m;m=i[u];u++)e=Math.max(e,m.height);if(e+=1.5*this.MARGIN,e*=this.workspace_.scale,e+=qt.scrollbarThickness,this.height_!==e){for(let u=0,m;m=n[u];u++)this.rectMap_.has(m)&&this.moveRectToBlock_(this.rectMap_.get(m),m);this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==qe.TOP||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+e),this.height_=e,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};o(Te.FLYOUTS_HORIZONTAL_TOOLBOX,Pr,iS);var bm=class extends cs{constructor(e,n,i,u,m){super(_.SKIP_SETUP),this.defaultType="",this.variableTypes=[],this.variable=null,this.SERIALIZABLE=!0,this.menuGenerator_=bm.dropdownCreate,this.defaultVariableName=typeof e=="string"?e:"",this.size_=new Re(0,0),e!==_.SKIP_SETUP&&(m?this.configure_(m):this.setTypes(i,u),n&&this.setValidator(n))}configure_(e){super.configure_(e),this.setTypes(e.variableTypes,e.defaultType)}initModel(){var e=this.getSourceBlock();if(!e)throw new b;this.variable||(e=s.getOrCreateVariablePackage$$module$build$src$core$variables(e.workspace,null,this.defaultVariableName,this.defaultType),this.doValueUpdate_(e.getId()))}shouldAddBorderRect_(){const e=this.getSourceBlock();if(!e)throw new b;return super.shouldAddBorderRect_()&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||e.type!=="variables_get")}fromXml(e){var n=this.getSourceBlock();if(!n)throw new b;const i=e.getAttribute("id"),u=e.textContent,m=e.getAttribute("variabletype")||e.getAttribute("variableType")||"";if(n=s.getOrCreateVariablePackage$$module$build$src$core$variables(n.workspace,i,u,m),m!==null&&m!==n.type)throw Error("Serialized variable type with id '"+n.getId()+"' had type "+n.type+", and does not match variable field that references it: "+lr(e)+".");this.setValue(n.getId())}toXml(e){return this.initModel(),e.id=this.variable.getId(),e.textContent=this.variable.name,this.variable.type&&e.setAttribute("variabletype",this.variable.type),e}saveState(e){var n=this.saveLegacyState(bm);return n!==null||(this.initModel(),n={id:this.variable.getId()},e&&(n.name=this.variable.name,n.type=this.variable.type)),n}loadState(e){const n=this.getSourceBlock();if(!n)throw new b;this.loadLegacyState(bm,e)||(e=s.getOrCreateVariablePackage$$module$build$src$core$variables(n.workspace,e.id||null,e.name,e.type||""),this.setValue(e.getId()))}setSourceBlock(e){if(e.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");super.setSourceBlock(e)}getValue(){return this.variable?this.variable.getId():null}getText(){return this.variable?this.variable.name:""}getVariable(){return this.variable}getValidator(){return this.variable?this.validator_:null}doClassValidation_(e){if(e===null)return null;var n=this.getSourceBlock();if(!n)throw new b;return n=s.getVariable$$module$build$src$core$variables(n.workspace,e),n?(n=n.type,this.typeIsAllowed(n)?e:(console.warn("Variable type doesn't match this field!  Type was "+n),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+e),null)}doValueUpdate_(e){const n=this.getSourceBlock();if(!n)throw new b;this.variable=s.getVariable$$module$build$src$core$variables(n.workspace,e),super.doValueUpdate_(e)}typeIsAllowed(e){const n=this.getVariableTypes();if(!n)return!0;for(let i=0;i<n.length;i++)if(e===n[i])return!0;return!1}getVariableTypes(){var e=this.variableTypes;if(e===null&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())return this.sourceBlock_.workspace.getVariableTypes();if(e=e||[""],e.length===0)throw e=this.getText(),Error("'variableTypes' of field variable "+e+" was an empty list");return e}setTypes(e=null,n=""){if(Array.isArray(e)){let i=!1;for(let u=0;u<e.length;u++)e[u]===n&&(i=!0);if(!i)throw Error("Invalid default type '"+n+"' in the definition of a FieldVariable")}else if(e!==null)throw Error("'variableTypes' was not an array in the definition of a FieldVariable");this.defaultType=n,this.variableTypes=e}refreshVariableName(){this.forceRerender()}onItemSelected_(e,n){if(e=n.getValue(),this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()){if(e===Fv){s.renameVariable$$module$build$src$core$variables(this.sourceBlock_.workspace,this.variable);return}if(e===Uv){this.sourceBlock_.workspace.deleteVariableById(this.variable.getId());return}}this.setValue(e)}referencesVariables(){return!0}static fromJson(e){return new this(Zt(e.variable),void 0,void 0,void 0,e)}static dropdownCreate(){if(!this.variable)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");const e=this.getText();let n=[];if(this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())for(var i=this.getVariableTypes(),u=0;u<i.length;u++){const m=this.sourceBlock_.workspace.getVariablesOfType(i[u]);n=n.concat(m)}for(n.sort(La.compareByName),i=[],u=0;u<n.length;u++)i[u]=[n[u].name,n[u].getId()];return i.push([s.Msg$$module$build$src$core$msg.RENAME_VARIABLE,Fv]),s.Msg$$module$build$src$core$msg.DELETE_VARIABLE&&i.push([s.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",e),Uv]),i}};ar("field_variable",bm);var ny=class extends y${constructor(e,n,i,u,m,T){super(_.SKIP_SETUP),this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces=null,this.spellcheck_=!1,e!==_.SKIP_SETUP&&(T?this.configure_(T):this.setConstraints(n,i,u),this.setValue(e),m&&this.setValidator(m))}configure_(e){super.configure_(e),this.setMinInternal(e.min),this.setMaxInternal(e.max),this.setPrecisionInternal(e.precision)}setConstraints(e,n,i){this.setMinInternal(e),this.setMaxInternal(n),this.setPrecisionInternal(i),this.setValue(this.getValue())}setMin(e){this.setMinInternal(e),this.setValue(this.getValue())}setMinInternal(e){e==null?this.min_=-1/0:(e=Number(e),isNaN(e)||(this.min_=e))}getMin(){return this.min_}setMax(e){this.setMaxInternal(e),this.setValue(this.getValue())}setMaxInternal(e){e==null?this.max_=1/0:(e=Number(e),isNaN(e)||(this.max_=e))}getMax(){return this.max_}setPrecision(e){this.setPrecisionInternal(e),this.setValue(this.getValue())}setPrecisionInternal(e){this.precision_=Number(e)||0;let n=String(this.precision_);n.includes("e")&&(n=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));const i=n.indexOf(".");this.decimalPlaces=i===-1?e?0:null:n.length-i-1}getPrecision(){return this.precision_}doClassValidation_(e){return e===null||(e=`${e}`.replace(/O/gi,"0"),e=e.replace(/,/g,""),e=e.replace(/infinity/i,"Infinity"),e=Number(e||0),isNaN(e))?null:(e=Math.min(Math.max(e,this.min_),this.max_),this.precision_&&isFinite(e)&&(e=Math.round(e/this.precision_)*this.precision_),this.decimalPlaces!==null&&(e=Number(e.toFixed(this.decimalPlaces))),e)}widgetCreate_(){const e=super.widgetCreate_();return-1/0<this.min_&&(e.min=`${this.min_}`,xn(e,tn.VALUEMIN,this.min_)),1/0>this.max_&&(e.max=`${this.max_}`,xn(e,tn.VALUEMAX,this.max_)),e}static fromJson(e){return new this(e.value,void 0,void 0,void 0,void 0,e)}};ar("field_number",ny),ny.prototype.DEFAULT_VALUE=0;var lS=class extends bu{constructor(e,n,i){super(String(e??""),n,i),this.EDITABLE=!1,this.SERIALIZABLE=!0}static fromJson(e){return new this(Zt(e.text),void 0,e)}};ar("field_label_serializable",lS);var Cu=class extends _{constructor(e,n,i){super(_.SKIP_SETUP),this.SERIALIZABLE=!0,this.CURSOR="default",this.value_=this.value_,this.checkChar=Cu.CHECK_CHAR,e!==_.SKIP_SETUP&&(i&&this.configure_(i),this.setValue(e),n&&this.setValidator(n))}configure_(e){super.configure_(e),e.checkCharacter&&(this.checkChar=e.checkCharacter)}saveState(){const e=this.saveLegacyState(Cu);return e!==null?e:this.getValueBoolean()}initView(){super.initView();const e=this.getTextElement();Ge(e,"blocklyCheckbox"),e.style.display=this.value_?"block":"none"}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)}getDisplayText_(){return this.checkChar}setCheckCharacter(e){this.checkChar=e||Cu.CHECK_CHAR,this.forceRerender()}showEditor_(){this.setValue(!this.value_)}doClassValidation_(e){return e===!0||e==="TRUE"?"TRUE":e===!1||e==="FALSE"?"FALSE":null}doValueUpdate_(e){this.value_=this.convertValueToBool(e),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")}getValue(){return this.value_?"TRUE":"FALSE"}getValueBoolean(){return this.value_}getText(){return String(this.convertValueToBool(this.value_))}convertValueToBool(e){return typeof e=="string"?e==="TRUE":!!e}static fromJson(e){return new this(e.checked,void 0,e)}};Cu.CHECK_CHAR="",ar("field_checkbox",Cu),Cu.prototype.DEFAULT_VALUE=!1;var aS=class{constructor(e,n){this.draggable=e,this.workspace=n,this.dragTarget=null,this.startLoc=e.getRelativeToSurfaceXY()}onDragStart(e){this.draggable.startDrag(e)}onDrag(e,n){this.moveDraggable(e,n),n=this.getRoot(this.draggable),Er(n)&&n.setDeleteStyle(this.wouldDeleteDraggable(e,n)),this.updateDragTarget(e)}updateDragTarget(e){e=this.workspace.getDragTarget(e);const n=this.getRoot(this.draggable);if(this.dragTarget!==e){let i;(i=this.dragTarget)==null||i.onDragExit(n),e?.onDragEnter(n)}e?.onDragOver(n),this.dragTarget=e}moveDraggable(e,n){n=this.pixelsToWorkspaceUnits(n),n=ke.sum(this.startLoc,n),this.draggable.drag(n,e)}wouldDeleteDraggable(e,n){return(e=this.workspace.getDragTarget(e))&&this.workspace.getComponentManager().hasCapability(e.id,Ft.Capability.DELETE_AREA)?e.wouldDelete(n):!1}onDragEnd(e){const n=s.getGroup$$module$build$src$core$events$utils();var i=this.workspace.getDragTarget(e);const u=this.getRoot(this.draggable);if(i){let m;(m=this.dragTarget)==null||m.onDrop(u)}this.shouldReturnToStart(e,u)&&this.draggable.revertDrag(),(i=Er(u)&&this.wouldDeleteDraggable(e,u))&&this.draggable instanceof $o&&Nr(this.draggable.getRootBlock()),this.draggable.endDrag(e),i&&Er(u)&&(e=s.getGroup$$module$build$src$core$events$utils(),s.setGroup$$module$build$src$core$events$utils(n),u.dispose(),s.setGroup$$module$build$src$core$events$utils(e))}getRoot(e){return e instanceof $o?e.getRootBlock():e}shouldReturnToStart(e,n){return(e=this.workspace.getDragTarget(e))?e.shouldPreventMove(n):!1}pixelsToWorkspaceUnits(e){return e=new ke(e.x/this.workspace.scale,e.y/this.workspace.scale),this.workspace.isMutator&&e.scale(1/this.workspace.options.parentWorkspace.scale),e}};o(Te.BLOCK_DRAGGER,Pr,aS);var Em={};Em.BlockDragStrategy=Dw,Em.BubbleDragStrategy=vw,Em.CommentDragStrategy=Xe,Em.Dragger=aS;var ry=class extends is{constructor(e,n,i){super(e?e.workspace.id:void 0),this.type=oe.BLOCK_DRAG,e&&(this.blockId=e.id,this.isStart=n,this.blocks=i)}toJson(){const e=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.blockId===void 0)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return e.isStart=this.isStart,e.blockId=this.blockId,e.blocks=this.blocks,e}static fromJson(e,n,i){return n=super.fromJson(e,n,i??new ry),n.isStart=e.isStart,n.blockId=e.blockId,n.blocks=e.blocks,n}};o(Te.EVENT,oe.BLOCK_DRAG,ry);var sy=class extends as{constructor(e,n,i,u){super(e),this.type=oe.BLOCK_FIELD_INTERMEDIATE_CHANGE,this.recordUndo=!1,e&&(this.name=n,this.oldValue=i,this.newValue=u)}toJson(){const e=super.toJson();if(!this.name)throw Error("The changed field name is undefined. Either pass a name to the constructor, or call fromJson.");return e.name=this.name,e.oldValue=this.oldValue,e.newValue=this.newValue,e}static fromJson(e,n,i){return n=super.fromJson(e,n,i??new sy),n.name=e.name,n.oldValue=e.oldValue,n.newValue=e.newValue,n}isNull(){return this.oldValue===this.newValue}run(e){var n=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(n=n.getBlockById(this.blockId),!n)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");e=e?this.newValue:this.oldValue,(n=n.getField(this.name))?n.setValue(e):console.warn("Can't set non-existent field: "+this.name)}};o(Te.EVENT,oe.BLOCK_FIELD_INTERMEDIATE_CHANGE,sy);var oy=class extends as{constructor(e){super(e),this.type=oe.BLOCK_MOVE,e&&(e.isShadow()&&(this.recordUndo=!1),e=this.currentLocation(),this.oldParentId=e.parentId,this.oldInputName=e.inputName,this.oldCoordinate=e.coordinate)}toJson(){const e=super.toJson();return e.oldParentId=this.oldParentId,e.oldInputName=this.oldInputName,this.oldCoordinate&&(e.oldCoordinate=`${Math.round(this.oldCoordinate.x)}, ${Math.round(this.oldCoordinate.y)}`),e.newParentId=this.newParentId,e.newInputName=this.newInputName,this.newCoordinate&&(e.newCoordinate=`${Math.round(this.newCoordinate.x)}, ${Math.round(this.newCoordinate.y)}`),this.reason&&(e.reason=this.reason),this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,n,i){return n=super.fromJson(e,n,i??new oy),n.oldParentId=e.oldParentId,n.oldInputName=e.oldInputName,e.oldCoordinate&&(i=e.oldCoordinate.split(","),n.oldCoordinate=new ke(Number(i[0]),Number(i[1]))),n.newParentId=e.newParentId,n.newInputName=e.newInputName,e.newCoordinate&&(i=e.newCoordinate.split(","),n.newCoordinate=new ke(Number(i[0]),Number(i[1]))),e.reason!==void 0&&(n.reason=e.reason),e.recordUndo!==void 0&&(n.recordUndo=e.recordUndo),n}recordNew(){const e=this.currentLocation();this.newParentId=e.parentId,this.newInputName=e.inputName,this.newCoordinate=e.coordinate}setReason(e){this.reason=e}currentLocation(){var e=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var n=e.getBlockById(this.blockId);if(!n)throw Error("The block associated with the block move event could not be found");e={};const i=n.getParent();return i?(e.parentId=i.id,(n=i.getInputWithBlock(n))&&(e.inputName=n.name)):e.coordinate=n.getRelativeToSurfaceXY(),e}isNull(){return this.oldParentId===this.newParentId&&this.oldInputName===this.newInputName&&ke.equals(this.oldCoordinate,this.newCoordinate)}run(e){var n=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var i=n.getBlockById(this.blockId);if(i){var u=e?this.newParentId:this.oldParentId,m=e?this.newInputName:this.oldInputName;if(e=e?this.newCoordinate:this.oldCoordinate,u){var T=n.getBlockById(u);if(!T){console.warn("Can't connect to non-existent block: "+u);return}}if(i.getParent()&&i.unplug(),e)m=i.getRelativeToSurfaceXY(),i.moveBy(e.x-m.x,e.y-m.y,this.reason);else{n=i.outputConnection,(!n||i.previousConnection&&i.previousConnection.isConnected())&&(n=i.previousConnection);let N,H;i=(H=n)==null?void 0:H.type,m?(i=T.getInput(m))&&(N=i.connection):i===Ve.PREVIOUS_STATEMENT&&(N=T.nextConnection),N&&n?n.connect(N):console.warn("Can't connect to non-existent input: "+m)}}else console.warn("Can't move non-existent block: "+this.blockId)}};o(Te.EVENT,oe.BLOCK_MOVE,oy);var iy=class extends is{constructor(e,n,i){super(e?e.workspace.id:void 0),this.type=oe.BUBBLE_OPEN,e&&(this.blockId=e.id,this.isOpen=n,this.bubbleType=i)}toJson(){const e=super.toJson();if(this.isOpen===void 0)throw Error("Whether this event is for opening the bubble is undefined. Either pass the value to the constructor, or call fromJson");if(!this.bubbleType)throw Error("The type of bubble is undefined. Either pass the value to the constructor, or call fromJson");return e.isOpen=this.isOpen,e.bubbleType=this.bubbleType,e.blockId=this.blockId||"",e}static fromJson(e,n,i){return n=super.fromJson(e,n,i??new iy),n.isOpen=e.isOpen,n.bubbleType=e.bubbleType,n.blockId=e.blockId,n}},ly;(function(e){e.MUTATOR="mutator",e.COMMENT="comment",e.WARNING="warning"})(ly||(ly={})),o(Te.EVENT,oe.BUBBLE_OPEN,iy);var Pi=class extends vl{constructor(e){super(),this.isBlank=!e,e&&(this.commentId=e.id,this.workspaceId=e.workspace.id,this.group=s.getGroup$$module$build$src$core$events$utils(),this.recordUndo=j())}toJson(){const e=super.toJson();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return e.commentId=this.commentId,e}static fromJson(e,n,i){return n=super.fromJson(e,n,i??new Pi),n.commentId=e.commentId,n}static CommentCreateDeleteHelper(e,n){const i=e.getEventWorkspace_();if(n){if(!e.json)throw Error("Encountered a comment event without proper json");li(e.json,i)}else{if(!e.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(n=i.getCommentById(e.commentId))?n.dispose():console.warn("Can't delete non-existent comment: "+e.commentId)}}},ay=class extends Pi{constructor(e,n,i){super(e),this.type=oe.COMMENT_CHANGE,e&&(this.oldContents_=typeof n>"u"?"":n,this.newContents_=typeof i>"u"?"":i)}toJson(){const e=super.toJson();if(!this.oldContents_)throw Error("The old contents is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newContents_)throw Error("The new contents is undefined. Either pass a value to the constructor, or call fromJson");return e.oldContents=this.oldContents_,e.newContents=this.newContents_,e}static fromJson(e,n,i){return n=super.fromJson(e,n,i??new ay),n.oldContents_=e.oldContents,n.newContents_=e.newContents,n}isNull(){return this.oldContents_===this.newContents_}run(e){var n=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(n=n.getCommentById(this.commentId)){var i=e?this.newContents_:this.oldContents_;if(i===void 0)throw Error(e?"The new contents is undefined. Either pass a value to the constructor, or call fromJson":"The old contents is undefined. Either pass a value to the constructor, or call fromJson");n.setText(i)}else console.warn("Can't change non-existent comment: "+this.commentId)}};o(Te.EVENT,oe.COMMENT_CHANGE,ay);var cy=class extends Pi{constructor(e,n){super(e),this.newCollapsed=n,this.type=oe.COMMENT_COLLAPSE}toJson(){const e=super.toJson();if(this.newCollapsed===void 0)throw Error("The new collapse value undefined. Either call recordNew, or call fromJson");return e.newCollapsed=this.newCollapsed,e}static fromJson(e,n,i){return n=super.fromJson(e,n,i??new cy),n.newCollapsed=e.newCollapsed,n}run(e){var n=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(n=n.getCommentById(this.commentId))?n.setCollapsed(e?!!this.newCollapsed:!this.newCollapsed):console.warn("Can't collapse or uncollapse non-existent comment: "+this.commentId)}};o(Te.EVENT,oe.COMMENT_COLLAPSE,cy);var uy=class extends Pi{constructor(e){super(e),this.type=oe.COMMENT_CREATE,e&&(this.xml=cl(e),this.json=Ki(e,{addCoordinates:!0}))}toJson(){const e=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.json)throw Error("The comment JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=lr(this.xml),e.json=this.json,e}static fromJson(e,n,i){return n=super.fromJson(e,n,i??new uy),n.xml=s.textToDom$$module$build$src$core$utils$xml(e.xml),n.json=e.json,n}run(e){Pi.CommentCreateDeleteHelper(this,e)}};o(Te.EVENT,oe.COMMENT_CREATE,uy);var dy=class extends Pi{constructor(e){super(e),this.type=oe.COMMENT_DELETE,e&&(this.xml=cl(e),this.json=Ki(e,{addCoordinates:!0}))}run(e){Pi.CommentCreateDeleteHelper(this,!e)}toJson(){const e=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.json)throw Error("The comment JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=lr(this.xml),e.json=this.json,e}static fromJson(e,n,i){return n=super.fromJson(e,n,i??new dy),n.xml=s.textToDom$$module$build$src$core$utils$xml(e.xml),n.json=e.json,n}};o(Te.EVENT,oe.COMMENT_DELETE,dy);var hy=class extends is{constructor(e,n){super(e?e.workspace.id:void 0),this.type=oe.COMMENT_DRAG,e&&(this.commentId=e.id,this.isStart=n)}toJson(){const e=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.commentId===void 0)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return e.isStart=this.isStart,e.commentId=this.commentId,e}static fromJson(e,n,i){return n=super.fromJson(e,n,i??new hy),n.isStart=e.isStart,n.commentId=e.commentId,n}};o(Te.EVENT,oe.COMMENT_DRAG,hy);var py=class extends Pi{constructor(e){super(e),this.type=oe.COMMENT_MOVE,e&&(this.comment_=e,this.oldCoordinate_=e.getRelativeToSurfaceXY())}recordNew(){if(this.newCoordinate_)throw Error("Tried to record the new position of a comment on the same event twice.");if(!this.comment_)throw Error("The comment is undefined. Pass a comment to the constructor if you want to use the record functionality");this.newCoordinate_=this.comment_.getRelativeToSurfaceXY()}setReason(e){this.reason=e}setOldCoordinate(e){this.oldCoordinate_=e}toJson(){const e=super.toJson();if(!this.oldCoordinate_)throw Error("The old comment position is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newCoordinate_)throw Error("The new comment position is undefined. Either call recordNew, or call fromJson");return e.oldCoordinate=`${Math.round(this.oldCoordinate_.x)}, ${Math.round(this.oldCoordinate_.y)}`,e.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y),e}static fromJson(e,n,i){return n=super.fromJson(e,n,i??new py),i=e.oldCoordinate.split(","),n.oldCoordinate_=new ke(Number(i[0]),Number(i[1])),i=e.newCoordinate.split(","),n.newCoordinate_=new ke(Number(i[0]),Number(i[1])),n}isNull(){return ke.equals(this.oldCoordinate_,this.newCoordinate_)}run(e){var n=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(n=n.getCommentById(this.commentId)){if(e=e?this.newCoordinate_:this.oldCoordinate_,!e)throw Error("Either oldCoordinate_ or newCoordinate_ is undefined. Either pass a comment to the constructor and call recordNew, or call fromJson");n.moveTo(e)}else console.warn("Can't move non-existent comment: "+this.commentId)}};o(Te.EVENT,oe.COMMENT_MOVE,py);var fy=class extends Pi{constructor(e){super(e),this.type=oe.COMMENT_RESIZE,e&&(this.oldSize=e.getSize())}recordCurrentSizeAsNewSize(){if(this.newSize)throw Error("Tried to record the new size of a comment on the same event twice.");var e=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(e=e.getCommentById(this.commentId),!e)throw Error("The comment associated with the comment resize event could not be found");this.newSize=e.getSize()}toJson(){const e=super.toJson();if(!this.oldSize)throw Error("The old comment size is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newSize)throw Error("The new comment size is undefined. Either call recordCurrentSizeAsNewSize, or call fromJson");return e.oldWidth=Math.round(this.oldSize.width),e.oldHeight=Math.round(this.oldSize.height),e.newWidth=Math.round(this.newSize.width),e.newHeight=Math.round(this.newSize.height),e}static fromJson(e,n,i){return n=super.fromJson(e,n,i??new fy),n.oldSize=new Re(e.oldWidth,e.oldHeight),n.newSize=new Re(e.newWidth,e.newHeight),n}isNull(){return Re.equals(this.oldSize,this.newSize)}run(e){var n=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(n=n.getCommentById(this.commentId)){if(e=e?this.newSize:this.oldSize,!e)throw Error("Either oldSize or newSize is undefined. Either pass a comment to the constructor and call recordCurrentSizeAsNewSize, or call fromJson");n.setSize(e)}else console.warn("Can't resize non-existent comment: "+this.commentId)}};o(Te.EVENT,oe.COMMENT_RESIZE,fy);var my=class extends is{constructor(e,n,i){super(i),this.type=oe.TOOLBOX_ITEM_SELECT,this.oldItem=e??void 0,this.newItem=n??void 0}toJson(){const e=super.toJson();return e.oldItem=this.oldItem,e.newItem=this.newItem,e}static fromJson(e,n,i){return n=super.fromJson(e,n,i??new my),n.oldItem=e.oldItem,n.newItem=e.newItem,n}};o(Te.EVENT,oe.TOOLBOX_ITEM_SELECT,my);var cS=class extends vl{constructor(e){super(),this.isBlank=!0,this.recordUndo=!1,this.type=oe.FINISHED_LOADING,this.isBlank=!!e,e&&(this.workspaceId=e.id)}};o(Te.EVENT,oe.FINISHED_LOADING,cS);var uS,dS,hS,pS,fS,mS,gS,$S,_S,vS,yS,TS,bS,ES,wS,SS,CS,IS,RS,kS,xS,OS,AS,NS,LS,Be;s.BLOCK_CHANGE$$module$build$src$core$events$events=oe.BLOCK_CHANGE,s.BLOCK_CREATE$$module$build$src$core$events$events=oe.BLOCK_CREATE,s.BLOCK_DELETE$$module$build$src$core$events$events=oe.BLOCK_DELETE,uS=oe.BLOCK_DRAG,s.BLOCK_MOVE$$module$build$src$core$events$events=oe.BLOCK_MOVE,dS=oe.BLOCK_FIELD_INTERMEDIATE_CHANGE,hS=oe.BUBBLE_OPEN,pS=oe.BLOCK_CHANGE,fS=oe.CLICK,mS=oe.COMMENT_CHANGE,gS=oe.COMMENT_CREATE,$S=oe.COMMENT_DELETE,_S=oe.COMMENT_MOVE,vS=oe.COMMENT_RESIZE,yS=oe.COMMENT_DRAG,TS=oe.BLOCK_CREATE,bS=oe.BLOCK_DELETE,ES=oe.FINISHED_LOADING,wS=oe.MARKER_MOVE,SS=oe.BLOCK_MOVE,CS=oe.SELECTED,IS=oe.THEME_CHANGE,RS=oe.TOOLBOX_ITEM_SELECT,kS=oe.TRASHCAN_OPEN,xS=oe.UI,OS=oe.VAR_CREATE,AS=oe.VAR_DELETE,NS=oe.VAR_RENAME,LS=oe.VIEWPORT_CHANGE,Be={},Be.Abstract=vl,Be.BLOCK_CHANGE=s.BLOCK_CHANGE$$module$build$src$core$events$events,Be.BLOCK_CREATE=s.BLOCK_CREATE$$module$build$src$core$events$events,Be.BLOCK_DELETE=s.BLOCK_DELETE$$module$build$src$core$events$events,Be.BLOCK_DRAG=uS,Be.BLOCK_FIELD_INTERMEDIATE_CHANGE=dS,Be.BLOCK_MOVE=s.BLOCK_MOVE$$module$build$src$core$events$events,Be.BUBBLE_OPEN=hS,Be.BUMP_EVENTS=Df,Be.BlockBase=as,Be.BlockChange=ki,Be.BlockCreate=ho,Be.BlockDelete=Mv,Be.BlockDrag=ry,Be.BlockFieldIntermediateChange=sy,Be.BlockMove=oy,Be.BubbleOpen=iy,Be.BubbleType=ly,Be.CHANGE=pS,Be.CLICK=fS,Be.COMMENT_CHANGE=mS,Be.COMMENT_CREATE=gS,Be.COMMENT_DELETE=$S,Be.COMMENT_DRAG=yS,Be.COMMENT_MOVE=_S,Be.COMMENT_RESIZE=vS,Be.CREATE=TS,Be.Click=rh,Be.ClickTarget=Zc,Be.CommentBase=Pi,Be.CommentChange=ay,Be.CommentCollapse=cy,Be.CommentCreate=uy,Be.CommentDelete=dy,Be.CommentDrag=hy,Be.CommentMove=py,Be.CommentResize=fy,Be.DELETE=bS,Be.FINISHED_LOADING=ES,Be.FinishedLoading=cS,Be.MARKER_MOVE=wS,Be.MOVE=SS,Be.MarkerMove=Pv,Be.SELECTED=CS,Be.Selected=jv,Be.THEME_CHANGE=IS,Be.TOOLBOX_ITEM_SELECT=RS,Be.TRASHCAN_OPEN=kS,Be.ThemeChange=Ev,Be.ToolboxItemSelect=my,Be.TrashcanOpen=zv,Be.UI=xS,Be.UiBase=is,Be.VAR_CREATE=OS,Be.VAR_DELETE=AS,Be.VAR_RENAME=NS,Be.VIEWPORT_CHANGE=LS,Be.VarBase=pu,Be.VarCreate=co,Be.VarDelete=Vv,Be.VarRename=Hv,Be.ViewportChange=wv,Be.clearPendingUndo=De,Be.disable=s.disable$$module$build$src$core$events$utils,Be.disableOrphans=ee,Be.enable=s.enable$$module$build$src$core$events$utils,Be.filter=ye,Be.fire=W,Be.fromJson=pe,Be.get=G,Be.getDescendantIds=ie,Be.getGroup=s.getGroup$$module$build$src$core$events$utils,Be.getRecordUndo=j,Be.isEnabled=ce,Be.setGroup=s.setGroup$$module$build$src$core$events$utils,Be.setRecordUndo=s.setRecordUndo$$module$build$src$core$events$utils;var Ho={};Ho.BottomRow=qw,Ho.ConstantProvider=Xw,Ho.Drawer=Yw,Ho.MarkerSvg=eS,Ho.PathObject=tS,Ho.RenderInfo=Zw,Ho.Renderer=ey,Ho.RightConnectionShape=Jw,Ho.StatementInput=b$,Ho.TopRow=Qw,Zd();var zn={};zn.registerCleanup=Wc,zn.registerCollapse=ka,zn.registerCollapseExpandBlock=On,zn.registerComment=ml,zn.registerCommentCreate=gl,zn.registerCommentDelete=ss,zn.registerCommentDuplicate=wr,zn.registerCommentOptions=Of,zn.registerDefaultOptions=Zd,zn.registerDelete=qc,zn.registerDeleteAll=$n,zn.registerDisable=Yc,zn.registerDuplicate=fl,zn.registerExpand=Kc,zn.registerHelp=Jc,zn.registerInline=xf,zn.registerRedo=Ra,zn.registerUndo=Kt;var w$={};w$.CommentView=Qe,w$.RenderedWorkspaceComment=fn,w$.WorkspaceComment=et;var wm={};wm.Bubble=xt,wm.MiniWorkspaceBubble=Dl,wm.TextBubble=Sw,wm.TextInputBubble=yw;var MS=class extends d${constructor(){super(),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2}getCSS_(e){return super.getCSS_(e).concat([`${e} .blocklyInsertionMarker>.blocklyPathLight,`,`${e} .blocklyInsertionMarker>.blocklyPathDark {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"])}},PS=class{constructor(e){this.inlineSteps_=this.steps_="",this.info_=e,this.RTL_=this.info_.RTL,e=e.getRenderer(),this.constants_=e.getConstants(),this.highlightConstants_=e.getHighlightConstants(),this.highlightOffset=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH}getPath(){return this.steps_+`
`+this.inlineSteps_}drawTopCorner(e){this.steps_+=Lt(e.xPos,this.info_.startY);for(let n=0,i;i=e.elements[n];n++)Y.isLeftSquareCorner(i)?this.steps_+=this.highlightConstants_.START_POINT:Y.isLeftRoundedCorner(i)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):Y.isPreviousConnection(i)?this.steps_+=this.notchPaths_.pathLeft:Y.isHat(i)?this.steps_+=this.startPaths_.path(this.RTL_):Y.isSpacer(i)&&i.width!==0&&(this.steps_+=Me("H",i.xPos+i.width-this.highlightOffset));this.steps_+=Me("H",e.xPos+e.width-this.highlightOffset)}drawJaggedEdge_(e){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+Me("v",e.height-this.jaggedTeethPaths_.height-this.highlightOffset))}drawValueInput(e){const n=e.getLastInput();if(this.RTL_){const i=e.height-n.connectionHeight;this.steps_+=an(n.xPos+n.width-this.highlightOffset,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+Me("v",i)}else this.steps_+=an(n.xPos+n.width,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)}drawStatementInput(e){const n=e.getLastInput();if(n)if(this.RTL_){const i=e.height-2*this.insideCornerPaths_.height;this.steps_+=an(n.xPos,e.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+Me("v",i)+this.insideCornerPaths_.pathBottom(this.RTL_)+$s(e.width-n.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=an(n.xPos,e.yPos+e.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+$s(e.width-n.xPos-this.insideCornerPaths_.width,0)}drawRightSideRow(e){const n=e.xPos+e.width-this.highlightOffset;e instanceof Nv&&e.followsStatement&&(this.steps_+=Me("H",n)),this.RTL_&&(this.steps_+=Me("H",n),e.height>this.highlightOffset&&(this.steps_+=Me("V",e.yPos+e.height-this.highlightOffset)))}drawBottomRow(e){if(this.RTL_)this.steps_+=Me("V",e.baseline-this.highlightOffset);else{const n=this.info_.bottomRow.elements[0];Y.isLeftSquareCorner(n)?this.steps_+=an(e.xPos+this.highlightOffset,e.baseline-this.highlightOffset):Y.isLeftRoundedCorner(n)&&(this.steps_+=an(e.xPos,e.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}}drawLeft(){var e=this.info_.outputConnection;e&&(e=e.connectionOffsetY+e.height,this.RTL_?this.steps_+=an(this.info_.startX,e):(this.steps_+=an(this.info_.startX+this.highlightOffset,this.info_.bottomRow.baseline-this.highlightOffset),this.steps_+=Me("V",e)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(e=this.info_.topRow,Y.isLeftRoundedCorner(e.elements[0])?this.steps_+=Me("V",this.outsideCornerPaths_.height):this.steps_+=Me("V",e.capline+this.highlightOffset))}drawInlineInput(e){const n=this.highlightOffset,i=e.xPos+e.connectionWidth;var u=e.centerline-e.height/2;const m=e.width-e.connectionWidth,T=u+n;this.RTL_?(u=e.connectionOffsetY-n,e=e.height-(e.connectionOffsetY+e.connectionHeight)+n,this.inlineSteps_+=an(i-n,T)+Me("v",u)+this.puzzleTabPaths_.pathDown(this.RTL_)+Me("v",e)+Me("h",m)):this.inlineSteps_+=an(e.xPos+e.width+n,T)+Me("v",e.height)+Me("h",-m)+an(i,u+e.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)}},DS=class extends h${constructor(e,n){super(e,n),this.highlighter_=new PS(n)}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights();const e=this.block_.pathObject;e.setPath(this.outlinePath_+`
`+this.inlinePath_),e.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&e.flipRTL(),this.recordSizeOnBlock_()}drawTop_(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),super.drawTop_()}drawJaggedEdge_(e){this.highlighter_.drawJaggedEdge_(e),super.drawJaggedEdge_(e)}drawValueInput_(e){this.highlighter_.drawValueInput(e),super.drawValueInput_(e)}drawStatementInput_(e){this.highlighter_.drawStatementInput(e),super.drawStatementInput_(e)}drawRightSideRow_(e){this.highlighter_.drawRightSideRow(e),this.outlinePath_+=Me("H",e.xPos+e.width)+Me("V",e.yPos+e.height)}drawBottom_(){this.highlighter_.drawBottomRow(this.info_.bottomRow),super.drawBottom_()}drawLeft_(){this.highlighter_.drawLeft(),super.drawLeft_()}drawInlineInput_(e){this.highlighter_.drawInlineInput(e),super.drawInlineInput_(e)}positionInlineInputConnection_(e){const n=e.centerline-e.height/2;if(e.connectionModel){let i=e.xPos+e.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(i*=-1),e.connectionModel.setOffsetInBlock(i,n+e.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}}positionStatementInputConnection_(e){const n=e.getLastInput();if(n!=null&&n.connectionModel){let i=e.xPos+e.statementEdge+n.notchOffset;i=this.info_.RTL?-1*i:i+this.constants_.DARK_PATH_OFFSET,n.connectionModel.setOffsetInBlock(i,e.yPos+this.constants_.DARK_PATH_OFFSET)}}positionExternalValueConnection_(e){const n=e.getLastInput();if(n&&n.connectionModel){let i=e.xPos+e.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(i*=-1),n.connectionModel.setOffsetInBlock(i,e.yPos)}}positionNextConnection_(){const e=this.info_.bottomRow;if(e.connection){const n=e.connection,i=n.xPos;n.connectionModel.setOffsetInBlock((this.info_.RTL?-i:i)+this.constants_.DARK_PATH_OFFSET/2,e.baseline+this.constants_.DARK_PATH_OFFSET)}}},BS=class{constructor(e){this.OFFSET=.5,this.constantProvider=e,this.START_POINT=Lt(this.OFFSET,this.OFFSET)}init(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()}makeInsideCorner(){const e=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,i=(1-Math.SQRT1_2)*(e+n)-n,u=Lt(i,i)+Dt("a","0 0,0",e,Ke(-i-n,e-i)),m=Dt("a","0 0,0",e+n,Ke(e+n,e+n)),T=Lt(i,-i)+Dt("a","0 0,0",e+n,Ke(e-i,i+n));return{width:e+n,height:e,pathTop(N){return N?u:""},pathBottom(N){return N?m:T}}}makeOutsideCorner(){const e=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,i=(1-Math.SQRT1_2)*(e-n)+n,u=Lt(i,i)+Dt("a","0 0,1",e-n,Ke(e-i,-i+n)),m=Lt(n,e)+Dt("a","0 0,1",e-n,Ke(e,-e+n)),T=-i,N=Lt(i,T)+Dt("a","0 0,1",e-n,Ke(-i+n,-T-e));return{height:e,topLeft(H){return H?u:m},bottomLeft(){return N}}}makePuzzleTab(){const e=this.constantProvider.TAB_WIDTH,n=this.constantProvider.TAB_HEIGHT,i=Lt(-2,-n+3.4)+$s(-.45*e,-2.1),u=Me("v",2.5)+Lt(.97*-e,2.5)+ln("q",[Ke(.05*-e,10),Ke(.3*e,9.5)])+Lt(.67*e,-1.9)+Me("v",2.5),m=Me("v",-1.5)+Lt(-.92*e,-.5)+ln("q",[Ke(-.19*e,-5.5),Ke(0,-11)])+Lt(.92*e,1),T=Lt(-5,n-.7)+$s(.46*e,-2.1);return{width:e,height:n,pathUp(N){return N?i:m},pathDown(N){return N?u:T}}}makeNotch(){return{pathLeft:Me("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}}makeJaggedTeeth(){return{pathLeft:$s(5.1,2.6)+Lt(-10.2,6.8)+$s(5.1,2.6),height:12,width:10.2}}makeStartHat(){const e=this.constantProvider.START_HAT.height,n=Lt(25,-8.7)+ln("c",[Ke(29.7,-6.2),Ke(57.2,-.5),Ke(75,8.7)]),i=ln("c",[Ke(17.8,-9.2),Ke(45.3,-14.9),Ke(75,-8.7)])+an(100.5,e+.5);return{path(u){return u?n:i}}}},FS=class extends Ov{constructor(e,n){super(e,n),this.constants_=e,this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)}},US=class extends mm{constructor(e,n){super(e,n),this.constants_=e,this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)}},VS=class extends _m{constructor(e,n){super(e,n),this.renderer_=e}getRenderer(){return this.renderer_}populateBottomRow_(){super.populateBottomRow_(),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof Ns||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)}addInput_(e,n){this.isInline&&e instanceof s.ValueInput$$module$build$src$core$inputs$value_input?(n.elements.push(new FS(this.constants_,e)),n.hasInlineInput=!0):e instanceof Ns?(n.elements.push(new US(this.constants_,e)),n.hasStatement=!0):e instanceof s.ValueInput$$module$build$src$core$inputs$value_input?(n.elements.push(new u$(this.constants_,e)),n.hasExternalInput=!0):(e instanceof Ni||e instanceof Hl)&&(n.minHeight=Math.max(n.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),this.isInline||n.align!==null||(n.align=e.align)}addElemSpacing_(){let e=!1;for(let i=0,u;u=this.rows[i];i++)u.hasExternalInput&&(e=!0);for(let i=0,u;u=this.rows[i];i++){var n=u.elements;if(u.elements=[],u.startsWithElemSpacer()&&u.elements.push(new As(this.constants_,this.getInRowSpacing_(null,n[0]))),n.length){for(let m=0;m<n.length-1;m++){u.elements.push(n[m]);const T=this.getInRowSpacing_(n[m],n[m+1]);u.elements.push(new As(this.constants_,T))}u.elements.push(n[n.length-1]),u.endsWithElemSpacer()&&(n=this.getInRowSpacing_(n[n.length-1],null),e&&u.hasDummyInput&&(n+=this.constants_.TAB_WIDTH),u.elements.push(new As(this.constants_,n)))}}}getInRowSpacing_(e,n){if(!e)return n&&Y.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&Y.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&Y.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!Y.isInput(e)&&(!n||Y.isStatementInput(n)))return Y.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:Y.isIcon(e)?2*this.constants_.LARGE_PADDING+1:Y.isHat(e)?this.constants_.NO_PADDING:Y.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:Y.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:Y.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(Y.isInput(e)&&!n){if(Y.isExternalInput(e))return this.constants_.NO_PADDING;if(Y.isInlineInput(e))return this.constants_.LARGE_PADDING;if(Y.isStatementInput(e))return this.constants_.NO_PADDING}if(!Y.isInput(e)&&n&&Y.isInput(n)){if(Y.isField(e)&&e.isEditable){if(Y.isInlineInput(n)||Y.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(Y.isInlineInput(n)||Y.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(Y.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(Y.isIcon(e)&&n&&!Y.isInput(n))return this.constants_.LARGE_PADDING;if(Y.isInlineInput(e)&&n&&Y.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(Y.isLeftSquareCorner(e)&&n){if(Y.isHat(n))return this.constants_.NO_PADDING;if(Y.isPreviousConnection(n))return n.notchOffset;if(Y.isNextConnection(n))return n.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(Y.isLeftRoundedCorner(e)&&n){if(Y.isPreviousConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS;if(Y.isNextConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return Y.isField(e)&&n&&Y.isField(n)&&e.isEditable===n.isEditable||n&&Y.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(e,n){return Y.isTopRow(e)&&Y.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:Y.isTopRow(e)||Y.isBottomRow(n)?this.constants_.NO_PADDING:e.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&n.hasStatement||!e.hasStatement&&n.hasDummyInput||e.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(e,n){if(Y.isSpacer(n))return e.yPos+n.height/2;if(Y.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,Y.isNextConnection(n)?e+n.height/2:e-n.height/2;if(Y.isTopRow(e))return Y.isHat(n)?e.capline-n.height/2:e.capline+n.height/2;let i=e.yPos;return Y.isField(n)||Y.isIcon(n)?(i+=n.height/2,(e.hasInlineInput||e.hasStatement)&&n.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=e.height&&(i+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):i=Y.isInlineInput(n)?i+n.height/2:i+e.height/2,i}alignRowElements_(){if(this.isInline){var e=0,n=new WeakMap,i=null;for(let u=this.rows.length-1,m;m=this.rows[u];u--)n.set(m,e),Y.isInputRow(m)&&(m.hasStatement&&this.alignStatementRow_(m),i&&i.hasStatement&&m.width<i.width?n.set(m,i.width):e=m.hasStatement?m.width:Math.max(e,m.width),i=m);e=0;for(let u=0,m;m=this.rows[u];u++)m.hasStatement?e=this.getDesiredRowWidth_(m):Y.isSpacer(m)?m.width=Math.max(e,n.get(m)):(i=m.width,e=Math.max(e,n.get(m))-i,0<e&&this.addAlignmentPadding_(m,e),e=m.width)}else super.alignRowElements_()}getDesiredRowWidth_(e){return this.isInline&&e.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:super.getDesiredRowWidth_(e)}finalize_(){let e=0,n=0;for(let u=0,m;m=this.rows[u];u++){m.yPos=n,m.xPos=this.startX,n+=m.height,e=Math.max(e,m.widthWithConnectedBlocks);var i=n-this.topRow.ascenderHeight;m===this.bottomRow&&i<this.constants_.MIN_BLOCK_HEIGHT&&(i=this.constants_.MIN_BLOCK_HEIGHT-i,this.bottomRow.height+=i,n+=i),this.recordElemPositions_(m)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(i=this.block_.nextConnection.targetBlock())&&(e=Math.max(e,i.getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=n+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline}},HS=class extends p${constructor(e,n,i){super(e,n,i),this.constants=i,this.colourDark="#000000",this.svgPathDark=ue(Z.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"}),this.svgRoot.insertBefore(this.svgPathDark,this.svgPath),this.svgPathLight=ue(Z.PATH,{class:"blocklyPathLight"},this.svgRoot)}setPath(e){this.svgPath.setAttribute("d",e),this.svgPathDark.setAttribute("d",e)}setHighlightPath(e){this.svgPathLight.setAttribute("d",e)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")}applyColour(e){if(this.svgPathLight.style.display="",this.svgPathDark.style.display="",!this.style.colourTertiary)throw Error("The renderer did not properly initialize the tertiary colour of the block style");this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),super.applyColour(e),this.svgPath.setAttribute("stroke","none")}setStyle(e){this.style=e,this.colourDark=gs("#000",this.style.colourPrimary,.2)||this.colourDark}updateHighlighted(e){e?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")}updateShadow_(e){if(e){if(this.svgPathLight.style.display="none",!this.style.colourSecondary)throw Error("The renderer did not properly initialize the secondary colour of the block style block style");this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)}}updateDisabled_(e){super.updateDisabled_(e),e&&this.svgPath.setAttribute("stroke","none")}},GS=class extends f${constructor(e){super(e),this.highlightConstants=null}init(e,n){super.init(e,n),this.highlightConstants=this.makeHighlightConstants_(),this.highlightConstants.init()}refreshDom(e,n){super.refreshDom(e,n),this.getHighlightConstants().init()}makeConstants_(){return new MS}makeRenderInfo_(e){return new VS(this,e)}makeDrawer_(e,n){return new DS(e,n)}makePathObject(e,n){return new HS(e,n,this.getConstants())}makeHighlightConstants_(){return new BS(this.getConstants())}getHighlightConstants(){if(!this.highlightConstants)throw Error("Cannot access the highlight constants because init has not been called");return this.highlightConstants}};to("geras",GS);var Di={};Di.ConstantProvider=MS,Di.Drawer=DS,Di.HighlightConstantProvider=BS,Di.Highlighter=PS,Di.InlineInput=FS,Di.PathObject=HS,Di.RenderInfo=VS,Di.Renderer=GS,Di.StatementInput=US;var jS=class extends _m{constructor(e,n){super(e,n)}getRenderer(){return this.renderer_}addElemSpacing_(){let e=!1;for(var n=0;n<this.rows.length;n++)if(this.rows[n].hasExternalInput){e=!0;break}for(n=0;n<this.rows.length;n++){const u=this.rows[n];var i=u.elements;if(u.elements=[],u.startsWithElemSpacer()&&u.elements.push(new As(this.constants_,this.getInRowSpacing_(null,i[0]))),i.length){for(let m=0;m<i.length-1;m++){u.elements.push(i[m]);const T=this.getInRowSpacing_(i[m],i[m+1]);u.elements.push(new As(this.constants_,T))}u.elements.push(i[i.length-1]),u.endsWithElemSpacer()&&(i=this.getInRowSpacing_(i[i.length-1],null),e&&u.hasDummyInput&&(i+=this.constants_.TAB_WIDTH),u.elements.push(new As(this.constants_,i)))}}}getInRowSpacing_(e,n){if(!e)return n&&Y.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&Y.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&Y.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!Y.isInput(e)&&!n)return Y.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:Y.isIcon(e)?2*this.constants_.LARGE_PADDING+1:Y.isHat(e)?this.constants_.NO_PADDING:Y.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:Y.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:Y.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(Y.isInput(e)&&!n){if(Y.isExternalInput(e))return this.constants_.NO_PADDING;if(Y.isInlineInput(e))return this.constants_.LARGE_PADDING;if(Y.isStatementInput(e))return this.constants_.NO_PADDING}if(!Y.isInput(e)&&n&&Y.isInput(n)){if(Y.isField(e)&&e.isEditable){if(Y.isInlineInput(n)||Y.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(Y.isInlineInput(n)||Y.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(Y.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(Y.isIcon(e)&&n&&!Y.isInput(n))return this.constants_.LARGE_PADDING;if(Y.isInlineInput(e)&&n&&Y.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(Y.isLeftSquareCorner(e)&&n){if(Y.isHat(n))return this.constants_.NO_PADDING;if(Y.isPreviousConnection(n)||Y.isNextConnection(n))return n.notchOffset}return Y.isLeftRoundedCorner(e)&&n?n.notchOffset-this.constants_.CORNER_RADIUS:Y.isField(e)&&n&&Y.isField(n)&&e.isEditable===n.isEditable||n&&Y.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(e,n){return Y.isTopRow(e)&&Y.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:Y.isTopRow(e)||Y.isBottomRow(n)?this.constants_.NO_PADDING:e.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&n.hasStatement||e.hasDummyInput||n.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(e,n){if(Y.isSpacer(n))return e.yPos+n.height/2;if(Y.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,Y.isNextConnection(n)?e+n.height/2:e-n.height/2;if(Y.isTopRow(e))return Y.isHat(n)?e.capline-n.height/2:e.capline+n.height/2;let i=e.yPos;return i=Y.isField(n)&&e.hasStatement?i+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+n.height/2):i+e.height/2}finalize_(){let e=0,n=0;for(var i=0;i<this.rows.length;i++){const m=this.rows[i];m.yPos=n,m.xPos=this.startX,n+=m.height,e=Math.max(e,m.widthWithConnectedBlocks);var u=n-this.topRow.ascenderHeight;m===this.bottomRow&&u<this.constants_.MIN_BLOCK_HEIGHT&&(u=this.constants_.MIN_BLOCK_HEIGHT-u,this.bottomRow.height+=u,n+=u),this.recordElemPositions_(m)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(i=this.block_.nextConnection.targetBlock())&&(e=Math.max(e,i.getHeightWidth().width)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX,this.height=n,this.startY=this.topRow.capline}},WS=class extends f${constructor(e){super(e)}makeRenderInfo_(e){return new jS(this,e)}};to("thrasos",WS);var gy={};gy.RenderInfo=jS,gy.Renderer=WS;var YM={colour_blocks:{colourPrimary:"#CF63CF",colourSecondary:"#C94FC9",colourTertiary:"#BD42BD"},list_blocks:{colourPrimary:"#9966FF",colourSecondary:"#855CD6",colourTertiary:"#774DCB"},logic_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC"},loop_blocks:{colourPrimary:"#0fBD8C",colourSecondary:"#0DA57A",colourTertiary:"#0B8E69"},math_blocks:{colourPrimary:"#59C059",colourSecondary:"#46B946",colourTertiary:"#389438"},procedure_blocks:{colourPrimary:"#FF6680",colourSecondary:"#FF4D6A",colourTertiary:"#FF3355"},text_blocks:{colourPrimary:"#FFBF00",colourSecondary:"#E6AC00",colourTertiary:"#CC9900"},variable_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},variable_dynamic_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},hat_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC",hat:"cap"}},qM={colour_category:{colour:"#CF63CF"},list_category:{colour:"#9966FF"},logic_category:{colour:"#4C97FF"},loop_category:{colour:"#0fBD8C"},math_category:{colour:"#59C059"},procedure_category:{colour:"#FF6680"},text_category:{colour:"#FFBF00"},variable_category:{colour:"#FF8C1A"},variable_dynamic_category:{colour:"#FF8C1A"}},JM=new Tu("zelos",YM,qM),QM={Classic:s$,Zelos:JM},$y=class{constructor(e,n,i){this.id_=e.toolboxitemid||S(),this.level_=(this.parent_=i||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=e,this.parentToolbox_=n,this.workspace_=this.parentToolbox_.getWorkspace()}init(){}getDiv(){return null}getClickTarget(){return null}getId(){return this.id_}getParent(){return null}getLevel(){return this.level_}isSelectable(){return!1}isCollapsible(){return!1}dispose(){}setVisible_(e){}},Go=class extends $y{constructor(e,n,i){super(e,n,i),this.colour_=this.name_="",this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.cssConfig_=this.makeDefaultCssConfig_()}init(){this.parseCategoryDef_(this.toolboxItemDef_),this.parseContents_(this.toolboxItemDef_),this.createDom_(),this.toolboxItemDef_.hidden==="true"&&this.hide()}makeDefaultCssConfig_(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}}parseContents_(e){if("custom"in e)this.flyoutItems_=e.custom;else if(e=e.contents)for(let n=0;n<e.length;n++){const i=e[n];Array.isArray(this.flyoutItems_)&&this.flyoutItems_.push(i)}}parseCategoryDef_(e){this.name_="name"in e?Zt(e.name):"",this.colour_=this.getColour_(e),Object.assign(this.cssConfig_,e.cssconfig||e.cssConfig)}createDom_(){this.htmlDiv_=this.createContainer_(),ai(this.htmlDiv_,Ur.TREEITEM),xn(this.htmlDiv_,tn.SELECTED,!1),xn(this.htmlDiv_,tn.LEVEL,this.level_+1),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),ai(this.iconDom_,Ur.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_);const e=this.labelDom_.getAttribute("id");return e&&xn(this.htmlDiv_,tn.LABELLEDBY,e),this.addColourBorder_(this.colour_),this.htmlDiv_}createContainer_(){const e=document.createElement("div"),n=this.cssConfig_.container;return n&&Ge(e,n),e}createRowContainer_(){const e=document.createElement("div");var n=this.cssConfig_.row;return n&&Ge(e,n),n=`${Go.nestedPadding*this.getLevel()}px`,this.workspace_.RTL?e.style.paddingRight=n:e.style.paddingLeft=n,e}createRowContentsContainer_(){const e=document.createElement("div"),n=this.cssConfig_.rowcontentcontainer;return n&&Ge(e,n),e}createIconDom_(){const e=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const n=this.cssConfig_.icon;n&&Ge(e,n)}return e.style.display="inline-block",e}createLabelDom_(e){const n=document.createElement("span");return n.setAttribute("id",this.getId()+".label"),n.textContent=e,(e=this.cssConfig_.label)&&Ge(n,e),n}refreshTheme(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)}addColourBorder_(e){e&&(e=Go.borderWidth+"px solid "+(e||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=e:this.rowDiv_.style.borderLeft=e)}getColour_(e){const n=e.categorystyle||e.categoryStyle;if((e=e.colour)&&n)console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour');else{if(n)return this.getColourfromStyle(n);if(e)return this.parseColour(e)}return""}getColourfromStyle(e){var n=this.workspace_.getTheme();if(e&&n){if((n=n.categoryStyles[e])&&n.colour)return this.parseColour(n.colour);console.warn('Style "'+e+'" must exist and contain a colour value')}return""}getClickTarget(){return this.rowDiv_}parseColour(e){if(e=Zt(e),e==null||e==="")return"";var n=Number(e);return isNaN(n)?(n=ol(e))?n:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+e),""):Td(n)}openIcon_(e){if(e){var n=this.cssConfig_.closedicon;n&&k(e,n),(n=this.cssConfig_.openicon)&&Ge(e,n)}}closeIcon_(e){if(e){var n=this.cssConfig_.openicon;n&&k(e,n),(n=this.cssConfig_.closedicon)&&Ge(e,n)}}setVisible_(e){this.htmlDiv_.style.display=e?"block":"none",this.isHidden_=!e,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}hide(){this.setVisible_(!1)}show(){this.setVisible_(!0)}isVisible(){return!this.isHidden_&&this.allAncestorsExpanded_()}allAncestorsExpanded_(){let e=this;for(;e.getParent();)if(e=e.getParent(),!e.isExpanded())return!1;return!0}isSelectable(){return this.isVisible()&&!this.isDisabled_}onClick(e){}setSelected(e){if(this.rowDiv_){var n=this.cssConfig_.selected;if(e){const i=this.parseColour(Go.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||i,n&&Ge(this.rowDiv_,n)}else this.rowDiv_.style.backgroundColor="",n&&D(this.rowDiv_,n);xn(this.htmlDiv_,tn.SELECTED,e)}}setDisabled(e){this.isDisabled_=e,this.getDiv().setAttribute("disabled",`${e}`),e?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")}getName(){return this.name_}getParent(){return this.parent_}getDiv(){return this.htmlDiv_}getContents(){return this.flyoutItems_}updateFlyoutContents(e){this.flyoutItems_=[],this.toolboxItemDef_=typeof e=="string"?{kind:this.toolboxItemDef_.kind,custom:e,id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden}:{kind:this.toolboxItemDef_.kind,name:"name"in this.toolboxItemDef_?this.toolboxItemDef_.name:"",contents:lc(e),id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden},this.parseContents_(this.toolboxItemDef_)}dispose(){Q(this.htmlDiv_)}};Go.registrationName="category",Go.nestedPadding=19,Go.borderWidth=8,Go.defaultBackgroundColour="#57e",Yn(`
.blocklyTreeRow:not(.blocklyTreeSelected):hover {
  background-color: rgba(255, 255, 255, .2);
}

.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {
  margin: 1px 5px 1px 0;
}

.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {
  margin: 1px 0 1px 5px;
}

.blocklyTreeRow {
  height: 22px;
  line-height: 22px;
  margin-bottom: 3px;
  padding-right: 8px;
  white-space: nowrap;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {
  margin-left: 8px;
  padding-right: 0;
}

.blocklyTreeIcon {
  background-image: url(<<<PATH>>>/sprites.png);
  height: 16px;
  vertical-align: middle;
  visibility: hidden;
  width: 16px;
}

.blocklyTreeIconClosed {
  background-position: -32px -1px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {
  background-position: 0 -1px;
}

.blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: -32px -17px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: 0 -17px;
}

.blocklyTreeIconOpen {
  background-position: -16px -1px;
}

.blocklyTreeSelected>.blocklyTreeIconOpen {
  background-position: -16px -17px;
}

.blocklyTreeLabel {
  cursor: default;
  font: 16px sans-serif;
  padding: 0 3px;
  vertical-align: middle;
}

.blocklyToolboxDelete .blocklyTreeLabel {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyTreeSelected .blocklyTreeLabel {
  color: #fff;
}
`),o(Te.TOOLBOX_ITEM,Go.registrationName,Go);var Sm=class extends $y{constructor(e,n){super(e,n),this.cssConfig_={container:"blocklyTreeSeparator"},this.htmlDiv=null,Object.assign(this.cssConfig_,e.cssconfig||e.cssConfig)}init(){this.createDom_()}createDom_(){const e=document.createElement("div"),n=this.cssConfig_.container;return n&&Ge(e,n),this.htmlDiv=e}getDiv(){return this.htmlDiv}dispose(){Q(this.htmlDiv)}};Sm.registrationName="sep",Yn(`
.blocklyTreeSeparator {
  border-bottom: solid #e5e5e5 1px;
  height: 0;
  margin: 5px 0;
}

.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {
  border-right: solid #e5e5e5 1px;
  border-bottom: none;
  height: auto;
  margin: 0 5px 0 5px;
  padding: 5px 0;
  width: 0;
}
`),o(Te.TOOLBOX_ITEM,Sm.registrationName,Sm);var xh=class extends Go{constructor(e,n,i){super(e,n,i),this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[]}makeDefaultCssConfig_(){const e=super.makeDefaultCssConfig_();return e.contents="blocklyToolboxContents",e}parseContents_(e){if("custom"in e)this.flyoutItems_=e.custom;else{const n=e.contents;if(n){this.flyoutItems_=[],e=!0;for(let i=0;i<n.length;i++){const u=n[i];!f(Te.TOOLBOX_ITEM,u.kind)||u.kind.toLowerCase()===Sm.registrationName&&e?(this.flyoutItems_.push(u),e=!0):(this.createToolboxItem(u),e=!1)}}}}createToolboxItem(e){let n=e.kind;n.toUpperCase()==="CATEGORY"&&cc(e)&&(n=xh.registrationName),e=new(g(Te.TOOLBOX_ITEM,n))(e,this.parentToolbox_,this),this.toolboxItems_.push(e)}init(){super.init(),this.setExpanded(this.toolboxItemDef_.expanded==="true"||this.toolboxItemDef_.expanded===!0)}createDom_(){super.createDom_();const e=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(e),ai(this.subcategoriesDiv_,Ur.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.closeIcon_(this.iconDom_),xn(this.htmlDiv_,tn.EXPANDED,!1),this.htmlDiv_}createIconDom_(){const e=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const n=this.cssConfig_.icon;n&&Ge(e,n),e.style.visibility="visible"}return e.style.display="inline-block",e}createSubCategoriesDom_(e){const n=document.createElement("div");n.style.display="none";var i=this.cssConfig_.contents;for(i&&Ge(n,i),i=0;i<e.length;i++){const u=e[i];u.init();const m=u.getDiv();if(n.appendChild(m),u.getClickTarget){let T;(T=u.getClickTarget())==null||T.setAttribute("id",u.getId())}}return n}setExpanded(e){if(this.expanded_!==e){if(this.expanded_=e)this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_);else{let n;(n=this.parentToolbox_.getFlyout())==null||n.setVisible(!1),this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)}xn(this.htmlDiv_,tn.EXPANDED,e),this.parentToolbox_.handleToolboxItemResize()}}setVisible_(e){this.htmlDiv_.style.display=e?"block":"none";const n=this.getChildToolboxItems();for(let i=0;i<n.length;i++)n[i].setVisible_(e);this.isHidden_=!e,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}isExpanded(){return this.expanded_}isCollapsible(){return!0}onClick(e){this.toggleExpanded()}toggleExpanded(){this.setExpanded(!this.expanded_)}getDiv(){return this.htmlDiv_}getChildToolboxItems(){return this.toolboxItems_}};xh.registrationName="collapsibleCategory",o(Te.TOOLBOX_ITEM,xh.registrationName,xh);var zS=class extends g${constructor(e){super(),this.id="toolbox",this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.previouslySelectedItem_=this.selectedItem_=this.flyout=null,this.boundEvents_=[],this.workspace_=e,this.toolboxDef_=e.options.languageTree||{contents:[]},this.horizontalLayout=e.options.horizontalLayout,this.RTL=e.options.RTL,this.contentMap_=Object.create(null),this.toolboxPosition=e.options.toolboxPosition}onShortcut(e){return!1}init(){var e=this.workspace_;const n=e.getParentSvg();this.flyout=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),xe(this.flyout.createDom("svg"),n),this.setVisible(!0),this.flyout.init(e),this.render(this.toolboxDef_),e=e.getThemeManager(),e.subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),e.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:Ft.ComponentWeight.TOOLBOX_WEIGHT,capabilities:[Ft.Capability.AUTOHIDEABLE,Ft.Capability.DELETE_AREA,Ft.Capability.DRAG_TARGET]})}createDom_(e){e=e.getParentSvg();const n=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,ai(this.contentsDiv_,Ur.TREE),n.appendChild(this.contentsDiv_),e.parentNode.insertBefore(n,e),this.attachEvents_(n,this.contentsDiv_),n}createContainer_(){const e=document.createElement("div");return e.setAttribute("layout",this.isHorizontal()?"h":"v"),Ge(e,"blocklyToolboxDiv"),e.setAttribute("dir",this.RTL?"RTL":"LTR"),e}createContentsContainer_(){const e=document.createElement("div");return Ge(e,"blocklyToolboxContents"),this.isHorizontal()&&(e.style.flexDirection="row"),e}attachEvents_(e,n){e=je(e,"pointerdown",this,this.onClick_,!1),this.boundEvents_.push(e),n=je(n,"keydown",this,this.onKeyDown_,!1),this.boundEvents_.push(n)}onClick_(e){if(or(e)||e.target===this.HtmlDiv)ne().hideChaff(!1);else{var n=e.target.getAttribute("id");n&&(n=this.getToolboxItemById(n),n.isSelectable()&&(this.setSelectedItem(n),n.onClick(e))),ne().hideChaff(!0)}Mt()}onKeyDown_(e){let n=!1;switch(e.key){case"ArrowDown":n=this.selectNext();break;case"ArrowUp":n=this.selectPrevious();break;case"ArrowLeft":n=this.selectParent();break;case"ArrowRight":n=this.selectChild();break;case"Enter":case" ":this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),n=!0);break;default:n=!1}!n&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(n=this.selectedItem_.onKeyDown(e)),n&&e.preventDefault()}createFlyout_(){const e=this.workspace_,n=new po({parentWorkspace:e,rtl:e.RTL,oneBasedIndex:e.options.oneBasedIndex,horizontalLayout:e.horizontalLayout,renderer:e.options.renderer,rendererOverrides:e.options.rendererOverrides,move:{scrollbars:!0}});return n.toolboxPosition=e.options.toolboxPosition,new(e.horizontalLayout?y(Te.FLYOUTS_HORIZONTAL_TOOLBOX,e.options,!0):y(Te.FLYOUTS_VERTICAL_TOOLBOX,e.options,!0))(n)}render(e){this.toolboxDef_=e;for(let n=0;n<this.contents_.length;n++){const i=this.contents_[n];i&&i.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(e.contents),this.position(),this.handleToolboxItemResize()}renderContents_(e){const n=document.createDocumentFragment();for(let i=0;i<e.length;i++)this.createToolboxItem(e[i],n);this.contentsDiv_.appendChild(n)}createToolboxItem(e,n){var i=e.kind;i.toUpperCase()==="CATEGORY"&&cc(e)&&(i=xh.registrationName),(i=g(Te.TOOLBOX_ITEM,i.toLowerCase()))&&(e=new i(e,this),e.init(),this.addToolboxItem_(e),(i=e.getDiv())&&n.appendChild(i),e.getClickTarget()&&e.getClickTarget().setAttribute("id",e.getId()))}addToolboxItem_(e){if(this.contents_.push(e),this.contentMap_[e.getId()]=e,e.isCollapsible()){e=e.getChildToolboxItems();for(let n=0;n<e.length;n++)this.addToolboxItem_(e[n])}}getToolboxItems(){return this.contents_}addStyle(e){e&&this.HtmlDiv&&Ge(this.HtmlDiv,e)}removeStyle(e){e&&this.HtmlDiv&&D(this.HtmlDiv,e)}getClientRect(){if(!this.HtmlDiv||!this.isVisible_)return null;var e=this.HtmlDiv.getBoundingClientRect();const n=e.top,i=n+e.height,u=e.left;return e=u+e.width,this.toolboxPosition===qe.TOP?new St(-1e7,i,-1e7,1e7):this.toolboxPosition===qe.BOTTOM?new St(n,1e7,-1e7,1e7):this.toolboxPosition===qe.LEFT?new St(-1e7,1e7,-1e7,e):new St(-1e7,1e7,u,1e7)}wouldDelete(e){return e instanceof $o?this.updateWouldDelete_(!e.getParent()&&e.isDeletable()):this.updateWouldDelete_(Er(e)&&e.isDeletable()),this.wouldDelete_}onDragEnter(e){this.updateCursorDeleteStyle_(!0)}onDragExit(e){this.updateCursorDeleteStyle_(!1)}onDrop(e){this.updateCursorDeleteStyle_(!1)}updateWouldDelete_(e){e!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=e,this.updateCursorDeleteStyle_(!0))}updateCursorDeleteStyle_(e){const n=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";e?this.addStyle(n):this.removeStyle(n)}getToolboxItemById(e){return this.contentMap_[e]||null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyout(){return this.flyout}getWorkspace(){return this.workspace_}getSelectedItem(){return this.selectedItem_}getPreviouslySelectedItem(){return this.previouslySelectedItem_}isHorizontal(){return this.horizontalLayout}position(){const e=this.workspace_.getMetrics(),n=this.HtmlDiv;n&&(this.horizontalLayout?(n.style.left="0",n.style.height="auto",n.style.width="100%",this.height_=n.offsetHeight,this.width_=e.viewWidth,this.toolboxPosition===qe.TOP?n.style.top="0":n.style.bottom="0"):(this.toolboxPosition===qe.RIGHT?n.style.right="0":n.style.left="0",n.style.height="100%",this.width_=n.offsetWidth,this.height_=e.viewHeight),this.flyout.position())}handleToolboxItemResize(){const e=this.workspace_,n=this.HtmlDiv.getBoundingClientRect();e.translate(this.toolboxPosition===qe.LEFT?e.scrollX+n.width:e.scrollX,this.toolboxPosition===qe.TOP?e.scrollY+n.height:e.scrollY),Le(e)}clearSelection(){this.setSelectedItem(null)}refreshTheme(){for(let e=0;e<this.contents_.length;e++){const n=this.contents_[e];n.refreshTheme&&n.refreshTheme()}}refreshSelection(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout.show(this.selectedItem_.getContents())}setVisible(e){this.isVisible_!==e&&(this.HtmlDiv.style.display=e?"block":"none",this.isVisible_=e,this.workspace_.recordDragTargets())}autoHide(e){!e&&this.flyout&&this.flyout.autoClose&&this.clearSelection()}setSelectedItem(e){const n=this.selectedItem_;!e&&!n||e&&!Mf(e)||(this.shouldDeselectItem_(n,e)&&n!==null&&this.deselectItem_(n),this.shouldSelectItem_(n,e)&&e!==null&&this.selectItem_(n,e),this.updateFlyout_(n,e),this.fireSelectEvent(n,e))}shouldDeselectItem_(e,n){return e!==null&&(!e.isCollapsible()||e!==n)}shouldSelectItem_(e,n){return n!==null&&n!==e}deselectItem_(e){this.selectedItem_=null,this.previouslySelectedItem_=e,e.setSelected(!1),xn(this.contentsDiv_,tn.ACTIVEDESCENDANT,"")}selectItem_(e,n){this.selectedItem_=n,this.previouslySelectedItem_=e,n.setSelected(!0),xn(this.contentsDiv_,tn.ACTIVEDESCENDANT,n.getId())}selectItemByPosition(e){-1<e&&e<this.contents_.length&&(e=this.contents_[e],e.isSelectable()&&this.setSelectedItem(e))}updateFlyout_(e,n){n&&(e!==n||n.isCollapsible())&&n.getContents().length?(this.flyout.show(n.getContents()),this.flyout.scrollToStart()):this.flyout.hide()}fireSelectEvent(e,n){const i=e&&e.getName();let u=n&&n.getName();e===n&&(u=null),e=new(G(oe.TOOLBOX_ITEM_SELECT))(i,u,this.workspace_.id),W(e)}selectParent(){return this.selectedItem_?this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.toggleExpanded(),!0):this.selectedItem_.getParent()&&this.selectedItem_.getParent().isSelectable()?(this.setSelectedItem(this.selectedItem_.getParent()),!0):!1:!1}selectChild(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;const e=this.selectedItem_;return e.isExpanded()?this.selectNext():e.toggleExpanded(),!0}selectNext(){if(!this.selectedItem_)return!1;let e=this.contents_.indexOf(this.selectedItem_)+1;if(-1<e&&e<this.contents_.length){let n=this.contents_[e];for(;n&&!n.isSelectable();)n=this.contents_[++e];if(n&&n.isSelectable())return this.setSelectedItem(n),!0}return!1}selectPrevious(){if(!this.selectedItem_)return!1;let e=this.contents_.indexOf(this.selectedItem_)-1;if(-1<e&&e<this.contents_.length){let n=this.contents_[e];for(;n&&!n.isSelectable();)n=this.contents_[--e];if(n&&n.isSelectable())return this.setSelectedItem(n),!0}return!1}dispose(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout.dispose();for(var e=0;e<this.contents_.length;e++)this.contents_[e].dispose();for(e=0;e<this.boundEvents_.length;e++)ft(this.boundEvents_[e]);this.boundEvents_=[],this.contents_=[],this.HtmlDiv&&(this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),Q(this.HtmlDiv))}};Yn(`
.blocklyToolboxDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyToolboxGrab {
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

/* Category tree in Toolbox. */
.blocklyToolboxDiv {
  background-color: #ddd;
  overflow-x: visible;
  overflow-y: auto;
  padding: 4px 0 4px 0;
  position: absolute;
  z-index: 70;  /* so blocks go under toolbox when dragging */
  -webkit-tap-highlight-color: transparent;  /* issue #1345 */
}

.blocklyToolboxContents {
  display: flex;
  flex-wrap: wrap;
  flex-direction: column;
}

.blocklyToolboxContents:focus {
  outline: none;
}
`),o(Te.TOOLBOX,Pr,zS);var ZM="11.2.1",eP=Ve.INPUT_VALUE,tP=Ve.OUTPUT_VALUE,nP=Ve.NEXT_STATEMENT,rP=Ve.PREVIOUS_STATEMENT,sP=qe.TOP,oP=qe.BOTTOM,iP=qe.LEFT,lP=qe.RIGHT;Sh.prototype.newBlock=function(e,n){return new Va(this,e,n)},go.prototype.newBlock=function(e,n){return new $o(this,e,n)},Sh.prototype.newComment=function(e){return new et(this,e)},go.prototype.newComment=function(e){return new fn(this,e)},go.newTrashcan=function(e){return new Hw(e)},Dl.prototype.newWorkspaceSvg=function(e){return new go(e)},s.Names$$module$build$src$core$names.prototype.populateProcedures=function(e){e=ur(e),e=e[0].concat(e[1]);for(let n=0;n<e.length;n++)this.getName(e[n][0],s.Names$$module$build$src$core$names.NameType.PROCEDURE)};var de={};return de.ASTNode=_e,de.BasicCursor=ym,de.Block=Va,de.BlockSvg=$o,de.Blocks=hr,de.COLLAPSED_FIELD_NAME=Rl,de.COLLAPSED_INPUT_NAME=Vr,de.COLLAPSE_CHARS=Lw,de.CodeGenerator=s.CodeGenerator$$module$build$src$core$generator,de.CollapsibleToolboxCategory=xh,de.ComponentManager=Ft,de.Connection=bt,de.ConnectionChecker=Mw,de.ConnectionDB=Th,de.ConnectionType=Ve,de.ContextMenu=Ut,de.ContextMenuItems=zn,de.ContextMenuRegistry=X,de.Css=Zf,de.Cursor=Wv,de.DELETE_VARIABLE_ID=Uv,de.DeleteArea=g$,de.DragTarget=Vw,de.DropDownDiv=rr,de.Events=Be,de.Extensions=Vo,de.Field=_,de.FieldCheckbox=Cu,de.FieldDropdown=cs,de.FieldImage=Su,de.FieldLabel=bu,de.FieldLabelSerializable=lS,de.FieldNumber=ny,de.FieldTextInput=T$,de.FieldVariable=bm,de.Flyout=E$,de.FlyoutButton=fo,de.FlyoutMetricsManager=oS,de.Generator=s.CodeGenerator$$module$build$src$core$generator,de.Gesture=Pl,de.Grid=Sv,de.HorizontalFlyout=iS,de.INPUT_VALUE=eP,de.Input=wh,de.InsertionMarkerManager=mo,de.InsertionMarkerPreviewer=nS,de.Marker=Bw,de.MarkerManager=Ll,de.Menu=cu,de.MenuItem=Si,de.MetricsManager=Zv,de.Msg=s.Msg$$module$build$src$core$msg,de.NEXT_STATEMENT=nP,de.Names=s.Names$$module$build$src$core$names,de.OPPOSITE_TYPE=wu,de.OUTPUT_VALUE=tP,de.Options=po,de.PREVIOUS_STATEMENT=rP,de.PROCEDURE_CATEGORY_NAME=c$,de.Procedures=Gr,de.RENAME_VARIABLE_ID=Fv,de.RenderedConnection=jr,de.Scrollbar=qt,de.ScrollbarPair=Qv,de.ShortcutItems=Mi,de.ShortcutRegistry=wt,de.TOOLBOX_AT_BOTTOM=oP,de.TOOLBOX_AT_LEFT=iP,de.TOOLBOX_AT_RIGHT=lP,de.TOOLBOX_AT_TOP=sP,de.TabNavigateCursor=Fw,de.Theme=Tu,de.ThemeManager=Nw,de.Themes=QM,de.Toolbox=zS,de.ToolboxCategory=Go,de.ToolboxItem=$y,de.ToolboxSeparator=Sm,de.Tooltip=Wn,de.Touch=bi,de.Trashcan=Hw,de.UnattachedFieldError=b,de.VARIABLE_CATEGORY_NAME=fu,de.VARIABLE_DYNAMIC_CATEGORY_NAME=Bv,de.VERSION=ZM,de.VariableMap=Gv,de.VariableModel=La,de.Variables=nn,de.VariablesDynamic=Eu,de.VerticalFlyout=ty,de.WidgetDiv=be,de.Workspace=Sh,de.WorkspaceAudio=Pw,de.WorkspaceDragger=gw,de.WorkspaceSvg=go,de.Xml=lt,de.ZoomControls=Qg,de.blockAnimations=pm,de.blockRendering=Ct,de.browserEvents=No,de.bubbles=wm,de.bumpObjects=m$,de.clipboard=Tm,de.comments=w$,de.common=_n,de.config=s.config$$module$build$src$core$config,de.constants=Ci,de.defineBlocksWithJsonArray=ct,de.dialog=Ii,de.dragging=Em,de.fieldRegistry=o$,de.geras=Di,de.getMainWorkspace=ne,de.getSelected=fe,de.hasBubble=di,de.hideChaff=Pf,de.icons=Fa,de.inject=Ca,de.inputs=ja,de.isCopyable=ba,de.isDeletable=Er,de.isDraggable=Lr,de.isIcon=Vd,de.isObservable=cr,de.isPaster=Af,de.isRenderedElement=Nf,de.isSelectable=Lf,de.isSerializable=ci,de.isVariableBackedParameterModel=hc,de.layers=Ae,de.procedures=Gr,de.registry=ws,de.renderManagement=xl,de.serialization=KM,de.setLocale=hu,de.setParentContainer=Se,de.svgResize=Le,de.thrasos=gy,de.uiPosition=Ei,de.utils=dn,de.zelos=Ho,de.__namespace__=s,de})})(q$)),q$.exports}var J$={exports:{}},xV=J$.exports,tI;function OV(){return tI||(tI=1,(function(t,r){(function(s,o){t.exports=o()})(xV,function(){var s=s||{Msg:Object.create(null)};return s.Msg.ADD_COMMENT="Add Comment",s.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",s.Msg.CHANGE_VALUE_TITLE="Change value:",s.Msg.CLEAN_UP="Clean up Blocks",s.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",s.Msg.COLLAPSE_ALL="Collapse Blocks",s.Msg.COLLAPSE_BLOCK="Collapse Block",s.Msg.COLOUR_BLEND_COLOUR1="colour 1",s.Msg.COLOUR_BLEND_COLOUR2="colour 2",s.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",s.Msg.COLOUR_BLEND_RATIO="ratio",s.Msg.COLOUR_BLEND_TITLE="blend",s.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",s.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",s.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",s.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",s.Msg.COLOUR_RANDOM_TITLE="random colour",s.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",s.Msg.COLOUR_RGB_BLUE="blue",s.Msg.COLOUR_RGB_GREEN="green",s.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",s.Msg.COLOUR_RGB_RED="red",s.Msg.COLOUR_RGB_TITLE="colour with",s.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",s.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",s.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",s.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",s.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",s.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",s.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",s.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",s.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",s.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",s.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",s.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",s.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",s.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",s.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",s.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",s.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",s.Msg.CONTROLS_IF_MSG_ELSE="else",s.Msg.CONTROLS_IF_MSG_ELSEIF="else if",s.Msg.CONTROLS_IF_MSG_IF="if",s.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",s.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",s.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",s.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",s.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",s.Msg.CONTROLS_REPEAT_INPUT_DO="do",s.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",s.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",s.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",s.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",s.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",s.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",s.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",s.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",s.Msg.DELETE_BLOCK="Delete Block",s.Msg.DELETE_VARIABLE="Delete the '%1' variable",s.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",s.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",s.Msg.DIALOG_CANCEL="Cancel",s.Msg.DIALOG_OK="OK",s.Msg.DISABLE_BLOCK="Disable Block",s.Msg.DUPLICATE_BLOCK="Duplicate",s.Msg.DUPLICATE_COMMENT="Duplicate Comment",s.Msg.ENABLE_BLOCK="Enable Block",s.Msg.EXPAND_ALL="Expand Blocks",s.Msg.EXPAND_BLOCK="Expand Block",s.Msg.EXTERNAL_INPUTS="External Inputs",s.Msg.HELP="Help",s.Msg.INLINE_INPUTS="Inline Inputs",s.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",s.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",s.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",s.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",s.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",s.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",s.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",s.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",s.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",s.Msg.LISTS_GET_INDEX_FIRST="first",s.Msg.LISTS_GET_INDEX_FROM_END="# from end",s.Msg.LISTS_GET_INDEX_FROM_START="#",s.Msg.LISTS_GET_INDEX_GET="get",s.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",s.Msg.LISTS_GET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",s.Msg.LISTS_GET_INDEX_LAST="last",s.Msg.LISTS_GET_INDEX_RANDOM="random",s.Msg.LISTS_GET_INDEX_REMOVE="remove",s.Msg.LISTS_GET_INDEX_TAIL="",s.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",s.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",s.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",s.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",s.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",s.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",s.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",s.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",s.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",s.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",s.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",s.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",s.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",s.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",s.Msg.LISTS_GET_SUBLIST_END_LAST="to last",s.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",s.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",s.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",s.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",s.Msg.LISTS_GET_SUBLIST_TAIL="",s.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",s.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",s.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",s.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",s.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#finding-items-in-a-list",s.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",s.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",s.Msg.LISTS_INLIST="in list",s.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",s.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",s.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",s.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",s.Msg.LISTS_LENGTH_TITLE="length of %1",s.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",s.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",s.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",s.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",s.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",s.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",s.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",s.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",s.Msg.LISTS_SET_INDEX_INPUT_TO="as",s.Msg.LISTS_SET_INDEX_INSERT="insert at",s.Msg.LISTS_SET_INDEX_SET="set",s.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",s.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",s.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",s.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",s.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",s.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",s.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",s.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",s.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",s.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",s.Msg.LISTS_SORT_ORDER_DESCENDING="descending",s.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",s.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",s.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",s.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",s.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",s.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",s.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",s.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",s.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",s.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",s.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",s.Msg.LOGIC_BOOLEAN_FALSE="false",s.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",s.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",s.Msg.LOGIC_BOOLEAN_TRUE="true",s.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",s.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",s.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",s.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",s.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",s.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",s.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",s.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",s.Msg.LOGIC_NEGATE_TITLE="not %1",s.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",s.Msg.LOGIC_NULL="null",s.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",s.Msg.LOGIC_NULL_TOOLTIP="Returns null.",s.Msg.LOGIC_OPERATION_AND="and",s.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",s.Msg.LOGIC_OPERATION_OR="or",s.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",s.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",s.Msg.LOGIC_TERNARY_CONDITION="test",s.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",s.Msg.LOGIC_TERNARY_IF_FALSE="if false",s.Msg.LOGIC_TERNARY_IF_TRUE="if true",s.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",s.Msg.MATH_ADDITION_SYMBOL="+",s.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",s.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",s.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",s.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",s.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",s.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",s.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",s.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",s.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",s.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",s.Msg.MATH_CHANGE_TITLE="change %1 by %2",s.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",s.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",s.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants:  (3.141), e (2.718),  (1.618), sqrt(2) (1.414), sqrt() (0.707), or  (infinity).",s.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",s.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",s.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",s.Msg.MATH_DIVISION_SYMBOL="",s.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",s.Msg.MATH_IS_EVEN="is even",s.Msg.MATH_IS_NEGATIVE="is negative",s.Msg.MATH_IS_ODD="is odd",s.Msg.MATH_IS_POSITIVE="is positive",s.Msg.MATH_IS_PRIME="is prime",s.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",s.Msg.MATH_IS_WHOLE="is whole",s.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",s.Msg.MATH_MODULO_TITLE="remainder of %1  %2",s.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",s.Msg.MATH_MULTIPLICATION_SYMBOL="",s.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",s.Msg.MATH_NUMBER_TOOLTIP="A number.",s.Msg.MATH_ONLIST_HELPURL="",s.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",s.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",s.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",s.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",s.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",s.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",s.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",s.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",s.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",s.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",s.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",s.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",s.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",s.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",s.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",s.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",s.Msg.MATH_POWER_SYMBOL="^",s.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",s.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",s.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",s.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",s.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",s.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",s.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",s.Msg.MATH_ROUND_OPERATOR_ROUND="round",s.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",s.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",s.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",s.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",s.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",s.Msg.MATH_SINGLE_OP_ROOT="square root",s.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",s.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",s.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",s.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",s.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",s.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",s.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",s.Msg.MATH_SUBTRACTION_SYMBOL="-",s.Msg.MATH_TRIG_ACOS="acos",s.Msg.MATH_TRIG_ASIN="asin",s.Msg.MATH_TRIG_ATAN="atan",s.Msg.MATH_TRIG_COS="cos",s.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",s.Msg.MATH_TRIG_SIN="sin",s.Msg.MATH_TRIG_TAN="tan",s.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",s.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",s.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",s.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",s.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",s.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",s.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",s.Msg.NEW_NUMBER_VARIABLE="Create number variable...",s.Msg.NEW_STRING_VARIABLE="Create string variable...",s.Msg.NEW_VARIABLE="Create variable...",s.Msg.NEW_VARIABLE_TITLE="New variable name:",s.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",s.Msg.ORDINAL_NUMBER_SUFFIX="",s.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",s.Msg.PROCEDURES_BEFORE_PARAMS="with:",s.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",s.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",s.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",s.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",s.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",s.Msg.PROCEDURES_CALL_DISABLED_DEF_WARNING="Can't run the user-defined function '%1' because the definition block is disabled.",s.Msg.PROCEDURES_CREATE_DO="Create '%1'",s.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",s.Msg.PROCEDURES_DEFNORETURN_DO="",s.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",s.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",s.Msg.PROCEDURES_DEFNORETURN_TITLE="to",s.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",s.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",s.Msg.PROCEDURES_DEFRETURN_RETURN="return",s.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",s.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",s.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",s.Msg.PROCEDURES_IFRETURN_HELPURL="https://c2.com/cgi/wiki?GuardClause",s.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",s.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",s.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",s.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",s.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",s.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",s.Msg.REDO="Redo",s.Msg.REMOVE_COMMENT="Remove Comment",s.Msg.RENAME_VARIABLE="Rename variable...",s.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",s.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",s.Msg.TEXT_APPEND_TITLE="to %1 append text %2",s.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",s.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",s.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",s.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",s.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",s.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",s.Msg.TEXT_CHARAT_FIRST="get first letter",s.Msg.TEXT_CHARAT_FROM_END="get letter # from end",s.Msg.TEXT_CHARAT_FROM_START="get letter #",s.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",s.Msg.TEXT_CHARAT_LAST="get last letter",s.Msg.TEXT_CHARAT_RANDOM="get random letter",s.Msg.TEXT_CHARAT_TAIL="",s.Msg.TEXT_CHARAT_TITLE="in text %1 %2",s.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",s.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",s.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",s.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",s.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",s.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",s.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",s.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",s.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",s.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",s.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",s.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",s.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",s.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",s.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",s.Msg.TEXT_GET_SUBSTRING_TAIL="",s.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",s.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",s.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",s.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",s.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",s.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",s.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",s.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",s.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",s.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",s.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",s.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",s.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",s.Msg.TEXT_LENGTH_TITLE="length of %1",s.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",s.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",s.Msg.TEXT_PRINT_TITLE="print %1",s.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",s.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",s.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",s.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",s.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",s.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",s.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",s.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",s.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",s.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",s.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",s.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",s.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",s.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",s.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",s.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",s.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",s.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",s.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",s.Msg.TODAY="Today",s.Msg.UNDO="Undo",s.Msg.UNNAMED_KEY="unnamed",s.Msg.VARIABLES_DEFAULT_NAME="item",s.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",s.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",s.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",s.Msg.VARIABLES_SET="set %1 to %2",s.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",s.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",s.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",s.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",s.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",s.Msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER="A variable named '%1' already exists as a parameter in the procedure '%2'.",s.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",s.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",s.Msg.CONTROLS_FOREACH_INPUT_DO=s.Msg.CONTROLS_REPEAT_INPUT_DO,s.Msg.CONTROLS_FOR_INPUT_DO=s.Msg.CONTROLS_REPEAT_INPUT_DO,s.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=s.Msg.CONTROLS_IF_MSG_ELSEIF,s.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=s.Msg.CONTROLS_IF_MSG_ELSE,s.Msg.CONTROLS_IF_IF_TITLE_IF=s.Msg.CONTROLS_IF_MSG_IF,s.Msg.CONTROLS_IF_MSG_THEN=s.Msg.CONTROLS_REPEAT_INPUT_DO,s.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=s.Msg.CONTROLS_REPEAT_INPUT_DO,s.Msg.LISTS_CREATE_WITH_ITEM_TITLE=s.Msg.VARIABLES_DEFAULT_NAME,s.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=s.Msg.LISTS_INLIST,s.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=s.Msg.LISTS_INLIST,s.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=s.Msg.LISTS_INLIST,s.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=s.Msg.LISTS_INLIST,s.Msg.MATH_CHANGE_TITLE_ITEM=s.Msg.VARIABLES_DEFAULT_NAME,s.Msg.PROCEDURES_DEFRETURN_COMMENT=s.Msg.PROCEDURES_DEFNORETURN_COMMENT,s.Msg.PROCEDURES_DEFRETURN_DO=s.Msg.PROCEDURES_DEFNORETURN_DO,s.Msg.PROCEDURES_DEFRETURN_PROCEDURE=s.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,s.Msg.PROCEDURES_DEFRETURN_TITLE=s.Msg.PROCEDURES_DEFNORETURN_TITLE,s.Msg.TEXT_APPEND_VARIABLE=s.Msg.VARIABLES_DEFAULT_NAME,s.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=s.Msg.VARIABLES_DEFAULT_NAME,s.Msg.COLOUR_HUE="20",s.Msg.LISTS_HUE="260",s.Msg.LOGIC_HUE="210",s.Msg.LOOPS_HUE="120",s.Msg.MATH_HUE="230",s.Msg.PROCEDURES_HUE="290",s.Msg.TEXTS_HUE="160",s.Msg.VARIABLES_DYNAMIC_HUE="310",s.Msg.VARIABLES_HUE="330",s.Msg})})(J$)),J$.exports}var Q$={exports:{}},AV=Q$.exports,nI;function NV(){return nI||(nI=1,(function(t,r){(function(s,o){t.exports=o(fx())})(AV,function(s){var o=s.__namespace__,a=o.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),d={customContextMenu:function(k){if(this.isInFlyout)(this.type==="variables_get_dynamic"||this.type==="variables_get_reporter_dynamic")&&(q={text:o.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:h(this)},Q=this.getField("VAR").getText(),Q={text:o.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",Q),enabled:!0,callback:f(this)},k.unshift(q),k.unshift(Q));else{if(this.type==="variables_get_dynamic")var D="variables_set_dynamic",q=o.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else D="variables_get_dynamic",q=o.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var Q=this.getField("VAR");D={type:D,fields:{VAR:Q.saveState(!0)}},k.push({enabled:0<this.workspace.remainingCapacity(),text:q.replace("%1",Q.getText()),callback:o.callbackFactory$$module$build$src$core$contextmenu(this,D)})}},onchange:function(k){k=this.getFieldValue("VAR"),k=o.getVariable$$module$build$src$core$variables(this.workspace,k),this.type==="variables_get_dynamic"?this.outputConnection.setCheck(k.type):this.getInput("VALUE").connection.setCheck(k.type)}},h=function(k){return function(){const D=k.workspace,q=k.getField("VAR").getVariable();o.renameVariable$$module$build$src$core$variables(D,q)}},f=function(k){return function(){const D=k.workspace,q=k.getField("VAR").getVariable();D.deleteVariableById(q.getId()),D.refreshToolboxSelection()}};o.registerMixin$$module$build$src$core$extensions("contextMenu_variableDynamicSetterGetter",d),o.defineBlocks$$module$build$src$core$common(a);var g={blocks:a},$=o.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),v={customContextMenu:function(k){if(this.isInFlyout)(this.type==="variables_get"||this.type==="variables_get_reporter")&&(q={text:o.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:y(this)},Q=this.getField("VAR").getText(),Q={text:o.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",Q),enabled:!0,callback:w(this)},k.unshift(q),k.unshift(Q));else{if(this.type==="variables_get")var D="variables_set",q=o.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else D="variables_get",q=o.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var Q=this.getField("VAR");D={type:D,fields:{VAR:Q.saveState(!0)}},k.push({enabled:0<this.workspace.remainingCapacity(),text:q.replace("%1",Q.getText()),callback:o.callbackFactory$$module$build$src$core$contextmenu(this,D)})}}},y=function(k){return function(){const D=k.workspace,q=k.getField("VAR").getVariable();o.renameVariable$$module$build$src$core$variables(D,q)}},w=function(k){return function(){const D=k.workspace,q=k.getField("VAR").getVariable();D.deleteVariableById(q.getId()),D.refreshToolboxSelection()}};o.registerMixin$$module$build$src$core$extensions("contextMenu_variableSetterGetter",v),o.defineBlocks$$module$build$src$core$common($);var S={blocks:$},O=o.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),I={init:function(){this.WHERE_OPTIONS_1=[[o.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[o.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[o.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[o.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[o.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[o.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(o.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(o.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT);const k=D=>{const q=o.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+D]});return q.setValidator(function(Q){const xe=this.getValue();Q=Q==="FROM_START"||Q==="FROM_END",Q!==(xe==="FROM_START"||xe==="FROM_END")&&this.getSourceBlock().updateAt_(D,Q)}),q};this.appendDummyInput("WHERE1_INPUT").appendField(k(1),"WHERE1"),this.appendDummyInput("AT1"),this.appendDummyInput("WHERE2_INPUT").appendField(k(2),"WHERE2"),this.appendDummyInput("AT2"),o.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(o.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(o.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){const k=o.createElement$$module$build$src$core$utils$xml("mutation");var D=this.getInput("AT1")instanceof o.ValueInput$$module$build$src$core$inputs$value_input;return k.setAttribute("at1",`${D}`),D=this.getInput("AT2")instanceof o.ValueInput$$module$build$src$core$inputs$value_input,k.setAttribute("at2",`${D}`),k},domToMutation:function(k){const D=k.getAttribute("at1")==="true";k=k.getAttribute("at2")==="true",this.updateAt_(1,D),this.updateAt_(2,k)},updateAt_:function(k,D){this.removeInput("AT"+k),this.removeInput("ORDINAL"+k,!0),D?(this.appendValueInput("AT"+k).setCheck("Number"),o.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+k).appendField(o.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+k),k===2&&o.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(o.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL)),k===1&&(this.moveInputBefore("AT1","WHERE2_INPUT"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","WHERE2_INPUT"))}};O.text_getSubstring=I,O.text_changeCase={init:function(){const k=[[o.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[o.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[o.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(o.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(o.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:k}),"CASE"),this.setOutput(!0,"String"),this.setTooltip(o.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_TOOLTIP)}},O.text_trim={init:function(){const k=[[o.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[o.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[o.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(o.Msg$$module$build$src$core$msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(o.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:k}),"MODE"),this.setOutput(!0,"String"),this.setTooltip(o.Msg$$module$build$src$core$msg.TEXT_TRIM_TOOLTIP)}},O.text_print={init:function(){this.jsonInit({message0:o.Msg$$module$build$src$core$msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:o.Msg$$module$build$src$core$msg.TEXT_PRINT_TOOLTIP,helpUrl:o.Msg$$module$build$src$core$msg.TEXT_PRINT_HELPURL})}};var x={updateType_:function(k){this.outputConnection.setCheck(k==="NUMBER"?"Number":"String")},mutationToDom:function(){const k=o.createElement$$module$build$src$core$utils$xml("mutation");return k.setAttribute("type",this.getFieldValue("TYPE")),k},domToMutation:function(k){this.updateType_(k.getAttribute("type"))}};O.text_prompt_ext=Object.assign({},x,{init:function(){var k=[[o.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[o.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(o.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),k=o.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:k}),k.setValidator(D=>{this.updateType_(D)}),this.appendValueInput("TEXT").appendField(k,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?o.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:o.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}}),O.text_prompt=Object.assign({},x,{init:function(){this.mixin(A);var k=[[o.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[o.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(o.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),k=o.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:k}),k.setValidator(D=>{this.updateType_(D)}),this.appendDummyInput().appendField(k,"TYPE").appendField(this.newQuote_(!0)).appendField(o.fromJson$$module$build$src$core$field_registry({type:"field_input",text:""}),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?o.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:o.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}}),O.text_count={init:function(){this.jsonInit({message0:o.Msg$$module$build$src$core$msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:o.Msg$$module$build$src$core$msg.TEXT_COUNT_TOOLTIP,helpUrl:o.Msg$$module$build$src$core$msg.TEXT_COUNT_HELPURL})}},O.text_replace={init:function(){this.jsonInit({message0:o.Msg$$module$build$src$core$msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:o.Msg$$module$build$src$core$msg.TEXT_REPLACE_TOOLTIP,helpUrl:o.Msg$$module$build$src$core$msg.TEXT_REPLACE_HELPURL})}},O.text_reverse={init:function(){this.jsonInit({message0:o.Msg$$module$build$src$core$msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:o.Msg$$module$build$src$core$msg.TEXT_REVERSE_TOOLTIP,helpUrl:o.Msg$$module$build$src$core$msg.TEXT_REVERSE_HELPURL})}};var A={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(k){for(let D=0,q;q=this.inputList[D];D++)for(let Q=0,xe;xe=q.fieldRow[Q];Q++)if(k===xe.name){q.insertFieldAt(Q,this.newQuote_(!0)),q.insertFieldAt(Q+2,this.newQuote_(!1));return}console.warn('field named "'+k+'" not found in '+this.toDevString())},newQuote_:function(k){return k=this.RTL?!k:k,o.fromJson$$module$build$src$core$field_registry({type:"field_image",src:k?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,width:this.QUOTE_IMAGE_WIDTH,height:this.QUOTE_IMAGE_HEIGHT,alt:k?"":""})}},M=function(){this.mixin(A),this.quoteField_("TEXT")},P={itemCount_:0,mutationToDom:function(){const k=o.createElement$$module$build$src$core$utils$xml("mutation");return k.setAttribute("items",`${this.itemCount_}`),k},domToMutation:function(k){this.itemCount_=parseInt(k.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(k){this.itemCount_=k.itemCount,this.updateShape_()},decompose:function(k){const D=k.newBlock("text_create_join_container");D.initSvg();let q=D.getInput("STACK").connection;for(let Q=0;Q<this.itemCount_;Q++){const xe=k.newBlock("text_create_join_item");xe.initSvg(),q.connect(xe.previousConnection),q=xe.nextConnection}return D},compose:function(k){var D=k.getInputTargetBlock("STACK");for(k=[];D;)D.isInsertionMarker()||k.push(D.valueConnection_),D=D.getNextBlock();for(D=0;D<this.itemCount_;D++){const q=this.getInput("ADD"+D).connection.targetConnection;q&&!k.includes(q)&&q.disconnect()}for(this.itemCount_=k.length,this.updateShape_(),D=0;D<this.itemCount_;D++){let q;(q=k[D])==null||q.reconnect(this,"ADD"+D)}},saveConnections:function(k){k=k.getInputTargetBlock("STACK");let D=0;for(;k;){if(k.isInsertionMarker()){k=k.getNextBlock();continue}const q=this.getInput("ADD"+D);k.valueConnection_=q&&q.connection.targetConnection,k=k.getNextBlock(),D++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var k=0;k<this.itemCount_;k++)if(!this.getInput("ADD"+k)){const D=this.appendValueInput("ADD"+k).setAlign(o.Align$$module$build$src$core$inputs$align.RIGHT);k===0&&D.appendField(o.Msg$$module$build$src$core$msg.TEXT_JOIN_TITLE_CREATEWITH)}for(k=this.itemCount_;this.getInput("ADD"+k);k++)this.removeInput("ADD"+k)}},F=function(){this.mixin(A),this.itemCount_=2,this.updateShape_(),this.setMutator(new o.MutatorIcon$$module$build$src$core$icons$mutator_icon(["text_create_join_item"],this))};o.register$$module$build$src$core$extensions("text_append_tooltip",o.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_TEXT_APPEND_TOOLTIP}","VAR"));var B=function(){this.setTooltip(()=>o.Msg$$module$build$src$core$msg.TEXT_INDEXOF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))},V={isAt_:!1,mutationToDom:function(){const k=o.createElement$$module$build$src$core$utils$xml("mutation");return k.setAttribute("at",`${this.isAt_}`),k},domToMutation:function(k){k=k.getAttribute("at")!=="false",this.updateAt_(k)},updateAt_:function(k){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),k&&(this.appendValueInput("AT").setCheck("Number"),o.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(o.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)),o.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(o.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL)),this.isAt_=k}},j=function(){this.getField("WHERE").setValidator(function(k){k=k==="FROM_START"||k==="FROM_END";const D=this.getSourceBlock();k!==D.isAt_&&D.updateAt_(k)}),this.updateAt_(!0),this.setTooltip(()=>{var k=this.getFieldValue("WHERE");let D=o.Msg$$module$build$src$core$msg.TEXT_CHARAT_TOOLTIP;return(k==="FROM_START"||k==="FROM_END")&&(k=k==="FROM_START"?o.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:o.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(D+="  "+k.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),D})};o.register$$module$build$src$core$extensions("text_indexOf_tooltip",B),o.register$$module$build$src$core$extensions("text_quotes",M),o.registerMixin$$module$build$src$core$extensions("quote_image_mixin",A),o.registerMutator$$module$build$src$core$extensions("text_join_mutator",P,F),o.registerMutator$$module$build$src$core$extensions("text_charAt_mutator",V,j),o.defineBlocks$$module$build$src$core$common(O);var W={blocks:O},he={},we={setStatements_:function(k){this.hasStatements_!==k&&(k?(this.appendStatementInput("STACK").appendField(o.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=k)},updateParams_:function(){let k="";this.arguments_.length&&(k=o.Msg$$module$build$src$core$msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),o.disable$$module$build$src$core$events$utils();try{this.setFieldValue(k,"PARAMS")}finally{o.enable$$module$build$src$core$events$utils()}},mutationToDom:function(k){const D=o.createElement$$module$build$src$core$utils$xml("mutation");k&&D.setAttribute("name",this.getFieldValue("NAME"));for(let q=0;q<this.argumentVarModels_.length;q++){const Q=o.createElement$$module$build$src$core$utils$xml("arg"),xe=this.argumentVarModels_[q];Q.setAttribute("name",xe.name),Q.setAttribute("varid",xe.getId()),k&&this.paramIds_&&Q.setAttribute("paramId",this.paramIds_[q]),D.appendChild(Q)}return this.hasStatements_||D.setAttribute("statements","false"),D},domToMutation:function(k){this.arguments_=[],this.argumentVarModels_=[];for(let q=0,Q;Q=k.childNodes[q];q++)if(Q.nodeName.toLowerCase()==="arg"){var D=Q;const xe=D.getAttribute("name");D=D.getAttribute("varid")||D.getAttribute("varId"),this.arguments_.push(xe),D=o.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,D,xe,""),D!==null?this.argumentVarModels_.push(D):console.log(`Failed to create a variable named "${xe}", ignoring.`)}this.updateParams_(),o.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(k.getAttribute("statements")!=="false")},saveExtraState:function(){if(!this.argumentVarModels_.length&&this.hasStatements_)return null;const k=Object.create(null);if(this.argumentVarModels_.length){k.params=[];for(let D=0;D<this.argumentVarModels_.length;D++)k.params.push({name:this.argumentVarModels_[D].name,id:this.argumentVarModels_[D].getId()})}return this.hasStatements_||(k.hasStatements=!1),k},loadExtraState:function(k){if(this.arguments_=[],this.argumentVarModels_=[],k.params)for(let q=0;q<k.params.length;q++){var D=k.params[q];D=o.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,D.id,D.name,""),this.arguments_.push(D.name),this.argumentVarModels_.push(D)}this.updateParams_(),o.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(k.hasStatements!==!1)},decompose:function(k){const D=o.createElement$$module$build$src$core$utils$xml("block");D.setAttribute("type","procedures_mutatorcontainer");var q=o.createElement$$module$build$src$core$utils$xml("statement");q.setAttribute("name","STACK"),D.appendChild(q);for(let xe=0;xe<this.arguments_.length;xe++){const kt=o.createElement$$module$build$src$core$utils$xml("block");kt.setAttribute("type","procedures_mutatorarg");var Q=o.createElement$$module$build$src$core$utils$xml("field");Q.setAttribute("name","NAME");const qn=o.createTextNode$$module$build$src$core$utils$xml(this.arguments_[xe]);Q.appendChild(qn),kt.appendChild(Q),Q=o.createElement$$module$build$src$core$utils$xml("next"),kt.appendChild(Q),q.appendChild(kt),q=Q}return k=o.domToBlock$$module$build$src$core$xml(D,k),this.type==="procedures_defreturn"?k.setFieldValue(this.hasStatements_,"STATEMENTS"):k.removeInput("STATEMENT_INPUT"),o.mutateCallers$$module$build$src$core$procedures(this),k},compose:function(k){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];let D=k.getInputTargetBlock("STACK");for(;D&&!D.isInsertionMarker();){var q=D.getFieldValue("NAME");this.arguments_.push(q),q=this.workspace.getVariable(q,""),this.argumentVarModels_.push(q),this.paramIds_.push(D.id),D=D.nextConnection&&D.nextConnection.targetBlock()}if(this.updateParams_(),o.mutateCallers$$module$build$src$core$procedures(this),k=k.getFieldValue("STATEMENTS"),k!==null&&(k=k==="TRUE",this.hasStatements_!==k))if(k){this.setStatements_(!0);var Q;(Q=this.statementConnection_)==null||Q.reconnect(this,"STACK"),this.statementConnection_=null}else Q=this.getInput("STACK").connection,(this.statementConnection_=Q.targetConnection)&&(Q=Q.targetBlock(),Q.unplug(),Q.bumpNeighbours()),this.setStatements_(!1)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(k,D){var q=this.workspace.getVariableById(k);if(q.type===""){q=q.name,D=this.workspace.getVariableById(D);var Q=!1;for(let xe=0;xe<this.argumentVarModels_.length;xe++)this.argumentVarModels_[xe].getId()===k&&(this.arguments_[xe]=D.name,this.argumentVarModels_[xe]=D,Q=!0);Q&&(this.displayRenamedVar_(q,D.name),o.mutateCallers$$module$build$src$core$procedures(this))}},updateVarName:function(k){const D=k.name;let q=!1,Q;for(let xe=0;xe<this.argumentVarModels_.length;xe++)this.argumentVarModels_[xe].getId()===k.getId()&&(Q=this.arguments_[xe],this.arguments_[xe]=D,q=!0);q&&(this.displayRenamedVar_(Q,D),o.mutateCallers$$module$build$src$core$procedures(this))},displayRenamedVar_:function(k,D){this.updateParams_();var q=this.getIcon(o.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE);if(q&&q.bubbleIsVisible()){q=q.getWorkspace().getAllBlocks(!1);for(let Q=0,xe;xe=q[Q];Q++)xe.type==="procedures_mutatorarg"&&o.Names$$module$build$src$core$names.equals(k,xe.getFieldValue("NAME"))&&xe.setFieldValue(D,"NAME")}},customContextMenu:function(k){if(!this.isInFlyout){var D=this.getFieldValue("NAME"),q={type:this.callType_,extraState:{name:D,params:this.arguments_}};if(k.push({enabled:!0,text:o.Msg$$module$build$src$core$msg.PROCEDURES_CREATE_DO.replace("%1",D),callback:o.callbackFactory$$module$build$src$core$contextmenu(this,q)}),!this.isCollapsed())for(D=0;D<this.argumentVarModels_.length;D++){q=this.argumentVarModels_[D];const Q={type:"variables_get",fields:{VAR:{name:q.name,id:q.getId(),type:q.type}}};k.push({enabled:!0,text:o.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",q.name),callback:o.callbackFactory$$module$build$src$core$contextmenu(this,Q)})}}}};he.procedures_defnoreturn=Object.assign({},we,{init:function(){var k=o.findLegalName$$module$build$src$core$procedures("",this);k=o.fromJson$$module$build$src$core$field_registry({type:"field_input",text:k}),k.setValidator(o.rename$$module$build$src$core$procedures),k.setSpellcheck(!1),this.appendDummyInput().appendField(o.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TITLE).appendField(k,"NAME").appendField("","PARAMS"),this.setMutator(new o.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&o.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(o.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(o.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(o.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},callType_:"procedures_callnoreturn"}),he.procedures_defreturn=Object.assign({},we,{init:function(){var k=o.findLegalName$$module$build$src$core$procedures("",this);k=o.fromJson$$module$build$src$core$field_registry({type:"field_input",text:k}),k.setValidator(o.rename$$module$build$src$core$procedures),k.setSpellcheck(!1),this.appendDummyInput().appendField(o.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TITLE).appendField(k,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(o.Align$$module$build$src$core$inputs$align.RIGHT).appendField(o.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new o.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&o.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(o.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(o.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(o.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},callType_:"procedures_callreturn"});var Ee={init:function(){this.appendDummyInput().appendField(o.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(o.Msg$$module$build$src$core$msg.PROCEDURES_ALLOW_STATEMENTS).appendField(o.fromJson$$module$build$src$core$field_registry({type:"field_checkbox",checked:!0}),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(o.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}};he.procedures_mutatorcontainer=Ee;var ye={init:function(){const k=o.fromJson$$module$build$src$core$field_registry({type:"field_input",text:o.DEFAULT_ARG$$module$build$src$core$procedures});k.setValidator(this.validator_),k.oldShowEditorFn_=k.showEditor_,k.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(o.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TITLE).appendField(k,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(o.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,k.onFinishEditing_=this.deleteIntermediateVars_,k.createdVariables_=[],k.onFinishEditing_("x")},validator_:function(k){var D=this.getSourceBlock();const q=D.workspace.getRootWorkspace();if(k=k.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""),!k)return null;const Q=(D.workspace.targetWorkspace||D.workspace).getAllBlocks(!1),xe=k.toLowerCase();for(let kt=0;kt<Q.length;kt++){if(Q[kt].id===this.getSourceBlock().id)continue;const qn=Q[kt].getFieldValue("NAME");if(qn&&qn.toLowerCase()===xe)return null}return D.isInFlyout||((D=q.getVariable(k,""))&&D.name!==k&&q.renameVariableById(D.getId(),k),D||(D=q.createVariable(k,""))&&this.createdVariables_&&this.createdVariables_.push(D)),k},deleteIntermediateVars_:function(k){const D=this.getSourceBlock().workspace.getRootWorkspace();if(D)for(let q=0;q<this.createdVariables_.length;q++){const Q=this.createdVariables_[q];Q.name!==k&&D.deleteVariableById(Q.getId())}}};he.procedures_mutatorarg=ye;var De="DISABLED_PROCEDURE_DEFINITION",ce={getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(k,D){o.Names$$module$build$src$core$names.equals(k,this.getProcedureCall())&&(this.setFieldValue(D,"NAME"),this.setTooltip((this.outputConnection?o.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_TOOLTIP:o.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",D)))},setProcedureParameters_:function(k,D){var q=o.getDefinition$$module$build$src$core$procedures(this.getProcedureCall(),this.workspace);if((q=(q=q&&q.getIcon(o.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE))&&q.bubbleIsVisible())?this.setCollapsed(!1):(this.quarkConnections_={},this.quarkIds_=null),k.join(`
`)===this.arguments_.join(`
`))this.quarkIds_=D;else{if(D.length!==k.length)throw RangeError("paramNames and paramIds must be the same length.");this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]);for(let xe=0;xe<this.arguments_.length;xe++){var Q=this.getInput("ARG"+xe);Q&&(Q=Q.connection.targetConnection,this.quarkConnections_[this.quarkIds_[xe]]=Q,q&&Q&&!D.includes(this.quarkIds_[xe])&&(Q.disconnect(),Q.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(k),this.argumentVarModels_=[],k=0;k<this.arguments_.length;k++)q=o.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,null,this.arguments_[k],""),this.argumentVarModels_.push(q);if(this.updateShape_(),this.quarkIds_=D){for(D=0;D<this.arguments_.length;D++)if(k=this.quarkIds_[D],k in this.quarkConnections_){let xe;(xe=this.quarkConnections_[k])!=null&&xe.reconnect(this,"ARG"+D)||delete this.quarkConnections_[k]}}}},updateShape_:function(){for(var k=0;k<this.arguments_.length;k++){var D=this.getField("ARGNAME"+k);if(D){o.disable$$module$build$src$core$events$utils();try{D.setValue(this.arguments_[k])}finally{o.enable$$module$build$src$core$events$utils()}}else D=o.fromJson$$module$build$src$core$field_registry({type:"field_label",text:this.arguments_[k]}),this.appendValueInput("ARG"+k).setAlign(o.Align$$module$build$src$core$inputs$align.RIGHT).appendField(D,"ARGNAME"+k)}for(k=this.arguments_.length;this.getInput("ARG"+k);k++)this.removeInput("ARG"+k);(k=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||k.appendField(o.Msg$$module$build$src$core$msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"):this.getField("WITH")&&k.removeField("WITH"))},mutationToDom:function(){const k=o.createElement$$module$build$src$core$utils$xml("mutation");k.setAttribute("name",this.getProcedureCall());for(let D=0;D<this.arguments_.length;D++){const q=o.createElement$$module$build$src$core$utils$xml("arg");q.setAttribute("name",this.arguments_[D]),k.appendChild(q)}return k},domToMutation:function(k){var D=k.getAttribute("name");this.renameProcedure(this.getProcedureCall(),D),D=[];const q=[];for(let Q=0,xe;xe=k.childNodes[Q];Q++)xe.nodeName.toLowerCase()==="arg"&&(D.push(xe.getAttribute("name")),q.push(xe.getAttribute("paramId")));this.setProcedureParameters_(D,q)},saveExtraState:function(){const k=Object.create(null);return k.name=this.getProcedureCall(),this.arguments_.length&&(k.params=this.arguments_),k},loadExtraState:function(k){if(this.renameProcedure(this.getProcedureCall(),k.name),k=k.params){const D=[];D.length=k.length,D.fill(null),this.setProcedureParameters_(k,D)}},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(k){if(this.workspace&&!this.workspace.isFlyout&&k.recordUndo)if(k.type===o.BLOCK_CREATE$$module$build$src$core$events$events&&k.ids.includes(this.id)){var D=this.getProcedureCall(),q=o.getDefinition$$module$build$src$core$procedures(D,this.workspace);if(!q||q.type===this.defType_&&JSON.stringify(q.getVars())===JSON.stringify(this.arguments_)||(q=null),q)q.isEnabled()||(this.setDisabledReason(!0,De),this.setWarningText(o.Msg$$module$build$src$core$msg.PROCEDURES_CALL_DISABLED_DEF_WARNING.replace("%1",D)));else{o.setGroup$$module$build$src$core$events$utils(k.group),k=o.createElement$$module$build$src$core$utils$xml("xml"),D=o.createElement$$module$build$src$core$utils$xml("block"),D.setAttribute("type",this.defType_),q=this.getRelativeToSurfaceXY();var Q=q.y+2*o.config$$module$build$src$core$config.snapRadius;D.setAttribute("x",`${q.x+o.config$$module$build$src$core$config.snapRadius*(this.RTL?-1:1)}`),D.setAttribute("y",`${Q}`),q=this.mutationToDom(),D.appendChild(q),q=o.createElement$$module$build$src$core$utils$xml("field"),q.setAttribute("name","NAME"),Q=this.getProcedureCall();const xe=o.findLegalName$$module$build$src$core$procedures(Q,this);Q!==xe&&this.renameProcedure(Q,xe),q.appendChild(o.createTextNode$$module$build$src$core$utils$xml(Q)),D.appendChild(q),k.appendChild(D),o.domToWorkspace$$module$build$src$core$xml(k,this.workspace),o.setGroup$$module$build$src$core$events$utils(!1)}}else k.type===o.BLOCK_DELETE$$module$build$src$core$events$events?(D=this.getProcedureCall(),o.getDefinition$$module$build$src$core$procedures(D,this.workspace)||(o.setGroup$$module$build$src$core$events$utils(k.group),this.dispose(!0),o.setGroup$$module$build$src$core$events$utils(!1))):k.type===o.BLOCK_CHANGE$$module$build$src$core$events$events&&k.element==="disabled"&&(D=this.getProcedureCall(),(Q=o.getDefinition$$module$build$src$core$procedures(D,this.workspace))&&Q.id===k.blockId&&((q=o.getGroup$$module$build$src$core$events$utils())&&console.log("Saw an existing group while responding to a definition change"),o.setGroup$$module$build$src$core$events$utils(k.group),k=Q.isEnabled(),this.setDisabledReason(!k,De),this.setWarningText(k?null:o.Msg$$module$build$src$core$msg.PROCEDURES_CALL_DISABLED_DEF_WARNING.replace("%1",D)),o.setGroup$$module$build$src$core$events$utils(q)))},customContextMenu:function(k){if(this.workspace.isMovable()){var D=this.getProcedureCall(),q=this.workspace;k.push({enabled:!0,text:o.Msg$$module$build$src$core$msg.PROCEDURES_HIGHLIGHT_DEF,callback:function(){const Q=o.getDefinition$$module$build$src$core$procedures(D,q);Q&&(q.centerOnBlock(Q.id),o.setSelected$$module$build$src$core$common(Q))}})}}};he.procedures_callnoreturn=Object.assign({},ce,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(o.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null},defType_:"procedures_defnoreturn"}),he.procedures_callreturn=Object.assign({},ce,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(o.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null},defType_:"procedures_defreturn"});var Oe="UNPARENTED_IFRETURN",ie={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(o.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(o.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(o.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(o.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){const k=o.createElement$$module$build$src$core$utils$xml("mutation");return k.setAttribute("value",String(Number(this.hasReturnValue_))),k},domToMutation:function(k){this.hasReturnValue_=k.getAttribute("value")==="1",this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(o.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(k){if(!(this.workspace.isDragging&&this.workspace.isDragging()||k.type!==o.BLOCK_MOVE$$module$build$src$core$events$events&&k.type!==o.BLOCK_CREATE$$module$build$src$core$events$events)){k=!1;var D=this;do{if(this.FUNCTION_TYPES.includes(D.type)){k=!0;break}D=D.getSurroundParent()}while(D);if(k?(D.type==="procedures_defnoreturn"&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(o.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):D.type!=="procedures_defreturn"||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(o.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null)):this.setWarningText(o.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_WARNING),!this.isInFlyout)try{o.setRecordUndo$$module$build$src$core$events$utils(!1),this.setDisabledReason(!k,Oe)}finally{o.setRecordUndo$$module$build$src$core$events$utils(!0)}}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]};he.procedures_ifreturn=ie,o.defineBlocks$$module$build$src$core$common(he);var pe={blocks:he},G=o.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["","PI"],["e","E"],["","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt()","SQRT1_2"],["","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),ee={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"};o.register$$module$build$src$core$extensions("math_op_tooltip",o.buildTooltipForDropdown$$module$build$src$core$extensions("OP",ee));var $e={mutationToDom:function(){const k=o.createElement$$module$build$src$core$utils$xml("mutation"),D=this.getFieldValue("PROPERTY")==="DIVISIBLE_BY";return k.setAttribute("divisor_input",String(D)),k},domToMutation:function(k){k=k.getAttribute("divisor_input")==="true",this.updateShape_(k)},updateShape_:function(k){const D=this.getInput("DIVISOR");k?D||this.appendValueInput("DIVISOR").setCheck("Number"):D&&this.removeInput("DIVISOR")}},z=function(){this.getField("PROPERTY").setValidator(function(k){k=k==="DIVISIBLE_BY",this.getSourceBlock().updateShape_(k)})};o.registerMutator$$module$build$src$core$extensions("math_is_divisibleby_mutator",$e,z),o.register$$module$build$src$core$extensions("math_change_tooltip",o.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_MATH_CHANGE_TOOLTIP}","VAR"));var se={updateType_:function(k){k==="MODE"?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){const k=o.createElement$$module$build$src$core$utils$xml("mutation");return k.setAttribute("op",this.getFieldValue("OP")),k},domToMutation:function(k){if(k=k.getAttribute("op"),k===null)throw new TypeError("xmlElement had no op attribute");this.updateType_(k)}},ae=function(){this.getField("OP").setValidator((function(k){this.updateType_(k)}).bind(this))};o.registerMutator$$module$build$src$core$extensions("math_modes_of_list_mutator",se,ae),o.defineBlocks$$module$build$src$core$common(G);var ne={blocks:G},me=o.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),fe={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"};o.register$$module$build$src$core$extensions("controls_whileUntil_tooltip",o.buildTooltipForDropdown$$module$build$src$core$extensions("MODE",fe));var te={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"};o.register$$module$build$src$core$extensions("controls_flow_tooltip",o.buildTooltipForDropdown$$module$build$src$core$extensions("FLOW",te));var Se={customContextMenu:function(k){if(!this.isInFlyout){var D=this.getField("VAR"),q=D.getVariable().name;this.isCollapsed()||q===null||(D={type:"variables_get",fields:{VAR:D.saveState(!0)}},k.push({enabled:!0,text:o.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",q),callback:o.callbackFactory$$module$build$src$core$contextmenu(this,D)}))}}};o.registerMixin$$module$build$src$core$extensions("contextMenu_newGetVariableBlock",Se),o.register$$module$build$src$core$extensions("controls_for_tooltip",o.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),o.register$$module$build$src$core$extensions("controls_forEach_tooltip",o.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR"));var Le=new Set(["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"]),He="CONTROL_FLOW_NOT_IN_LOOP",tt={getSurroundLoop:function(){let k=this;do{if(Le.has(k.type))return k;k=k.getSurroundParent()}while(k);return null},onchange:function(k){const D=this.workspace;if(D.isDragging&&!D.isDragging()&&(k.type===o.BLOCK_MOVE$$module$build$src$core$events$events||k.type===o.BLOCK_CREATE$$module$build$src$core$events$events)&&(k=!!this.getSurroundLoop(),this.setWarningText(k?null:o.Msg$$module$build$src$core$msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout))try{o.setRecordUndo$$module$build$src$core$events$utils(!1),this.setDisabledReason(!k,He)}finally{o.setRecordUndo$$module$build$src$core$events$utils(!0)}}};o.registerMixin$$module$build$src$core$extensions("controls_flow_in_loop_check",tt),o.defineBlocks$$module$build$src$core$common(me);var ct={blocks:me,loopTypes:Le},nt=o.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["","NEQ"],["<","LT"],["","LTE"],[">","GT"],["","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]},{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),Rt={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"};o.register$$module$build$src$core$extensions("logic_op_tooltip",o.buildTooltipForDropdown$$module$build$src$core$extensions("OP",Rt));var Wt={elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const k=o.createElement$$module$build$src$core$utils$xml("mutation");return this.elseifCount_&&k.setAttribute("elseif",String(this.elseifCount_)),this.elseCount_&&k.setAttribute("else","1"),k},domToMutation:function(k){this.elseifCount_=parseInt(k.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(k.getAttribute("else"),10)||0,this.rebuildShape_()},saveExtraState:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const k=Object.create(null);return this.elseifCount_&&(k.elseIfCount=this.elseifCount_),this.elseCount_&&(k.hasElse=!0),k},loadExtraState:function(k){this.elseifCount_=k.elseIfCount||0,this.elseCount_=k.hasElse?1:0,this.updateShape_()},decompose:function(k){const D=k.newBlock("controls_if_if");D.initSvg();let q=D.nextConnection;for(let Q=1;Q<=this.elseifCount_;Q++){const xe=k.newBlock("controls_if_elseif");xe.initSvg(),q.connect(xe.previousConnection),q=xe.nextConnection}return this.elseCount_&&(k=k.newBlock("controls_if_else"),k.initSvg(),q.connect(k.previousConnection)),D},compose:function(k){k=k.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;const D=[null],q=[null];let Q=null;for(;k;){if(!k.isInsertionMarker())switch(k.type){case"controls_if_elseif":this.elseifCount_++,D.push(k.valueConnection_),q.push(k.statementConnection_);break;case"controls_if_else":this.elseCount_++,Q=k.statementConnection_;break;default:throw TypeError("Unknown block type: "+k.type)}k=k.getNextBlock()}this.updateShape_(),this.reconnectChildBlocks_(D,q,Q)},saveConnections:function(k){k=k.nextConnection.targetBlock();let D=1;for(;k;){if(!k.isInsertionMarker())switch(k.type){case"controls_if_elseif":var q=this.getInput("IF"+D);const Q=this.getInput("DO"+D);k.valueConnection_=q&&q.connection.targetConnection,k.statementConnection_=Q&&Q.connection.targetConnection,D++;break;case"controls_if_else":q=this.getInput("ELSE"),k.statementConnection_=q&&q.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+k.type)}k=k.getNextBlock()}},rebuildShape_:function(){const k=[null],D=[null];let q=null;this.getInput("ELSE")&&(q=this.getInput("ELSE").connection.targetConnection);for(let Q=1;this.getInput("IF"+Q);Q++){const xe=this.getInput("IF"+Q),kt=this.getInput("DO"+Q);k.push(xe.connection.targetConnection),D.push(kt.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_(k,D,q)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var k=1;this.getInput("IF"+k);k++)this.removeInput("IF"+k),this.removeInput("DO"+k);for(k=1;k<=this.elseifCount_;k++)this.appendValueInput("IF"+k).setCheck("Boolean").appendField(o.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+k).appendField(o.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(o.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(k,D,q){for(let Q=1;Q<=this.elseifCount_;Q++){let xe;(xe=k[Q])==null||xe.reconnect(this,"IF"+Q);let kt;(kt=D[Q])==null||kt.reconnect(this,"DO"+Q)}q?.reconnect(this,"ELSE")}};o.registerMutator$$module$build$src$core$extensions("controls_if_mutator",Wt,null,["controls_if_elseif","controls_if_else"]);var Mt=function(){this.setTooltip((function(){if(this.elseifCount_||this.elseCount_){if(!this.elseifCount_&&this.elseCount_)return o.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_2;if(this.elseifCount_&&!this.elseCount_)return o.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_3;if(this.elseifCount_&&this.elseCount_)return o.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_4}else return o.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_1;return""}).bind(this))};o.register$$module$build$src$core$extensions("controls_if_tooltip",Mt);var wn={onchange:function(k){this.prevBlocks_||(this.prevBlocks_=[null,null]);var D=this.getInputTargetBlock("A");const q=this.getInputTargetBlock("B");D&&q&&!this.workspace.connectionChecker.doTypeChecks(D.outputConnection,q.outputConnection)&&(o.setGroup$$module$build$src$core$events$utils(k.group),k=this.prevBlocks_[0],k!==D&&(D.unplug(),!k||k.isDisposed()||k.isShadow()||this.getInput("A").connection.connect(k.outputConnection)),D=this.prevBlocks_[1],D!==q&&(q.unplug(),!D||D.isDisposed()||D.isShadow()||this.getInput("B").connection.connect(D.outputConnection)),this.bumpNeighbours(),o.setGroup$$module$build$src$core$events$utils(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},At=function(){this.mixin(wn)};o.register$$module$build$src$core$extensions("logic_compare",At);var Yr={prevParentConnection_:null,onchange:function(k){const D=this.getInputTargetBlock("THEN"),q=this.getInputTargetBlock("ELSE"),Q=this.outputConnection.targetConnection;if((D||q)&&Q)for(let xe=0;2>xe;xe++){const kt=xe===1?D:q;kt&&!kt.workspace.connectionChecker.doTypeChecks(kt.outputConnection,Q)&&(o.setGroup$$module$build$src$core$events$utils(k.group),Q===this.prevParentConnection_?(this.unplug(),Q.getSourceBlock().bumpNeighbours()):(kt.unplug(),kt.bumpNeighbours()),o.setGroup$$module$build$src$core$events$utils(!1))}this.prevParentConnection_=Q}};o.registerMixin$$module$build$src$core$extensions("logic_ternary",Yr),o.defineBlocks$$module$build$src$core$common(nt);var je={blocks:nt},at=o.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),ft={init:function(){this.setHelpUrl(o.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new o.MutatorIcon$$module$build$src$core$icons$mutator_icon(["lists_create_with_item"],this)),this.setTooltip(o.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){const k=o.createElement$$module$build$src$core$utils$xml("mutation");return k.setAttribute("items",String(this.itemCount_)),k},domToMutation:function(k){if(k=k.getAttribute("items"),!k)throw new TypeError("element did not have items");this.itemCount_=parseInt(k,10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(k){this.itemCount_=k.itemCount,this.updateShape_()},decompose:function(k){const D=k.newBlock("lists_create_with_container");D.initSvg();let q=D.getInput("STACK").connection;for(let Q=0;Q<this.itemCount_;Q++){const xe=k.newBlock("lists_create_with_item");if(xe.initSvg(),!xe.previousConnection)throw Error("itemBlock has no previousConnection");q.connect(xe.previousConnection),q=xe.nextConnection}return D},compose:function(k){var D=k.getInputTargetBlock("STACK");for(k=[];D;)D.isInsertionMarker()||k.push(D.valueConnection_),D=D.getNextBlock();for(D=0;D<this.itemCount_;D++){const q=this.getInput("ADD"+D).connection.targetConnection;q&&!k.includes(q)&&q.disconnect()}for(this.itemCount_=k.length,this.updateShape_(),D=0;D<this.itemCount_;D++){let q;(q=k[D])==null||q.reconnect(this,"ADD"+D)}},saveConnections:function(k){k=k.getInputTargetBlock("STACK");let D=0;for(;k;){if(k.isInsertionMarker()){k=k.getNextBlock();continue}const q=this.getInput("ADD"+D);let Q;k.valueConnection_=(Q=q)==null?void 0:Q.connection.targetConnection,k=k.getNextBlock(),D++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(o.Msg$$module$build$src$core$msg.LISTS_CREATE_EMPTY_TITLE);for(var k=0;k<this.itemCount_;k++)if(!this.getInput("ADD"+k)){const D=this.appendValueInput("ADD"+k).setAlign(o.Align$$module$build$src$core$inputs$align.RIGHT);k===0&&D.appendField(o.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_INPUT_WITH)}for(k=this.itemCount_;this.getInput("ADD"+k);k++)this.removeInput("ADD"+k)}};at.lists_create_with=ft;var kn={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(o.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(o.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}};at.lists_create_with_container=kn;var or={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(o.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(o.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}};at.lists_create_with_item=or;var fs={init:function(){var k=[[o.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_FIRST,"FIRST"],[o.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_LAST,"LAST"]];if(this.setHelpUrl(o.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(o.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_INPUT_IN_LIST),k=o.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:k}),!k)throw Error("field_dropdown not found");this.appendValueInput("FIND").appendField(k,"END"),this.setInputsInline(!0),this.setTooltip(()=>o.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))}};at.lists_indexOf=fs;var hn={init:function(){var k=[[o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET,"GET"],[o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),k=o.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:k}),k.setValidator(function(D){D=D==="REMOVE",this.getSourceBlock().updateStatement_(D)}),this.appendValueInput("VALUE").setCheck("Array").appendField(o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(k,"MODE").appendField("","SPACE"),k=o.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS}),k.setValidator(function(D){const q=this.getValue();D=D==="FROM_START"||D==="FROM_END",D!==(q==="FROM_START"||q==="FROM_END")&&this.getSourceBlock().updateAt_(D)}),this.appendDummyInput().appendField(k,"WHERE"),this.appendDummyInput("AT"),o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0),this.setTooltip(()=>{const D=this.getFieldValue("MODE"),q=this.getFieldValue("WHERE");let Q="";switch(D+" "+q){case"GET FROM_START":case"GET FROM_END":Q=o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":Q=o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":Q=o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":Q=o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":Q=o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":Q=o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":Q=o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":Q=o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":Q=o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":Q=o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":Q=o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":Q=o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return(q==="FROM_START"||q==="FROM_END")&&(Q+="  "+(q==="FROM_START"?o.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:o.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),Q})},mutationToDom:function(){const k=o.createElement$$module$build$src$core$utils$xml("mutation");k.setAttribute("statement",String(!this.outputConnection));const D=this.getInput("AT")instanceof o.ValueInput$$module$build$src$core$inputs$value_input;return k.setAttribute("at",String(D)),k},domToMutation:function(k){const D=k.getAttribute("statement")==="true";this.updateStatement_(D),k=k.getAttribute("at")!=="false",this.updateAt_(k)},saveExtraState:function(){return this.outputConnection?null:{isStatement:!0}},loadExtraState:function(k){k.isStatement?this.updateStatement_(!0):typeof k=="string"&&this.domToMutation(o.textToDom$$module$build$src$core$utils$xml(k))},updateStatement_:function(k){k!==!this.outputConnection&&(this.unplug(!0,!0),k?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(k){this.removeInput("AT"),this.removeInput("ORDINAL",!0),k?(this.appendValueInput("AT").setCheck("Number"),o.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(o.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"),o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}};at.lists_getIndex=hn;var zt={init:function(){var k=[[o.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_SET,"SET"],[o.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(o.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(o.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_IN_LIST),k=o.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:k}),this.appendDummyInput().appendField(k,"MODE").appendField("","SPACE"),k=o.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS}),k.setValidator(function(D){const q=this.getValue();D=D==="FROM_START"||D==="FROM_END",D!==(q==="FROM_START"||q==="FROM_END")&&this.getSourceBlock().updateAt_(D)}),this.appendDummyInput().appendField(k,"WHERE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(o.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(o.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0),this.setTooltip(()=>{const D=this.getFieldValue("MODE"),q=this.getFieldValue("WHERE");let Q="";switch(D+" "+q){case"SET FROM_START":case"SET FROM_END":Q=o.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":Q=o.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":Q=o.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":Q=o.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":Q=o.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":Q=o.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":Q=o.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":Q=o.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return(q==="FROM_START"||q==="FROM_END")&&(Q+="  "+o.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),Q})},mutationToDom:function(){const k=o.createElement$$module$build$src$core$utils$xml("mutation"),D=this.getInput("AT")instanceof o.ValueInput$$module$build$src$core$inputs$value_input;return k.setAttribute("at",String(D)),k},domToMutation:function(k){k=k.getAttribute("at")!=="false",this.updateAt_(k)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(k){this.removeInput("AT"),this.removeInput("ORDINAL",!0),k?(this.appendValueInput("AT").setCheck("Number"),o.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(o.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"),this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO")}};at.lists_setIndex=zt;var Yn={init:function(){this.WHERE_OPTIONS_1=[[o.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[o.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[o.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[o.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[o.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[o.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(o.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(o.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_INPUT_IN_LIST);const k=D=>{const q=o.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+D]});return q.setValidator(function(Q){const xe=this.getValue();Q=Q==="FROM_START"||Q==="FROM_END",Q!==(xe==="FROM_START"||xe==="FROM_END")&&this.getSourceBlock().updateAt_(D,Q)}),q};this.appendDummyInput("WHERE1_INPUT").appendField(k(1),"WHERE1"),this.appendDummyInput("AT1"),this.appendDummyInput("WHERE2_INPUT").appendField(k(2),"WHERE2"),this.appendDummyInput("AT2"),o.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(o.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(o.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){const k=o.createElement$$module$build$src$core$utils$xml("mutation");var D=this.getInput("AT1")instanceof o.ValueInput$$module$build$src$core$inputs$value_input;return k.setAttribute("at1",String(D)),D=this.getInput("AT2")instanceof o.ValueInput$$module$build$src$core$inputs$value_input,k.setAttribute("at2",String(D)),k},domToMutation:function(k){const D=k.getAttribute("at1")==="true";k=k.getAttribute("at2")==="true",this.updateAt_(1,D),this.updateAt_(2,k)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(k,D){this.removeInput("AT"+k),this.removeInput("ORDINAL"+k,!0),D?(this.appendValueInput("AT"+k).setCheck("Number"),o.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+k).appendField(o.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+k),k===1&&(this.moveInputBefore("AT1","WHERE2_INPUT"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","WHERE2_INPUT")),o.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}};at.lists_getSublist=Yn,at.lists_sort={init:function(){this.jsonInit({message0:"%{BKY_LISTS_SORT_TITLE}",args0:[{type:"field_dropdown",name:"TYPE",options:[["%{BKY_LISTS_SORT_TYPE_NUMERIC}","NUMERIC"],["%{BKY_LISTS_SORT_TYPE_TEXT}","TEXT"],["%{BKY_LISTS_SORT_TYPE_IGNORECASE}","IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[["%{BKY_LISTS_SORT_ORDER_ASCENDING}","1"],["%{BKY_LISTS_SORT_ORDER_DESCENDING}","-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_SORT_TOOLTIP}",helpUrl:"%{BKY_LISTS_SORT_HELPURL}"})}},at.lists_split={init:function(){const k=o.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:[[o.Msg$$module$build$src$core$msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[o.Msg$$module$build$src$core$msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]]});if(!k)throw Error("field_dropdown not found");k.setValidator(D=>{this.updateType_(D)}),this.setHelpUrl(o.Msg$$module$build$src$core$msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(k,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(o.Msg$$module$build$src$core$msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(()=>{const D=this.getFieldValue("MODE");if(D==="SPLIT")return o.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_SPLIT;if(D==="JOIN")return o.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+D)})},updateType_:function(k){if(this.getFieldValue("MODE")!==k){const D=this.getInput("INPUT").connection;D.setShadowDom(null);const q=D.targetBlock();q&&(D.disconnect(),q.isShadow()?q.dispose(!1):this.bumpNeighbours())}k==="SPLIT"?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){const k=o.createElement$$module$build$src$core$utils$xml("mutation");return k.setAttribute("mode",this.getFieldValue("MODE")),k},domToMutation:function(k){this.updateType_(k.getAttribute("mode"))},saveExtraState:function(){return null},loadExtraState:function(){}},o.defineBlocks$$module$build$src$core$common(at);var ti={blocks:at},ue=Object.assign({},at,nt,me,G,he,O,$,a),Ge={blocks:ue,lists:ti,logic:je,loops:ct,math:ne,procedures:pe,texts:W,variables:S,variablesDynamic:g};return Ge.__namespace__=o,Ge})})(Q$)),Q$.exports}var LV=Y$.exports,rI;function MV(){return rI||(rI=1,(function(t,r){(function(s,o){t.exports=o(fx(),OV(),NV())})(LV,function(s,o,a){return s.setLocale(o),s})})(Y$)),Y$.exports}var PV=MV();const DV=kb(PV),{ASTNode:wY,BasicCursor:SY,Block:CY,BlockSvg:IY,Blocks:mt,COLLAPSED_FIELD_NAME:RY,COLLAPSED_INPUT_NAME:kY,COLLAPSE_CHARS:xY,CodeGenerator:OY,CollapsibleToolboxCategory:AY,ComponentManager:NY,Connection:LY,ConnectionChecker:MY,ConnectionDB:PY,ConnectionType:DY,ContextMenu:BY,ContextMenuItems:FY,ContextMenuRegistry:UY,Css:VY,Cursor:HY,DELETE_VARIABLE_ID:GY,DeleteArea:jY,DragTarget:WY,DropDownDiv:zY,Events:Ah,Extensions:KY,Field:XY,FieldCheckbox:YY,FieldDropdown:It,FieldImage:qY,FieldLabel:JY,FieldLabelSerializable:QY,FieldNumber:ZY,FieldTextInput:BV,FieldVariable:e8,Flyout:t8,FlyoutButton:n8,FlyoutMetricsManager:r8,Generator:FV,Gesture:s8,Grid:o8,HorizontalFlyout:i8,INPUT_VALUE:l8,Input:a8,InsertionMarkerManager:c8,InsertionMarkerPreviewer:u8,Marker:d8,MarkerManager:h8,Menu:p8,MenuItem:f8,MetricsManager:m8,Msg:g8,NEXT_STATEMENT:$8,Names:_8,OPPOSITE_TYPE:v8,OUTPUT_VALUE:y8,Options:T8,PREVIOUS_STATEMENT:b8,PROCEDURE_CATEGORY_NAME:E8,Procedures:w8,RENAME_VARIABLE_ID:S8,RenderedConnection:C8,Scrollbar:I8,ScrollbarPair:R8,ShortcutItems:k8,ShortcutRegistry:x8,TOOLBOX_AT_BOTTOM:O8,TOOLBOX_AT_LEFT:A8,TOOLBOX_AT_RIGHT:N8,TOOLBOX_AT_TOP:L8,TabNavigateCursor:M8,Theme:UV,ThemeManager:P8,Themes:VV,Toolbox:D8,ToolboxCategory:B8,ToolboxItem:F8,ToolboxSeparator:U8,Tooltip:V8,Touch:H8,Trashcan:G8,UnattachedFieldError:j8,VARIABLE_CATEGORY_NAME:W8,VARIABLE_DYNAMIC_CATEGORY_NAME:z8,VERSION:K8,VariableMap:X8,VariableModel:Y8,Variables:q8,VariablesDynamic:J8,VerticalFlyout:Q8,WidgetDiv:Z8,Workspace:e6,WorkspaceAudio:t6,WorkspaceDragger:n6,WorkspaceSvg:r6,Xml:Uu,ZoomControls:s6,blockAnimations:o6,blockRendering:i6,browserEvents:l6,bubbles:a6,bumpObjects:c6,clipboard:u6,comments:d6,common:h6,config:p6,constants:f6,defineBlocksWithJsonArray:m6,dialog:g6,dragging:$6,fieldRegistry:_6,geras:v6,getMainWorkspace:mx,getSelected:y6,hasBubble:T6,hideChaff:b6,icons:E6,inject:HV,inputs:w6,isCopyable:S6,isDeletable:C6,isDraggable:I6,isIcon:R6,isObservable:k6,isPaster:x6,isRenderedElement:O6,isSelectable:A6,isSerializable:N6,isVariableBackedParameterModel:L6,layers:M6,procedures:P6,registry:D6,renderManagement:B6,serialization:F6,setLocale:U6,setParentContainer:V6,svgResize:sI,thrasos:H6,uiPosition:G6,utils:Ny,zelos:j6}=DV,Ir=Array.from({length:14},(t,r)=>[r.toString(),r.toString()]),GV=Array.from({length:6},(t,r)=>[`A${r}`,`A${r}`]),Ly=[["Motor1","motor1"],["Motor2","motor2"],["Motor3","motor3"],["Motor4","motor4"],["Motor5","motor5"],["Motor6","motor6"],["Motor7","motor7"],["Motor8","motor8"],["Motor9","motor9"]],oI=[["Ultrasonic1","Ultra1"],["Ultrasonic2","Ultra2"],["Ultrasonic3","Ultra3"]],jV=()=>{mt.arduino_setup_loop={init:function(){this.appendDummyInput().appendField("Arduino Program"),this.appendStatementInput("SETUP").setCheck(null).appendField("setup()"),this.appendStatementInput("LOOP").setCheck(null).appendField("loop()"),this.setColour(180),this.setTooltip("Estructura principal con setup y loop")}},mt.arduino_pin_mode={init:function(){this.appendValueInput("PIN").setCheck("Number").appendField("pinMode pin"),this.appendDummyInput().appendField("modo").appendField(new It([["INPUT","INPUT"],["OUTPUT","OUTPUT"],["INPUT_PULLUP","INPUT_PULLUP"]]),"MODE"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(160)}},mt.arduino_digital_write={init:function(){this.appendValueInput("PIN").setCheck("Number").appendField("Escribir Digital PIN"),this.appendDummyInput().appendField("Valor").appendField(new It([["ALTO","HIGH"],["BAJO","LOW"]]),"VALUE"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(65)}},mt.arduino_digital_read={init:function(){this.appendValueInput("PIN").setCheck("Number").appendField("Leer Digital PIN"),this.setOutput(!0,"Number"),this.setColour(65)}},mt.arduino_analog_write={init:function(){this.appendValueInput("PIN").setCheck("Number").appendField("Escribir PWM PIN"),this.appendValueInput("VALUE").setCheck("Number").appendField("Valor (0-255)"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(65)}},mt.arduino_analog_read={init:function(){this.appendValueInput("PIN").setCheck("Number").appendField("Leer Analgico PIN"),this.setOutput(!0,"Number"),this.setColour(65)}},mt.arduino_delay={init:function(){this.appendValueInput("TIME").setCheck("Number").appendField("Esperar (ms)"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(120)}},mt.arduino_delay_microseconds={init:function(){this.appendValueInput("TIME").setCheck("Number").appendField("Esperar (us)"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(120)}},mt.arduino_millis={init:function(){this.appendDummyInput().appendField("millis()"),this.setOutput(!0,"Number"),this.setColour(60)}},mt.arduino_micros={init:function(){this.appendDummyInput().appendField("micros()"),this.setOutput(!0,"Number"),this.setColour(60)}},mt.arduino_serial_begin={init:function(){this.appendDummyInput().appendField("Serial.begin").appendField(new It([["9600","9600"],["115200","115200"]]),"BAUD"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(200)}},mt.arduino_serial_print={init:function(){this.appendValueInput("VALUE").setCheck(null).appendField("Serial.print"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(200)}},mt.arduino_serial_println={init:function(){this.appendValueInput("VALUE").setCheck(null).appendField("Serial.println"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(200)}},mt.arduino_serial_available={init:function(){this.appendDummyInput().appendField("Serial.available()"),this.setOutput(!0,"Number"),this.setColour(200)}},mt.arduino_serial_read={init:function(){this.appendDummyInput().appendField("Serial.read()"),this.setOutput(!0,"Number"),this.setColour(200)}},mt.arduino_pin_number={init:function(){this.appendDummyInput().appendField("pin").appendField(new It(Ir),"PIN"),this.setOutput(!0,"Number"),this.setColour(230)}},mt.arduino_led_builtin={init:function(){this.appendDummyInput().appendField("LED_BUILTIN"),this.setOutput(!0,"Number"),this.setColour(230)}},mt.arduino_high_low={init:function(){this.appendDummyInput().appendField(new It([["HIGH","HIGH"],["LOW","LOW"]]),"VALUE"),this.setOutput(!0,"Number"),this.setColour(230)}},mt.motor_setup={init:function(){this.appendDummyInput().appendField("Configurar Motor L298N"),this.appendDummyInput().appendField("Nombre").appendField(new It(Ly),"MOTOR").appendField("EN").appendField(new It(Ir),"EN").appendField("IN1").appendField(new It(Ir),"IN1").appendField("IN2").appendField(new It(Ir),"IN2"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour("#E67E22"),this.setTooltip("Configuracin del motor L298N. EN controla la velocidad.")}},mt.motor_run={init:function(){this.appendDummyInput().appendField("Mover Motor"),this.appendDummyInput().appendField("Nombre").appendField(new It(Ly),"MOTOR").appendField("Direccin").appendField(new It([["Adelante","FORWARD"],["Reversa","BACKWARD"]]),"DIRECTION"),this.appendValueInput("SPEED").setCheck("Number").appendField("Velocidad (0-100%)"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour("#E67E22")}},mt.motor_stop={init:function(){this.appendDummyInput().appendField("Parar Motor"),this.appendDummyInput().appendField("Nombre").appendField(new It(Ly),"MOTOR"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour("#E67E22")}},mt.ultrasonic_setup={init:function(){this.appendDummyInput().appendField("Configurar Ultrasonido").appendField(new It(oI),"ULTRA_NAME").appendField("Trig").appendField(new It(Ir),"TRIG_PIN").appendField("Echo").appendField(new It(Ir),"ECHO_PIN"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour("#8E44AD"),this.setTooltip("Configura los pines del sensor ultrasnico.")}},mt.ultrasonic_read={init:function(){this.appendDummyInput().appendField("Distancia de").appendField(new It(oI),"ULTRA_NAME").appendField("en").appendField(new It([["cm","CM"],["pulgadas","INCH"]]),"UNIT"),this.setOutput(!0,"Number"),this.setColour("#8E44AD"),this.setTooltip("Obtiene la distancia del sensor en la unidad seleccionada.")}},mt.color_sensor_read={init:function(){this.appendDummyInput().appendField("Sensor Color (TCS3200)"),this.appendDummyInput().appendField("S0").appendField(new It(Ir),"S0").appendField("S1").appendField(new It(Ir),"S1").appendField("S2").appendField(new It(Ir),"S2").appendField("S3").appendField(new It(Ir),"S3").appendField("OUT").appendField(new It(Ir),"OUT"),this.appendDummyInput().appendField("Componente").appendField(new It([["Rojo","RED"],["Verde","GREEN"],["Azul","BLUE"]]),"COLOR_COMP"),this.setOutput(!0,"Number"),this.setColour("#F1C40F")}},mt.sound_sensor_read={init:function(){this.appendDummyInput().appendField("Sensor Sonido"),this.appendDummyInput().appendField("Pin").appendField(new It(GV),"PIN"),this.setOutput(!0,"Number"),this.setColour("#8E44AD")}},mt.wifi_connect={init:function(){this.appendDummyInput().appendField("Conectar WiFi"),this.appendValueInput("SSID").setCheck("String").appendField("SSID"),this.appendValueInput("PASS").setCheck("String").appendField("Clave"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour("#27AE60")}},mt.wifi_is_connected={init:function(){this.appendDummyInput().appendField("WiFi Conectado?"),this.setOutput(!0,"Boolean"),this.setColour("#27AE60")}},mt.bluetooth_setup={init:function(){this.appendDummyInput().appendField("Configurar Bluetooth"),this.appendDummyInput().appendField("RX").appendField(new It(Ir),"RX_PIN").appendField("TX").appendField(new It(Ir),"TX_PIN").appendField("Baudios").appendField(new It([["9600","9600"],["38400","38400"]]),"BAUD"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour("#2980B9")}},mt.bluetooth_read_string={init:function(){this.appendDummyInput().appendField("BT Leer Texto"),this.setOutput(!0,"String"),this.setColour("#2980B9")}},mt.bluetooth_send_string={init:function(){this.appendValueInput("DATA").setCheck(null).appendField("BT Enviar"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour("#2980B9")}},mt.display_8x8_setup={init:function(){this.appendDummyInput().appendField("Configurar Matriz 8x8"),this.appendDummyInput().appendField("DIN").appendField(new It(Ir),"DIN").appendField("CLK").appendField(new It(Ir),"CLK").appendField("CS").appendField(new It(Ir),"CS"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour("#D35400")}},mt.display_8x8_draw={init:function(){this.appendDummyInput().appendField("Dibujar Fila Matriz"),this.appendValueInput("ROW").setCheck("Number").appendField("Fila (0-7)"),this.appendValueInput("BITMAP").setCheck("Number").appendField("Bits (0-255)"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour("#D35400")}},mt.arduino_servo_attach={init:function(){this.appendValueInput("PIN").setCheck("Number").appendField("Servo Adjuntar PIN"),this.appendDummyInput().appendField("como").appendField(new It([["servo1","servo1"],["servo2","servo2"]]),"SERVO"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(280)}},mt.arduino_servo_write={init:function(){this.appendDummyInput().appendField(new It([["servo1","servo1"],["servo2","servo2"]]),"SERVO"),this.appendValueInput("ANGLE").setCheck("Number").appendField("Mover a ngulo"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(280)}},mt.arduino_tone={init:function(){this.appendValueInput("PIN").setCheck("Number").appendField("tone pin"),this.appendValueInput("FREQ").setCheck("Number").appendField("frequency"),this.appendValueInput("DURATION").setCheck("Number").appendField("duration (ms)"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(280)}},mt.arduino_no_tone={init:function(){this.appendValueInput("PIN").setCheck("Number").appendField("noTone pin"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(280)}},mt.arduino_map={init:function(){this.appendValueInput("VALUE").setCheck("Number").appendField("map"),this.appendValueInput("FROM_LOW").setCheck("Number").appendField("de min"),this.appendValueInput("FROM_HIGH").setCheck("Number").appendField("de max"),this.appendValueInput("TO_LOW").setCheck("Number").appendField("a min"),this.appendValueInput("TO_HIGH").setCheck("Number").appendField("a max"),this.setOutput(!0,"Number"),this.setColour(230)}},mt.arduino_constrain={init:function(){this.appendValueInput("VALUE").setCheck("Number").appendField("constrain"),this.appendValueInput("LOW").setCheck("Number").appendField("min"),this.appendValueInput("HIGH").setCheck("Number").appendField("max"),this.setOutput(!0,"Number"),this.setColour(230)}},mt.arduino_text={init:function(){this.appendDummyInput().appendField('"').appendField(new BV("Hello"),"TEXT").appendField('"'),this.setOutput(!0,"String"),this.setColour(160)}}},WV=()=>{const t=new FV("Arduino");return t.ORDER_ATOMIC=0,t.ORDER_UNARY_POSTFIX=1,t.ORDER_UNARY_PREFIX=2,t.ORDER_MULTIPLICATIVE=3,t.ORDER_ADDITIVE=4,t.ORDER_SHIFT=5,t.ORDER_RELATIONAL=6,t.ORDER_EQUALITY=7,t.ORDER_BITWISE_AND=8,t.ORDER_BITWISE_XOR=9,t.ORDER_BITWISE_OR=10,t.ORDER_LOGICAL_AND=11,t.ORDER_LOGICAL_OR=12,t.ORDER_CONDITIONAL=13,t.ORDER_ASSIGNMENT=14,t.ORDER_NONE=99,t.init=function(r){this.definitions_={},this.setups_={},this.variables_={};const s=r.getVariableMap().getAllVariables();for(const o of s){const a=o.name.replace(/[^a-zA-Z0-9_]/g,"_");this.variables_[a]=`int ${a} = 0;`}},t.finish=function(r){const s=Object.values(this.definitions_).join(`
`),o=Object.values(this.variables_).join(`
`),a=Object.values(this.setups_).join(`
  `);if(r.includes("void setup()")||r.includes("void loop()")){let d=r;return a.trim()&&(d=d.replace(/void\s+setup\s*\(\s*\)\s*\{\s*/m,h=>`${h}
  ${a}
`)),`// Generado por M4rk-IDE
${s}
${o}

${d}`}},t.workspaceToCode=function(r){this.init(r);let s=[];const o=r.getTopBlocks(!0),a=["arduino_setup_loop","arduino_start","procedures_defnoreturn","procedures_defreturn"];for(const h of o)if(a.includes(h.type)){let f=this.blockToCode(h);Array.isArray(f)&&(f=f[0]),f&&s.push(f)}let d=s.join(`
`);return d=this.finish(d),d=d.replace(/^\s+\n/,""),d=d.replace(/\n\s+$/,`
`),d=d.replace(/[ \t]+\n/g,`
`),d},t.scrub_=function(r,s){const o=r.nextConnection&&r.nextConnection.targetBlock(),a=this.blockToCode(o);return s+a},t.forBlock=t.forBlock||{},t.forBlock.arduino_setup_loop=function(r){const s=t.statementToCode(r,"SETUP"),o=t.statementToCode(r,"LOOP");return`void setup() {
${s}}

void loop() {
${o}}
`},t.forBlock.arduino_pin_mode=function(r){const s=t.valueToCode(r,"PIN",t.ORDER_ATOMIC)||"0",o=r.getFieldValue("MODE");return`pinMode(${s}, ${o});
`},t.forBlock.arduino_digital_write=function(r){const s=t.valueToCode(r,"PIN",t.ORDER_ATOMIC)||"0",o=r.getFieldValue("VALUE");return t.setups_["pin_"+s]=`pinMode(${s}, OUTPUT);`,`digitalWrite(${s}, ${o});
`},t.forBlock.arduino_digital_read=function(r){const s=t.valueToCode(r,"PIN",t.ORDER_ATOMIC)||"0";return t.setups_["pin_"+s]=`pinMode(${s}, INPUT);`,[`digitalRead(${s})`,t.ORDER_ATOMIC]},t.forBlock.arduino_analog_write=function(r){const s=t.valueToCode(r,"PIN",t.ORDER_ATOMIC)||"0",o=t.valueToCode(r,"VALUE",t.ORDER_ATOMIC)||"0";return t.setups_["pin_"+s]=`pinMode(${s}, OUTPUT);`,`analogWrite(${s}, ${o});
`},t.forBlock.arduino_analog_read=function(r){return[`analogRead(${t.valueToCode(r,"PIN",t.ORDER_ATOMIC)||"A0"})`,t.ORDER_ATOMIC]},t.forBlock.arduino_delay=function(r){return`delay(${t.valueToCode(r,"TIME",t.ORDER_ATOMIC)||"1000"});
`},t.forBlock.arduino_delay_microseconds=function(r){return`delayMicroseconds(${t.valueToCode(r,"TIME",t.ORDER_ATOMIC)||"1000"});
`},t.forBlock.arduino_millis=function(){return["millis()",t.ORDER_ATOMIC]},t.forBlock.arduino_micros=function(){return["micros()",t.ORDER_ATOMIC]},t.forBlock.arduino_serial_begin=function(r){const s=r.getFieldValue("BAUD");return t.setups_.serial=`Serial.begin(${s});`,""},t.forBlock.arduino_serial_print=function(r){return`Serial.print(${t.valueToCode(r,"VALUE",t.ORDER_ATOMIC)||'""'});
`},t.forBlock.arduino_serial_println=function(r){return`Serial.println(${t.valueToCode(r,"VALUE",t.ORDER_ATOMIC)||'""'});
`},t.forBlock.arduino_serial_available=function(){return["Serial.available()",t.ORDER_ATOMIC]},t.forBlock.arduino_serial_read=function(){return["Serial.read()",t.ORDER_ATOMIC]},t.forBlock.arduino_pin_number=function(r){return[r.getFieldValue("PIN"),t.ORDER_ATOMIC]},t.forBlock.arduino_led_builtin=function(){return["LED_BUILTIN",t.ORDER_ATOMIC]},t.forBlock.arduino_high_low=function(r){return[r.getFieldValue("VALUE"),t.ORDER_ATOMIC]},t.forBlock.motor_setup=function(r){const s=t.getVariableName(r.getFieldValue("MOTOR")),o=r.getFieldValue("IN1"),a=r.getFieldValue("IN2"),d=r.getFieldValue("EN");return t.definitions_["motor_"+s]=`int ${s}_IN1=${o}; int ${s}_IN2=${a}; int ${s}_EN=${d};`,t.setups_["motor_"+s]=`pinMode(${s}_IN1, OUTPUT); pinMode(${s}_IN2, OUTPUT); pinMode(${s}_EN, OUTPUT);`,""},t.forBlock.motor_run=function(r){const s=t.getVariableName(r.getFieldValue("MOTOR")),o=r.getFieldValue("DIRECTION"),a=t.valueToCode(r,"SPEED",t.ORDER_ATOMIC)||"100";return`digitalWrite(${s}_IN1, ${o==="FORWARD"?"HIGH":"LOW"});
digitalWrite(${s}_IN2, ${o==="FORWARD"?"LOW":"HIGH"});
analogWrite(${s}_EN, map(${a}, 0, 100, 0, 255));
`},t.forBlock.motor_stop=function(r){const s=t.getVariableName(r.getFieldValue("MOTOR"));return`analogWrite(${s}_EN, 0); digitalWrite(${s}_IN1, LOW); digitalWrite(${s}_IN2, LOW);
`},t.forBlock.ultrasonic_setup=function(r){const s=r.getFieldValue("ULTRA_NAME"),o=r.getFieldValue("TRIG_PIN"),a=r.getFieldValue("ECHO_PIN");return t.definitions_["ultra_pins_"+s]=`const int ${s}_TRIG = ${o};
const int ${s}_ECHO = ${a};`,t.setups_["ultra_setup_"+s]=`pinMode(${s}_TRIG, OUTPUT); pinMode(${s}_ECHO, INPUT);`,t.definitions_.func_ultra_duration=`long readUltrasonicDuration(int trigPin, int echoPin) {
  digitalWrite(trigPin, LOW);
  delayMicroseconds(2);
  digitalWrite(trigPin, HIGH);
  delayMicroseconds(10);
  digitalWrite(trigPin, LOW);
  long duration = pulseIn(echoPin, HIGH, 30000); // 30ms timeout
  if (duration == 0) return 30000; // Si falla o no hay eco, devuelve un valor seguro alto
  return duration;
}`,""},t.forBlock.ultrasonic_read=function(r){const s=r.getFieldValue("ULTRA_NAME"),a=r.getFieldValue("UNIT")==="CM"?"0.034 / 2":"0.0133 / 2";return[`(readUltrasonicDuration(${s}_TRIG, ${s}_ECHO) * ${a})`,t.ORDER_MULTIPLICATIVE]},t.forBlock.color_sensor_read=function(r){const s=r.getFieldValue("S0"),o=r.getFieldValue("S1"),a=r.getFieldValue("S2"),d=r.getFieldValue("S3"),h=r.getFieldValue("OUT"),f=r.getFieldValue("COLOR_COMP");t.setups_["color_sensor_"+h]=`pinMode(${s}, OUTPUT); pinMode(${o}, OUTPUT); pinMode(${a}, OUTPUT); pinMode(${d}, OUTPUT); pinMode(${h}, INPUT); digitalWrite(${s}, HIGH); digitalWrite(${o}, LOW);`;let g="";f==="RED"?g=`digitalWrite(${a}, LOW); digitalWrite(${d}, LOW);`:f==="GREEN"?g=`digitalWrite(${a}, HIGH); digitalWrite(${d}, HIGH);`:f==="BLUE"&&(g=`digitalWrite(${a}, LOW); digitalWrite(${d}, HIGH);`);const $=`readColor_${f}`;return t.definitions_["func_"+$]=`int ${$}(int s2, int s3, int out) { ${g} return pulseIn(out, LOW); }`,[`${$}(${a}, ${d}, ${h})`,t.ORDER_ATOMIC]},t.forBlock.sound_sensor_read=function(r){return["analogRead("+r.getFieldValue("PIN")+")",t.ORDER_ATOMIC]},t.forBlock.wifi_connect=function(r){const s=t.valueToCode(r,"SSID",t.ORDER_ATOMIC)||'"SSID"',o=t.valueToCode(r,"PASS",t.ORDER_ATOMIC)||'"PASS"';return t.definitions_.wifi_inc="#include <WiFi.h>",t.setups_.wifi_begin=`WiFi.begin(${s}, ${o});`,""},t.forBlock.wifi_is_connected=function(r){return["(WiFi.status() == WL_CONNECTED)",t.ORDER_ATOMIC]},t.forBlock.bluetooth_setup=function(r){const s=r.getFieldValue("RX_PIN"),o=r.getFieldValue("TX_PIN"),a=r.getFieldValue("BAUD");return t.definitions_.bt_inc="#include <SoftwareSerial.h>",t.definitions_.bt_obj=`SoftwareSerial BTSerial(${s}, ${o});`,t.setups_.bt_begin=`BTSerial.begin(${a});`,""},t.forBlock.bluetooth_read_string=function(r){return["BTSerial.readString()",t.ORDER_ATOMIC]},t.forBlock.bluetooth_send_string=function(r){return`BTSerial.println(${t.valueToCode(r,"DATA",t.ORDER_ATOMIC)||'""'});
`},t.forBlock.display_8x8_setup=function(r){const s=r.getFieldValue("DIN"),o=r.getFieldValue("CLK"),a=r.getFieldValue("CS");return t.definitions_.matrix_pins=`const int DIN_PIN = ${s}; const int CLK_PIN = ${o}; const int CS_PIN = ${a};`,t.definitions_.matrix_func="void max7219_write(byte addr, byte data) { digitalWrite(CS_PIN, LOW); shiftOut(DIN_PIN, CLK_PIN, MSBFIRST, addr); shiftOut(DIN_PIN, CLK_PIN, MSBFIRST, data); digitalWrite(CS_PIN, HIGH); }",t.setups_.matrix_init="pinMode(DIN_PIN, OUTPUT); pinMode(CLK_PIN, OUTPUT); pinMode(CS_PIN, OUTPUT); max7219_write(0x09, 0x00); max7219_write(0x0B, 0x07); max7219_write(0x0C, 0x01); max7219_write(0x0F, 0x00);",""},t.forBlock.display_8x8_draw=function(r){const s=t.valueToCode(r,"ROW",t.ORDER_ATOMIC)||"0",o=t.valueToCode(r,"BITMAP",t.ORDER_ATOMIC)||"0";return`max7219_write(${s} + 1, ${o});
`},t.forBlock.arduino_servo_attach=function(r){const s=t.valueToCode(r,"PIN",t.ORDER_ATOMIC)||"9",o=r.getFieldValue("SERVO");return t.definitions_.servo_inc="#include <Servo.h>",t.definitions_["servo_"+o]=`Servo ${o};`,t.setups_["servo_att_"+o]=`${o}.attach(${s});`,""},t.forBlock.arduino_servo_write=function(r){const s=r.getFieldValue("SERVO"),o=t.valueToCode(r,"ANGLE",t.ORDER_ATOMIC)||"90";return`${s}.write(${o});
`},t.forBlock.arduino_tone=function(r){const s=t.valueToCode(r,"PIN",t.ORDER_ATOMIC)||"0",o=t.valueToCode(r,"FREQ",t.ORDER_ATOMIC)||"440",a=t.valueToCode(r,"DURATION",t.ORDER_ATOMIC)||"1000";return`tone(${s}, ${o}, ${a});
`},t.forBlock.arduino_no_tone=function(r){return`noTone(${t.valueToCode(r,"PIN",t.ORDER_ATOMIC)||"0"});
`},t.forBlock.arduino_map=function(r){const s=t.valueToCode(r,"VALUE",t.ORDER_ATOMIC)||"0",o=t.valueToCode(r,"FROM_LOW",t.ORDER_ATOMIC)||"0",a=t.valueToCode(r,"FROM_HIGH",t.ORDER_ATOMIC)||"1023",d=t.valueToCode(r,"TO_LOW",t.ORDER_ATOMIC)||"0",h=t.valueToCode(r,"TO_HIGH",t.ORDER_ATOMIC)||"255";return[`map(${s}, ${o}, ${a}, ${d}, ${h})`,t.ORDER_ATOMIC]},t.forBlock.arduino_constrain=function(r){const s=t.valueToCode(r,"VALUE",t.ORDER_ATOMIC)||"0",o=t.valueToCode(r,"LOW",t.ORDER_ATOMIC)||"0",a=t.valueToCode(r,"HIGH",t.ORDER_ATOMIC)||"255";return[`constrain(${s}, ${o}, ${a})`,t.ORDER_ATOMIC]},t.forBlock.arduino_text=function(r){return[`"${r.getFieldValue("TEXT")}"`,t.ORDER_ATOMIC]},t.forBlock.controls_if=function(r){let s=0,o="",a,d;do d=t.valueToCode(r,"IF"+s,t.ORDER_NONE)||"false",a=t.statementToCode(r,"DO"+s),o+=(s>0?" else ":"")+`if (${d}) {
${a}}`,++s;while(r.getInput("IF"+s));return r.getInput("ELSE")&&(a=t.statementToCode(r,"ELSE"),o+=` else {
${a}}`),o+`
`},t.forBlock.controls_repeat_ext=function(r){const s=t.valueToCode(r,"TIMES",t.ORDER_ATOMIC)||"10",o=t.statementToCode(r,"DO");return`for (int i = 0; i < ${s}; i++) {
${o}}
`},t.forBlock.controls_whileUntil=function(r){const s=r.getFieldValue("MODE")==="UNTIL";let o=t.valueToCode(r,"BOOL",t.ORDER_NONE)||"false";const a=t.statementToCode(r,"DO");return s&&(o=`!${o}`),`while (${o}) {
${a}}
`},t.forBlock.controls_for=function(r){const s=r.getFieldValue("VAR"),o=r.workspace.getVariableById(s),a=t.getVariableName(o.name),d=t.valueToCode(r,"FROM",t.ORDER_ASSIGNMENT)||"0",h=t.valueToCode(r,"TO",t.ORDER_ASSIGNMENT)||"10",f=t.valueToCode(r,"BY",t.ORDER_ASSIGNMENT)||"1",g=t.statementToCode(r,"DO");return`for (int ${a} = ${d}; ${a} <= ${h}; ${a} += ${f}) {
${g}}
`},t.forBlock.math_number=function(r){return[String(r.getFieldValue("NUM")),t.ORDER_ATOMIC]},t.forBlock.math_arithmetic=function(r){const o={ADD:[" + ",t.ORDER_ADDITIVE],MINUS:[" - ",t.ORDER_ADDITIVE],MULTIPLY:[" * ",t.ORDER_MULTIPLICATIVE],DIVIDE:[" / ",t.ORDER_MULTIPLICATIVE],POWER:[null,t.ORDER_NONE]}[r.getFieldValue("OP")],a=o[0],d=o[1],h=t.valueToCode(r,"A",d)||"0",f=t.valueToCode(r,"B",d)||"0";return a?[h+a+f,d]:[`pow(${h}, ${f})`,t.ORDER_UNARY_POSTFIX]},t.forBlock.logic_compare=function(r){const o={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[r.getFieldValue("OP")],a=t.valueToCode(r,"A",t.ORDER_RELATIONAL)||"0",d=t.valueToCode(r,"B",t.ORDER_RELATIONAL)||"0";return[`${a} ${o} ${d}`,t.ORDER_RELATIONAL]},t.forBlock.logic_operation=function(r){const s=r.getFieldValue("OP")=="AND"?"&&":"||",o=s=="&&"?t.ORDER_LOGICAL_AND:t.ORDER_LOGICAL_OR,a=t.valueToCode(r,"A",o)||"false",d=t.valueToCode(r,"B",o)||"false";return[a+" "+s+" "+d,o]},t.forBlock.logic_negate=function(r){return["!"+(t.valueToCode(r,"BOOL",t.ORDER_UNARY_PREFIX)||"true"),t.ORDER_UNARY_PREFIX]},t.forBlock.logic_boolean=function(r){return[r.getFieldValue("BOOL")=="TRUE"?"true":"false",t.ORDER_ATOMIC]},t.forBlock.variables_get=function(r){const s=r.getFieldValue("VAR"),o=r.workspace.getVariableById(s);return[t.getVariableName(o.name),t.ORDER_ATOMIC]},t.forBlock.variables_set=function(r){const s=r.getFieldValue("VAR"),o=r.workspace.getVariableById(s),a=t.getVariableName(o.name),d=t.valueToCode(r,"VALUE",t.ORDER_ASSIGNMENT)||"0";return`${a} = ${d};
`},t.getVariableName=function(r){return r.replace(/[^a-zA-Z0-9_]/g,"_")},t},zV={kind:"categoryToolbox",contents:[{kind:"category",name:"Estructura",colour:"120",contents:[{kind:"block",type:"arduino_setup_loop"}]},{kind:"category",name:"Hardware IO",colour:"65",contents:[{kind:"block",type:"arduino_digital_write"},{kind:"block",type:"arduino_digital_read"},{kind:"block",type:"arduino_analog_write"},{kind:"block",type:"arduino_analog_read"},{kind:"block",type:"arduino_pin_mode"},{kind:"block",type:"arduino_pin_number"},{kind:"block",type:"arduino_delay"},{kind:"block",type:"arduino_millis"}]},{kind:"category",name:"Motores",colour:"#E67E22",contents:[{kind:"block",type:"motor_setup"},{kind:"block",type:"motor_run"},{kind:"block",type:"motor_stop"},{kind:"block",type:"arduino_servo_attach"},{kind:"block",type:"arduino_servo_write"}]},{kind:"category",name:"Sensores",colour:"#8E44AD",contents:[{kind:"block",type:"ultrasonic_setup"},{kind:"block",type:"ultrasonic_read"},{kind:"block",type:"color_sensor_read"},{kind:"block",type:"sound_sensor_read"}]},{kind:"category",name:"Conectividad",colour:"#27AE60",contents:[{kind:"block",type:"wifi_connect"},{kind:"block",type:"wifi_is_connected"},{kind:"block",type:"bluetooth_setup"},{kind:"block",type:"bluetooth_send_string"},{kind:"block",type:"bluetooth_read_string"},{kind:"block",type:"arduino_serial_begin"},{kind:"block",type:"arduino_serial_print"},{kind:"block",type:"arduino_serial_println"}]},{kind:"category",name:"Display",colour:"#D35400",contents:[{kind:"block",type:"display_8x8_setup"},{kind:"block",type:"display_8x8_draw"}]},{kind:"category",name:"Lgica",colour:"210",contents:[{kind:"block",type:"controls_if"},{kind:"block",type:"controls_if",extraState:{hasElse:!0}},{kind:"block",type:"controls_if",extraState:{elseIfCount:1,hasElse:!0}},{kind:"block",type:"logic_compare"},{kind:"block",type:"logic_operation"},{kind:"block",type:"logic_boolean"},{kind:"block",type:"logic_negate"}]},{kind:"category",name:"Bucles",colour:"120",contents:[{kind:"block",type:"controls_repeat_ext"},{kind:"block",type:"controls_whileUntil"},{kind:"block",type:"controls_for"}]},{kind:"category",name:"Matemticas",colour:"230",contents:[{kind:"block",type:"math_number"},{kind:"block",type:"math_arithmetic"},{kind:"block",type:"arduino_map"},{kind:"block",type:"arduino_constrain"}]},{kind:"category",name:"Texto",colour:"160",contents:[{kind:"block",type:"arduino_text"}]},{kind:"category",name:"Variables",colour:"#A65C81",custom:"VARIABLE"}]},iI=({onCodeChange:t,initialXml:r})=>{const s=E.useRef(null),o=E.useRef(null),a=E.useRef(null),d=E.useRef(!1),{setGeneratedCode:h,addConsoleMessage:f}=Qu(),g=E.useCallback(()=>{if(!(!o.current||!a.current))try{a.current.init(o.current);const v=a.current.workspaceToCode(o.current);h(v),t?.(v)}catch(v){console.error("Code generation error:",v),f("error",`Error generando cdigo: ${v}`)}},[h,t,f]),$=E.useCallback(()=>{o.current&&s.current&&requestAnimationFrame(()=>{o.current&&sI(o.current)})},[]);return E.useEffect(()=>{if(!s.current||d.current)return;jV(),a.current=WV();const v=UV.defineTheme("arduino-kids",{name:"arduino-kids",base:VV.Classic,componentStyles:{workspaceBackgroundColour:"#f8fafc",toolboxBackgroundColour:"#f1f5f9",toolboxForegroundColour:"#475569",flyoutBackgroundColour:"#f8fafc",flyoutForegroundColour:"#334155",flyoutOpacity:.98,scrollbarColour:"#94a3b8",insertionMarkerColour:"#06b6d4",insertionMarkerOpacity:.4,scrollbarOpacity:.7,cursorColour:"#06b6d4"},fontStyle:{family:"Nunito, Quicksand, sans-serif",weight:"bold",size:12}});if(o.current=HV(s.current,{toolbox:zV,theme:v,grid:{spacing:24,length:4,colour:"#e2e8f0",snap:!0},zoom:{controls:!0,wheel:!0,startScale:1,maxScale:3,minScale:.3,scaleSpeed:1.2},trashcan:!0,move:{scrollbars:!0,drag:!0,wheel:!0},sounds:!1}),d.current=!0,!r)Uu.domToWorkspace(Ny.xml.textToDom(`
        <xml xmlns="https://developers.google.com/blockly/xml">
          <block type="arduino_setup_loop" x="50" y="50">
            <statement name="SETUP">
              <block type="arduino_pin_mode">
                <value name="PIN">
                  <block type="arduino_led_builtin"></block>
                </value>
              </block>
            </statement>
            <statement name="LOOP">
              <block type="arduino_digital_write">
                <value name="PIN">
                  <block type="arduino_led_builtin"></block>
                </value>
                <next>
                  <block type="arduino_delay">
                    <value name="TIME">
                      <block type="math_number">
                        <field name="NUM">1000</field>
                      </block>
                    </value>
                    <next>
                      <block type="arduino_digital_write">
                        <value name="PIN">
                          <block type="arduino_led_builtin"></block>
                        </value>
                        <field name="VALUE">LOW</field>
                        <next>
                          <block type="arduino_delay">
                            <value name="TIME">
                              <block type="math_number">
                                <field name="NUM">1000</field>
                              </block>
                            </value>
                          </block>
                        </next>
                      </block>
                    </next>
                  </block>
                </next>
              </block>
            </statement>
          </block>
        </xml>
      `),o.current);else try{Uu.domToWorkspace(Ny.xml.textToDom(r),o.current)}catch(I){console.error("Error loading XML:",I),f("error",`Error cargando bloques: ${I}`)}setTimeout(g,100);const y=I=>{(I.type===Ah.BLOCK_CHANGE||I.type===Ah.BLOCK_CREATE||I.type===Ah.BLOCK_DELETE||I.type===Ah.BLOCK_MOVE)&&g(),(I.type===Ah.UI||I.type===Ah.VIEWPORT_CHANGE)&&sI(o.current)};o.current.addChangeListener(y);const w=new ResizeObserver(()=>{$()});w.observe(s.current);const S=()=>$();window.addEventListener("resize",S);const O=()=>{document.hidden||setTimeout($,100)};return document.addEventListener("visibilitychange",O),()=>{w.disconnect(),window.removeEventListener("resize",S),document.removeEventListener("visibilitychange",O),o.current&&(o.current.removeChangeListener(y),o.current.dispose(),o.current=null),d.current=!1}},[g,r,$,f]),E.useEffect(()=>{if(o.current&&r&&d.current)try{o.current.clear(),Uu.domToWorkspace(Ny.xml.textToDom(r),o.current),setTimeout(()=>{g(),$()},100)}catch(v){console.error("Error updating workspace XML:",v)}},[r,g,$]),R.jsx("div",{ref:s,className:"w-full h-full blockly-container bg-card",style:{minHeight:"400px"}})};var KV=E.createContext(void 0);function gg(t){const r=E.useContext(KV);return t||r||"ltr"}function BT(t,[r,s]){return Math.min(s,Math.max(r,t))}function XV(t,r){return E.useReducer((s,o)=>r[s][o]??s,t)}var tE="ScrollArea",[gx]=To(tE),[YV,bo]=gx(tE),$x=E.forwardRef((t,r)=>{const{__scopeScrollArea:s,type:o="hover",dir:a,scrollHideDelay:d=600,...h}=t,[f,g]=E.useState(null),[$,v]=E.useState(null),[y,w]=E.useState(null),[S,O]=E.useState(null),[I,x]=E.useState(null),[A,M]=E.useState(0),[P,F]=E.useState(0),[B,V]=E.useState(!1),[j,W]=E.useState(!1),he=_t(r,Ee=>g(Ee)),we=gg(a);return R.jsx(YV,{scope:s,type:o,dir:we,scrollHideDelay:d,scrollArea:f,viewport:$,onViewportChange:v,content:y,onContentChange:w,scrollbarX:S,onScrollbarXChange:O,scrollbarXEnabled:B,onScrollbarXEnabledChange:V,scrollbarY:I,onScrollbarYChange:x,scrollbarYEnabled:j,onScrollbarYEnabledChange:W,onCornerWidthChange:M,onCornerHeightChange:F,children:R.jsx(Ze.div,{dir:we,...h,ref:he,style:{position:"relative","--radix-scroll-area-corner-width":A+"px","--radix-scroll-area-corner-height":P+"px",...t.style}})})});$x.displayName=tE;var _x="ScrollAreaViewport",vx=E.forwardRef((t,r)=>{const{__scopeScrollArea:s,children:o,nonce:a,...d}=t,h=bo(_x,s),f=E.useRef(null),g=_t(r,f,h.onViewportChange);return R.jsxs(R.Fragment,{children:[R.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),R.jsx(Ze.div,{"data-radix-scroll-area-viewport":"",...d,ref:g,style:{overflowX:h.scrollbarXEnabled?"scroll":"hidden",overflowY:h.scrollbarYEnabled?"scroll":"hidden",...t.style},children:R.jsx("div",{ref:h.onContentChange,style:{minWidth:"100%",display:"table"},children:o})})]})});vx.displayName=_x;var zi="ScrollAreaScrollbar",nE=E.forwardRef((t,r)=>{const{forceMount:s,...o}=t,a=bo(zi,t.__scopeScrollArea),{onScrollbarXEnabledChange:d,onScrollbarYEnabledChange:h}=a,f=t.orientation==="horizontal";return E.useEffect(()=>(f?d(!0):h(!0),()=>{f?d(!1):h(!1)}),[f,d,h]),a.type==="hover"?R.jsx(qV,{...o,ref:r,forceMount:s}):a.type==="scroll"?R.jsx(JV,{...o,ref:r,forceMount:s}):a.type==="auto"?R.jsx(yx,{...o,ref:r,forceMount:s}):a.type==="always"?R.jsx(rE,{...o,ref:r}):null});nE.displayName=zi;var qV=E.forwardRef((t,r)=>{const{forceMount:s,...o}=t,a=bo(zi,t.__scopeScrollArea),[d,h]=E.useState(!1);return E.useEffect(()=>{const f=a.scrollArea;let g=0;if(f){const $=()=>{window.clearTimeout(g),h(!0)},v=()=>{g=window.setTimeout(()=>h(!1),a.scrollHideDelay)};return f.addEventListener("pointerenter",$),f.addEventListener("pointerleave",v),()=>{window.clearTimeout(g),f.removeEventListener("pointerenter",$),f.removeEventListener("pointerleave",v)}}},[a.scrollArea,a.scrollHideDelay]),R.jsx(Kr,{present:s||d,children:R.jsx(yx,{"data-state":d?"visible":"hidden",...o,ref:r})})}),JV=E.forwardRef((t,r)=>{const{forceMount:s,...o}=t,a=bo(zi,t.__scopeScrollArea),d=t.orientation==="horizontal",h=q_(()=>g("SCROLL_END"),100),[f,g]=XV("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return E.useEffect(()=>{if(f==="idle"){const $=window.setTimeout(()=>g("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout($)}},[f,a.scrollHideDelay,g]),E.useEffect(()=>{const $=a.viewport,v=d?"scrollLeft":"scrollTop";if($){let y=$[v];const w=()=>{const S=$[v];y!==S&&(g("SCROLL"),h()),y=S};return $.addEventListener("scroll",w),()=>$.removeEventListener("scroll",w)}},[a.viewport,d,g,h]),R.jsx(Kr,{present:s||f!=="hidden",children:R.jsx(rE,{"data-state":f==="hidden"?"hidden":"visible",...o,ref:r,onPointerEnter:Pe(t.onPointerEnter,()=>g("POINTER_ENTER")),onPointerLeave:Pe(t.onPointerLeave,()=>g("POINTER_LEAVE"))})})}),yx=E.forwardRef((t,r)=>{const s=bo(zi,t.__scopeScrollArea),{forceMount:o,...a}=t,[d,h]=E.useState(!1),f=t.orientation==="horizontal",g=q_(()=>{if(s.viewport){const $=s.viewport.offsetWidth<s.viewport.scrollWidth,v=s.viewport.offsetHeight<s.viewport.scrollHeight;h(f?$:v)}},10);return dp(s.viewport,g),dp(s.content,g),R.jsx(Kr,{present:o||d,children:R.jsx(rE,{"data-state":d?"visible":"hidden",...a,ref:r})})}),rE=E.forwardRef((t,r)=>{const{orientation:s="vertical",...o}=t,a=bo(zi,t.__scopeScrollArea),d=E.useRef(null),h=E.useRef(0),[f,g]=E.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),$=Sx(f.viewport,f.content),v={...o,sizes:f,onSizesChange:g,hasThumb:$>0&&$<1,onThumbChange:w=>d.current=w,onThumbPointerUp:()=>h.current=0,onThumbPointerDown:w=>h.current=w};function y(w,S){return rH(w,h.current,f,S)}return s==="horizontal"?R.jsx(QV,{...v,ref:r,onThumbPositionChange:()=>{if(a.viewport&&d.current){const w=a.viewport.scrollLeft,S=lI(w,f,a.dir);d.current.style.transform=`translate3d(${S}px, 0, 0)`}},onWheelScroll:w=>{a.viewport&&(a.viewport.scrollLeft=w)},onDragScroll:w=>{a.viewport&&(a.viewport.scrollLeft=y(w,a.dir))}}):s==="vertical"?R.jsx(ZV,{...v,ref:r,onThumbPositionChange:()=>{if(a.viewport&&d.current){const w=a.viewport.scrollTop,S=lI(w,f);d.current.style.transform=`translate3d(0, ${S}px, 0)`}},onWheelScroll:w=>{a.viewport&&(a.viewport.scrollTop=w)},onDragScroll:w=>{a.viewport&&(a.viewport.scrollTop=y(w))}}):null}),QV=E.forwardRef((t,r)=>{const{sizes:s,onSizesChange:o,...a}=t,d=bo(zi,t.__scopeScrollArea),[h,f]=E.useState(),g=E.useRef(null),$=_t(r,g,d.onScrollbarXChange);return E.useEffect(()=>{g.current&&f(getComputedStyle(g.current))},[g]),R.jsx(bx,{"data-orientation":"horizontal",...a,ref:$,sizes:s,style:{bottom:0,left:d.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:d.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Y_(s)+"px",...t.style},onThumbPointerDown:v=>t.onThumbPointerDown(v.x),onDragScroll:v=>t.onDragScroll(v.x),onWheelScroll:(v,y)=>{if(d.viewport){const w=d.viewport.scrollLeft+v.deltaX;t.onWheelScroll(w),Ix(w,y)&&v.preventDefault()}},onResize:()=>{g.current&&d.viewport&&h&&o({content:d.viewport.scrollWidth,viewport:d.viewport.offsetWidth,scrollbar:{size:g.current.clientWidth,paddingStart:f_(h.paddingLeft),paddingEnd:f_(h.paddingRight)}})}})}),ZV=E.forwardRef((t,r)=>{const{sizes:s,onSizesChange:o,...a}=t,d=bo(zi,t.__scopeScrollArea),[h,f]=E.useState(),g=E.useRef(null),$=_t(r,g,d.onScrollbarYChange);return E.useEffect(()=>{g.current&&f(getComputedStyle(g.current))},[g]),R.jsx(bx,{"data-orientation":"vertical",...a,ref:$,sizes:s,style:{top:0,right:d.dir==="ltr"?0:void 0,left:d.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Y_(s)+"px",...t.style},onThumbPointerDown:v=>t.onThumbPointerDown(v.y),onDragScroll:v=>t.onDragScroll(v.y),onWheelScroll:(v,y)=>{if(d.viewport){const w=d.viewport.scrollTop+v.deltaY;t.onWheelScroll(w),Ix(w,y)&&v.preventDefault()}},onResize:()=>{g.current&&d.viewport&&h&&o({content:d.viewport.scrollHeight,viewport:d.viewport.offsetHeight,scrollbar:{size:g.current.clientHeight,paddingStart:f_(h.paddingTop),paddingEnd:f_(h.paddingBottom)}})}})}),[eH,Tx]=gx(zi),bx=E.forwardRef((t,r)=>{const{__scopeScrollArea:s,sizes:o,hasThumb:a,onThumbChange:d,onThumbPointerUp:h,onThumbPointerDown:f,onThumbPositionChange:g,onDragScroll:$,onWheelScroll:v,onResize:y,...w}=t,S=bo(zi,s),[O,I]=E.useState(null),x=_t(r,he=>I(he)),A=E.useRef(null),M=E.useRef(""),P=S.viewport,F=o.content-o.viewport,B=Rn(v),V=Rn(g),j=q_(y,10);function W(he){if(A.current){const we=he.clientX-A.current.left,Ee=he.clientY-A.current.top;$({x:we,y:Ee})}}return E.useEffect(()=>{const he=we=>{const Ee=we.target;O?.contains(Ee)&&B(we,F)};return document.addEventListener("wheel",he,{passive:!1}),()=>document.removeEventListener("wheel",he,{passive:!1})},[P,O,F,B]),E.useEffect(V,[o,V]),dp(O,j),dp(S.content,j),R.jsx(eH,{scope:s,scrollbar:O,hasThumb:a,onThumbChange:Rn(d),onThumbPointerUp:Rn(h),onThumbPositionChange:V,onThumbPointerDown:Rn(f),children:R.jsx(Ze.div,{...w,ref:x,style:{position:"absolute",...w.style},onPointerDown:Pe(t.onPointerDown,he=>{he.button===0&&(he.target.setPointerCapture(he.pointerId),A.current=O.getBoundingClientRect(),M.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",S.viewport&&(S.viewport.style.scrollBehavior="auto"),W(he))}),onPointerMove:Pe(t.onPointerMove,W),onPointerUp:Pe(t.onPointerUp,he=>{const we=he.target;we.hasPointerCapture(he.pointerId)&&we.releasePointerCapture(he.pointerId),document.body.style.webkitUserSelect=M.current,S.viewport&&(S.viewport.style.scrollBehavior=""),A.current=null})})})}),p_="ScrollAreaThumb",Ex=E.forwardRef((t,r)=>{const{forceMount:s,...o}=t,a=Tx(p_,t.__scopeScrollArea);return R.jsx(Kr,{present:s||a.hasThumb,children:R.jsx(tH,{ref:r,...o})})}),tH=E.forwardRef((t,r)=>{const{__scopeScrollArea:s,style:o,...a}=t,d=bo(p_,s),h=Tx(p_,s),{onThumbPositionChange:f}=h,g=_t(r,y=>h.onThumbChange(y)),$=E.useRef(void 0),v=q_(()=>{$.current&&($.current(),$.current=void 0)},100);return E.useEffect(()=>{const y=d.viewport;if(y){const w=()=>{if(v(),!$.current){const S=sH(y,f);$.current=S,f()}};return f(),y.addEventListener("scroll",w),()=>y.removeEventListener("scroll",w)}},[d.viewport,v,f]),R.jsx(Ze.div,{"data-state":h.hasThumb?"visible":"hidden",...a,ref:g,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...o},onPointerDownCapture:Pe(t.onPointerDownCapture,y=>{const S=y.target.getBoundingClientRect(),O=y.clientX-S.left,I=y.clientY-S.top;h.onThumbPointerDown({x:O,y:I})}),onPointerUp:Pe(t.onPointerUp,h.onThumbPointerUp)})});Ex.displayName=p_;var sE="ScrollAreaCorner",wx=E.forwardRef((t,r)=>{const s=bo(sE,t.__scopeScrollArea),o=!!(s.scrollbarX&&s.scrollbarY);return s.type!=="scroll"&&o?R.jsx(nH,{...t,ref:r}):null});wx.displayName=sE;var nH=E.forwardRef((t,r)=>{const{__scopeScrollArea:s,...o}=t,a=bo(sE,s),[d,h]=E.useState(0),[f,g]=E.useState(0),$=!!(d&&f);return dp(a.scrollbarX,()=>{const v=a.scrollbarX?.offsetHeight||0;a.onCornerHeightChange(v),g(v)}),dp(a.scrollbarY,()=>{const v=a.scrollbarY?.offsetWidth||0;a.onCornerWidthChange(v),h(v)}),$?R.jsx(Ze.div,{...o,ref:r,style:{width:d,height:f,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function f_(t){return t?parseInt(t,10):0}function Sx(t,r){const s=t/r;return isNaN(s)?0:s}function Y_(t){const r=Sx(t.viewport,t.content),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=(t.scrollbar.size-s)*r;return Math.max(o,18)}function rH(t,r,s,o="ltr"){const a=Y_(s),d=a/2,h=r||d,f=a-h,g=s.scrollbar.paddingStart+h,$=s.scrollbar.size-s.scrollbar.paddingEnd-f,v=s.content-s.viewport,y=o==="ltr"?[0,v]:[v*-1,0];return Cx([g,$],y)(t)}function lI(t,r,s="ltr"){const o=Y_(r),a=r.scrollbar.paddingStart+r.scrollbar.paddingEnd,d=r.scrollbar.size-a,h=r.content-r.viewport,f=d-o,g=s==="ltr"?[0,h]:[h*-1,0],$=BT(t,g);return Cx([0,h],[0,f])($)}function Cx(t,r){return s=>{if(t[0]===t[1]||r[0]===r[1])return r[0];const o=(r[1]-r[0])/(t[1]-t[0]);return r[0]+o*(s-t[0])}}function Ix(t,r){return t>0&&t<r}var sH=(t,r=()=>{})=>{let s={left:t.scrollLeft,top:t.scrollTop},o=0;return(function a(){const d={left:t.scrollLeft,top:t.scrollTop},h=s.left!==d.left,f=s.top!==d.top;(h||f)&&r(),s=d,o=window.requestAnimationFrame(a)})(),()=>window.cancelAnimationFrame(o)};function q_(t,r){const s=Rn(t),o=E.useRef(0);return E.useEffect(()=>()=>window.clearTimeout(o.current),[]),E.useCallback(()=>{window.clearTimeout(o.current),o.current=window.setTimeout(s,r)},[s,r])}function dp(t,r){const s=Rn(r);sr(()=>{let o=0;if(t){const a=new ResizeObserver(()=>{cancelAnimationFrame(o),o=window.requestAnimationFrame(s)});return a.observe(t),()=>{window.cancelAnimationFrame(o),a.unobserve(t)}}},[t,s])}var Rx=$x,oH=vx,iH=wx;const J_=E.forwardRef(({className:t,children:r,...s},o)=>R.jsxs(Rx,{ref:o,className:pt("relative overflow-hidden",t),...s,children:[R.jsx(oH,{className:"h-full w-full rounded-[inherit]",children:r}),R.jsx(kx,{}),R.jsx(iH,{})]}));J_.displayName=Rx.displayName;const kx=E.forwardRef(({className:t,orientation:r="vertical",...s},o)=>R.jsx(nE,{ref:o,orientation:r,className:pt("flex touch-none select-none transition-colors",r==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",r==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...s,children:R.jsx(Ex,{className:"relative flex-1 rounded-full bg-border"})}));kx.displayName=nE.displayName;const aI=()=>{const{generatedCode:t,setGeneratedCode:r}=Qu(),s=o=>{r(o.target.value)};return R.jsxs("div",{className:"flex flex-col h-full bg-gradient-to-b from-card to-muted/20 rounded-b-2xl overflow-hidden",children:[R.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border bg-muted/30",children:[R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx(K$,{className:"w-4 h-4 text-primary"}),R.jsx("span",{className:"text-sm font-bold text-foreground",children:"main.cpp"})]}),R.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 rounded-full bg-success/15 border-2 border-success/30",children:[R.jsx(AD,{className:"w-3 h-3 text-success"}),R.jsx("span",{className:"text-[10px] text-success font-bold uppercase tracking-wide",children:"Editable"})]})]}),R.jsx(J_,{className:"flex-1 w-full h-full",children:R.jsx("textarea",{value:t,onChange:s,className:"w-full h-full min-h-[500px] bg-transparent p-5 resize-none focus:outline-none font-mono text-sm leading-7 text-foreground placeholder:text-muted-foreground",spellCheck:!1,placeholder:"// Escribe tu cdigo Arduino aqu!",style:{fontFamily:'"JetBrains Mono", "Fira Code", monospace',caretColor:"hsl(var(--primary))"}})}),R.jsx("div",{className:"px-4 py-2.5 bg-muted/20 border-t border-border text-[11px] text-muted-foreground font-semibold",children:"Tip: Los bloques generan cdigo automticamente"})]})},lH=Mb("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-full text-sm font-bold ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 active:scale-95",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-clay-btn hover:brightness-110 active:shadow-clay-btn-active",destructive:"bg-destructive text-destructive-foreground shadow-clay-btn hover:brightness-110 active:shadow-clay-btn-active",outline:"border-2 border-primary/20 bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-clay-btn hover:brightness-110 active:shadow-clay-btn-active",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-11 px-6 py-2",sm:"h-9 rounded-full px-4",lg:"h-14 rounded-full px-10 text-lg",icon:"h-11 w-11"}},defaultVariants:{variant:"default",size:"default"}}),Vu=E.forwardRef(({className:t,variant:r,size:s,asChild:o=!1,...a},d)=>{const h=o?IP:"button";return R.jsx(h,{className:pt(lH({variant:r,size:s,className:t})),ref:d,...a})});Vu.displayName="Button";const oE=E.createContext({});function iE(t){const r=E.useRef(null);return r.current===null&&(r.current=t()),r.current}const Q_=E.createContext(null),lE=E.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class aH extends E.Component{getSnapshotBeforeUpdate(r){const s=this.props.childRef.current;if(s&&r.isPresent&&!this.props.isPresent){const o=this.props.sizeRef.current;o.height=s.offsetHeight||0,o.width=s.offsetWidth||0,o.top=s.offsetTop,o.left=s.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function cH({children:t,isPresent:r}){const s=E.useId(),o=E.useRef(null),a=E.useRef({width:0,height:0,top:0,left:0}),{nonce:d}=E.useContext(lE);return E.useInsertionEffect(()=>{const{width:h,height:f,top:g,left:$}=a.current;if(r||!o.current||!h||!f)return;o.current.dataset.motionPopId=s;const v=document.createElement("style");return d&&(v.nonce=d),document.head.appendChild(v),v.sheet&&v.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${f}px !important;
            top: ${g}px !important;
            left: ${$}px !important;
          }
        `),()=>{document.head.removeChild(v)}},[r]),R.jsx(aH,{isPresent:r,childRef:o,sizeRef:a,children:E.cloneElement(t,{ref:o})})}const uH=({children:t,initial:r,isPresent:s,onExitComplete:o,custom:a,presenceAffectsLayout:d,mode:h})=>{const f=iE(dH),g=E.useId(),$=E.useCallback(y=>{f.set(y,!0);for(const w of f.values())if(!w)return;o&&o()},[f,o]),v=E.useMemo(()=>({id:g,initial:r,isPresent:s,custom:a,onExitComplete:$,register:y=>(f.set(y,!1),()=>f.delete(y))}),d?[Math.random(),$]:[s,$]);return E.useMemo(()=>{f.forEach((y,w)=>f.set(w,!1))},[s]),E.useEffect(()=>{!s&&!f.size&&o&&o()},[s]),h==="popLayout"&&(t=R.jsx(cH,{isPresent:s,children:t})),R.jsx(Q_.Provider,{value:v,children:t})};function dH(){return new Map}function xx(t=!0){const r=E.useContext(Q_);if(r===null)return[!0,null];const{isPresent:s,onExitComplete:o,register:a}=r,d=E.useId();E.useEffect(()=>{t&&a(d)},[t]);const h=E.useCallback(()=>t&&o&&o(d),[d,o,t]);return!s&&o?[!1,h]:[!0]}const A$=t=>t.key||"";function cI(t){const r=[];return E.Children.forEach(t,s=>{E.isValidElement(s)&&r.push(s)}),r}const aE=typeof window<"u",Ox=aE?E.useLayoutEffect:E.useEffect,op=({children:t,custom:r,initial:s=!0,onExitComplete:o,presenceAffectsLayout:a=!0,mode:d="sync",propagate:h=!1})=>{const[f,g]=xx(h),$=E.useMemo(()=>cI(t),[t]),v=h&&!f?[]:$.map(A$),y=E.useRef(!0),w=E.useRef($),S=iE(()=>new Map),[O,I]=E.useState($),[x,A]=E.useState($);Ox(()=>{y.current=!1,w.current=$;for(let F=0;F<x.length;F++){const B=A$(x[F]);v.includes(B)?S.delete(B):S.get(B)!==!0&&S.set(B,!1)}},[x,v.length,v.join("-")]);const M=[];if($!==O){let F=[...$];for(let B=0;B<x.length;B++){const V=x[B],j=A$(V);v.includes(j)||(F.splice(B,0,V),M.push(V))}d==="wait"&&M.length&&(F=M),A(cI(F)),I($);return}const{forceRender:P}=E.useContext(oE);return R.jsx(R.Fragment,{children:x.map(F=>{const B=A$(F),V=h&&!f?!1:$===x||v.includes(B),j=()=>{if(S.has(B))S.set(B,!0);else return;let W=!0;S.forEach(he=>{he||(W=!1)}),W&&(P?.(),A(w.current),h&&g?.(),o&&o())};return R.jsx(uH,{isPresent:V,initial:!y.current||s?void 0:!1,custom:V?void 0:r,presenceAffectsLayout:a,mode:d,onExitComplete:V?void 0:j,children:F},B)})})},Us=t=>t;let Ax=Us;function cE(t){let r;return()=>(r===void 0&&(r=t()),r)}const hp=(t,r,s)=>{const o=r-t;return o===0?1:(s-t)/o},zl=t=>t*1e3,Kl=t=>t/1e3,hH={useManualTiming:!1};function pH(t){let r=new Set,s=new Set,o=!1,a=!1;const d=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function f($){d.has($)&&(g.schedule($),t()),$(h)}const g={schedule:($,v=!1,y=!1)=>{const S=y&&o?r:s;return v&&d.add($),S.has($)||S.add($),$},cancel:$=>{s.delete($),d.delete($)},process:$=>{if(h=$,o){a=!0;return}o=!0,[r,s]=[s,r],r.forEach(f),r.clear(),o=!1,a&&(a=!1,g.process($))}};return g}const N$=["read","resolveKeyframes","update","preRender","render","postRender"],fH=40;function Nx(t,r){let s=!1,o=!0;const a={delta:0,timestamp:0,isProcessing:!1},d=()=>s=!0,h=N$.reduce((A,M)=>(A[M]=pH(d),A),{}),{read:f,resolveKeyframes:g,update:$,preRender:v,render:y,postRender:w}=h,S=()=>{const A=performance.now();s=!1,a.delta=o?1e3/60:Math.max(Math.min(A-a.timestamp,fH),1),a.timestamp=A,a.isProcessing=!0,f.process(a),g.process(a),$.process(a),v.process(a),y.process(a),w.process(a),a.isProcessing=!1,s&&r&&(o=!1,t(S))},O=()=>{s=!0,o=!0,a.isProcessing||t(S)};return{schedule:N$.reduce((A,M)=>{const P=h[M];return A[M]=(F,B=!1,V=!1)=>(s||O(),P.schedule(F,B,V)),A},{}),cancel:A=>{for(let M=0;M<N$.length;M++)h[N$[M]].cancel(A)},state:a,steps:h}}const{schedule:sn,cancel:tc,state:$r,steps:My}=Nx(typeof requestAnimationFrame<"u"?requestAnimationFrame:Us,!0),Lx=E.createContext({strict:!1}),uI={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},pp={};for(const t in uI)pp[t]={isEnabled:r=>uI[t].some(s=>!!r[s])};function mH(t){for(const r in t)pp[r]={...pp[r],...t[r]}}const gH=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function m_(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||gH.has(t)}let Mx=t=>!m_(t);function $H(t){t&&(Mx=r=>r.startsWith("on")?!m_(r):t(r))}try{$H(require("@emotion/is-prop-valid").default)}catch{}function _H(t,r,s){const o={};for(const a in t)a==="values"&&typeof t.values=="object"||(Mx(a)||s===!0&&m_(a)||!r&&!m_(a)||t.draggable&&a.startsWith("onDrag"))&&(o[a]=t[a]);return o}function vH(t){if(typeof Proxy>"u")return t;const r=new Map,s=(...o)=>t(...o);return new Proxy(s,{get:(o,a)=>a==="create"?t:(r.has(a)||r.set(a,t(a)),r.get(a))})}const Z_=E.createContext({});function Qm(t){return typeof t=="string"||Array.isArray(t)}function ev(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const uE=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],dE=["initial",...uE];function tv(t){return ev(t.animate)||dE.some(r=>Qm(t[r]))}function Px(t){return!!(tv(t)||t.variants)}function yH(t,r){if(tv(t)){const{initial:s,animate:o}=t;return{initial:s===!1||Qm(s)?s:void 0,animate:Qm(o)?o:void 0}}return t.inherit!==!1?r:{}}function TH(t){const{initial:r,animate:s}=yH(t,E.useContext(Z_));return E.useMemo(()=>({initial:r,animate:s}),[dI(r),dI(s)])}function dI(t){return Array.isArray(t)?t.join(" "):t}const bH=Symbol.for("motionComponentSymbol");function Yh(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function EH(t,r,s){return E.useCallback(o=>{o&&t.onMount&&t.onMount(o),r&&(o?r.mount(o):r.unmount()),s&&(typeof s=="function"?s(o):Yh(s)&&(s.current=o))},[r])}const hE=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),wH="framerAppearId",Dx="data-"+hE(wH),{schedule:pE}=Nx(queueMicrotask,!1),Bx=E.createContext({});function SH(t,r,s,o,a){var d,h;const{visualElement:f}=E.useContext(Z_),g=E.useContext(Lx),$=E.useContext(Q_),v=E.useContext(lE).reducedMotion,y=E.useRef(null);o=o||g.renderer,!y.current&&o&&(y.current=o(t,{visualState:r,parent:f,props:s,presenceContext:$,blockInitialAnimation:$?$.initial===!1:!1,reducedMotionConfig:v}));const w=y.current,S=E.useContext(Bx);w&&!w.projection&&a&&(w.type==="html"||w.type==="svg")&&CH(y.current,s,a,S);const O=E.useRef(!1);E.useInsertionEffect(()=>{w&&O.current&&w.update(s,$)});const I=s[Dx],x=E.useRef(!!I&&!(!((d=window.MotionHandoffIsComplete)===null||d===void 0)&&d.call(window,I))&&((h=window.MotionHasOptimisedAnimation)===null||h===void 0?void 0:h.call(window,I)));return Ox(()=>{w&&(O.current=!0,window.MotionIsMounted=!0,w.updateFeatures(),pE.render(w.render),x.current&&w.animationState&&w.animationState.animateChanges())}),E.useEffect(()=>{w&&(!x.current&&w.animationState&&w.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var A;(A=window.MotionHandoffMarkAsComplete)===null||A===void 0||A.call(window,I)}),x.current=!1))}),w}function CH(t,r,s,o){const{layoutId:a,layout:d,drag:h,dragConstraints:f,layoutScroll:g,layoutRoot:$}=r;t.projection=new s(t.latestValues,r["data-framer-portal-id"]?void 0:Fx(t.parent)),t.projection.setOptions({layoutId:a,layout:d,alwaysMeasureLayout:!!h||f&&Yh(f),visualElement:t,animationType:typeof d=="string"?d:"both",initialPromotionConfig:o,layoutScroll:g,layoutRoot:$})}function Fx(t){if(t)return t.options.allowProjection!==!1?t.projection:Fx(t.parent)}function IH({preloadedFeatures:t,createVisualElement:r,useRender:s,useVisualState:o,Component:a}){var d,h;t&&mH(t);function f($,v){let y;const w={...E.useContext(lE),...$,layoutId:RH($)},{isStatic:S}=w,O=TH($),I=o($,S);if(!S&&aE){kH();const x=xH(w);y=x.MeasureLayout,O.visualElement=SH(a,I,w,r,x.ProjectionNode)}return R.jsxs(Z_.Provider,{value:O,children:[y&&O.visualElement?R.jsx(y,{visualElement:O.visualElement,...w}):null,s(a,$,EH(I,O.visualElement,v),I,S,O.visualElement)]})}f.displayName=`motion.${typeof a=="string"?a:`create(${(h=(d=a.displayName)!==null&&d!==void 0?d:a.name)!==null&&h!==void 0?h:""})`}`;const g=E.forwardRef(f);return g[bH]=a,g}function RH({layoutId:t}){const r=E.useContext(oE).id;return r&&t!==void 0?r+"-"+t:t}function kH(t,r){E.useContext(Lx).strict}function xH(t){const{drag:r,layout:s}=pp;if(!r&&!s)return{};const o={...r,...s};return{MeasureLayout:r?.isEnabled(t)||s?.isEnabled(t)?o.MeasureLayout:void 0,ProjectionNode:o.ProjectionNode}}const OH=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function fE(t){return typeof t!="string"||t.includes("-")?!1:!!(OH.indexOf(t)>-1||/[A-Z]/u.test(t))}function hI(t){const r=[{},{}];return t?.values.forEach((s,o)=>{r[0][o]=s.get(),r[1][o]=s.getVelocity()}),r}function mE(t,r,s,o){if(typeof r=="function"){const[a,d]=hI(o);r=r(s!==void 0?s:t.custom,a,d)}if(typeof r=="string"&&(r=t.variants&&t.variants[r]),typeof r=="function"){const[a,d]=hI(o);r=r(s!==void 0?s:t.custom,a,d)}return r}const FT=t=>Array.isArray(t),AH=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),NH=t=>FT(t)?t[t.length-1]||0:t,kr=t=>!!(t&&t.getVelocity);function Z$(t){const r=kr(t)?t.get():t;return AH(r)?r.toValue():r}function LH({scrapeMotionValuesFromProps:t,createRenderState:r,onUpdate:s},o,a,d){const h={latestValues:MH(o,a,d,t),renderState:r()};return s&&(h.onMount=f=>s({props:o,current:f,...h}),h.onUpdate=f=>s(f)),h}const Ux=t=>(r,s)=>{const o=E.useContext(Z_),a=E.useContext(Q_),d=()=>LH(t,r,o,a);return s?d():iE(d)};function MH(t,r,s,o){const a={},d=o(t,{});for(const w in d)a[w]=Z$(d[w]);let{initial:h,animate:f}=t;const g=tv(t),$=Px(t);r&&$&&!g&&t.inherit!==!1&&(h===void 0&&(h=r.initial),f===void 0&&(f=r.animate));let v=s?s.initial===!1:!1;v=v||h===!1;const y=v?f:h;if(y&&typeof y!="boolean"&&!ev(y)){const w=Array.isArray(y)?y:[y];for(let S=0;S<w.length;S++){const O=mE(t,w[S]);if(O){const{transitionEnd:I,transition:x,...A}=O;for(const M in A){let P=A[M];if(Array.isArray(P)){const F=v?P.length-1:0;P=P[F]}P!==null&&(a[M]=P)}for(const M in I)a[M]=I[M]}}}return a}const Tp=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Zu=new Set(Tp),Vx=t=>r=>typeof r=="string"&&r.startsWith(t),Hx=Vx("--"),PH=Vx("var(--"),gE=t=>PH(t)?DH.test(t.split("/*")[0].trim()):!1,DH=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Gx=(t,r)=>r&&typeof t=="number"?r.transform(t):t,ql=(t,r,s)=>s>r?r:s<t?t:s,bp={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Zm={...bp,transform:t=>ql(0,1,t)},L$={...bp,default:1},$g=t=>({test:r=>typeof r=="string"&&r.endsWith(t)&&r.split(" ").length===1,parse:parseFloat,transform:r=>`${r}${t}`}),Ka=$g("deg"),Hi=$g("%"),st=$g("px"),BH=$g("vh"),FH=$g("vw"),pI={...Hi,parse:t=>Hi.parse(t)/100,transform:t=>Hi.transform(t*100)},UH={borderWidth:st,borderTopWidth:st,borderRightWidth:st,borderBottomWidth:st,borderLeftWidth:st,borderRadius:st,radius:st,borderTopLeftRadius:st,borderTopRightRadius:st,borderBottomRightRadius:st,borderBottomLeftRadius:st,width:st,maxWidth:st,height:st,maxHeight:st,top:st,right:st,bottom:st,left:st,padding:st,paddingTop:st,paddingRight:st,paddingBottom:st,paddingLeft:st,margin:st,marginTop:st,marginRight:st,marginBottom:st,marginLeft:st,backgroundPositionX:st,backgroundPositionY:st},VH={rotate:Ka,rotateX:Ka,rotateY:Ka,rotateZ:Ka,scale:L$,scaleX:L$,scaleY:L$,scaleZ:L$,skew:Ka,skewX:Ka,skewY:Ka,distance:st,translateX:st,translateY:st,translateZ:st,x:st,y:st,z:st,perspective:st,transformPerspective:st,opacity:Zm,originX:pI,originY:pI,originZ:st},fI={...bp,transform:Math.round},$E={...UH,...VH,zIndex:fI,size:st,fillOpacity:Zm,strokeOpacity:Zm,numOctaves:fI},HH={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},GH=Tp.length;function jH(t,r,s){let o="",a=!0;for(let d=0;d<GH;d++){const h=Tp[d],f=t[h];if(f===void 0)continue;let g=!0;if(typeof f=="number"?g=f===(h.startsWith("scale")?1:0):g=parseFloat(f)===0,!g||s){const $=Gx(f,$E[h]);if(!g){a=!1;const v=HH[h]||h;o+=`${v}(${$}) `}s&&(r[h]=$)}}return o=o.trim(),s?o=s(r,a?"":o):a&&(o="none"),o}function _E(t,r,s){const{style:o,vars:a,transformOrigin:d}=t;let h=!1,f=!1;for(const g in r){const $=r[g];if(Zu.has(g)){h=!0;continue}else if(Hx(g)){a[g]=$;continue}else{const v=Gx($,$E[g]);g.startsWith("origin")?(f=!0,d[g]=v):o[g]=v}}if(r.transform||(h||s?o.transform=jH(r,t.transform,s):o.transform&&(o.transform="none")),f){const{originX:g="50%",originY:$="50%",originZ:v=0}=d;o.transformOrigin=`${g} ${$} ${v}`}}function mI(t,r,s){return typeof t=="string"?t:st.transform(r+s*t)}function WH(t,r,s){const o=mI(r,t.x,t.width),a=mI(s,t.y,t.height);return`${o} ${a}`}const zH={offset:"stroke-dashoffset",array:"stroke-dasharray"},KH={offset:"strokeDashoffset",array:"strokeDasharray"};function XH(t,r,s=1,o=0,a=!0){t.pathLength=1;const d=a?zH:KH;t[d.offset]=st.transform(-o);const h=st.transform(r),f=st.transform(s);t[d.array]=`${h} ${f}`}function vE(t,{attrX:r,attrY:s,attrScale:o,originX:a,originY:d,pathLength:h,pathSpacing:f=1,pathOffset:g=0,...$},v,y){if(_E(t,$,y),v){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:w,style:S,dimensions:O}=t;w.transform&&(O&&(S.transform=w.transform),delete w.transform),O&&(a!==void 0||d!==void 0||S.transform)&&(S.transformOrigin=WH(O,a!==void 0?a:.5,d!==void 0?d:.5)),r!==void 0&&(w.x=r),s!==void 0&&(w.y=s),o!==void 0&&(w.scale=o),h!==void 0&&XH(w,h,f,g,!1)}const yE=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),jx=()=>({...yE(),attrs:{}}),TE=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Wx(t,{style:r,vars:s},o,a){Object.assign(t.style,r,a&&a.getProjectionStyles(o));for(const d in s)t.style.setProperty(d,s[d])}const zx=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Kx(t,r,s,o){Wx(t,r,void 0,o);for(const a in r.attrs)t.setAttribute(zx.has(a)?a:hE(a),r.attrs[a])}const g_={};function YH(t){Object.assign(g_,t)}function Xx(t,{layout:r,layoutId:s}){return Zu.has(t)||t.startsWith("origin")||(r||s!==void 0)&&(!!g_[t]||t==="opacity")}function bE(t,r,s){var o;const{style:a}=t,d={};for(const h in a)(kr(a[h])||r.style&&kr(r.style[h])||Xx(h,t)||((o=s?.getValue(h))===null||o===void 0?void 0:o.liveStyle)!==void 0)&&(d[h]=a[h]);return d}function Yx(t,r,s){const o=bE(t,r,s);for(const a in t)if(kr(t[a])||kr(r[a])){const d=Tp.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;o[d]=t[a]}return o}function qH(t,r){try{r.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}const gI=["x","y","width","height","cx","cy","r"],JH={useVisualState:Ux({scrapeMotionValuesFromProps:Yx,createRenderState:jx,onUpdate:({props:t,prevProps:r,current:s,renderState:o,latestValues:a})=>{if(!s)return;let d=!!t.drag;if(!d){for(const f in a)if(Zu.has(f)){d=!0;break}}if(!d)return;let h=!r;if(r)for(let f=0;f<gI.length;f++){const g=gI[f];t[g]!==r[g]&&(h=!0)}h&&(sn.read(()=>qH(s,o)),sn.render(()=>{vE(o,a,TE(s.tagName),t.transformTemplate),Kx(s,o)}))}})},QH={useVisualState:Ux({scrapeMotionValuesFromProps:bE,createRenderState:yE})};function qx(t,r,s){for(const o in r)!kr(r[o])&&!Xx(o,s)&&(t[o]=r[o])}function ZH({transformTemplate:t},r){return E.useMemo(()=>{const s=yE();return _E(s,r,t),Object.assign({},s.vars,s.style)},[r])}function e2(t,r){const s=t.style||{},o={};return qx(o,s,t),Object.assign(o,ZH(t,r)),o}function t2(t,r){const s={},o=e2(t,r);return t.drag&&t.dragListener!==!1&&(s.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(s.tabIndex=0),s.style=o,s}function n2(t,r,s,o){const a=E.useMemo(()=>{const d=jx();return vE(d,r,TE(o),t.transformTemplate),{...d.attrs,style:{...d.style}}},[r]);if(t.style){const d={};qx(d,t.style,t),a.style={...d,...a.style}}return a}function r2(t=!1){return(s,o,a,{latestValues:d},h)=>{const g=(fE(s)?n2:t2)(o,d,h,s),$=_H(o,typeof s=="string",t),v=s!==E.Fragment?{...$,...g,ref:a}:{},{children:y}=o,w=E.useMemo(()=>kr(y)?y.get():y,[y]);return E.createElement(s,{...v,children:w})}}function s2(t,r){return function(o,{forwardMotionProps:a}={forwardMotionProps:!1}){const h={...fE(o)?JH:QH,preloadedFeatures:t,useRender:r2(a),createVisualElement:r,Component:o};return IH(h)}}function Jx(t,r){if(!Array.isArray(r))return!1;const s=r.length;if(s!==t.length)return!1;for(let o=0;o<s;o++)if(r[o]!==t[o])return!1;return!0}function nv(t,r,s){const o=t.getProps();return mE(o,r,s!==void 0?s:o.custom,t)}const o2=cE(()=>window.ScrollTimeline!==void 0);class i2{constructor(r){this.stop=()=>this.runAll("stop"),this.animations=r.filter(Boolean)}get finished(){return Promise.all(this.animations.map(r=>"finished"in r?r.finished:r))}getAll(r){return this.animations[0][r]}setAll(r,s){for(let o=0;o<this.animations.length;o++)this.animations[o][r]=s}attachTimeline(r,s){const o=this.animations.map(a=>{if(o2()&&a.attachTimeline)return a.attachTimeline(r);if(typeof s=="function")return s(a)});return()=>{o.forEach((a,d)=>{a&&a(),this.animations[d].stop()})}}get time(){return this.getAll("time")}set time(r){this.setAll("time",r)}get speed(){return this.getAll("speed")}set speed(r){this.setAll("speed",r)}get startTime(){return this.getAll("startTime")}get duration(){let r=0;for(let s=0;s<this.animations.length;s++)r=Math.max(r,this.animations[s].duration);return r}runAll(r){this.animations.forEach(s=>s[r]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class l2 extends i2{then(r,s){return Promise.all(this.animations).then(r).catch(s)}}function EE(t,r){return t?t[r]||t.default||t:void 0}const UT=2e4;function Qx(t){let r=0;const s=50;let o=t.next(r);for(;!o.done&&r<UT;)r+=s,o=t.next(r);return r>=UT?1/0:r}function wE(t){return typeof t=="function"}function $I(t,r){t.timeline=r,t.onfinish=null}const SE=t=>Array.isArray(t)&&typeof t[0]=="number",a2={linearEasing:void 0};function c2(t,r){const s=cE(t);return()=>{var o;return(o=a2[r])!==null&&o!==void 0?o:s()}}const $_=c2(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Zx=(t,r,s=10)=>{let o="";const a=Math.max(Math.round(r/s),2);for(let d=0;d<a;d++)o+=t(hp(0,a-1,d))+", ";return`linear(${o.substring(0,o.length-2)})`};function eO(t){return!!(typeof t=="function"&&$_()||!t||typeof t=="string"&&(t in VT||$_())||SE(t)||Array.isArray(t)&&t.every(eO))}const Nm=([t,r,s,o])=>`cubic-bezier(${t}, ${r}, ${s}, ${o})`,VT={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Nm([0,.65,.55,1]),circOut:Nm([.55,0,1,.45]),backIn:Nm([.31,.01,.66,-.59]),backOut:Nm([.33,1.53,.69,.99])};function tO(t,r){if(t)return typeof t=="function"&&$_()?Zx(t,r):SE(t)?Nm(t):Array.isArray(t)?t.map(s=>tO(s,r)||VT.easeOut):VT[t]}const zo={x:!1,y:!1};function nO(){return zo.x||zo.y}function u2(t,r,s){var o;if(t instanceof Element)return[t];if(typeof t=="string"){let a=document;const d=(o=void 0)!==null&&o!==void 0?o:a.querySelectorAll(t);return d?Array.from(d):[]}return Array.from(t)}function rO(t,r){const s=u2(t),o=new AbortController,a={passive:!0,...r,signal:o.signal};return[s,a,()=>o.abort()]}function _I(t){return r=>{r.pointerType==="touch"||nO()||t(r)}}function d2(t,r,s={}){const[o,a,d]=rO(t,s),h=_I(f=>{const{target:g}=f,$=r(f);if(typeof $!="function"||!g)return;const v=_I(y=>{$(y),g.removeEventListener("pointerleave",v)});g.addEventListener("pointerleave",v,a)});return o.forEach(f=>{f.addEventListener("pointerenter",h,a)}),d}const sO=(t,r)=>r?t===r?!0:sO(t,r.parentElement):!1,CE=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,h2=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function p2(t){return h2.has(t.tagName)||t.tabIndex!==-1}const Lm=new WeakSet;function vI(t){return r=>{r.key==="Enter"&&t(r)}}function Py(t,r){t.dispatchEvent(new PointerEvent("pointer"+r,{isPrimary:!0,bubbles:!0}))}const f2=(t,r)=>{const s=t.currentTarget;if(!s)return;const o=vI(()=>{if(Lm.has(s))return;Py(s,"down");const a=vI(()=>{Py(s,"up")}),d=()=>Py(s,"cancel");s.addEventListener("keyup",a,r),s.addEventListener("blur",d,r)});s.addEventListener("keydown",o,r),s.addEventListener("blur",()=>s.removeEventListener("keydown",o),r)};function yI(t){return CE(t)&&!nO()}function m2(t,r,s={}){const[o,a,d]=rO(t,s),h=f=>{const g=f.currentTarget;if(!yI(f)||Lm.has(g))return;Lm.add(g);const $=r(f),v=(S,O)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",w),!(!yI(S)||!Lm.has(g))&&(Lm.delete(g),typeof $=="function"&&$(S,{success:O}))},y=S=>{v(S,s.useGlobalTarget||sO(g,S.target))},w=S=>{v(S,!1)};window.addEventListener("pointerup",y,a),window.addEventListener("pointercancel",w,a)};return o.forEach(f=>{!p2(f)&&f.getAttribute("tabindex")===null&&(f.tabIndex=0),(s.useGlobalTarget?window:f).addEventListener("pointerdown",h,a),f.addEventListener("focus",$=>f2($,a),a)}),d}function g2(t){return t==="x"||t==="y"?zo[t]?null:(zo[t]=!0,()=>{zo[t]=!1}):zo.x||zo.y?null:(zo.x=zo.y=!0,()=>{zo.x=zo.y=!1})}const oO=new Set(["width","height","top","left","right","bottom",...Tp]);let e_;function $2(){e_=void 0}const Gi={now:()=>(e_===void 0&&Gi.set($r.isProcessing||hH.useManualTiming?$r.timestamp:performance.now()),e_),set:t=>{e_=t,queueMicrotask($2)}};function IE(t,r){t.indexOf(r)===-1&&t.push(r)}function RE(t,r){const s=t.indexOf(r);s>-1&&t.splice(s,1)}class kE{constructor(){this.subscriptions=[]}add(r){return IE(this.subscriptions,r),()=>RE(this.subscriptions,r)}notify(r,s,o){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](r,s,o);else for(let d=0;d<a;d++){const h=this.subscriptions[d];h&&h(r,s,o)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function iO(t,r){return r?t*(1e3/r):0}const TI=30,_2=t=>!isNaN(parseFloat(t));class v2{constructor(r,s={}){this.version="11.18.0",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(o,a=!0)=>{const d=Gi.now();this.updatedAt!==d&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(o),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(r),this.owner=s.owner}setCurrent(r){this.current=r,this.updatedAt=Gi.now(),this.canTrackVelocity===null&&r!==void 0&&(this.canTrackVelocity=_2(this.current))}setPrevFrameValue(r=this.current){this.prevFrameValue=r,this.prevUpdatedAt=this.updatedAt}onChange(r){return this.on("change",r)}on(r,s){this.events[r]||(this.events[r]=new kE);const o=this.events[r].add(s);return r==="change"?()=>{o(),sn.read(()=>{this.events.change.getSize()||this.stop()})}:o}clearListeners(){for(const r in this.events)this.events[r].clear()}attach(r,s){this.passiveEffect=r,this.stopPassiveEffect=s}set(r,s=!0){!s||!this.passiveEffect?this.updateAndNotify(r,s):this.passiveEffect(r,this.updateAndNotify)}setWithVelocity(r,s,o){this.set(s),this.prev=void 0,this.prevFrameValue=r,this.prevUpdatedAt=this.updatedAt-o}jump(r,s=!0){this.updateAndNotify(r),this.prev=r,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const r=Gi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||r-this.updatedAt>TI)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,TI);return iO(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(r){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=r(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function eg(t,r){return new v2(t,r)}function y2(t,r,s){t.hasValue(r)?t.getValue(r).set(s):t.addValue(r,eg(s))}function T2(t,r){const s=nv(t,r);let{transitionEnd:o={},transition:a={},...d}=s||{};d={...d,...o};for(const h in d){const f=NH(d[h]);y2(t,h,f)}}function b2(t){return!!(kr(t)&&t.add)}function HT(t,r){const s=t.getValue("willChange");if(b2(s))return s.add(r)}function lO(t){return t.props[Dx]}const aO=(t,r,s)=>(((1-3*s+3*r)*t+(3*s-6*r))*t+3*r)*t,E2=1e-7,w2=12;function S2(t,r,s,o,a){let d,h,f=0;do h=r+(s-r)/2,d=aO(h,o,a)-t,d>0?s=h:r=h;while(Math.abs(d)>E2&&++f<w2);return h}function _g(t,r,s,o){if(t===r&&s===o)return Us;const a=d=>S2(d,0,1,t,s);return d=>d===0||d===1?d:aO(a(d),r,o)}const cO=t=>r=>r<=.5?t(2*r)/2:(2-t(2*(1-r)))/2,uO=t=>r=>1-t(1-r),dO=_g(.33,1.53,.69,.99),xE=uO(dO),hO=cO(xE),pO=t=>(t*=2)<1?.5*xE(t):.5*(2-Math.pow(2,-10*(t-1))),OE=t=>1-Math.sin(Math.acos(t)),fO=uO(OE),mO=cO(OE),gO=t=>/^0[^.\s]+$/u.test(t);function C2(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||gO(t):!0}const Hm=t=>Math.round(t*1e5)/1e5,AE=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function I2(t){return t==null}const R2=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,NE=(t,r)=>s=>!!(typeof s=="string"&&R2.test(s)&&s.startsWith(t)||r&&!I2(s)&&Object.prototype.hasOwnProperty.call(s,r)),$O=(t,r,s)=>o=>{if(typeof o!="string")return o;const[a,d,h,f]=o.match(AE);return{[t]:parseFloat(a),[r]:parseFloat(d),[s]:parseFloat(h),alpha:f!==void 0?parseFloat(f):1}},k2=t=>ql(0,255,t),Dy={...bp,transform:t=>Math.round(k2(t))},Du={test:NE("rgb","red"),parse:$O("red","green","blue"),transform:({red:t,green:r,blue:s,alpha:o=1})=>"rgba("+Dy.transform(t)+", "+Dy.transform(r)+", "+Dy.transform(s)+", "+Hm(Zm.transform(o))+")"};function x2(t){let r="",s="",o="",a="";return t.length>5?(r=t.substring(1,3),s=t.substring(3,5),o=t.substring(5,7),a=t.substring(7,9)):(r=t.substring(1,2),s=t.substring(2,3),o=t.substring(3,4),a=t.substring(4,5),r+=r,s+=s,o+=o,a+=a),{red:parseInt(r,16),green:parseInt(s,16),blue:parseInt(o,16),alpha:a?parseInt(a,16)/255:1}}const GT={test:NE("#"),parse:x2,transform:Du.transform},qh={test:NE("hsl","hue"),parse:$O("hue","saturation","lightness"),transform:({hue:t,saturation:r,lightness:s,alpha:o=1})=>"hsla("+Math.round(t)+", "+Hi.transform(Hm(r))+", "+Hi.transform(Hm(s))+", "+Hm(Zm.transform(o))+")"},Rr={test:t=>Du.test(t)||GT.test(t)||qh.test(t),parse:t=>Du.test(t)?Du.parse(t):qh.test(t)?qh.parse(t):GT.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Du.transform(t):qh.transform(t)},O2=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function A2(t){var r,s;return isNaN(t)&&typeof t=="string"&&(((r=t.match(AE))===null||r===void 0?void 0:r.length)||0)+(((s=t.match(O2))===null||s===void 0?void 0:s.length)||0)>0}const _O="number",vO="color",N2="var",L2="var(",bI="${}",M2=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function tg(t){const r=t.toString(),s=[],o={color:[],number:[],var:[]},a=[];let d=0;const f=r.replace(M2,g=>(Rr.test(g)?(o.color.push(d),a.push(vO),s.push(Rr.parse(g))):g.startsWith(L2)?(o.var.push(d),a.push(N2),s.push(g)):(o.number.push(d),a.push(_O),s.push(parseFloat(g))),++d,bI)).split(bI);return{values:s,split:f,indexes:o,types:a}}function yO(t){return tg(t).values}function TO(t){const{split:r,types:s}=tg(t),o=r.length;return a=>{let d="";for(let h=0;h<o;h++)if(d+=r[h],a[h]!==void 0){const f=s[h];f===_O?d+=Hm(a[h]):f===vO?d+=Rr.transform(a[h]):d+=a[h]}return d}}const P2=t=>typeof t=="number"?0:t;function D2(t){const r=yO(t);return TO(t)(r.map(P2))}const nc={test:A2,parse:yO,createTransformer:TO,getAnimatableNone:D2},B2=new Set(["brightness","contrast","saturate","opacity"]);function F2(t){const[r,s]=t.slice(0,-1).split("(");if(r==="drop-shadow")return t;const[o]=s.match(AE)||[];if(!o)return t;const a=s.replace(o,"");let d=B2.has(r)?1:0;return o!==s&&(d*=100),r+"("+d+a+")"}const U2=/\b([a-z-]*)\(.*?\)/gu,jT={...nc,getAnimatableNone:t=>{const r=t.match(U2);return r?r.map(F2).join(" "):t}},V2={...$E,color:Rr,backgroundColor:Rr,outlineColor:Rr,fill:Rr,stroke:Rr,borderColor:Rr,borderTopColor:Rr,borderRightColor:Rr,borderBottomColor:Rr,borderLeftColor:Rr,filter:jT,WebkitFilter:jT},LE=t=>V2[t];function bO(t,r){let s=LE(t);return s!==jT&&(s=nc),s.getAnimatableNone?s.getAnimatableNone(r):void 0}const H2=new Set(["auto","none","0"]);function G2(t,r,s){let o=0,a;for(;o<t.length&&!a;){const d=t[o];typeof d=="string"&&!H2.has(d)&&tg(d).values.length&&(a=t[o]),o++}if(a&&s)for(const d of r)t[d]=bO(s,a)}const EI=t=>t===bp||t===st,wI=(t,r)=>parseFloat(t.split(", ")[r]),SI=(t,r)=>(s,{transform:o})=>{if(o==="none"||!o)return 0;const a=o.match(/^matrix3d\((.+)\)$/u);if(a)return wI(a[1],r);{const d=o.match(/^matrix\((.+)\)$/u);return d?wI(d[1],t):0}},j2=new Set(["x","y","z"]),W2=Tp.filter(t=>!j2.has(t));function z2(t){const r=[];return W2.forEach(s=>{const o=t.getValue(s);o!==void 0&&(r.push([s,o.get()]),o.set(s.startsWith("scale")?1:0))}),r}const fp={width:({x:t},{paddingLeft:r="0",paddingRight:s="0"})=>t.max-t.min-parseFloat(r)-parseFloat(s),height:({y:t},{paddingTop:r="0",paddingBottom:s="0"})=>t.max-t.min-parseFloat(r)-parseFloat(s),top:(t,{top:r})=>parseFloat(r),left:(t,{left:r})=>parseFloat(r),bottom:({y:t},{top:r})=>parseFloat(r)+(t.max-t.min),right:({x:t},{left:r})=>parseFloat(r)+(t.max-t.min),x:SI(4,13),y:SI(5,14)};fp.translateX=fp.x;fp.translateY=fp.y;const Hu=new Set;let WT=!1,zT=!1;function EO(){if(zT){const t=Array.from(Hu).filter(o=>o.needsMeasurement),r=new Set(t.map(o=>o.element)),s=new Map;r.forEach(o=>{const a=z2(o);a.length&&(s.set(o,a),o.render())}),t.forEach(o=>o.measureInitialState()),r.forEach(o=>{o.render();const a=s.get(o);a&&a.forEach(([d,h])=>{var f;(f=o.getValue(d))===null||f===void 0||f.set(h)})}),t.forEach(o=>o.measureEndState()),t.forEach(o=>{o.suspendedScrollY!==void 0&&window.scrollTo(0,o.suspendedScrollY)})}zT=!1,WT=!1,Hu.forEach(t=>t.complete()),Hu.clear()}function wO(){Hu.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(zT=!0)})}function K2(){wO(),EO()}class ME{constructor(r,s,o,a,d,h=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...r],this.onComplete=s,this.name=o,this.motionValue=a,this.element=d,this.isAsync=h}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Hu.add(this),WT||(WT=!0,sn.read(wO),sn.resolveKeyframes(EO))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:r,name:s,element:o,motionValue:a}=this;for(let d=0;d<r.length;d++)if(r[d]===null)if(d===0){const h=a?.get(),f=r[r.length-1];if(h!==void 0)r[0]=h;else if(o&&s){const g=o.readValue(s,f);g!=null&&(r[0]=g)}r[0]===void 0&&(r[0]=f),a&&h===void 0&&a.set(r[0])}else r[d]=r[d-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Hu.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Hu.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const SO=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),X2=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Y2(t){const r=X2.exec(t);if(!r)return[,];const[,s,o,a]=r;return[`--${s??o}`,a]}function CO(t,r,s=1){const[o,a]=Y2(t);if(!o)return;const d=window.getComputedStyle(r).getPropertyValue(o);if(d){const h=d.trim();return SO(h)?parseFloat(h):h}return gE(a)?CO(a,r,s+1):a}const IO=t=>r=>r.test(t),q2={test:t=>t==="auto",parse:t=>t},RO=[bp,st,Hi,Ka,FH,BH,q2],CI=t=>RO.find(IO(t));class kO extends ME{constructor(r,s,o,a,d){super(r,s,o,a,d,!0)}readKeyframes(){const{unresolvedKeyframes:r,element:s,name:o}=this;if(!s||!s.current)return;super.readKeyframes();for(let g=0;g<r.length;g++){let $=r[g];if(typeof $=="string"&&($=$.trim(),gE($))){const v=CO($,s.current);v!==void 0&&(r[g]=v),g===r.length-1&&(this.finalKeyframe=$)}}if(this.resolveNoneKeyframes(),!oO.has(o)||r.length!==2)return;const[a,d]=r,h=CI(a),f=CI(d);if(h!==f)if(EI(h)&&EI(f))for(let g=0;g<r.length;g++){const $=r[g];typeof $=="string"&&(r[g]=parseFloat($))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:r,name:s}=this,o=[];for(let a=0;a<r.length;a++)C2(r[a])&&o.push(a);o.length&&G2(r,o,s)}measureInitialState(){const{element:r,unresolvedKeyframes:s,name:o}=this;if(!r||!r.current)return;o==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=fp[o](r.measureViewportBox(),window.getComputedStyle(r.current)),s[0]=this.measuredOrigin;const a=s[s.length-1];a!==void 0&&r.getValue(o,a).jump(a,!1)}measureEndState(){var r;const{element:s,name:o,unresolvedKeyframes:a}=this;if(!s||!s.current)return;const d=s.getValue(o);d&&d.jump(this.measuredOrigin,!1);const h=a.length-1,f=a[h];a[h]=fp[o](s.measureViewportBox(),window.getComputedStyle(s.current)),f!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=f),!((r=this.removedTransforms)===null||r===void 0)&&r.length&&this.removedTransforms.forEach(([g,$])=>{s.getValue(g).set($)}),this.resolveNoneKeyframes()}}const II=(t,r)=>r==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(nc.test(t)||t==="0")&&!t.startsWith("url("));function J2(t){const r=t[0];if(t.length===1)return!0;for(let s=0;s<t.length;s++)if(t[s]!==r)return!0}function Q2(t,r,s,o){const a=t[0];if(a===null)return!1;if(r==="display"||r==="visibility")return!0;const d=t[t.length-1],h=II(a,r),f=II(d,r);return!h||!f?!1:J2(t)||(s==="spring"||wE(s))&&o}const Z2=t=>t!==null;function rv(t,{repeat:r,repeatType:s="loop"},o){const a=t.filter(Z2),d=r&&s!=="loop"&&r%2===1?0:a.length-1;return!d||o===void 0?a[d]:o}const eG=40;class xO{constructor({autoplay:r=!0,delay:s=0,type:o="keyframes",repeat:a=0,repeatDelay:d=0,repeatType:h="loop",...f}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Gi.now(),this.options={autoplay:r,delay:s,type:o,repeat:a,repeatDelay:d,repeatType:h,...f},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>eG?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&K2(),this._resolved}onKeyframesResolved(r,s){this.resolvedAt=Gi.now(),this.hasAttemptedResolve=!0;const{name:o,type:a,velocity:d,delay:h,onComplete:f,onUpdate:g,isGenerator:$}=this.options;if(!$&&!Q2(r,o,a,d))if(h)this.options.duration=0;else{g?.(rv(r,this.options,s)),f?.(),this.resolveFinishedPromise();return}const v=this.initPlayback(r,s);v!==!1&&(this._resolved={keyframes:r,finalKeyframe:s,...v},this.onPostResolved())}onPostResolved(){}then(r,s){return this.currentFinishedPromise.then(r,s)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(r=>{this.resolveFinishedPromise=r})}}const gn=(t,r,s)=>t+(r-t)*s;function By(t,r,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(r-t)*6*s:s<1/2?r:s<2/3?t+(r-t)*(2/3-s)*6:t}function tG({hue:t,saturation:r,lightness:s,alpha:o}){t/=360,r/=100,s/=100;let a=0,d=0,h=0;if(!r)a=d=h=s;else{const f=s<.5?s*(1+r):s+r-s*r,g=2*s-f;a=By(g,f,t+1/3),d=By(g,f,t),h=By(g,f,t-1/3)}return{red:Math.round(a*255),green:Math.round(d*255),blue:Math.round(h*255),alpha:o}}function __(t,r){return s=>s>0?r:t}const Fy=(t,r,s)=>{const o=t*t,a=s*(r*r-o)+o;return a<0?0:Math.sqrt(a)},nG=[GT,Du,qh],rG=t=>nG.find(r=>r.test(t));function RI(t){const r=rG(t);if(!r)return!1;let s=r.parse(t);return r===qh&&(s=tG(s)),s}const kI=(t,r)=>{const s=RI(t),o=RI(r);if(!s||!o)return __(t,r);const a={...s};return d=>(a.red=Fy(s.red,o.red,d),a.green=Fy(s.green,o.green,d),a.blue=Fy(s.blue,o.blue,d),a.alpha=gn(s.alpha,o.alpha,d),Du.transform(a))},sG=(t,r)=>s=>r(t(s)),vg=(...t)=>t.reduce(sG),KT=new Set(["none","hidden"]);function oG(t,r){return KT.has(t)?s=>s<=0?t:r:s=>s>=1?r:t}function iG(t,r){return s=>gn(t,r,s)}function PE(t){return typeof t=="number"?iG:typeof t=="string"?gE(t)?__:Rr.test(t)?kI:cG:Array.isArray(t)?OO:typeof t=="object"?Rr.test(t)?kI:lG:__}function OO(t,r){const s=[...t],o=s.length,a=t.map((d,h)=>PE(d)(d,r[h]));return d=>{for(let h=0;h<o;h++)s[h]=a[h](d);return s}}function lG(t,r){const s={...t,...r},o={};for(const a in s)t[a]!==void 0&&r[a]!==void 0&&(o[a]=PE(t[a])(t[a],r[a]));return a=>{for(const d in o)s[d]=o[d](a);return s}}function aG(t,r){var s;const o=[],a={color:0,var:0,number:0};for(let d=0;d<r.values.length;d++){const h=r.types[d],f=t.indexes[h][a[h]],g=(s=t.values[f])!==null&&s!==void 0?s:0;o[d]=g,a[h]++}return o}const cG=(t,r)=>{const s=nc.createTransformer(r),o=tg(t),a=tg(r);return o.indexes.var.length===a.indexes.var.length&&o.indexes.color.length===a.indexes.color.length&&o.indexes.number.length>=a.indexes.number.length?KT.has(t)&&!a.values.length||KT.has(r)&&!o.values.length?oG(t,r):vg(OO(aG(o,a),a.values),s):__(t,r)};function AO(t,r,s){return typeof t=="number"&&typeof r=="number"&&typeof s=="number"?gn(t,r,s):PE(t)(t,r)}const uG=5;function NO(t,r,s){const o=Math.max(r-uG,0);return iO(s-t(o),r-o)}const bn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Uy=.001;function dG({duration:t=bn.duration,bounce:r=bn.bounce,velocity:s=bn.velocity,mass:o=bn.mass}){let a,d,h=1-r;h=ql(bn.minDamping,bn.maxDamping,h),t=ql(bn.minDuration,bn.maxDuration,Kl(t)),h<1?(a=$=>{const v=$*h,y=v*t,w=v-s,S=XT($,h),O=Math.exp(-y);return Uy-w/S*O},d=$=>{const y=$*h*t,w=y*s+s,S=Math.pow(h,2)*Math.pow($,2)*t,O=Math.exp(-y),I=XT(Math.pow($,2),h);return(-a($)+Uy>0?-1:1)*((w-S)*O)/I}):(a=$=>{const v=Math.exp(-$*t),y=($-s)*t+1;return-Uy+v*y},d=$=>{const v=Math.exp(-$*t),y=(s-$)*(t*t);return v*y});const f=5/t,g=pG(a,d,f);if(t=zl(t),isNaN(g))return{stiffness:bn.stiffness,damping:bn.damping,duration:t};{const $=Math.pow(g,2)*o;return{stiffness:$,damping:h*2*Math.sqrt(o*$),duration:t}}}const hG=12;function pG(t,r,s){let o=s;for(let a=1;a<hG;a++)o=o-t(o)/r(o);return o}function XT(t,r){return t*Math.sqrt(1-r*r)}const fG=["duration","bounce"],mG=["stiffness","damping","mass"];function xI(t,r){return r.some(s=>t[s]!==void 0)}function gG(t){let r={velocity:bn.velocity,stiffness:bn.stiffness,damping:bn.damping,mass:bn.mass,isResolvedFromDuration:!1,...t};if(!xI(t,mG)&&xI(t,fG))if(t.visualDuration){const s=t.visualDuration,o=2*Math.PI/(s*1.2),a=o*o,d=2*ql(.05,1,1-(t.bounce||0))*Math.sqrt(a);r={...r,mass:bn.mass,stiffness:a,damping:d}}else{const s=dG(t);r={...r,...s,mass:bn.mass},r.isResolvedFromDuration=!0}return r}function LO(t=bn.visualDuration,r=bn.bounce){const s=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:r}:t;let{restSpeed:o,restDelta:a}=s;const d=s.keyframes[0],h=s.keyframes[s.keyframes.length-1],f={done:!1,value:d},{stiffness:g,damping:$,mass:v,duration:y,velocity:w,isResolvedFromDuration:S}=gG({...s,velocity:-Kl(s.velocity||0)}),O=w||0,I=$/(2*Math.sqrt(g*v)),x=h-d,A=Kl(Math.sqrt(g/v)),M=Math.abs(x)<5;o||(o=M?bn.restSpeed.granular:bn.restSpeed.default),a||(a=M?bn.restDelta.granular:bn.restDelta.default);let P;if(I<1){const B=XT(A,I);P=V=>{const j=Math.exp(-I*A*V);return h-j*((O+I*A*x)/B*Math.sin(B*V)+x*Math.cos(B*V))}}else if(I===1)P=B=>h-Math.exp(-A*B)*(x+(O+A*x)*B);else{const B=A*Math.sqrt(I*I-1);P=V=>{const j=Math.exp(-I*A*V),W=Math.min(B*V,300);return h-j*((O+I*A*x)*Math.sinh(W)+B*x*Math.cosh(W))/B}}const F={calculatedDuration:S&&y||null,next:B=>{const V=P(B);if(S)f.done=B>=y;else{let j=0;I<1&&(j=B===0?zl(O):NO(P,B,V));const W=Math.abs(j)<=o,he=Math.abs(h-V)<=a;f.done=W&&he}return f.value=f.done?h:V,f},toString:()=>{const B=Math.min(Qx(F),UT),V=Zx(j=>F.next(B*j).value,B,30);return B+"ms "+V}};return F}function OI({keyframes:t,velocity:r=0,power:s=.8,timeConstant:o=325,bounceDamping:a=10,bounceStiffness:d=500,modifyTarget:h,min:f,max:g,restDelta:$=.5,restSpeed:v}){const y=t[0],w={done:!1,value:y},S=W=>f!==void 0&&W<f||g!==void 0&&W>g,O=W=>f===void 0?g:g===void 0||Math.abs(f-W)<Math.abs(g-W)?f:g;let I=s*r;const x=y+I,A=h===void 0?x:h(x);A!==x&&(I=A-y);const M=W=>-I*Math.exp(-W/o),P=W=>A+M(W),F=W=>{const he=M(W),we=P(W);w.done=Math.abs(he)<=$,w.value=w.done?A:we};let B,V;const j=W=>{S(w.value)&&(B=W,V=LO({keyframes:[w.value,O(w.value)],velocity:NO(P,W,w.value),damping:a,stiffness:d,restDelta:$,restSpeed:v}))};return j(0),{calculatedDuration:null,next:W=>{let he=!1;return!V&&B===void 0&&(he=!0,F(W),j(W)),B!==void 0&&W>=B?V.next(W-B):(!he&&F(W),w)}}}const $G=_g(.42,0,1,1),_G=_g(0,0,.58,1),MO=_g(.42,0,.58,1),vG=t=>Array.isArray(t)&&typeof t[0]!="number",yG={linear:Us,easeIn:$G,easeInOut:MO,easeOut:_G,circIn:OE,circInOut:mO,circOut:fO,backIn:xE,backInOut:hO,backOut:dO,anticipate:pO},AI=t=>{if(SE(t)){Ax(t.length===4);const[r,s,o,a]=t;return _g(r,s,o,a)}else if(typeof t=="string")return yG[t];return t};function TG(t,r,s){const o=[],a=s||AO,d=t.length-1;for(let h=0;h<d;h++){let f=a(t[h],t[h+1]);if(r){const g=Array.isArray(r)?r[h]||Us:r;f=vg(g,f)}o.push(f)}return o}function bG(t,r,{clamp:s=!0,ease:o,mixer:a}={}){const d=t.length;if(Ax(d===r.length),d===1)return()=>r[0];if(d===2&&r[0]===r[1])return()=>r[1];const h=t[0]===t[1];t[0]>t[d-1]&&(t=[...t].reverse(),r=[...r].reverse());const f=TG(r,o,a),g=f.length,$=v=>{if(h&&v<t[0])return r[0];let y=0;if(g>1)for(;y<t.length-2&&!(v<t[y+1]);y++);const w=hp(t[y],t[y+1],v);return f[y](w)};return s?v=>$(ql(t[0],t[d-1],v)):$}function EG(t,r){const s=t[t.length-1];for(let o=1;o<=r;o++){const a=hp(0,r,o);t.push(gn(s,1,a))}}function wG(t){const r=[0];return EG(r,t.length-1),r}function SG(t,r){return t.map(s=>s*r)}function CG(t,r){return t.map(()=>r||MO).splice(0,t.length-1)}function v_({duration:t=300,keyframes:r,times:s,ease:o="easeInOut"}){const a=vG(o)?o.map(AI):AI(o),d={done:!1,value:r[0]},h=SG(s&&s.length===r.length?s:wG(r),t),f=bG(h,r,{ease:Array.isArray(a)?a:CG(r,a)});return{calculatedDuration:t,next:g=>(d.value=f(g),d.done=g>=t,d)}}const IG=t=>{const r=({timestamp:s})=>t(s);return{start:()=>sn.update(r,!0),stop:()=>tc(r),now:()=>$r.isProcessing?$r.timestamp:Gi.now()}},RG={decay:OI,inertia:OI,tween:v_,keyframes:v_,spring:LO},kG=t=>t/100;class DE extends xO{constructor(r){super(r),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:g}=this.options;g&&g()};const{name:s,motionValue:o,element:a,keyframes:d}=this.options,h=a?.KeyframeResolver||ME,f=(g,$)=>this.onKeyframesResolved(g,$);this.resolver=new h(d,f,s,o,a),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(r){const{type:s="keyframes",repeat:o=0,repeatDelay:a=0,repeatType:d,velocity:h=0}=this.options,f=wE(s)?s:RG[s]||v_;let g,$;f!==v_&&typeof r[0]!="number"&&(g=vg(kG,AO(r[0],r[1])),r=[0,100]);const v=f({...this.options,keyframes:r});d==="mirror"&&($=f({...this.options,keyframes:[...r].reverse(),velocity:-h})),v.calculatedDuration===null&&(v.calculatedDuration=Qx(v));const{calculatedDuration:y}=v,w=y+a,S=w*(o+1)-a;return{generator:v,mirroredGenerator:$,mapPercentToKeyframes:g,calculatedDuration:y,resolvedDuration:w,totalDuration:S}}onPostResolved(){const{autoplay:r=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!r?this.pause():this.state=this.pendingPlayState}tick(r,s=!1){const{resolved:o}=this;if(!o){const{keyframes:W}=this.options;return{done:!0,value:W[W.length-1]}}const{finalKeyframe:a,generator:d,mirroredGenerator:h,mapPercentToKeyframes:f,keyframes:g,calculatedDuration:$,totalDuration:v,resolvedDuration:y}=o;if(this.startTime===null)return d.next(0);const{delay:w,repeat:S,repeatType:O,repeatDelay:I,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,r):this.speed<0&&(this.startTime=Math.min(r-v/this.speed,this.startTime)),s?this.currentTime=r:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(r-this.startTime)*this.speed;const A=this.currentTime-w*(this.speed>=0?1:-1),M=this.speed>=0?A<0:A>v;this.currentTime=Math.max(A,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=v);let P=this.currentTime,F=d;if(S){const W=Math.min(this.currentTime,v)/y;let he=Math.floor(W),we=W%1;!we&&W>=1&&(we=1),we===1&&he--,he=Math.min(he,S+1),he%2&&(O==="reverse"?(we=1-we,I&&(we-=I/y)):O==="mirror"&&(F=h)),P=ql(0,1,we)*y}const B=M?{done:!1,value:g[0]}:F.next(P);f&&(B.value=f(B.value));let{done:V}=B;!M&&$!==null&&(V=this.speed>=0?this.currentTime>=v:this.currentTime<=0);const j=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&V);return j&&a!==void 0&&(B.value=rv(g,this.options,a)),x&&x(B.value),j&&this.finish(),B}get duration(){const{resolved:r}=this;return r?Kl(r.calculatedDuration):0}get time(){return Kl(this.currentTime)}set time(r){r=zl(r),this.currentTime=r,this.holdTime!==null||this.speed===0?this.holdTime=r:this.driver&&(this.startTime=this.driver.now()-r/this.speed)}get speed(){return this.playbackSpeed}set speed(r){const s=this.playbackSpeed!==r;this.playbackSpeed=r,s&&(this.time=Kl(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:r=IG,onPlay:s,startTime:o}=this.options;this.driver||(this.driver=r(d=>this.tick(d))),s&&s();const a=this.driver.now();this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=a):this.startTime=o??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var r;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(r=this.currentTime)!==null&&r!==void 0?r:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:r}=this.options;r&&r()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(r){return this.startTime=0,this.tick(r,!0)}}const xG=new Set(["opacity","clipPath","filter","transform"]);function OG(t,r,s,{delay:o=0,duration:a=300,repeat:d=0,repeatType:h="loop",ease:f="easeInOut",times:g}={}){const $={[r]:s};g&&($.offset=g);const v=tO(f,a);return Array.isArray(v)&&($.easing=v),t.animate($,{delay:o,duration:a,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:d+1,direction:h==="reverse"?"alternate":"normal"})}const AG=cE(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),y_=10,NG=2e4;function LG(t){return wE(t.type)||t.type==="spring"||!eO(t.ease)}function MG(t,r){const s=new DE({...r,keyframes:t,repeat:0,delay:0,isGenerator:!0});let o={done:!1,value:t[0]};const a=[];let d=0;for(;!o.done&&d<NG;)o=s.sample(d),a.push(o.value),d+=y_;return{times:void 0,keyframes:a,duration:d-y_,ease:"linear"}}const PO={anticipate:pO,backInOut:hO,circInOut:mO};function PG(t){return t in PO}class NI extends xO{constructor(r){super(r);const{name:s,motionValue:o,element:a,keyframes:d}=this.options;this.resolver=new kO(d,(h,f)=>this.onKeyframesResolved(h,f),s,o,a),this.resolver.scheduleResolve()}initPlayback(r,s){var o;let{duration:a=300,times:d,ease:h,type:f,motionValue:g,name:$,startTime:v}=this.options;if(!(!((o=g.owner)===null||o===void 0)&&o.current))return!1;if(typeof h=="string"&&$_()&&PG(h)&&(h=PO[h]),LG(this.options)){const{onComplete:w,onUpdate:S,motionValue:O,element:I,...x}=this.options,A=MG(r,x);r=A.keyframes,r.length===1&&(r[1]=r[0]),a=A.duration,d=A.times,h=A.ease,f="keyframes"}const y=OG(g.owner.current,$,r,{...this.options,duration:a,times:d,ease:h});return y.startTime=v??this.calcStartTime(),this.pendingTimeline?($I(y,this.pendingTimeline),this.pendingTimeline=void 0):y.onfinish=()=>{const{onComplete:w}=this.options;g.set(rv(r,this.options,s)),w&&w(),this.cancel(),this.resolveFinishedPromise()},{animation:y,duration:a,times:d,type:f,ease:h,keyframes:r}}get duration(){const{resolved:r}=this;if(!r)return 0;const{duration:s}=r;return Kl(s)}get time(){const{resolved:r}=this;if(!r)return 0;const{animation:s}=r;return Kl(s.currentTime||0)}set time(r){const{resolved:s}=this;if(!s)return;const{animation:o}=s;o.currentTime=zl(r)}get speed(){const{resolved:r}=this;if(!r)return 1;const{animation:s}=r;return s.playbackRate}set speed(r){const{resolved:s}=this;if(!s)return;const{animation:o}=s;o.playbackRate=r}get state(){const{resolved:r}=this;if(!r)return"idle";const{animation:s}=r;return s.playState}get startTime(){const{resolved:r}=this;if(!r)return null;const{animation:s}=r;return s.startTime}attachTimeline(r){if(!this._resolved)this.pendingTimeline=r;else{const{resolved:s}=this;if(!s)return Us;const{animation:o}=s;$I(o,r)}return Us}play(){if(this.isStopped)return;const{resolved:r}=this;if(!r)return;const{animation:s}=r;s.playState==="finished"&&this.updateFinishedPromise(),s.play()}pause(){const{resolved:r}=this;if(!r)return;const{animation:s}=r;s.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:r}=this;if(!r)return;const{animation:s,keyframes:o,duration:a,type:d,ease:h,times:f}=r;if(s.playState==="idle"||s.playState==="finished")return;if(this.time){const{motionValue:$,onUpdate:v,onComplete:y,element:w,...S}=this.options,O=new DE({...S,keyframes:o,duration:a,type:d,ease:h,times:f,isGenerator:!0}),I=zl(this.time);$.setWithVelocity(O.sample(I-y_).value,O.sample(I).value,y_)}const{onStop:g}=this.options;g&&g(),this.cancel()}complete(){const{resolved:r}=this;r&&r.animation.finish()}cancel(){const{resolved:r}=this;r&&r.animation.cancel()}static supports(r){const{motionValue:s,name:o,repeatDelay:a,repeatType:d,damping:h,type:f}=r;return AG()&&o&&xG.has(o)&&s&&s.owner&&s.owner.current instanceof HTMLElement&&!s.owner.getProps().onUpdate&&!a&&d!=="mirror"&&h!==0&&f!=="inertia"}}const DG={type:"spring",stiffness:500,damping:25,restSpeed:10},BG=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),FG={type:"keyframes",duration:.8},UG={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},VG=(t,{keyframes:r})=>r.length>2?FG:Zu.has(t)?t.startsWith("scale")?BG(r[1]):DG:UG;function HG({when:t,delay:r,delayChildren:s,staggerChildren:o,staggerDirection:a,repeat:d,repeatType:h,repeatDelay:f,from:g,elapsed:$,...v}){return!!Object.keys(v).length}const BE=(t,r,s,o={},a,d)=>h=>{const f=EE(o,t)||{},g=f.delay||o.delay||0;let{elapsed:$=0}=o;$=$-zl(g);let v={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:r.getVelocity(),...f,delay:-$,onUpdate:w=>{r.set(w),f.onUpdate&&f.onUpdate(w)},onComplete:()=>{h(),f.onComplete&&f.onComplete()},name:t,motionValue:r,element:d?void 0:a};HG(f)||(v={...v,...VG(t,v)}),v.duration&&(v.duration=zl(v.duration)),v.repeatDelay&&(v.repeatDelay=zl(v.repeatDelay)),v.from!==void 0&&(v.keyframes[0]=v.from);let y=!1;if((v.type===!1||v.duration===0&&!v.repeatDelay)&&(v.duration=0,v.delay===0&&(y=!0)),y&&!d&&r.get()!==void 0){const w=rv(v.keyframes,f);if(w!==void 0)return sn.update(()=>{v.onUpdate(w),v.onComplete()}),new l2([])}return!d&&NI.supports(v)?new NI(v):new DE(v)};function GG({protectedKeys:t,needsAnimating:r},s){const o=t.hasOwnProperty(s)&&r[s]!==!0;return r[s]=!1,o}function DO(t,r,{delay:s=0,transitionOverride:o,type:a}={}){var d;let{transition:h=t.getDefaultTransition(),transitionEnd:f,...g}=r;o&&(h=o);const $=[],v=a&&t.animationState&&t.animationState.getState()[a];for(const y in g){const w=t.getValue(y,(d=t.latestValues[y])!==null&&d!==void 0?d:null),S=g[y];if(S===void 0||v&&GG(v,y))continue;const O={delay:s,...EE(h||{},y)};let I=!1;if(window.MotionHandoffAnimation){const A=lO(t);if(A){const M=window.MotionHandoffAnimation(A,y,sn);M!==null&&(O.startTime=M,I=!0)}}HT(t,y),w.start(BE(y,w,S,t.shouldReduceMotion&&oO.has(y)?{type:!1}:O,t,I));const x=w.animation;x&&$.push(x)}return f&&Promise.all($).then(()=>{sn.update(()=>{f&&T2(t,f)})}),$}function YT(t,r,s={}){var o;const a=nv(t,r,s.type==="exit"?(o=t.presenceContext)===null||o===void 0?void 0:o.custom:void 0);let{transition:d=t.getDefaultTransition()||{}}=a||{};s.transitionOverride&&(d=s.transitionOverride);const h=a?()=>Promise.all(DO(t,a,s)):()=>Promise.resolve(),f=t.variantChildren&&t.variantChildren.size?($=0)=>{const{delayChildren:v=0,staggerChildren:y,staggerDirection:w}=d;return jG(t,r,v+$,y,w,s)}:()=>Promise.resolve(),{when:g}=d;if(g){const[$,v]=g==="beforeChildren"?[h,f]:[f,h];return $().then(()=>v())}else return Promise.all([h(),f(s.delay)])}function jG(t,r,s=0,o=0,a=1,d){const h=[],f=(t.variantChildren.size-1)*o,g=a===1?($=0)=>$*o:($=0)=>f-$*o;return Array.from(t.variantChildren).sort(WG).forEach(($,v)=>{$.notify("AnimationStart",r),h.push(YT($,r,{...d,delay:s+g(v)}).then(()=>$.notify("AnimationComplete",r)))}),Promise.all(h)}function WG(t,r){return t.sortNodePosition(r)}function zG(t,r,s={}){t.notify("AnimationStart",r);let o;if(Array.isArray(r)){const a=r.map(d=>YT(t,d,s));o=Promise.all(a)}else if(typeof r=="string")o=YT(t,r,s);else{const a=typeof r=="function"?nv(t,r,s.custom):r;o=Promise.all(DO(t,a,s))}return o.then(()=>{t.notify("AnimationComplete",r)})}const KG=dE.length;function BO(t){if(!t)return;if(!t.isControllingVariants){const s=t.parent?BO(t.parent)||{}:{};return t.props.initial!==void 0&&(s.initial=t.props.initial),s}const r={};for(let s=0;s<KG;s++){const o=dE[s],a=t.props[o];(Qm(a)||a===!1)&&(r[o]=a)}return r}const XG=[...uE].reverse(),YG=uE.length;function qG(t){return r=>Promise.all(r.map(({animation:s,options:o})=>zG(t,s,o)))}function JG(t){let r=qG(t),s=LI(),o=!0;const a=g=>($,v)=>{var y;const w=nv(t,v,g==="exit"?(y=t.presenceContext)===null||y===void 0?void 0:y.custom:void 0);if(w){const{transition:S,transitionEnd:O,...I}=w;$={...$,...I,...O}}return $};function d(g){r=g(t)}function h(g){const{props:$}=t,v=BO(t.parent)||{},y=[],w=new Set;let S={},O=1/0;for(let x=0;x<YG;x++){const A=XG[x],M=s[A],P=$[A]!==void 0?$[A]:v[A],F=Qm(P),B=A===g?M.isActive:null;B===!1&&(O=x);let V=P===v[A]&&P!==$[A]&&F;if(V&&o&&t.manuallyAnimateOnMount&&(V=!1),M.protectedKeys={...S},!M.isActive&&B===null||!P&&!M.prevProp||ev(P)||typeof P=="boolean")continue;const j=QG(M.prevProp,P);let W=j||A===g&&M.isActive&&!V&&F||x>O&&F,he=!1;const we=Array.isArray(P)?P:[P];let Ee=we.reduce(a(A),{});B===!1&&(Ee={});const{prevResolvedValues:ye={}}=M,De={...ye,...Ee},ce=pe=>{W=!0,w.has(pe)&&(he=!0,w.delete(pe)),M.needsAnimating[pe]=!0;const G=t.getValue(pe);G&&(G.liveStyle=!1)};for(const pe in De){const G=Ee[pe],ee=ye[pe];if(S.hasOwnProperty(pe))continue;let $e=!1;FT(G)&&FT(ee)?$e=!Jx(G,ee):$e=G!==ee,$e?G!=null?ce(pe):w.add(pe):G!==void 0&&w.has(pe)?ce(pe):M.protectedKeys[pe]=!0}M.prevProp=P,M.prevResolvedValues=Ee,M.isActive&&(S={...S,...Ee}),o&&t.blockInitialAnimation&&(W=!1),W&&(!(V&&j)||he)&&y.push(...we.map(pe=>({animation:pe,options:{type:A}})))}if(w.size){const x={};w.forEach(A=>{const M=t.getBaseTarget(A),P=t.getValue(A);P&&(P.liveStyle=!0),x[A]=M??null}),y.push({animation:x})}let I=!!y.length;return o&&($.initial===!1||$.initial===$.animate)&&!t.manuallyAnimateOnMount&&(I=!1),o=!1,I?r(y):Promise.resolve()}function f(g,$){var v;if(s[g].isActive===$)return Promise.resolve();(v=t.variantChildren)===null||v===void 0||v.forEach(w=>{var S;return(S=w.animationState)===null||S===void 0?void 0:S.setActive(g,$)}),s[g].isActive=$;const y=h(g);for(const w in s)s[w].protectedKeys={};return y}return{animateChanges:h,setActive:f,setAnimateFunction:d,getState:()=>s,reset:()=>{s=LI(),o=!0}}}function QG(t,r){return typeof r=="string"?r!==t:Array.isArray(r)?!Jx(r,t):!1}function Iu(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function LI(){return{animate:Iu(!0),whileInView:Iu(),whileHover:Iu(),whileTap:Iu(),whileDrag:Iu(),whileFocus:Iu(),exit:Iu()}}class rc{constructor(r){this.isMounted=!1,this.node=r}update(){}}class ZG extends rc{constructor(r){super(r),r.animationState||(r.animationState=JG(r))}updateAnimationControlsSubscription(){const{animate:r}=this.node.getProps();ev(r)&&(this.unmountControls=r.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:r}=this.node.getProps(),{animate:s}=this.node.prevProps||{};r!==s&&this.updateAnimationControlsSubscription()}unmount(){var r;this.node.animationState.reset(),(r=this.unmountControls)===null||r===void 0||r.call(this)}}let ej=0;class tj extends rc{constructor(){super(...arguments),this.id=ej++}update(){if(!this.node.presenceContext)return;const{isPresent:r,onExitComplete:s}=this.node.presenceContext,{isPresent:o}=this.node.prevPresenceContext||{};if(!this.node.animationState||r===o)return;const a=this.node.animationState.setActive("exit",!r);s&&!r&&a.then(()=>s(this.id))}mount(){const{register:r}=this.node.presenceContext||{};r&&(this.unmount=r(this.id))}unmount(){}}const nj={animation:{Feature:ZG},exit:{Feature:tj}};function ng(t,r,s,o={passive:!0}){return t.addEventListener(r,s,o),()=>t.removeEventListener(r,s)}function yg(t){return{point:{x:t.pageX,y:t.pageY}}}const rj=t=>r=>CE(r)&&t(r,yg(r));function Gm(t,r,s,o){return ng(t,r,rj(s),o)}const MI=(t,r)=>Math.abs(t-r);function sj(t,r){const s=MI(t.x,r.x),o=MI(t.y,r.y);return Math.sqrt(s**2+o**2)}class FO{constructor(r,s,{transformPagePoint:o,contextWindow:a,dragSnapToOrigin:d=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=Hy(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,S=sj(y.offset,{x:0,y:0})>=3;if(!w&&!S)return;const{point:O}=y,{timestamp:I}=$r;this.history.push({...O,timestamp:I});const{onStart:x,onMove:A}=this.handlers;w||(x&&x(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),A&&A(this.lastMoveEvent,y)},this.handlePointerMove=(y,w)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=Vy(w,this.transformPagePoint),sn.update(this.updatePoint,!0)},this.handlePointerUp=(y,w)=>{this.end();const{onEnd:S,onSessionEnd:O,resumeAnimation:I}=this.handlers;if(this.dragSnapToOrigin&&I&&I(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=Hy(y.type==="pointercancel"?this.lastMoveEventInfo:Vy(w,this.transformPagePoint),this.history);this.startEvent&&S&&S(y,x),O&&O(y,x)},!CE(r))return;this.dragSnapToOrigin=d,this.handlers=s,this.transformPagePoint=o,this.contextWindow=a||window;const h=yg(r),f=Vy(h,this.transformPagePoint),{point:g}=f,{timestamp:$}=$r;this.history=[{...g,timestamp:$}];const{onSessionStart:v}=s;v&&v(r,Hy(f,this.history)),this.removeListeners=vg(Gm(this.contextWindow,"pointermove",this.handlePointerMove),Gm(this.contextWindow,"pointerup",this.handlePointerUp),Gm(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(r){this.handlers=r}end(){this.removeListeners&&this.removeListeners(),tc(this.updatePoint)}}function Vy(t,r){return r?{point:r(t.point)}:t}function PI(t,r){return{x:t.x-r.x,y:t.y-r.y}}function Hy({point:t},r){return{point:t,delta:PI(t,UO(r)),offset:PI(t,oj(r)),velocity:ij(r,.1)}}function oj(t){return t[0]}function UO(t){return t[t.length-1]}function ij(t,r){if(t.length<2)return{x:0,y:0};let s=t.length-1,o=null;const a=UO(t);for(;s>=0&&(o=t[s],!(a.timestamp-o.timestamp>zl(r)));)s--;if(!o)return{x:0,y:0};const d=Kl(a.timestamp-o.timestamp);if(d===0)return{x:0,y:0};const h={x:(a.x-o.x)/d,y:(a.y-o.y)/d};return h.x===1/0&&(h.x=0),h.y===1/0&&(h.y=0),h}const VO=1e-4,lj=1-VO,aj=1+VO,HO=.01,cj=0-HO,uj=0+HO;function Vs(t){return t.max-t.min}function dj(t,r,s){return Math.abs(t-r)<=s}function DI(t,r,s,o=.5){t.origin=o,t.originPoint=gn(r.min,r.max,t.origin),t.scale=Vs(s)/Vs(r),t.translate=gn(s.min,s.max,t.origin)-t.originPoint,(t.scale>=lj&&t.scale<=aj||isNaN(t.scale))&&(t.scale=1),(t.translate>=cj&&t.translate<=uj||isNaN(t.translate))&&(t.translate=0)}function jm(t,r,s,o){DI(t.x,r.x,s.x,o?o.originX:void 0),DI(t.y,r.y,s.y,o?o.originY:void 0)}function BI(t,r,s){t.min=s.min+r.min,t.max=t.min+Vs(r)}function hj(t,r,s){BI(t.x,r.x,s.x),BI(t.y,r.y,s.y)}function FI(t,r,s){t.min=r.min-s.min,t.max=t.min+Vs(r)}function Wm(t,r,s){FI(t.x,r.x,s.x),FI(t.y,r.y,s.y)}function pj(t,{min:r,max:s},o){return r!==void 0&&t<r?t=o?gn(r,t,o.min):Math.max(t,r):s!==void 0&&t>s&&(t=o?gn(s,t,o.max):Math.min(t,s)),t}function UI(t,r,s){return{min:r!==void 0?t.min+r:void 0,max:s!==void 0?t.max+s-(t.max-t.min):void 0}}function fj(t,{top:r,left:s,bottom:o,right:a}){return{x:UI(t.x,s,a),y:UI(t.y,r,o)}}function VI(t,r){let s=r.min-t.min,o=r.max-t.max;return r.max-r.min<t.max-t.min&&([s,o]=[o,s]),{min:s,max:o}}function mj(t,r){return{x:VI(t.x,r.x),y:VI(t.y,r.y)}}function gj(t,r){let s=.5;const o=Vs(t),a=Vs(r);return a>o?s=hp(r.min,r.max-o,t.min):o>a&&(s=hp(t.min,t.max-a,r.min)),ql(0,1,s)}function $j(t,r){const s={};return r.min!==void 0&&(s.min=r.min-t.min),r.max!==void 0&&(s.max=r.max-t.min),s}const qT=.35;function _j(t=qT){return t===!1?t=0:t===!0&&(t=qT),{x:HI(t,"left","right"),y:HI(t,"top","bottom")}}function HI(t,r,s){return{min:GI(t,r),max:GI(t,s)}}function GI(t,r){return typeof t=="number"?t:t[r]||0}const jI=()=>({translate:0,scale:1,origin:0,originPoint:0}),Jh=()=>({x:jI(),y:jI()}),WI=()=>({min:0,max:0}),In=()=>({x:WI(),y:WI()});function vo(t){return[t("x"),t("y")]}function GO({top:t,left:r,right:s,bottom:o}){return{x:{min:r,max:s},y:{min:t,max:o}}}function vj({x:t,y:r}){return{top:r.min,right:t.max,bottom:r.max,left:t.min}}function yj(t,r){if(!r)return t;const s=r({x:t.left,y:t.top}),o=r({x:t.right,y:t.bottom});return{top:s.y,left:s.x,bottom:o.y,right:o.x}}function Gy(t){return t===void 0||t===1}function JT({scale:t,scaleX:r,scaleY:s}){return!Gy(t)||!Gy(r)||!Gy(s)}function Ou(t){return JT(t)||jO(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function jO(t){return zI(t.x)||zI(t.y)}function zI(t){return t&&t!=="0%"}function T_(t,r,s){const o=t-s,a=r*o;return s+a}function KI(t,r,s,o,a){return a!==void 0&&(t=T_(t,a,o)),T_(t,s,o)+r}function QT(t,r=0,s=1,o,a){t.min=KI(t.min,r,s,o,a),t.max=KI(t.max,r,s,o,a)}function WO(t,{x:r,y:s}){QT(t.x,r.translate,r.scale,r.originPoint),QT(t.y,s.translate,s.scale,s.originPoint)}const XI=.999999999999,YI=1.0000000000001;function Tj(t,r,s,o=!1){const a=s.length;if(!a)return;r.x=r.y=1;let d,h;for(let f=0;f<a;f++){d=s[f],h=d.projectionDelta;const{visualElement:g}=d.options;g&&g.props.style&&g.props.style.display==="contents"||(o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Zh(t,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),h&&(r.x*=h.x.scale,r.y*=h.y.scale,WO(t,h)),o&&Ou(d.latestValues)&&Zh(t,d.latestValues))}r.x<YI&&r.x>XI&&(r.x=1),r.y<YI&&r.y>XI&&(r.y=1)}function Qh(t,r){t.min=t.min+r,t.max=t.max+r}function qI(t,r,s,o,a=.5){const d=gn(t.min,t.max,a);QT(t,r,s,d,o)}function Zh(t,r){qI(t.x,r.x,r.scaleX,r.scale,r.originX),qI(t.y,r.y,r.scaleY,r.scale,r.originY)}function zO(t,r){return GO(yj(t.getBoundingClientRect(),r))}function bj(t,r,s){const o=zO(t,s),{scroll:a}=r;return a&&(Qh(o.x,a.offset.x),Qh(o.y,a.offset.y)),o}const KO=({current:t})=>t?t.ownerDocument.defaultView:null,Ej=new WeakMap;class wj{constructor(r){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=In(),this.visualElement=r}start(r,{snapToCursor:s=!1}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const a=v=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(yg(v).point)},d=(v,y)=>{const{drag:w,dragPropagation:S,onDragStart:O}=this.getProps();if(w&&!S&&(this.openDragLock&&this.openDragLock(),this.openDragLock=g2(w),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),vo(x=>{let A=this.getAxisMotionValue(x).get()||0;if(Hi.test(A)){const{projection:M}=this.visualElement;if(M&&M.layout){const P=M.layout.layoutBox[x];P&&(A=Vs(P)*(parseFloat(A)/100))}}this.originPoint[x]=A}),O&&sn.postRender(()=>O(v,y)),HT(this.visualElement,"transform");const{animationState:I}=this.visualElement;I&&I.setActive("whileDrag",!0)},h=(v,y)=>{const{dragPropagation:w,dragDirectionLock:S,onDirectionLock:O,onDrag:I}=this.getProps();if(!w&&!this.openDragLock)return;const{offset:x}=y;if(S&&this.currentDirection===null){this.currentDirection=Sj(x),this.currentDirection!==null&&O&&O(this.currentDirection);return}this.updateAxis("x",y.point,x),this.updateAxis("y",y.point,x),this.visualElement.render(),I&&I(v,y)},f=(v,y)=>this.stop(v,y),g=()=>vo(v=>{var y;return this.getAnimationState(v)==="paused"&&((y=this.getAxisMotionValue(v).animation)===null||y===void 0?void 0:y.play())}),{dragSnapToOrigin:$}=this.getProps();this.panSession=new FO(r,{onSessionStart:a,onStart:d,onMove:h,onSessionEnd:f,resumeAnimation:g},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:$,contextWindow:KO(this.visualElement)})}stop(r,s){const o=this.isDragging;if(this.cancel(),!o)return;const{velocity:a}=s;this.startAnimation(a);const{onDragEnd:d}=this.getProps();d&&sn.postRender(()=>d(r,s))}cancel(){this.isDragging=!1;const{projection:r,animationState:s}=this.visualElement;r&&(r.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:o}=this.getProps();!o&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(r,s,o){const{drag:a}=this.getProps();if(!o||!M$(r,a,this.currentDirection))return;const d=this.getAxisMotionValue(r);let h=this.originPoint[r]+o[r];this.constraints&&this.constraints[r]&&(h=pj(h,this.constraints[r],this.elastic[r])),d.set(h)}resolveConstraints(){var r;const{dragConstraints:s,dragElastic:o}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(r=this.visualElement.projection)===null||r===void 0?void 0:r.layout,d=this.constraints;s&&Yh(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&a?this.constraints=fj(a.layoutBox,s):this.constraints=!1,this.elastic=_j(o),d!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&vo(h=>{this.constraints!==!1&&this.getAxisMotionValue(h)&&(this.constraints[h]=$j(a.layoutBox[h],this.constraints[h]))})}resolveRefConstraints(){const{dragConstraints:r,onMeasureDragConstraints:s}=this.getProps();if(!r||!Yh(r))return!1;const o=r.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const d=bj(o,a.root,this.visualElement.getTransformPagePoint());let h=mj(a.layout.layoutBox,d);if(s){const f=s(vj(h));this.hasMutatedConstraints=!!f,f&&(h=GO(f))}return h}startAnimation(r){const{drag:s,dragMomentum:o,dragElastic:a,dragTransition:d,dragSnapToOrigin:h,onDragTransitionEnd:f}=this.getProps(),g=this.constraints||{},$=vo(v=>{if(!M$(v,s,this.currentDirection))return;let y=g&&g[v]||{};h&&(y={min:0,max:0});const w=a?200:1e6,S=a?40:1e7,O={type:"inertia",velocity:o?r[v]:0,bounceStiffness:w,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...d,...y};return this.startAxisValueAnimation(v,O)});return Promise.all($).then(f)}startAxisValueAnimation(r,s){const o=this.getAxisMotionValue(r);return HT(this.visualElement,r),o.start(BE(r,o,0,s,this.visualElement,!1))}stopAnimation(){vo(r=>this.getAxisMotionValue(r).stop())}pauseAnimation(){vo(r=>{var s;return(s=this.getAxisMotionValue(r).animation)===null||s===void 0?void 0:s.pause()})}getAnimationState(r){var s;return(s=this.getAxisMotionValue(r).animation)===null||s===void 0?void 0:s.state}getAxisMotionValue(r){const s=`_drag${r.toUpperCase()}`,o=this.visualElement.getProps(),a=o[s];return a||this.visualElement.getValue(r,(o.initial?o.initial[r]:void 0)||0)}snapToCursor(r){vo(s=>{const{drag:o}=this.getProps();if(!M$(s,o,this.currentDirection))return;const{projection:a}=this.visualElement,d=this.getAxisMotionValue(s);if(a&&a.layout){const{min:h,max:f}=a.layout.layoutBox[s];d.set(r[s]-gn(h,f,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:r,dragConstraints:s}=this.getProps(),{projection:o}=this.visualElement;if(!Yh(s)||!o||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};vo(h=>{const f=this.getAxisMotionValue(h);if(f&&this.constraints!==!1){const g=f.get();a[h]=gj({min:g,max:g},this.constraints[h])}});const{transformTemplate:d}=this.visualElement.getProps();this.visualElement.current.style.transform=d?d({},""):"none",o.root&&o.root.updateScroll(),o.updateLayout(),this.resolveConstraints(),vo(h=>{if(!M$(h,r,null))return;const f=this.getAxisMotionValue(h),{min:g,max:$}=this.constraints[h];f.set(gn(g,$,a[h]))})}addListeners(){if(!this.visualElement.current)return;Ej.set(this.visualElement,this);const r=this.visualElement.current,s=Gm(r,"pointerdown",g=>{const{drag:$,dragListener:v=!0}=this.getProps();$&&v&&this.start(g)}),o=()=>{const{dragConstraints:g}=this.getProps();Yh(g)&&g.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,d=a.addEventListener("measure",o);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),sn.read(o);const h=ng(window,"resize",()=>this.scalePositionWithinConstraints()),f=a.addEventListener("didUpdate",(({delta:g,hasLayoutChanged:$})=>{this.isDragging&&$&&(vo(v=>{const y=this.getAxisMotionValue(v);y&&(this.originPoint[v]+=g[v].translate,y.set(y.get()+g[v].translate))}),this.visualElement.render())}));return()=>{h(),s(),d(),f&&f()}}getProps(){const r=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:o=!1,dragPropagation:a=!1,dragConstraints:d=!1,dragElastic:h=qT,dragMomentum:f=!0}=r;return{...r,drag:s,dragDirectionLock:o,dragPropagation:a,dragConstraints:d,dragElastic:h,dragMomentum:f}}}function M$(t,r,s){return(r===!0||r===t)&&(s===null||s===t)}function Sj(t,r=10){let s=null;return Math.abs(t.y)>r?s="y":Math.abs(t.x)>r&&(s="x"),s}class Cj extends rc{constructor(r){super(r),this.removeGroupControls=Us,this.removeListeners=Us,this.controls=new wj(r)}mount(){const{dragControls:r}=this.node.getProps();r&&(this.removeGroupControls=r.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Us}unmount(){this.removeGroupControls(),this.removeListeners()}}const JI=t=>(r,s)=>{t&&sn.postRender(()=>t(r,s))};class Ij extends rc{constructor(){super(...arguments),this.removePointerDownListener=Us}onPointerDown(r){this.session=new FO(r,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:KO(this.node)})}createPanHandlers(){const{onPanSessionStart:r,onPanStart:s,onPan:o,onPanEnd:a}=this.node.getProps();return{onSessionStart:JI(r),onStart:JI(s),onMove:o,onEnd:(d,h)=>{delete this.session,a&&sn.postRender(()=>a(d,h))}}}mount(){this.removePointerDownListener=Gm(this.node.current,"pointerdown",r=>this.onPointerDown(r))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const t_={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function QI(t,r){return r.max===r.min?0:t/(r.max-r.min)*100}const xm={correct:(t,r)=>{if(!r.target)return t;if(typeof t=="string")if(st.test(t))t=parseFloat(t);else return t;const s=QI(t,r.target.x),o=QI(t,r.target.y);return`${s}% ${o}%`}},Rj={correct:(t,{treeScale:r,projectionDelta:s})=>{const o=t,a=nc.parse(t);if(a.length>5)return o;const d=nc.createTransformer(t),h=typeof a[0]!="number"?1:0,f=s.x.scale*r.x,g=s.y.scale*r.y;a[0+h]/=f,a[1+h]/=g;const $=gn(f,g,.5);return typeof a[2+h]=="number"&&(a[2+h]/=$),typeof a[3+h]=="number"&&(a[3+h]/=$),d(a)}};class kj extends E.Component{componentDidMount(){const{visualElement:r,layoutGroup:s,switchLayoutGroup:o,layoutId:a}=this.props,{projection:d}=r;YH(xj),d&&(s.group&&s.group.add(d),o&&o.register&&a&&o.register(d),d.root.didUpdate(),d.addEventListener("animationComplete",()=>{this.safeToRemove()}),d.setOptions({...d.options,onExitComplete:()=>this.safeToRemove()})),t_.hasEverUpdated=!0}getSnapshotBeforeUpdate(r){const{layoutDependency:s,visualElement:o,drag:a,isPresent:d}=this.props,h=o.projection;return h&&(h.isPresent=d,a||r.layoutDependency!==s||s===void 0?h.willUpdate():this.safeToRemove(),r.isPresent!==d&&(d?h.promote():h.relegate()||sn.postRender(()=>{const f=h.getStack();(!f||!f.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:r}=this.props.visualElement;r&&(r.root.didUpdate(),pE.postRender(()=>{!r.currentAnimation&&r.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:r,layoutGroup:s,switchLayoutGroup:o}=this.props,{projection:a}=r;a&&(a.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(a),o&&o.deregister&&o.deregister(a))}safeToRemove(){const{safeToRemove:r}=this.props;r&&r()}render(){return null}}function XO(t){const[r,s]=xx(),o=E.useContext(oE);return R.jsx(kj,{...t,layoutGroup:o,switchLayoutGroup:E.useContext(Bx),isPresent:r,safeToRemove:s})}const xj={borderRadius:{...xm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:xm,borderTopRightRadius:xm,borderBottomLeftRadius:xm,borderBottomRightRadius:xm,boxShadow:Rj};function Oj(t,r,s){const o=kr(t)?t:eg(t);return o.start(BE("",o,r,s)),o.animation}function Aj(t){return t instanceof SVGElement&&t.tagName!=="svg"}const Nj=(t,r)=>t.depth-r.depth;class Lj{constructor(){this.children=[],this.isDirty=!1}add(r){IE(this.children,r),this.isDirty=!0}remove(r){RE(this.children,r),this.isDirty=!0}forEach(r){this.isDirty&&this.children.sort(Nj),this.isDirty=!1,this.children.forEach(r)}}function Mj(t,r){const s=Gi.now(),o=({timestamp:a})=>{const d=a-s;d>=r&&(tc(o),t(d-r))};return sn.read(o,!0),()=>tc(o)}const YO=["TopLeft","TopRight","BottomLeft","BottomRight"],Pj=YO.length,ZI=t=>typeof t=="string"?parseFloat(t):t,eR=t=>typeof t=="number"||st.test(t);function Dj(t,r,s,o,a,d){a?(t.opacity=gn(0,s.opacity!==void 0?s.opacity:1,Bj(o)),t.opacityExit=gn(r.opacity!==void 0?r.opacity:1,0,Fj(o))):d&&(t.opacity=gn(r.opacity!==void 0?r.opacity:1,s.opacity!==void 0?s.opacity:1,o));for(let h=0;h<Pj;h++){const f=`border${YO[h]}Radius`;let g=tR(r,f),$=tR(s,f);if(g===void 0&&$===void 0)continue;g||(g=0),$||($=0),g===0||$===0||eR(g)===eR($)?(t[f]=Math.max(gn(ZI(g),ZI($),o),0),(Hi.test($)||Hi.test(g))&&(t[f]+="%")):t[f]=$}(r.rotate||s.rotate)&&(t.rotate=gn(r.rotate||0,s.rotate||0,o))}function tR(t,r){return t[r]!==void 0?t[r]:t.borderRadius}const Bj=qO(0,.5,fO),Fj=qO(.5,.95,Us);function qO(t,r,s){return o=>o<t?0:o>r?1:s(hp(t,r,o))}function nR(t,r){t.min=r.min,t.max=r.max}function _o(t,r){nR(t.x,r.x),nR(t.y,r.y)}function rR(t,r){t.translate=r.translate,t.scale=r.scale,t.originPoint=r.originPoint,t.origin=r.origin}function sR(t,r,s,o,a){return t-=r,t=T_(t,1/s,o),a!==void 0&&(t=T_(t,1/a,o)),t}function Uj(t,r=0,s=1,o=.5,a,d=t,h=t){if(Hi.test(r)&&(r=parseFloat(r),r=gn(h.min,h.max,r/100)-h.min),typeof r!="number")return;let f=gn(d.min,d.max,o);t===d&&(f-=r),t.min=sR(t.min,r,s,f,a),t.max=sR(t.max,r,s,f,a)}function oR(t,r,[s,o,a],d,h){Uj(t,r[s],r[o],r[a],r.scale,d,h)}const Vj=["x","scaleX","originX"],Hj=["y","scaleY","originY"];function iR(t,r,s,o){oR(t.x,r,Vj,s?s.x:void 0,o?o.x:void 0),oR(t.y,r,Hj,s?s.y:void 0,o?o.y:void 0)}function lR(t){return t.translate===0&&t.scale===1}function JO(t){return lR(t.x)&&lR(t.y)}function aR(t,r){return t.min===r.min&&t.max===r.max}function Gj(t,r){return aR(t.x,r.x)&&aR(t.y,r.y)}function cR(t,r){return Math.round(t.min)===Math.round(r.min)&&Math.round(t.max)===Math.round(r.max)}function QO(t,r){return cR(t.x,r.x)&&cR(t.y,r.y)}function uR(t){return Vs(t.x)/Vs(t.y)}function dR(t,r){return t.translate===r.translate&&t.scale===r.scale&&t.originPoint===r.originPoint}class jj{constructor(){this.members=[]}add(r){IE(this.members,r),r.scheduleRender()}remove(r){if(RE(this.members,r),r===this.prevLead&&(this.prevLead=void 0),r===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(r){const s=this.members.findIndex(a=>r===a);if(s===0)return!1;let o;for(let a=s;a>=0;a--){const d=this.members[a];if(d.isPresent!==!1){o=d;break}}return o?(this.promote(o),!0):!1}promote(r,s){const o=this.lead;if(r!==o&&(this.prevLead=o,this.lead=r,r.show(),o)){o.instance&&o.scheduleRender(),r.scheduleRender(),r.resumeFrom=o,s&&(r.resumeFrom.preserveOpacity=!0),o.snapshot&&(r.snapshot=o.snapshot,r.snapshot.latestValues=o.animationValues||o.latestValues),r.root&&r.root.isUpdating&&(r.isLayoutDirty=!0);const{crossfade:a}=r.options;a===!1&&o.hide()}}exitAnimationComplete(){this.members.forEach(r=>{const{options:s,resumingFrom:o}=r;s.onExitComplete&&s.onExitComplete(),o&&o.options.onExitComplete&&o.options.onExitComplete()})}scheduleRender(){this.members.forEach(r=>{r.instance&&r.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Wj(t,r,s){let o="";const a=t.x.translate/r.x,d=t.y.translate/r.y,h=s?.z||0;if((a||d||h)&&(o=`translate3d(${a}px, ${d}px, ${h}px) `),(r.x!==1||r.y!==1)&&(o+=`scale(${1/r.x}, ${1/r.y}) `),s){const{transformPerspective:$,rotate:v,rotateX:y,rotateY:w,skewX:S,skewY:O}=s;$&&(o=`perspective(${$}px) ${o}`),v&&(o+=`rotate(${v}deg) `),y&&(o+=`rotateX(${y}deg) `),w&&(o+=`rotateY(${w}deg) `),S&&(o+=`skewX(${S}deg) `),O&&(o+=`skewY(${O}deg) `)}const f=t.x.scale*r.x,g=t.y.scale*r.y;return(f!==1||g!==1)&&(o+=`scale(${f}, ${g})`),o||"none"}const Au={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Mm=typeof window<"u"&&window.MotionDebug!==void 0,jy=["","X","Y","Z"],zj={visibility:"hidden"},hR=1e3;let Kj=0;function Wy(t,r,s,o){const{latestValues:a}=r;a[t]&&(s[t]=a[t],r.setStaticValue(t,0),o&&(o[t]=0))}function ZO(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:r}=t.options;if(!r)return;const s=lO(r);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:a,layoutId:d}=t.options;window.MotionCancelOptimisedAnimation(s,"transform",sn,!(a||d))}const{parent:o}=t;o&&!o.hasCheckedOptimisedAppear&&ZO(o)}function eA({attachResizeListener:t,defaultParent:r,measureScroll:s,checkIsScrollRoot:o,resetTransform:a}){return class{constructor(h={},f=r?.()){this.id=Kj++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Mm&&(Au.totalNodes=Au.resolvedTargetDeltas=Au.recalculatedProjection=0),this.nodes.forEach(qj),this.nodes.forEach(tW),this.nodes.forEach(nW),this.nodes.forEach(Jj),Mm&&window.MotionDebug.record(Au)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=h,this.root=f?f.root||f:this,this.path=f?[...f.path,f]:[],this.parent=f,this.depth=f?f.depth+1:0;for(let g=0;g<this.path.length;g++)this.path[g].shouldResetTransform=!0;this.root===this&&(this.nodes=new Lj)}addEventListener(h,f){return this.eventHandlers.has(h)||this.eventHandlers.set(h,new kE),this.eventHandlers.get(h).add(f)}notifyListeners(h,...f){const g=this.eventHandlers.get(h);g&&g.notify(...f)}hasListeners(h){return this.eventHandlers.has(h)}mount(h,f=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Aj(h),this.instance=h;const{layoutId:g,layout:$,visualElement:v}=this.options;if(v&&!v.current&&v.mount(h),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),f&&($||g)&&(this.isLayoutDirty=!0),t){let y;const w=()=>this.root.updateBlockedByResize=!1;t(h,()=>{this.root.updateBlockedByResize=!0,y&&y(),y=Mj(w,250),t_.hasAnimatedSinceResize&&(t_.hasAnimatedSinceResize=!1,this.nodes.forEach(fR))})}g&&this.root.registerSharedNode(g,this),this.options.animate!==!1&&v&&(g||$)&&this.addEventListener("didUpdate",({delta:y,hasLayoutChanged:w,hasRelativeTargetChanged:S,layout:O})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const I=this.options.transition||v.getDefaultTransition()||lW,{onLayoutAnimationStart:x,onLayoutAnimationComplete:A}=v.getProps(),M=!this.targetLayout||!QO(this.targetLayout,O)||S,P=!w&&S;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||P||w&&(M||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(y,P);const F={...EE(I,"layout"),onPlay:x,onComplete:A};(v.shouldReduceMotion||this.options.layoutRoot)&&(F.delay=0,F.type=!1),this.startAnimation(F)}else w||fR(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=O})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const h=this.getStack();h&&h.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,tc(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(rW),this.animationId++)}getTransformTemplate(){const{visualElement:h}=this.options;return h&&h.getProps().transformTemplate}willUpdate(h=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&ZO(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let v=0;v<this.path.length;v++){const y=this.path[v];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:f,layout:g}=this.options;if(f===void 0&&!g)return;const $=this.getTransformTemplate();this.prevTransformTemplateValue=$?$(this.latestValues,""):void 0,this.updateSnapshot(),h&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(pR);return}this.isUpdating||this.nodes.forEach(Zj),this.isUpdating=!1,this.nodes.forEach(eW),this.nodes.forEach(Xj),this.nodes.forEach(Yj),this.clearAllSnapshots();const f=Gi.now();$r.delta=ql(0,1e3/60,f-$r.timestamp),$r.timestamp=f,$r.isProcessing=!0,My.update.process($r),My.preRender.process($r),My.render.process($r),$r.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,pE.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Qj),this.sharedNodes.forEach(sW)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,sn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){sn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let g=0;g<this.path.length;g++)this.path[g].updateScroll();const h=this.layout;this.layout=this.measure(!1),this.layoutCorrected=In(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:f}=this.options;f&&f.notify("LayoutMeasure",this.layout.layoutBox,h?h.layoutBox:void 0)}updateScroll(h="measure"){let f=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===h&&(f=!1),f){const g=o(this.instance);this.scroll={animationId:this.root.animationId,phase:h,isRoot:g,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:g}}}resetTransform(){if(!a)return;const h=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,f=this.projectionDelta&&!JO(this.projectionDelta),g=this.getTransformTemplate(),$=g?g(this.latestValues,""):void 0,v=$!==this.prevTransformTemplateValue;h&&(f||Ou(this.latestValues)||v)&&(a(this.instance,$),this.shouldResetTransform=!1,this.scheduleRender())}measure(h=!0){const f=this.measurePageBox();let g=this.removeElementScroll(f);return h&&(g=this.removeTransform(g)),aW(g),{animationId:this.root.animationId,measuredBox:f,layoutBox:g,latestValues:{},source:this.id}}measurePageBox(){var h;const{visualElement:f}=this.options;if(!f)return In();const g=f.measureViewportBox();if(!(((h=this.scroll)===null||h===void 0?void 0:h.wasRoot)||this.path.some(cW))){const{scroll:v}=this.root;v&&(Qh(g.x,v.offset.x),Qh(g.y,v.offset.y))}return g}removeElementScroll(h){var f;const g=In();if(_o(g,h),!((f=this.scroll)===null||f===void 0)&&f.wasRoot)return g;for(let $=0;$<this.path.length;$++){const v=this.path[$],{scroll:y,options:w}=v;v!==this.root&&y&&w.layoutScroll&&(y.wasRoot&&_o(g,h),Qh(g.x,y.offset.x),Qh(g.y,y.offset.y))}return g}applyTransform(h,f=!1){const g=In();_o(g,h);for(let $=0;$<this.path.length;$++){const v=this.path[$];!f&&v.options.layoutScroll&&v.scroll&&v!==v.root&&Zh(g,{x:-v.scroll.offset.x,y:-v.scroll.offset.y}),Ou(v.latestValues)&&Zh(g,v.latestValues)}return Ou(this.latestValues)&&Zh(g,this.latestValues),g}removeTransform(h){const f=In();_o(f,h);for(let g=0;g<this.path.length;g++){const $=this.path[g];if(!$.instance||!Ou($.latestValues))continue;JT($.latestValues)&&$.updateSnapshot();const v=In(),y=$.measurePageBox();_o(v,y),iR(f,$.latestValues,$.snapshot?$.snapshot.layoutBox:void 0,v)}return Ou(this.latestValues)&&iR(f,this.latestValues),f}setTargetDelta(h){this.targetDelta=h,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(h){this.options={...this.options,...h,crossfade:h.crossfade!==void 0?h.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==$r.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(h=!1){var f;const g=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=g.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=g.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=g.isSharedProjectionDirty);const $=!!this.resumingFrom||this!==g;if(!(h||$&&this.isSharedProjectionDirty||this.isProjectionDirty||!((f=this.parent)===null||f===void 0)&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:y,layoutId:w}=this.options;if(!(!this.layout||!(y||w))){if(this.resolvedRelativeTargetAt=$r.timestamp,!this.targetDelta&&!this.relativeTarget){const S=this.getClosestProjectingParent();S&&S.layout&&this.animationProgress!==1?(this.relativeParent=S,this.forceRelativeParentToResolveTarget(),this.relativeTarget=In(),this.relativeTargetOrigin=In(),Wm(this.relativeTargetOrigin,this.layout.layoutBox,S.layout.layoutBox),_o(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=In(),this.targetWithTransforms=In()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),hj(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):_o(this.target,this.layout.layoutBox),WO(this.target,this.targetDelta)):_o(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const S=this.getClosestProjectingParent();S&&!!S.resumingFrom==!!this.resumingFrom&&!S.options.layoutScroll&&S.target&&this.animationProgress!==1?(this.relativeParent=S,this.forceRelativeParentToResolveTarget(),this.relativeTarget=In(),this.relativeTargetOrigin=In(),Wm(this.relativeTargetOrigin,this.target,S.target),_o(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Mm&&Au.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||JT(this.parent.latestValues)||jO(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var h;const f=this.getLead(),g=!!this.resumingFrom||this!==f;let $=!0;if((this.isProjectionDirty||!((h=this.parent)===null||h===void 0)&&h.isProjectionDirty)&&($=!1),g&&(this.isSharedProjectionDirty||this.isTransformDirty)&&($=!1),this.resolvedRelativeTargetAt===$r.timestamp&&($=!1),$)return;const{layout:v,layoutId:y}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(v||y))return;_o(this.layoutCorrected,this.layout.layoutBox);const w=this.treeScale.x,S=this.treeScale.y;Tj(this.layoutCorrected,this.treeScale,this.path,g),f.layout&&!f.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(f.target=f.layout.layoutBox,f.targetWithTransforms=In());const{target:O}=f;if(!O){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(rR(this.prevProjectionDelta.x,this.projectionDelta.x),rR(this.prevProjectionDelta.y,this.projectionDelta.y)),jm(this.projectionDelta,this.layoutCorrected,O,this.latestValues),(this.treeScale.x!==w||this.treeScale.y!==S||!dR(this.projectionDelta.x,this.prevProjectionDelta.x)||!dR(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",O)),Mm&&Au.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(h=!0){var f;if((f=this.options.visualElement)===null||f===void 0||f.scheduleRender(),h){const g=this.getStack();g&&g.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Jh(),this.projectionDelta=Jh(),this.projectionDeltaWithTransform=Jh()}setAnimationOrigin(h,f=!1){const g=this.snapshot,$=g?g.latestValues:{},v={...this.latestValues},y=Jh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!f;const w=In(),S=g?g.source:void 0,O=this.layout?this.layout.source:void 0,I=S!==O,x=this.getStack(),A=!x||x.members.length<=1,M=!!(I&&!A&&this.options.crossfade===!0&&!this.path.some(iW));this.animationProgress=0;let P;this.mixTargetDelta=F=>{const B=F/1e3;mR(y.x,h.x,B),mR(y.y,h.y,B),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Wm(w,this.layout.layoutBox,this.relativeParent.layout.layoutBox),oW(this.relativeTarget,this.relativeTargetOrigin,w,B),P&&Gj(this.relativeTarget,P)&&(this.isProjectionDirty=!1),P||(P=In()),_o(P,this.relativeTarget)),I&&(this.animationValues=v,Dj(v,$,this.latestValues,B,M,A)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=B},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(h){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(tc(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=sn.update(()=>{t_.hasAnimatedSinceResize=!0,this.currentAnimation=Oj(0,hR,{...h,onUpdate:f=>{this.mixTargetDelta(f),h.onUpdate&&h.onUpdate(f)},onComplete:()=>{h.onComplete&&h.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const h=this.getStack();h&&h.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(hR),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const h=this.getLead();let{targetWithTransforms:f,target:g,layout:$,latestValues:v}=h;if(!(!f||!g||!$)){if(this!==h&&this.layout&&$&&tA(this.options.animationType,this.layout.layoutBox,$.layoutBox)){g=this.target||In();const y=Vs(this.layout.layoutBox.x);g.x.min=h.target.x.min,g.x.max=g.x.min+y;const w=Vs(this.layout.layoutBox.y);g.y.min=h.target.y.min,g.y.max=g.y.min+w}_o(f,g),Zh(f,v),jm(this.projectionDeltaWithTransform,this.layoutCorrected,f,v)}}registerSharedNode(h,f){this.sharedNodes.has(h)||this.sharedNodes.set(h,new jj),this.sharedNodes.get(h).add(f);const $=f.options.initialPromotionConfig;f.promote({transition:$?$.transition:void 0,preserveFollowOpacity:$&&$.shouldPreserveFollowOpacity?$.shouldPreserveFollowOpacity(f):void 0})}isLead(){const h=this.getStack();return h?h.lead===this:!0}getLead(){var h;const{layoutId:f}=this.options;return f?((h=this.getStack())===null||h===void 0?void 0:h.lead)||this:this}getPrevLead(){var h;const{layoutId:f}=this.options;return f?(h=this.getStack())===null||h===void 0?void 0:h.prevLead:void 0}getStack(){const{layoutId:h}=this.options;if(h)return this.root.sharedNodes.get(h)}promote({needsReset:h,transition:f,preserveFollowOpacity:g}={}){const $=this.getStack();$&&$.promote(this,g),h&&(this.projectionDelta=void 0,this.needsReset=!0),f&&this.setOptions({transition:f})}relegate(){const h=this.getStack();return h?h.relegate(this):!1}resetSkewAndRotation(){const{visualElement:h}=this.options;if(!h)return;let f=!1;const{latestValues:g}=h;if((g.z||g.rotate||g.rotateX||g.rotateY||g.rotateZ||g.skewX||g.skewY)&&(f=!0),!f)return;const $={};g.z&&Wy("z",h,$,this.animationValues);for(let v=0;v<jy.length;v++)Wy(`rotate${jy[v]}`,h,$,this.animationValues),Wy(`skew${jy[v]}`,h,$,this.animationValues);h.render();for(const v in $)h.setStaticValue(v,$[v]),this.animationValues&&(this.animationValues[v]=$[v]);h.scheduleRender()}getProjectionStyles(h){var f,g;if(!this.instance||this.isSVG)return;if(!this.isVisible)return zj;const $={visibility:""},v=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,$.opacity="",$.pointerEvents=Z$(h?.pointerEvents)||"",$.transform=v?v(this.latestValues,""):"none",$;const y=this.getLead();if(!this.projectionDelta||!this.layout||!y.target){const I={};return this.options.layoutId&&(I.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,I.pointerEvents=Z$(h?.pointerEvents)||""),this.hasProjected&&!Ou(this.latestValues)&&(I.transform=v?v({},""):"none",this.hasProjected=!1),I}const w=y.animationValues||y.latestValues;this.applyTransformsToTarget(),$.transform=Wj(this.projectionDeltaWithTransform,this.treeScale,w),v&&($.transform=v(w,$.transform));const{x:S,y:O}=this.projectionDelta;$.transformOrigin=`${S.origin*100}% ${O.origin*100}% 0`,y.animationValues?$.opacity=y===this?(g=(f=w.opacity)!==null&&f!==void 0?f:this.latestValues.opacity)!==null&&g!==void 0?g:1:this.preserveOpacity?this.latestValues.opacity:w.opacityExit:$.opacity=y===this?w.opacity!==void 0?w.opacity:"":w.opacityExit!==void 0?w.opacityExit:0;for(const I in g_){if(w[I]===void 0)continue;const{correct:x,applyTo:A}=g_[I],M=$.transform==="none"?w[I]:x(w[I],y);if(A){const P=A.length;for(let F=0;F<P;F++)$[A[F]]=M}else $[I]=M}return this.options.layoutId&&($.pointerEvents=y===this?Z$(h?.pointerEvents)||"":"none"),$}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(h=>{var f;return(f=h.currentAnimation)===null||f===void 0?void 0:f.stop()}),this.root.nodes.forEach(pR),this.root.sharedNodes.clear()}}}function Xj(t){t.updateLayout()}function Yj(t){var r;const s=((r=t.resumeFrom)===null||r===void 0?void 0:r.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&s&&t.hasListeners("didUpdate")){const{layoutBox:o,measuredBox:a}=t.layout,{animationType:d}=t.options,h=s.source!==t.layout.source;d==="size"?vo(y=>{const w=h?s.measuredBox[y]:s.layoutBox[y],S=Vs(w);w.min=o[y].min,w.max=w.min+S}):tA(d,s.layoutBox,o)&&vo(y=>{const w=h?s.measuredBox[y]:s.layoutBox[y],S=Vs(o[y]);w.max=w.min+S,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[y].max=t.relativeTarget[y].min+S)});const f=Jh();jm(f,o,s.layoutBox);const g=Jh();h?jm(g,t.applyTransform(a,!0),s.measuredBox):jm(g,o,s.layoutBox);const $=!JO(f);let v=!1;if(!t.resumeFrom){const y=t.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:w,layout:S}=y;if(w&&S){const O=In();Wm(O,s.layoutBox,w.layoutBox);const I=In();Wm(I,o,S.layoutBox),QO(O,I)||(v=!0),y.options.layoutRoot&&(t.relativeTarget=I,t.relativeTargetOrigin=O,t.relativeParent=y)}}}t.notifyListeners("didUpdate",{layout:o,snapshot:s,delta:g,layoutDelta:f,hasLayoutChanged:$,hasRelativeTargetChanged:v})}else if(t.isLead()){const{onExitComplete:o}=t.options;o&&o()}t.options.transition=void 0}function qj(t){Mm&&Au.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Jj(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Qj(t){t.clearSnapshot()}function pR(t){t.clearMeasurements()}function Zj(t){t.isLayoutDirty=!1}function eW(t){const{visualElement:r}=t.options;r&&r.getProps().onBeforeLayoutMeasure&&r.notify("BeforeLayoutMeasure"),t.resetTransform()}function fR(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function tW(t){t.resolveTargetDelta()}function nW(t){t.calcProjection()}function rW(t){t.resetSkewAndRotation()}function sW(t){t.removeLeadSnapshot()}function mR(t,r,s){t.translate=gn(r.translate,0,s),t.scale=gn(r.scale,1,s),t.origin=r.origin,t.originPoint=r.originPoint}function gR(t,r,s,o){t.min=gn(r.min,s.min,o),t.max=gn(r.max,s.max,o)}function oW(t,r,s,o){gR(t.x,r.x,s.x,o),gR(t.y,r.y,s.y,o)}function iW(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const lW={duration:.45,ease:[.4,0,.1,1]},$R=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),_R=$R("applewebkit/")&&!$R("chrome/")?Math.round:Us;function vR(t){t.min=_R(t.min),t.max=_R(t.max)}function aW(t){vR(t.x),vR(t.y)}function tA(t,r,s){return t==="position"||t==="preserve-aspect"&&!dj(uR(r),uR(s),.2)}function cW(t){var r;return t!==t.root&&((r=t.scroll)===null||r===void 0?void 0:r.wasRoot)}const uW=eA({attachResizeListener:(t,r)=>ng(t,"resize",r),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),zy={current:void 0},nA=eA({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!zy.current){const t=new uW({});t.mount(window),t.setOptions({layoutScroll:!0}),zy.current=t}return zy.current},resetTransform:(t,r)=>{t.style.transform=r!==void 0?r:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),dW={pan:{Feature:Ij},drag:{Feature:Cj,ProjectionNode:nA,MeasureLayout:XO}};function yR(t,r,s){const{props:o}=t;t.animationState&&o.whileHover&&t.animationState.setActive("whileHover",s==="Start");const a="onHover"+s,d=o[a];d&&sn.postRender(()=>d(r,yg(r)))}class hW extends rc{mount(){const{current:r}=this.node;r&&(this.unmount=d2(r,s=>(yR(this.node,s,"Start"),o=>yR(this.node,o,"End"))))}unmount(){}}class pW extends rc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let r=!1;try{r=this.node.current.matches(":focus-visible")}catch{r=!0}!r||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=vg(ng(this.node.current,"focus",()=>this.onFocus()),ng(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function TR(t,r,s){const{props:o}=t;t.animationState&&o.whileTap&&t.animationState.setActive("whileTap",s==="Start");const a="onTap"+(s==="End"?"":s),d=o[a];d&&sn.postRender(()=>d(r,yg(r)))}class fW extends rc{mount(){const{current:r}=this.node;r&&(this.unmount=m2(r,s=>(TR(this.node,s,"Start"),(o,{success:a})=>TR(this.node,o,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ZT=new WeakMap,Ky=new WeakMap,mW=t=>{const r=ZT.get(t.target);r&&r(t)},gW=t=>{t.forEach(mW)};function $W({root:t,...r}){const s=t||document;Ky.has(s)||Ky.set(s,{});const o=Ky.get(s),a=JSON.stringify(r);return o[a]||(o[a]=new IntersectionObserver(gW,{root:t,...r})),o[a]}function _W(t,r,s){const o=$W(r);return ZT.set(t,s),o.observe(t),()=>{ZT.delete(t),o.unobserve(t)}}const vW={some:0,all:1};class yW extends rc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:r={}}=this.node.getProps(),{root:s,margin:o,amount:a="some",once:d}=r,h={root:s?s.current:void 0,rootMargin:o,threshold:typeof a=="number"?a:vW[a]},f=g=>{const{isIntersecting:$}=g;if(this.isInView===$||(this.isInView=$,d&&!$&&this.hasEnteredView))return;$&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",$);const{onViewportEnter:v,onViewportLeave:y}=this.node.getProps(),w=$?v:y;w&&w(g)};return _W(this.node.current,h,f)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:r,prevProps:s}=this.node;["amount","margin","root"].some(TW(r,s))&&this.startObserver()}unmount(){}}function TW({viewport:t={}},{viewport:r={}}={}){return s=>t[s]!==r[s]}const bW={inView:{Feature:yW},tap:{Feature:fW},focus:{Feature:pW},hover:{Feature:hW}},EW={layout:{ProjectionNode:nA,MeasureLayout:XO}},eb={current:null},rA={current:!1};function wW(){if(rA.current=!0,!!aE)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),r=()=>eb.current=t.matches;t.addListener(r),r()}else eb.current=!1}const SW=[...RO,Rr,nc],CW=t=>SW.find(IO(t)),bR=new WeakMap;function IW(t,r,s){for(const o in r){const a=r[o],d=s[o];if(kr(a))t.addValue(o,a);else if(kr(d))t.addValue(o,eg(a,{owner:t}));else if(d!==a)if(t.hasValue(o)){const h=t.getValue(o);h.liveStyle===!0?h.jump(a):h.hasAnimated||h.set(a)}else{const h=t.getStaticValue(o);t.addValue(o,eg(h!==void 0?h:a,{owner:t}))}}for(const o in s)r[o]===void 0&&t.removeValue(o);return r}const ER=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class RW{scrapeMotionValuesFromProps(r,s,o){return{}}constructor({parent:r,props:s,presenceContext:o,reducedMotionConfig:a,blockInitialAnimation:d,visualState:h},f={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ME,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const S=Gi.now();this.renderScheduledAt<S&&(this.renderScheduledAt=S,sn.render(this.render,!1,!0))};const{latestValues:g,renderState:$,onUpdate:v}=h;this.onUpdate=v,this.latestValues=g,this.baseTarget={...g},this.initialValues=s.initial?{...g}:{},this.renderState=$,this.parent=r,this.props=s,this.presenceContext=o,this.depth=r?r.depth+1:0,this.reducedMotionConfig=a,this.options=f,this.blockInitialAnimation=!!d,this.isControllingVariants=tv(s),this.isVariantNode=Px(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(r&&r.current);const{willChange:y,...w}=this.scrapeMotionValuesFromProps(s,{},this);for(const S in w){const O=w[S];g[S]!==void 0&&kr(O)&&O.set(g[S],!1)}}mount(r){this.current=r,bR.set(r,this),this.projection&&!this.projection.instance&&this.projection.mount(r),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,o)=>this.bindToMotionValue(o,s)),rA.current||wW(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:eb.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){bR.delete(this.current),this.projection&&this.projection.unmount(),tc(this.notifyUpdate),tc(this.render),this.valueSubscriptions.forEach(r=>r()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const r in this.events)this.events[r].clear();for(const r in this.features){const s=this.features[r];s&&(s.unmount(),s.isMounted=!1)}this.current=null}bindToMotionValue(r,s){this.valueSubscriptions.has(r)&&this.valueSubscriptions.get(r)();const o=Zu.has(r),a=s.on("change",f=>{this.latestValues[r]=f,this.props.onUpdate&&sn.preRender(this.notifyUpdate),o&&this.projection&&(this.projection.isTransformDirty=!0)}),d=s.on("renderRequest",this.scheduleRender);let h;window.MotionCheckAppearSync&&(h=window.MotionCheckAppearSync(this,r,s)),this.valueSubscriptions.set(r,()=>{a(),d(),h&&h(),s.owner&&s.stop()})}sortNodePosition(r){return!this.current||!this.sortInstanceNodePosition||this.type!==r.type?0:this.sortInstanceNodePosition(this.current,r.current)}updateFeatures(){let r="animation";for(r in pp){const s=pp[r];if(!s)continue;const{isEnabled:o,Feature:a}=s;if(!this.features[r]&&a&&o(this.props)&&(this.features[r]=new a(this)),this.features[r]){const d=this.features[r];d.isMounted?d.update():(d.mount(),d.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):In()}getStaticValue(r){return this.latestValues[r]}setStaticValue(r,s){this.latestValues[r]=s}update(r,s){(r.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=r,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let o=0;o<ER.length;o++){const a=ER[o];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const d="on"+a,h=r[d];h&&(this.propEventSubscriptions[a]=this.on(a,h))}this.prevMotionValues=IW(this,this.scrapeMotionValuesFromProps(r,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(r){return this.props.variants?this.props.variants[r]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(r){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(r),()=>s.variantChildren.delete(r)}addValue(r,s){const o=this.values.get(r);s!==o&&(o&&this.removeValue(r),this.bindToMotionValue(r,s),this.values.set(r,s),this.latestValues[r]=s.get())}removeValue(r){this.values.delete(r);const s=this.valueSubscriptions.get(r);s&&(s(),this.valueSubscriptions.delete(r)),delete this.latestValues[r],this.removeValueFromRenderState(r,this.renderState)}hasValue(r){return this.values.has(r)}getValue(r,s){if(this.props.values&&this.props.values[r])return this.props.values[r];let o=this.values.get(r);return o===void 0&&s!==void 0&&(o=eg(s===null?void 0:s,{owner:this}),this.addValue(r,o)),o}readValue(r,s){var o;let a=this.latestValues[r]!==void 0||!this.current?this.latestValues[r]:(o=this.getBaseTargetFromProps(this.props,r))!==null&&o!==void 0?o:this.readValueFromInstance(this.current,r,this.options);return a!=null&&(typeof a=="string"&&(SO(a)||gO(a))?a=parseFloat(a):!CW(a)&&nc.test(s)&&(a=bO(r,s)),this.setBaseTarget(r,kr(a)?a.get():a)),kr(a)?a.get():a}setBaseTarget(r,s){this.baseTarget[r]=s}getBaseTarget(r){var s;const{initial:o}=this.props;let a;if(typeof o=="string"||typeof o=="object"){const h=mE(this.props,o,(s=this.presenceContext)===null||s===void 0?void 0:s.custom);h&&(a=h[r])}if(o&&a!==void 0)return a;const d=this.getBaseTargetFromProps(this.props,r);return d!==void 0&&!kr(d)?d:this.initialValues[r]!==void 0&&a===void 0?void 0:this.baseTarget[r]}on(r,s){return this.events[r]||(this.events[r]=new kE),this.events[r].add(s)}notify(r,...s){this.events[r]&&this.events[r].notify(...s)}}class sA extends RW{constructor(){super(...arguments),this.KeyframeResolver=kO}sortInstanceNodePosition(r,s){return r.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(r,s){return r.style?r.style[s]:void 0}removeValueFromRenderState(r,{vars:s,style:o}){delete s[r],delete o[r]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:r}=this.props;kr(r)&&(this.childSubscription=r.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function kW(t){return window.getComputedStyle(t)}class xW extends sA{constructor(){super(...arguments),this.type="html",this.renderInstance=Wx}readValueFromInstance(r,s){if(Zu.has(s)){const o=LE(s);return o&&o.default||0}else{const o=kW(r),a=(Hx(s)?o.getPropertyValue(s):o[s])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(r,{transformPagePoint:s}){return zO(r,s)}build(r,s,o){_E(r,s,o.transformTemplate)}scrapeMotionValuesFromProps(r,s,o){return bE(r,s,o)}}class OW extends sA{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=In}getBaseTargetFromProps(r,s){return r[s]}readValueFromInstance(r,s){if(Zu.has(s)){const o=LE(s);return o&&o.default||0}return s=zx.has(s)?s:hE(s),r.getAttribute(s)}scrapeMotionValuesFromProps(r,s,o){return Yx(r,s,o)}build(r,s,o){vE(r,s,this.isSVGTag,o.transformTemplate)}renderInstance(r,s,o,a){Kx(r,s,o,a)}mount(r){this.isSVGTag=TE(r.tagName),super.mount(r)}}const AW=(t,r)=>fE(t)?new OW(r):new xW(r,{allowProjection:t!==E.Fragment}),NW=s2({...nj,...bW,...dW,...EW},AW),Wr=vH(NW),wR=()=>{const{consoleMessages:t,clearConsole:r}=Qu(),s=E.useRef(null);E.useEffect(()=>{s.current&&(s.current.scrollTop=s.current.scrollHeight)},[t]);const o=d=>{switch(d){case"error":return R.jsx(e0,{className:"w-4 h-4 text-destructive flex-shrink-0"});case"warning":return R.jsx(DD,{className:"w-4 h-4 text-warning flex-shrink-0"});case"success":return R.jsx(ED,{className:"w-4 h-4 text-success flex-shrink-0"});default:return R.jsx(OD,{className:"w-4 h-4 text-primary/70 flex-shrink-0"})}},a=d=>{switch(d){case"error":return"text-destructive bg-destructive/10 border-destructive/20";case"warning":return"text-warning bg-warning/10 border-warning/20";case"success":return"text-success bg-success/10 border-success/20";default:return"text-foreground bg-muted/30 border-border"}};return R.jsxs("div",{className:"flex flex-col h-full bg-gradient-to-b from-card to-muted/20 rounded-b-2xl overflow-hidden",children:[R.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border bg-muted/30",children:[R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx(o_,{className:"w-4 h-4 text-warning"}),R.jsx("span",{className:"text-sm font-bold text-foreground",children:"Consola"}),t.length>0&&R.jsx("span",{className:"px-2 py-0.5 rounded-full bg-warning/15 text-warning text-[10px] font-bold border border-warning/30",children:t.length})]}),R.jsx(Vu,{variant:"ghost",size:"sm",onClick:r,className:"h-8 w-8 p-0 rounded-xl text-muted-foreground hover:text-destructive hover:bg-destructive/10 transition-colors",children:R.jsx(t0,{className:"w-4 h-4"})})]}),R.jsx(J_,{className:"flex-1",ref:s,children:R.jsx("div",{className:"p-4 space-y-2",children:t.length===0?R.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[R.jsx("div",{className:"w-16 h-16 rounded-2xl bg-muted/40 flex items-center justify-center mb-4 border-2 border-border",children:R.jsx(o_,{className:"w-8 h-8 text-muted-foreground/50"})}),R.jsx("p",{className:"text-muted-foreground text-sm font-medium",children:"La salida aparecer aqu"})]}):R.jsx(op,{children:t.map(d=>R.jsxs(Wr.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:`flex items-start gap-3 p-3 rounded-xl border-2 ${a(d.type)} font-mono text-xs`,children:[o(d.type),R.jsxs("div",{className:"flex-1 min-w-0",children:[R.jsx("span",{className:"text-muted-foreground text-[10px] block mb-1 font-sans",children:d.timestamp.toLocaleTimeString()}),R.jsx("span",{className:"break-all leading-relaxed",children:d.message})]})]},d.id))})})})]})},FE=E.forwardRef(({className:t,type:r,...s},o)=>R.jsx("input",{type:r,className:pt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:o,...s}));FE.displayName="Input";var Xy=0;function UE(){E.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??SR()),document.body.insertAdjacentElement("beforeend",t[1]??SR()),Xy++,()=>{Xy===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),Xy--}},[])}function SR(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Yy="focusScope.autoFocusOnMount",qy="focusScope.autoFocusOnUnmount",CR={bubbles:!1,cancelable:!0},LW="FocusScope",sv=E.forwardRef((t,r)=>{const{loop:s=!1,trapped:o=!1,onMountAutoFocus:a,onUnmountAutoFocus:d,...h}=t,[f,g]=E.useState(null),$=Rn(a),v=Rn(d),y=E.useRef(null),w=_t(r,I=>g(I)),S=E.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;E.useEffect(()=>{if(o){let I=function(P){if(S.paused||!f)return;const F=P.target;f.contains(F)?y.current=F:Xa(y.current,{select:!0})},x=function(P){if(S.paused||!f)return;const F=P.relatedTarget;F!==null&&(f.contains(F)||Xa(y.current,{select:!0}))},A=function(P){if(document.activeElement===document.body)for(const B of P)B.removedNodes.length>0&&Xa(f)};document.addEventListener("focusin",I),document.addEventListener("focusout",x);const M=new MutationObserver(A);return f&&M.observe(f,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",I),document.removeEventListener("focusout",x),M.disconnect()}}},[o,f,S.paused]),E.useEffect(()=>{if(f){RR.add(S);const I=document.activeElement;if(!f.contains(I)){const A=new CustomEvent(Yy,CR);f.addEventListener(Yy,$),f.dispatchEvent(A),A.defaultPrevented||(MW(UW(oA(f)),{select:!0}),document.activeElement===I&&Xa(f))}return()=>{f.removeEventListener(Yy,$),setTimeout(()=>{const A=new CustomEvent(qy,CR);f.addEventListener(qy,v),f.dispatchEvent(A),A.defaultPrevented||Xa(I??document.body,{select:!0}),f.removeEventListener(qy,v),RR.remove(S)},0)}}},[f,$,v,S]);const O=E.useCallback(I=>{if(!s&&!o||S.paused)return;const x=I.key==="Tab"&&!I.altKey&&!I.ctrlKey&&!I.metaKey,A=document.activeElement;if(x&&A){const M=I.currentTarget,[P,F]=PW(M);P&&F?!I.shiftKey&&A===F?(I.preventDefault(),s&&Xa(P,{select:!0})):I.shiftKey&&A===P&&(I.preventDefault(),s&&Xa(F,{select:!0})):A===M&&I.preventDefault()}},[s,o,S.paused]);return R.jsx(Ze.div,{tabIndex:-1,...h,ref:w,onKeyDown:O})});sv.displayName=LW;function MW(t,{select:r=!1}={}){const s=document.activeElement;for(const o of t)if(Xa(o,{select:r}),document.activeElement!==s)return}function PW(t){const r=oA(t),s=IR(r,t),o=IR(r.reverse(),t);return[s,o]}function oA(t){const r=[],s=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const a=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||a?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)r.push(s.currentNode);return r}function IR(t,r){for(const s of t)if(!DW(s,{upTo:r}))return s}function DW(t,{upTo:r}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(r!==void 0&&t===r)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function BW(t){return t instanceof HTMLInputElement&&"select"in t}function Xa(t,{select:r=!1}={}){if(t&&t.focus){const s=document.activeElement;t.focus({preventScroll:!0}),t!==s&&BW(t)&&r&&t.select()}}var RR=FW();function FW(){let t=[];return{add(r){const s=t[0];r!==s&&s?.pause(),t=kR(t,r),t.unshift(r)},remove(r){t=kR(t,r),t[0]?.resume()}}}function kR(t,r){const s=[...t],o=s.indexOf(r);return o!==-1&&s.splice(o,1),s}function UW(t){return t.filter(r=>r.tagName!=="A")}function VW(t){const r=E.useRef({value:t,previous:t});return E.useMemo(()=>(r.current.value!==t&&(r.current.previous=r.current.value,r.current.value=t),r.current.previous),[t])}var HW=function(t){if(typeof document>"u")return null;var r=Array.isArray(t)?t[0]:t;return r.ownerDocument.body},Nh=new WeakMap,P$=new WeakMap,D$={},Jy=0,iA=function(t){return t&&(t.host||iA(t.parentNode))},GW=function(t,r){return r.map(function(s){if(t.contains(s))return s;var o=iA(s);return o&&t.contains(o)?o:(console.error("aria-hidden",s,"in not contained inside",t,". Doing nothing"),null)}).filter(function(s){return!!s})},jW=function(t,r,s,o){var a=GW(r,Array.isArray(t)?t:[t]);D$[s]||(D$[s]=new WeakMap);var d=D$[s],h=[],f=new Set,g=new Set(a),$=function(y){!y||f.has(y)||(f.add(y),$(y.parentNode))};a.forEach($);var v=function(y){!y||g.has(y)||Array.prototype.forEach.call(y.children,function(w){if(f.has(w))v(w);else try{var S=w.getAttribute(o),O=S!==null&&S!=="false",I=(Nh.get(w)||0)+1,x=(d.get(w)||0)+1;Nh.set(w,I),d.set(w,x),h.push(w),I===1&&O&&P$.set(w,!0),x===1&&w.setAttribute(s,"true"),O||w.setAttribute(o,"true")}catch(A){console.error("aria-hidden: cannot operate on ",w,A)}})};return v(r),f.clear(),Jy++,function(){h.forEach(function(y){var w=Nh.get(y)-1,S=d.get(y)-1;Nh.set(y,w),d.set(y,S),w||(P$.has(y)||y.removeAttribute(o),P$.delete(y)),S||y.removeAttribute(s)}),Jy--,Jy||(Nh=new WeakMap,Nh=new WeakMap,P$=new WeakMap,D$={})}},VE=function(t,r,s){s===void 0&&(s="data-aria-hidden");var o=Array.from(Array.isArray(t)?t:[t]),a=HW(t);return a?(o.push.apply(o,Array.from(a.querySelectorAll("[aria-live]"))),jW(o,a,s,"aria-hidden")):function(){return null}},Bi=function(){return Bi=Object.assign||function(r){for(var s,o=1,a=arguments.length;o<a;o++){s=arguments[o];for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&(r[d]=s[d])}return r},Bi.apply(this,arguments)};function Ep(t,r){var s={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&r.indexOf(o)<0&&(s[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(t);a<o.length;a++)r.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(t,o[a])&&(s[o[a]]=t[o[a]]);return s}function WW(t,r,s,o){function a(d){return d instanceof s?d:new s(function(h){h(d)})}return new(s||(s=Promise))(function(d,h){function f(v){try{$(o.next(v))}catch(y){h(y)}}function g(v){try{$(o.throw(v))}catch(y){h(y)}}function $(v){v.done?d(v.value):a(v.value).then(f,g)}$((o=o.apply(t,r||[])).next())})}function zW(t,r,s){if(s||arguments.length===2)for(var o=0,a=r.length,d;o<a;o++)(d||!(o in r))&&(d||(d=Array.prototype.slice.call(r,0,o)),d[o]=r[o]);return t.concat(d||Array.prototype.slice.call(r))}var n_="right-scroll-bar-position",r_="width-before-scroll-bar",KW="with-scroll-bars-hidden",XW="--removed-body-scroll-bar-size";function Qy(t,r){return typeof t=="function"?t(r):t&&(t.current=r),t}function YW(t,r){var s=E.useState(function(){return{value:t,callback:r,facade:{get current(){return s.value},set current(o){var a=s.value;a!==o&&(s.value=o,s.callback(o,a))}}}})[0];return s.callback=r,s.facade}var qW=typeof window<"u"?E.useLayoutEffect:E.useEffect,xR=new WeakMap;function JW(t,r){var s=YW(null,function(o){return t.forEach(function(a){return Qy(a,o)})});return qW(function(){var o=xR.get(s);if(o){var a=new Set(o),d=new Set(t),h=s.current;a.forEach(function(f){d.has(f)||Qy(f,null)}),d.forEach(function(f){a.has(f)||Qy(f,h)})}xR.set(s,t)},[t]),s}function QW(t){return t}function ZW(t,r){r===void 0&&(r=QW);var s=[],o=!1,a={read:function(){if(o)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:t},useMedium:function(d){var h=r(d,o);return s.push(h),function(){s=s.filter(function(f){return f!==h})}},assignSyncMedium:function(d){for(o=!0;s.length;){var h=s;s=[],h.forEach(d)}s={push:function(f){return d(f)},filter:function(){return s}}},assignMedium:function(d){o=!0;var h=[];if(s.length){var f=s;s=[],f.forEach(d),h=s}var g=function(){var v=h;h=[],v.forEach(d)},$=function(){return Promise.resolve().then(g)};$(),s={push:function(v){h.push(v),$()},filter:function(v){return h=h.filter(v),s}}}};return a}function ez(t){t===void 0&&(t={});var r=ZW(null);return r.options=Bi({async:!0,ssr:!1},t),r}var lA=function(t){var r=t.sideCar,s=Ep(t,["sideCar"]);if(!r)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var o=r.read();if(!o)throw new Error("Sidecar medium not found");return E.createElement(o,Bi({},s))};lA.isSideCarExport=!0;function tz(t,r){return t.useMedium(r),lA}var aA=ez(),Zy=function(){},ov=E.forwardRef(function(t,r){var s=E.useRef(null),o=E.useState({onScrollCapture:Zy,onWheelCapture:Zy,onTouchMoveCapture:Zy}),a=o[0],d=o[1],h=t.forwardProps,f=t.children,g=t.className,$=t.removeScrollBar,v=t.enabled,y=t.shards,w=t.sideCar,S=t.noRelative,O=t.noIsolation,I=t.inert,x=t.allowPinchZoom,A=t.as,M=A===void 0?"div":A,P=t.gapMode,F=Ep(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),B=w,V=JW([s,r]),j=Bi(Bi({},F),a);return E.createElement(E.Fragment,null,v&&E.createElement(B,{sideCar:aA,removeScrollBar:$,shards:y,noRelative:S,noIsolation:O,inert:I,setCallbacks:d,allowPinchZoom:!!x,lockRef:s,gapMode:P}),h?E.cloneElement(E.Children.only(f),Bi(Bi({},j),{ref:V})):E.createElement(M,Bi({},j,{className:g,ref:V}),f))});ov.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ov.classNames={fullWidth:r_,zeroRight:n_};var nz=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function rz(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var r=nz();return r&&t.setAttribute("nonce",r),t}function sz(t,r){t.styleSheet?t.styleSheet.cssText=r:t.appendChild(document.createTextNode(r))}function oz(t){var r=document.head||document.getElementsByTagName("head")[0];r.appendChild(t)}var iz=function(){var t=0,r=null;return{add:function(s){t==0&&(r=rz())&&(sz(r,s),oz(r)),t++},remove:function(){t--,!t&&r&&(r.parentNode&&r.parentNode.removeChild(r),r=null)}}},lz=function(){var t=iz();return function(r,s){E.useEffect(function(){return t.add(r),function(){t.remove()}},[r&&s])}},cA=function(){var t=lz(),r=function(s){var o=s.styles,a=s.dynamic;return t(o,a),null};return r},az={left:0,top:0,right:0,gap:0},eT=function(t){return parseInt(t||"",10)||0},cz=function(t){var r=window.getComputedStyle(document.body),s=r[t==="padding"?"paddingLeft":"marginLeft"],o=r[t==="padding"?"paddingTop":"marginTop"],a=r[t==="padding"?"paddingRight":"marginRight"];return[eT(s),eT(o),eT(a)]},uz=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return az;var r=cz(t),s=document.documentElement.clientWidth,o=window.innerWidth;return{left:r[0],top:r[1],right:r[2],gap:Math.max(0,o-s+r[2]-r[0])}},dz=cA(),ip="data-scroll-locked",hz=function(t,r,s,o){var a=t.left,d=t.top,h=t.right,f=t.gap;return s===void 0&&(s="margin"),`
  .`.concat(KW,` {
   overflow: hidden `).concat(o,`;
   padding-right: `).concat(f,"px ").concat(o,`;
  }
  body[`).concat(ip,`] {
    overflow: hidden `).concat(o,`;
    overscroll-behavior: contain;
    `).concat([r&&"position: relative ".concat(o,";"),s==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(d,`px;
    padding-right: `).concat(h,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(f,"px ").concat(o,`;
    `),s==="padding"&&"padding-right: ".concat(f,"px ").concat(o,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(n_,` {
    right: `).concat(f,"px ").concat(o,`;
  }
  
  .`).concat(r_,` {
    margin-right: `).concat(f,"px ").concat(o,`;
  }
  
  .`).concat(n_," .").concat(n_,` {
    right: 0 `).concat(o,`;
  }
  
  .`).concat(r_," .").concat(r_,` {
    margin-right: 0 `).concat(o,`;
  }
  
  body[`).concat(ip,`] {
    `).concat(XW,": ").concat(f,`px;
  }
`)},OR=function(){var t=parseInt(document.body.getAttribute(ip)||"0",10);return isFinite(t)?t:0},pz=function(){E.useEffect(function(){return document.body.setAttribute(ip,(OR()+1).toString()),function(){var t=OR()-1;t<=0?document.body.removeAttribute(ip):document.body.setAttribute(ip,t.toString())}},[])},fz=function(t){var r=t.noRelative,s=t.noImportant,o=t.gapMode,a=o===void 0?"margin":o;pz();var d=E.useMemo(function(){return uz(a)},[a]);return E.createElement(dz,{styles:hz(d,!r,a,s?"":"!important")})},tb=!1;if(typeof window<"u")try{var B$=Object.defineProperty({},"passive",{get:function(){return tb=!0,!0}});window.addEventListener("test",B$,B$),window.removeEventListener("test",B$,B$)}catch{tb=!1}var Lh=tb?{passive:!1}:!1,mz=function(t){return t.tagName==="TEXTAREA"},uA=function(t,r){if(!(t instanceof Element))return!1;var s=window.getComputedStyle(t);return s[r]!=="hidden"&&!(s.overflowY===s.overflowX&&!mz(t)&&s[r]==="visible")},gz=function(t){return uA(t,"overflowY")},$z=function(t){return uA(t,"overflowX")},AR=function(t,r){var s=r.ownerDocument,o=r;do{typeof ShadowRoot<"u"&&o instanceof ShadowRoot&&(o=o.host);var a=dA(t,o);if(a){var d=hA(t,o),h=d[1],f=d[2];if(h>f)return!0}o=o.parentNode}while(o&&o!==s.body);return!1},_z=function(t){var r=t.scrollTop,s=t.scrollHeight,o=t.clientHeight;return[r,s,o]},vz=function(t){var r=t.scrollLeft,s=t.scrollWidth,o=t.clientWidth;return[r,s,o]},dA=function(t,r){return t==="v"?gz(r):$z(r)},hA=function(t,r){return t==="v"?_z(r):vz(r)},yz=function(t,r){return t==="h"&&r==="rtl"?-1:1},Tz=function(t,r,s,o,a){var d=yz(t,window.getComputedStyle(r).direction),h=d*o,f=s.target,g=r.contains(f),$=!1,v=h>0,y=0,w=0;do{if(!f)break;var S=hA(t,f),O=S[0],I=S[1],x=S[2],A=I-x-d*O;(O||A)&&dA(t,f)&&(y+=A,w+=O);var M=f.parentNode;f=M&&M.nodeType===Node.DOCUMENT_FRAGMENT_NODE?M.host:M}while(!g&&f!==document.body||g&&(r.contains(f)||r===f));return(v&&Math.abs(y)<1||!v&&Math.abs(w)<1)&&($=!0),$},F$=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},NR=function(t){return[t.deltaX,t.deltaY]},LR=function(t){return t&&"current"in t?t.current:t},bz=function(t,r){return t[0]===r[0]&&t[1]===r[1]},Ez=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},wz=0,Mh=[];function Sz(t){var r=E.useRef([]),s=E.useRef([0,0]),o=E.useRef(),a=E.useState(wz++)[0],d=E.useState(cA)[0],h=E.useRef(t);E.useEffect(function(){h.current=t},[t]),E.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(a));var I=zW([t.lockRef.current],(t.shards||[]).map(LR),!0).filter(Boolean);return I.forEach(function(x){return x.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),I.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(a))})}}},[t.inert,t.lockRef.current,t.shards]);var f=E.useCallback(function(I,x){if("touches"in I&&I.touches.length===2||I.type==="wheel"&&I.ctrlKey)return!h.current.allowPinchZoom;var A=F$(I),M=s.current,P="deltaX"in I?I.deltaX:M[0]-A[0],F="deltaY"in I?I.deltaY:M[1]-A[1],B,V=I.target,j=Math.abs(P)>Math.abs(F)?"h":"v";if("touches"in I&&j==="h"&&V.type==="range")return!1;var W=AR(j,V);if(!W)return!0;if(W?B=j:(B=j==="v"?"h":"v",W=AR(j,V)),!W)return!1;if(!o.current&&"changedTouches"in I&&(P||F)&&(o.current=B),!B)return!0;var he=o.current||B;return Tz(he,x,I,he==="h"?P:F)},[]),g=E.useCallback(function(I){var x=I;if(!(!Mh.length||Mh[Mh.length-1]!==d)){var A="deltaY"in x?NR(x):F$(x),M=r.current.filter(function(B){return B.name===x.type&&(B.target===x.target||x.target===B.shadowParent)&&bz(B.delta,A)})[0];if(M&&M.should){x.cancelable&&x.preventDefault();return}if(!M){var P=(h.current.shards||[]).map(LR).filter(Boolean).filter(function(B){return B.contains(x.target)}),F=P.length>0?f(x,P[0]):!h.current.noIsolation;F&&x.cancelable&&x.preventDefault()}}},[]),$=E.useCallback(function(I,x,A,M){var P={name:I,delta:x,target:A,should:M,shadowParent:Cz(A)};r.current.push(P),setTimeout(function(){r.current=r.current.filter(function(F){return F!==P})},1)},[]),v=E.useCallback(function(I){s.current=F$(I),o.current=void 0},[]),y=E.useCallback(function(I){$(I.type,NR(I),I.target,f(I,t.lockRef.current))},[]),w=E.useCallback(function(I){$(I.type,F$(I),I.target,f(I,t.lockRef.current))},[]);E.useEffect(function(){return Mh.push(d),t.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:w}),document.addEventListener("wheel",g,Lh),document.addEventListener("touchmove",g,Lh),document.addEventListener("touchstart",v,Lh),function(){Mh=Mh.filter(function(I){return I!==d}),document.removeEventListener("wheel",g,Lh),document.removeEventListener("touchmove",g,Lh),document.removeEventListener("touchstart",v,Lh)}},[]);var S=t.removeScrollBar,O=t.inert;return E.createElement(E.Fragment,null,O?E.createElement(d,{styles:Ez(a)}):null,S?E.createElement(fz,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Cz(t){for(var r=null;t!==null;)t instanceof ShadowRoot&&(r=t.host,t=t.host),t=t.parentNode;return r}const Iz=tz(aA,Sz);var iv=E.forwardRef(function(t,r){return E.createElement(ov,Bi({},t,{ref:r,sideCar:Iz}))});iv.classNames=ov.classNames;var Rz=[" ","Enter","ArrowUp","ArrowDown"],kz=[" ","Enter"],Ku="Select",[lv,av,xz]=M_(Ku),[wp]=To(Ku,[xz,yp]),cv=yp(),[Oz,sc]=wp(Ku),[Az,Nz]=wp(Ku),pA=t=>{const{__scopeSelect:r,children:s,open:o,defaultOpen:a,onOpenChange:d,value:h,defaultValue:f,onValueChange:g,dir:$,name:v,autoComplete:y,disabled:w,required:S,form:O}=t,I=cv(r),[x,A]=E.useState(null),[M,P]=E.useState(null),[F,B]=E.useState(!1),V=gg($),[j,W]=Wu({prop:o,defaultProp:a??!1,onChange:d,caller:Ku}),[he,we]=Wu({prop:h,defaultProp:f,onChange:g,caller:Ku}),Ee=E.useRef(null),ye=x?O||!!x.closest("form"):!0,[De,ce]=E.useState(new Set),Oe=Array.from(De).map(ie=>ie.props.value).join(";");return R.jsx(N0,{...I,children:R.jsxs(Oz,{required:S,scope:r,trigger:x,onTriggerChange:A,valueNode:M,onValueNodeChange:P,valueNodeHasChildren:F,onValueNodeHasChildrenChange:B,contentId:Ui(),value:he,onValueChange:we,open:j,onOpenChange:W,dir:V,triggerPointerDownPosRef:Ee,disabled:w,children:[R.jsx(lv.Provider,{scope:r,children:R.jsx(Az,{scope:t.__scopeSelect,onNativeOptionAdd:E.useCallback(ie=>{ce(pe=>new Set(pe).add(ie))},[]),onNativeOptionRemove:E.useCallback(ie=>{ce(pe=>{const G=new Set(pe);return G.delete(ie),G})},[]),children:s})}),ye?R.jsxs(DA,{"aria-hidden":!0,required:S,tabIndex:-1,name:v,autoComplete:y,value:he,onChange:ie=>we(ie.target.value),disabled:w,form:O,children:[he===void 0?R.jsx("option",{value:""}):null,Array.from(De)]},Oe):null]})})};pA.displayName=Ku;var fA="SelectTrigger",mA=E.forwardRef((t,r)=>{const{__scopeSelect:s,disabled:o=!1,...a}=t,d=cv(s),h=sc(fA,s),f=h.disabled||o,g=_t(r,h.onTriggerChange),$=av(s),v=E.useRef("touch"),[y,w,S]=FA(I=>{const x=$().filter(P=>!P.disabled),A=x.find(P=>P.value===h.value),M=UA(x,I,A);M!==void 0&&h.onValueChange(M.value)}),O=I=>{f||(h.onOpenChange(!0),S()),I&&(h.triggerPointerDownPosRef.current={x:Math.round(I.pageX),y:Math.round(I.pageY)})};return R.jsx(Xb,{asChild:!0,...d,children:R.jsx(Ze.button,{type:"button",role:"combobox","aria-controls":h.contentId,"aria-expanded":h.open,"aria-required":h.required,"aria-autocomplete":"none",dir:h.dir,"data-state":h.open?"open":"closed",disabled:f,"data-disabled":f?"":void 0,"data-placeholder":BA(h.value)?"":void 0,...a,ref:g,onClick:Pe(a.onClick,I=>{I.currentTarget.focus(),v.current!=="mouse"&&O(I)}),onPointerDown:Pe(a.onPointerDown,I=>{v.current=I.pointerType;const x=I.target;x.hasPointerCapture(I.pointerId)&&x.releasePointerCapture(I.pointerId),I.button===0&&I.ctrlKey===!1&&I.pointerType==="mouse"&&(O(I),I.preventDefault())}),onKeyDown:Pe(a.onKeyDown,I=>{const x=y.current!=="";!(I.ctrlKey||I.altKey||I.metaKey)&&I.key.length===1&&w(I.key),!(x&&I.key===" ")&&Rz.includes(I.key)&&(O(),I.preventDefault())})})})});mA.displayName=fA;var gA="SelectValue",$A=E.forwardRef((t,r)=>{const{__scopeSelect:s,className:o,style:a,children:d,placeholder:h="",...f}=t,g=sc(gA,s),{onValueNodeHasChildrenChange:$}=g,v=d!==void 0,y=_t(r,g.onValueNodeChange);return sr(()=>{$(v)},[$,v]),R.jsx(Ze.span,{...f,ref:y,style:{pointerEvents:"none"},children:BA(g.value)?R.jsx(R.Fragment,{children:h}):d})});$A.displayName=gA;var Lz="SelectIcon",_A=E.forwardRef((t,r)=>{const{__scopeSelect:s,children:o,...a}=t;return R.jsx(Ze.span,{"aria-hidden":!0,...a,ref:r,children:o||""})});_A.displayName=Lz;var Mz="SelectPortal",vA=t=>R.jsx(pg,{asChild:!0,...t});vA.displayName=Mz;var Xu="SelectContent",yA=E.forwardRef((t,r)=>{const s=sc(Xu,t.__scopeSelect),[o,a]=E.useState();if(sr(()=>{a(new DocumentFragment)},[]),!s.open){const d=o;return d?mp.createPortal(R.jsx(TA,{scope:t.__scopeSelect,children:R.jsx(lv.Slot,{scope:t.__scopeSelect,children:R.jsx("div",{children:t.children})})}),d):null}return R.jsx(bA,{...t,ref:r})});yA.displayName=Xu;var Ko=10,[TA,oc]=wp(Xu),Pz="SelectContentImpl",Dz=ju("SelectContent.RemoveScroll"),bA=E.forwardRef((t,r)=>{const{__scopeSelect:s,position:o="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:d,onPointerDownOutside:h,side:f,sideOffset:g,align:$,alignOffset:v,arrowPadding:y,collisionBoundary:w,collisionPadding:S,sticky:O,hideWhenDetached:I,avoidCollisions:x,...A}=t,M=sc(Xu,s),[P,F]=E.useState(null),[B,V]=E.useState(null),j=_t(r,te=>F(te)),[W,he]=E.useState(null),[we,Ee]=E.useState(null),ye=av(s),[De,ce]=E.useState(!1),Oe=E.useRef(!1);E.useEffect(()=>{if(P)return VE(P)},[P]),UE();const ie=E.useCallback(te=>{const[Se,...Le]=ye().map(ct=>ct.ref.current),[He]=Le.slice(-1),tt=document.activeElement;for(const ct of te)if(ct===tt||(ct?.scrollIntoView({block:"nearest"}),ct===Se&&B&&(B.scrollTop=0),ct===He&&B&&(B.scrollTop=B.scrollHeight),ct?.focus(),document.activeElement!==tt))return},[ye,B]),pe=E.useCallback(()=>ie([W,P]),[ie,W,P]);E.useEffect(()=>{De&&pe()},[De,pe]);const{onOpenChange:G,triggerPointerDownPosRef:ee}=M;E.useEffect(()=>{if(P){let te={x:0,y:0};const Se=He=>{te={x:Math.abs(Math.round(He.pageX)-(ee.current?.x??0)),y:Math.abs(Math.round(He.pageY)-(ee.current?.y??0))}},Le=He=>{te.x<=10&&te.y<=10?He.preventDefault():P.contains(He.target)||G(!1),document.removeEventListener("pointermove",Se),ee.current=null};return ee.current!==null&&(document.addEventListener("pointermove",Se),document.addEventListener("pointerup",Le,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Se),document.removeEventListener("pointerup",Le,{capture:!0})}}},[P,G,ee]),E.useEffect(()=>{const te=()=>G(!1);return window.addEventListener("blur",te),window.addEventListener("resize",te),()=>{window.removeEventListener("blur",te),window.removeEventListener("resize",te)}},[G]);const[$e,z]=FA(te=>{const Se=ye().filter(tt=>!tt.disabled),Le=Se.find(tt=>tt.ref.current===document.activeElement),He=UA(Se,te,Le);He&&setTimeout(()=>He.ref.current.focus())}),se=E.useCallback((te,Se,Le)=>{const He=!Oe.current&&!Le;(M.value!==void 0&&M.value===Se||He)&&(he(te),He&&(Oe.current=!0))},[M.value]),ae=E.useCallback(()=>P?.focus(),[P]),ne=E.useCallback((te,Se,Le)=>{const He=!Oe.current&&!Le;(M.value!==void 0&&M.value===Se||He)&&Ee(te)},[M.value]),me=o==="popper"?nb:EA,fe=me===nb?{side:f,sideOffset:g,align:$,alignOffset:v,arrowPadding:y,collisionBoundary:w,collisionPadding:S,sticky:O,hideWhenDetached:I,avoidCollisions:x}:{};return R.jsx(TA,{scope:s,content:P,viewport:B,onViewportChange:V,itemRefCallback:se,selectedItem:W,onItemLeave:ae,itemTextRefCallback:ne,focusSelectedItem:pe,selectedItemText:we,position:o,isPositioned:De,searchRef:$e,children:R.jsx(iv,{as:Dz,allowPinchZoom:!0,children:R.jsx(sv,{asChild:!0,trapped:M.open,onMountAutoFocus:te=>{te.preventDefault()},onUnmountAutoFocus:Pe(a,te=>{M.trigger?.focus({preventScroll:!0}),te.preventDefault()}),children:R.jsx(gp,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:te=>te.preventDefault(),onDismiss:()=>M.onOpenChange(!1),children:R.jsx(me,{role:"listbox",id:M.contentId,"data-state":M.open?"open":"closed",dir:M.dir,onContextMenu:te=>te.preventDefault(),...A,...fe,onPlaced:()=>ce(!0),ref:j,style:{display:"flex",flexDirection:"column",outline:"none",...A.style},onKeyDown:Pe(A.onKeyDown,te=>{const Se=te.ctrlKey||te.altKey||te.metaKey;if(te.key==="Tab"&&te.preventDefault(),!Se&&te.key.length===1&&z(te.key),["ArrowUp","ArrowDown","Home","End"].includes(te.key)){let He=ye().filter(tt=>!tt.disabled).map(tt=>tt.ref.current);if(["ArrowUp","End"].includes(te.key)&&(He=He.slice().reverse()),["ArrowUp","ArrowDown"].includes(te.key)){const tt=te.target,ct=He.indexOf(tt);He=He.slice(ct+1)}setTimeout(()=>ie(He)),te.preventDefault()}})})})})})})});bA.displayName=Pz;var Bz="SelectItemAlignedPosition",EA=E.forwardRef((t,r)=>{const{__scopeSelect:s,onPlaced:o,...a}=t,d=sc(Xu,s),h=oc(Xu,s),[f,g]=E.useState(null),[$,v]=E.useState(null),y=_t(r,j=>v(j)),w=av(s),S=E.useRef(!1),O=E.useRef(!0),{viewport:I,selectedItem:x,selectedItemText:A,focusSelectedItem:M}=h,P=E.useCallback(()=>{if(d.trigger&&d.valueNode&&f&&$&&I&&x&&A){const j=d.trigger.getBoundingClientRect(),W=$.getBoundingClientRect(),he=d.valueNode.getBoundingClientRect(),we=A.getBoundingClientRect();if(d.dir!=="rtl"){const tt=we.left-W.left,ct=he.left-tt,nt=j.left-ct,Rt=j.width+nt,Wt=Math.max(Rt,W.width),Mt=window.innerWidth-Ko,wn=BT(ct,[Ko,Math.max(Ko,Mt-Wt)]);f.style.minWidth=Rt+"px",f.style.left=wn+"px"}else{const tt=W.right-we.right,ct=window.innerWidth-he.right-tt,nt=window.innerWidth-j.right-ct,Rt=j.width+nt,Wt=Math.max(Rt,W.width),Mt=window.innerWidth-Ko,wn=BT(ct,[Ko,Math.max(Ko,Mt-Wt)]);f.style.minWidth=Rt+"px",f.style.right=wn+"px"}const Ee=w(),ye=window.innerHeight-Ko*2,De=I.scrollHeight,ce=window.getComputedStyle($),Oe=parseInt(ce.borderTopWidth,10),ie=parseInt(ce.paddingTop,10),pe=parseInt(ce.borderBottomWidth,10),G=parseInt(ce.paddingBottom,10),ee=Oe+ie+De+G+pe,$e=Math.min(x.offsetHeight*5,ee),z=window.getComputedStyle(I),se=parseInt(z.paddingTop,10),ae=parseInt(z.paddingBottom,10),ne=j.top+j.height/2-Ko,me=ye-ne,fe=x.offsetHeight/2,te=x.offsetTop+fe,Se=Oe+ie+te,Le=ee-Se;if(Se<=ne){const tt=Ee.length>0&&x===Ee[Ee.length-1].ref.current;f.style.bottom="0px";const ct=$.clientHeight-I.offsetTop-I.offsetHeight,nt=Math.max(me,fe+(tt?ae:0)+ct+pe),Rt=Se+nt;f.style.height=Rt+"px"}else{const tt=Ee.length>0&&x===Ee[0].ref.current;f.style.top="0px";const nt=Math.max(ne,Oe+I.offsetTop+(tt?se:0)+fe)+Le;f.style.height=nt+"px",I.scrollTop=Se-ne+I.offsetTop}f.style.margin=`${Ko}px 0`,f.style.minHeight=$e+"px",f.style.maxHeight=ye+"px",o?.(),requestAnimationFrame(()=>S.current=!0)}},[w,d.trigger,d.valueNode,f,$,I,x,A,d.dir,o]);sr(()=>P(),[P]);const[F,B]=E.useState();sr(()=>{$&&B(window.getComputedStyle($).zIndex)},[$]);const V=E.useCallback(j=>{j&&O.current===!0&&(P(),M?.(),O.current=!1)},[P,M]);return R.jsx(Uz,{scope:s,contentWrapper:f,shouldExpandOnScrollRef:S,onScrollButtonChange:V,children:R.jsx("div",{ref:g,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:F},children:R.jsx(Ze.div,{...a,ref:y,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});EA.displayName=Bz;var Fz="SelectPopperPosition",nb=E.forwardRef((t,r)=>{const{__scopeSelect:s,align:o="start",collisionPadding:a=Ko,...d}=t,h=cv(s);return R.jsx(Yb,{...h,...d,ref:r,align:o,collisionPadding:a,style:{boxSizing:"border-box",...d.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});nb.displayName=Fz;var[Uz,HE]=wp(Xu,{}),rb="SelectViewport",wA=E.forwardRef((t,r)=>{const{__scopeSelect:s,nonce:o,...a}=t,d=oc(rb,s),h=HE(rb,s),f=_t(r,d.onViewportChange),g=E.useRef(0);return R.jsxs(R.Fragment,{children:[R.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),R.jsx(lv.Slot,{scope:s,children:R.jsx(Ze.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:f,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Pe(a.onScroll,$=>{const v=$.currentTarget,{contentWrapper:y,shouldExpandOnScrollRef:w}=h;if(w?.current&&y){const S=Math.abs(g.current-v.scrollTop);if(S>0){const O=window.innerHeight-Ko*2,I=parseFloat(y.style.minHeight),x=parseFloat(y.style.height),A=Math.max(I,x);if(A<O){const M=A+S,P=Math.min(O,M),F=M-P;y.style.height=P+"px",y.style.bottom==="0px"&&(v.scrollTop=F>0?F:0,y.style.justifyContent="flex-end")}}}g.current=v.scrollTop})})})]})});wA.displayName=rb;var SA="SelectGroup",[Vz,Hz]=wp(SA),Gz=E.forwardRef((t,r)=>{const{__scopeSelect:s,...o}=t,a=Ui();return R.jsx(Vz,{scope:s,id:a,children:R.jsx(Ze.div,{role:"group","aria-labelledby":a,...o,ref:r})})});Gz.displayName=SA;var CA="SelectLabel",IA=E.forwardRef((t,r)=>{const{__scopeSelect:s,...o}=t,a=Hz(CA,s);return R.jsx(Ze.div,{id:a.id,...o,ref:r})});IA.displayName=CA;var b_="SelectItem",[jz,RA]=wp(b_),kA=E.forwardRef((t,r)=>{const{__scopeSelect:s,value:o,disabled:a=!1,textValue:d,...h}=t,f=sc(b_,s),g=oc(b_,s),$=f.value===o,[v,y]=E.useState(d??""),[w,S]=E.useState(!1),O=_t(r,M=>g.itemRefCallback?.(M,o,a)),I=Ui(),x=E.useRef("touch"),A=()=>{a||(f.onValueChange(o),f.onOpenChange(!1))};if(o==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return R.jsx(jz,{scope:s,value:o,disabled:a,textId:I,isSelected:$,onItemTextChange:E.useCallback(M=>{y(P=>P||(M?.textContent??"").trim())},[]),children:R.jsx(lv.ItemSlot,{scope:s,value:o,disabled:a,textValue:v,children:R.jsx(Ze.div,{role:"option","aria-labelledby":I,"data-highlighted":w?"":void 0,"aria-selected":$&&w,"data-state":$?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...h,ref:O,onFocus:Pe(h.onFocus,()=>S(!0)),onBlur:Pe(h.onBlur,()=>S(!1)),onClick:Pe(h.onClick,()=>{x.current!=="mouse"&&A()}),onPointerUp:Pe(h.onPointerUp,()=>{x.current==="mouse"&&A()}),onPointerDown:Pe(h.onPointerDown,M=>{x.current=M.pointerType}),onPointerMove:Pe(h.onPointerMove,M=>{x.current=M.pointerType,a?g.onItemLeave?.():x.current==="mouse"&&M.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Pe(h.onPointerLeave,M=>{M.currentTarget===document.activeElement&&g.onItemLeave?.()}),onKeyDown:Pe(h.onKeyDown,M=>{g.searchRef?.current!==""&&M.key===" "||(kz.includes(M.key)&&A(),M.key===" "&&M.preventDefault())})})})})});kA.displayName=b_;var Pm="SelectItemText",xA=E.forwardRef((t,r)=>{const{__scopeSelect:s,className:o,style:a,...d}=t,h=sc(Pm,s),f=oc(Pm,s),g=RA(Pm,s),$=Nz(Pm,s),[v,y]=E.useState(null),w=_t(r,A=>y(A),g.onItemTextChange,A=>f.itemTextRefCallback?.(A,g.value,g.disabled)),S=v?.textContent,O=E.useMemo(()=>R.jsx("option",{value:g.value,disabled:g.disabled,children:S},g.value),[g.disabled,g.value,S]),{onNativeOptionAdd:I,onNativeOptionRemove:x}=$;return sr(()=>(I(O),()=>x(O)),[I,x,O]),R.jsxs(R.Fragment,{children:[R.jsx(Ze.span,{id:g.textId,...d,ref:w}),g.isSelected&&h.valueNode&&!h.valueNodeHasChildren?mp.createPortal(d.children,h.valueNode):null]})});xA.displayName=Pm;var OA="SelectItemIndicator",AA=E.forwardRef((t,r)=>{const{__scopeSelect:s,...o}=t;return RA(OA,s).isSelected?R.jsx(Ze.span,{"aria-hidden":!0,...o,ref:r}):null});AA.displayName=OA;var sb="SelectScrollUpButton",NA=E.forwardRef((t,r)=>{const s=oc(sb,t.__scopeSelect),o=HE(sb,t.__scopeSelect),[a,d]=E.useState(!1),h=_t(r,o.onScrollButtonChange);return sr(()=>{if(s.viewport&&s.isPositioned){let f=function(){const $=g.scrollTop>0;d($)};const g=s.viewport;return f(),g.addEventListener("scroll",f),()=>g.removeEventListener("scroll",f)}},[s.viewport,s.isPositioned]),a?R.jsx(MA,{...t,ref:h,onAutoScroll:()=>{const{viewport:f,selectedItem:g}=s;f&&g&&(f.scrollTop=f.scrollTop-g.offsetHeight)}}):null});NA.displayName=sb;var ob="SelectScrollDownButton",LA=E.forwardRef((t,r)=>{const s=oc(ob,t.__scopeSelect),o=HE(ob,t.__scopeSelect),[a,d]=E.useState(!1),h=_t(r,o.onScrollButtonChange);return sr(()=>{if(s.viewport&&s.isPositioned){let f=function(){const $=g.scrollHeight-g.clientHeight,v=Math.ceil(g.scrollTop)<$;d(v)};const g=s.viewport;return f(),g.addEventListener("scroll",f),()=>g.removeEventListener("scroll",f)}},[s.viewport,s.isPositioned]),a?R.jsx(MA,{...t,ref:h,onAutoScroll:()=>{const{viewport:f,selectedItem:g}=s;f&&g&&(f.scrollTop=f.scrollTop+g.offsetHeight)}}):null});LA.displayName=ob;var MA=E.forwardRef((t,r)=>{const{__scopeSelect:s,onAutoScroll:o,...a}=t,d=oc("SelectScrollButton",s),h=E.useRef(null),f=av(s),g=E.useCallback(()=>{h.current!==null&&(window.clearInterval(h.current),h.current=null)},[]);return E.useEffect(()=>()=>g(),[g]),sr(()=>{f().find(v=>v.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[f]),R.jsx(Ze.div,{"aria-hidden":!0,...a,ref:r,style:{flexShrink:0,...a.style},onPointerDown:Pe(a.onPointerDown,()=>{h.current===null&&(h.current=window.setInterval(o,50))}),onPointerMove:Pe(a.onPointerMove,()=>{d.onItemLeave?.(),h.current===null&&(h.current=window.setInterval(o,50))}),onPointerLeave:Pe(a.onPointerLeave,()=>{g()})})}),Wz="SelectSeparator",PA=E.forwardRef((t,r)=>{const{__scopeSelect:s,...o}=t;return R.jsx(Ze.div,{"aria-hidden":!0,...o,ref:r})});PA.displayName=Wz;var ib="SelectArrow",zz=E.forwardRef((t,r)=>{const{__scopeSelect:s,...o}=t,a=cv(s),d=sc(ib,s),h=oc(ib,s);return d.open&&h.position==="popper"?R.jsx(qb,{...a,...o,ref:r}):null});zz.displayName=ib;var Kz="SelectBubbleInput",DA=E.forwardRef(({__scopeSelect:t,value:r,...s},o)=>{const a=E.useRef(null),d=_t(o,a),h=VW(r);return E.useEffect(()=>{const f=a.current;if(!f)return;const g=window.HTMLSelectElement.prototype,v=Object.getOwnPropertyDescriptor(g,"value").set;if(h!==r&&v){const y=new Event("change",{bubbles:!0});v.call(f,r),f.dispatchEvent(y)}},[h,r]),R.jsx(Ze.select,{...s,style:{...xk,...s.style},ref:d,defaultValue:r})});DA.displayName=Kz;function BA(t){return t===""||t===void 0}function FA(t){const r=Rn(t),s=E.useRef(""),o=E.useRef(0),a=E.useCallback(h=>{const f=s.current+h;r(f),(function g($){s.current=$,window.clearTimeout(o.current),$!==""&&(o.current=window.setTimeout(()=>g(""),1e3))})(f)},[r]),d=E.useCallback(()=>{s.current="",window.clearTimeout(o.current)},[]);return E.useEffect(()=>()=>window.clearTimeout(o.current),[]),[s,a,d]}function UA(t,r,s){const a=r.length>1&&Array.from(r).every($=>$===r[0])?r[0]:r,d=s?t.indexOf(s):-1;let h=Xz(t,Math.max(d,0));a.length===1&&(h=h.filter($=>$!==s));const g=h.find($=>$.textValue.toLowerCase().startsWith(a.toLowerCase()));return g!==s?g:void 0}function Xz(t,r){return t.map((s,o)=>t[(r+o)%t.length])}var Yz=pA,VA=mA,qz=$A,Jz=_A,Qz=vA,HA=yA,Zz=wA,GA=IA,jA=kA,eK=xA,tK=AA,WA=NA,zA=LA,KA=PA;const XA=Yz,YA=qz,GE=E.forwardRef(({className:t,children:r,...s},o)=>R.jsxs(VA,{ref:o,className:pt("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...s,children:[r,R.jsx(Jz,{asChild:!0,children:R.jsx(Zk,{className:"h-4 w-4 opacity-50"})})]}));GE.displayName=VA.displayName;const qA=E.forwardRef(({className:t,...r},s)=>R.jsx(WA,{ref:s,className:pt("flex cursor-default items-center justify-center py-1",t),...r,children:R.jsx(bD,{className:"h-4 w-4"})}));qA.displayName=WA.displayName;const JA=E.forwardRef(({className:t,...r},s)=>R.jsx(zA,{ref:s,className:pt("flex cursor-default items-center justify-center py-1",t),...r,children:R.jsx(Zk,{className:"h-4 w-4"})}));JA.displayName=zA.displayName;const jE=E.forwardRef(({className:t,children:r,position:s="popper",...o},a)=>R.jsx(Qz,{children:R.jsxs(HA,{ref:a,className:pt("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:s,...o,children:[R.jsx(qA,{}),R.jsx(Zz,{className:pt("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),R.jsx(JA,{})]})}));jE.displayName=HA.displayName;const nK=E.forwardRef(({className:t,...r},s)=>R.jsx(GA,{ref:s,className:pt("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...r}));nK.displayName=GA.displayName;const WE=E.forwardRef(({className:t,children:r,...s},o)=>R.jsxs(jA,{ref:o,className:pt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...s,children:[R.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:R.jsx(tK,{children:R.jsx(Pb,{className:"h-4 w-4"})})}),R.jsx(eK,{children:r})]}));WE.displayName=jA.displayName;const rK=E.forwardRef(({className:t,...r},s)=>R.jsx(KA,{ref:s,className:pt("-mx-1 my-1 h-px bg-muted",t),...r}));rK.displayName=KA.displayName;const sK=[300,1200,2400,4800,9600,19200,38400,57600,115200],MR=()=>{const{serialMessages:t,addSerialMessage:r,clearSerialMessages:s,serialBaudRate:o,setSerialBaudRate:a,addConsoleMessage:d,isConnected:h,setIsConnected:f}=Qu(),[g,$]=E.useState(""),[v,y]=E.useState(!1),[w,S]=E.useState(!0),O=E.useRef(null),I=E.useRef(null),x=E.useRef(!1);E.useEffect(()=>{w&&I.current&&(I.current.scrollTop=I.current.scrollHeight)},[t,w]);const A=E.useCallback(async()=>{if(!O.current?.reader)return;x.current=!0;const V=new TextDecoder;for(;x.current&&O.current?.reader;)try{const{value:j,done:W}=await O.current.reader.read();if(W)break;if(j){const he=V.decode(j);r("received",he)}}catch(j){x.current&&console.error("Read error:",j);break}},[r]),M=async()=>{if(!cx()){Xn.error("WebSerial no est soportado. Usa Chrome o Edge."),d("error","WebSerial not supported");return}try{const V=await ux();if(!V)return;const j=await $V(V,o);O.current=j,y(!0),f(!0),d("success",`Monitor serie conectado a ${o} baudios`),Xn.success("Monitor serie conectado! "),A()}catch(V){d("error",`Fall la conexin: ${V}`),Xn.error("No se pudo conectar al puerto serie")}},P=E.useCallback(async()=>{x.current=!1,O.current&&(await ZC(O.current),O.current=null),y(!1),f(!1),d("info","Monitor serie desconectado"),Xn.info("Monitor serie desconectado")},[f,d]),F=async()=>{if(!(!g.trim()||!O.current))try{await _V(O.current,g+`
`),r("sent",g),$("")}catch(V){d("error",`Error al enviar: ${V}`),Xn.error("Error al enviar datos")}},B=V=>{V.key==="Enter"&&!V.shiftKey&&(V.preventDefault(),F())};return E.useEffect(()=>()=>{x.current=!1,O.current&&ZC(O.current)},[]),E.useEffect(()=>{!h&&v&&(console.log("Forzando desconexin del monitor serie..."),P())},[h,v,P]),R.jsxs("div",{className:"flex flex-col h-full bg-gradient-to-b from-card to-muted/20 rounded-b-2xl overflow-hidden",children:[R.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border bg-muted/30 flex-wrap gap-2",children:[R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx(TT,{className:`w-4 h-4 ${v?"text-success":"text-muted-foreground"}`}),R.jsx("span",{className:"text-sm font-bold text-foreground",children:"Monitor Serie"}),v&&R.jsx(Wr.span,{initial:{scale:0},animate:{scale:1},className:"status-dot status-dot-connected ml-1"})]}),R.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[R.jsxs(XA,{value:o.toString(),onValueChange:V=>a(Number(V)),disabled:v,children:[R.jsx(GE,{className:"neu-input w-24 h-9 text-xs font-bold",children:R.jsx(YA,{})}),R.jsx(jE,{className:"ide-panel border-none",children:sK.map(V=>R.jsx(WE,{value:V.toString(),className:"font-medium rounded-lg",children:V},V))})]}),v?R.jsxs("button",{onClick:P,className:"clay-btn h-9 px-3 text-xs bg-destructive/10 text-destructive border-destructive/30 hover:bg-destructive/20",children:[R.jsx(BD,{className:"w-4 h-4 mr-1.5"}),"Desconectar"]}):R.jsxs("button",{onClick:M,className:"clay-btn clay-btn-success h-9 px-3 text-xs",children:[R.jsx(LD,{className:"w-4 h-4 mr-1.5"}),"Conectar"]}),R.jsx(Vu,{variant:"ghost",size:"sm",onClick:()=>S(!w),className:`h-9 w-9 p-0 rounded-xl transition-colors ${w?"bg-primary/10 text-primary":"text-muted-foreground hover:bg-muted"}`,title:w?"Auto-scroll activado":"Auto-scroll desactivado",children:R.jsx(vD,{className:"w-4 h-4"})}),R.jsx(Vu,{variant:"ghost",size:"sm",onClick:s,className:"h-9 w-9 p-0 rounded-xl text-muted-foreground hover:text-destructive hover:bg-destructive/10",children:R.jsx(t0,{className:"w-4 h-4"})})]})]}),R.jsx(J_,{className:"flex-1 bg-muted/10",ref:I,children:R.jsx("div",{className:"p-4 font-mono text-sm space-y-1.5",children:t.length===0?R.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[R.jsx(Wr.div,{className:`w-20 h-20 rounded-3xl flex items-center justify-center mb-4 ${v?"bg-success/10 border-2 border-success/30":"bg-muted/30 border-2 border-border"}`,animate:v?{scale:[1,1.05,1]}:{},transition:{duration:2,repeat:1/0},children:R.jsx(UD,{className:`w-10 h-10 ${v?"text-success":"text-muted-foreground/50"}`})}),R.jsx("p",{className:"text-muted-foreground font-medium font-sans",children:v?"Esperando datos...":"Conecta para ver la salida serie"})]}):R.jsx(op,{children:t.map(V=>R.jsxs(Wr.div,{initial:{opacity:0,x:V.type==="sent"?20:-20},animate:{opacity:1,x:0},className:`py-2 px-3 rounded-xl ${V.type==="sent"?"bg-primary/10 text-primary border-l-4 border-primary ml-8":"bg-card text-foreground border-l-4 border-success mr-8 shadow-sm"}`,children:[V.type==="sent"&&R.jsx("span",{className:"text-primary/60 mr-2",children:""}),V.type==="received"&&R.jsx("span",{className:"text-success/60 mr-2",children:""}),V.content]},V.id))})})}),R.jsxs("div",{className:"flex items-center gap-3 p-3 border-t border-border bg-card/50",children:[R.jsx(FE,{value:g,onChange:V=>$(V.target.value),onKeyDown:B,placeholder:"Escribe un mensaje...",disabled:!v,className:"neu-input flex-1 h-10 text-sm"}),R.jsx("button",{onClick:F,disabled:!v||!g.trim(),className:"clay-btn clay-btn-primary h-10 px-5",children:R.jsx(PD,{className:"w-4 h-4"})})]})]})};var tT="rovingFocusGroup.onEntryFocus",oK={bubbles:!1,cancelable:!0},Tg="RovingFocusGroup",[lb,QA,iK]=M_(Tg),[lK,uv]=To(Tg,[iK]),[aK,cK]=lK(Tg),ZA=E.forwardRef((t,r)=>R.jsx(lb.Provider,{scope:t.__scopeRovingFocusGroup,children:R.jsx(lb.Slot,{scope:t.__scopeRovingFocusGroup,children:R.jsx(uK,{...t,ref:r})})}));ZA.displayName=Tg;var uK=E.forwardRef((t,r)=>{const{__scopeRovingFocusGroup:s,orientation:o,loop:a=!1,dir:d,currentTabStopId:h,defaultCurrentTabStopId:f,onCurrentTabStopIdChange:g,onEntryFocus:$,preventScrollOnEntryFocus:v=!1,...y}=t,w=E.useRef(null),S=_t(r,w),O=gg(d),[I,x]=Wu({prop:h,defaultProp:f??null,onChange:g,caller:Tg}),[A,M]=E.useState(!1),P=Rn($),F=QA(s),B=E.useRef(!1),[V,j]=E.useState(0);return E.useEffect(()=>{const W=w.current;if(W)return W.addEventListener(tT,P),()=>W.removeEventListener(tT,P)},[P]),R.jsx(aK,{scope:s,orientation:o,dir:O,loop:a,currentTabStopId:I,onItemFocus:E.useCallback(W=>x(W),[x]),onItemShiftTab:E.useCallback(()=>M(!0),[]),onFocusableItemAdd:E.useCallback(()=>j(W=>W+1),[]),onFocusableItemRemove:E.useCallback(()=>j(W=>W-1),[]),children:R.jsx(Ze.div,{tabIndex:A||V===0?-1:0,"data-orientation":o,...y,ref:S,style:{outline:"none",...t.style},onMouseDown:Pe(t.onMouseDown,()=>{B.current=!0}),onFocus:Pe(t.onFocus,W=>{const he=!B.current;if(W.target===W.currentTarget&&he&&!A){const we=new CustomEvent(tT,oK);if(W.currentTarget.dispatchEvent(we),!we.defaultPrevented){const Ee=F().filter(ie=>ie.focusable),ye=Ee.find(ie=>ie.active),De=Ee.find(ie=>ie.id===I),Oe=[ye,De,...Ee].filter(Boolean).map(ie=>ie.ref.current);nN(Oe,v)}}B.current=!1}),onBlur:Pe(t.onBlur,()=>M(!1))})})}),eN="RovingFocusGroupItem",tN=E.forwardRef((t,r)=>{const{__scopeRovingFocusGroup:s,focusable:o=!0,active:a=!1,tabStopId:d,children:h,...f}=t,g=Ui(),$=d||g,v=cK(eN,s),y=v.currentTabStopId===$,w=QA(s),{onFocusableItemAdd:S,onFocusableItemRemove:O,currentTabStopId:I}=v;return E.useEffect(()=>{if(o)return S(),()=>O()},[o,S,O]),R.jsx(lb.ItemSlot,{scope:s,id:$,focusable:o,active:a,children:R.jsx(Ze.span,{tabIndex:y?0:-1,"data-orientation":v.orientation,...f,ref:r,onMouseDown:Pe(t.onMouseDown,x=>{o?v.onItemFocus($):x.preventDefault()}),onFocus:Pe(t.onFocus,()=>v.onItemFocus($)),onKeyDown:Pe(t.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){v.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const A=pK(x,v.orientation,v.dir);if(A!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let P=w().filter(F=>F.focusable).map(F=>F.ref.current);if(A==="last")P.reverse();else if(A==="prev"||A==="next"){A==="prev"&&P.reverse();const F=P.indexOf(x.currentTarget);P=v.loop?fK(P,F+1):P.slice(F+1)}setTimeout(()=>nN(P))}}),children:typeof h=="function"?h({isCurrentTabStop:y,hasTabStop:I!=null}):h})})});tN.displayName=eN;var dK={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function hK(t,r){return r!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function pK(t,r,s){const o=hK(t.key,s);if(!(r==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(r==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return dK[o]}function nN(t,r=!1){const s=document.activeElement;for(const o of t)if(o===s||(o.focus({preventScroll:r}),document.activeElement!==s))return}function fK(t,r){return t.map((s,o)=>t[(r+o)%t.length])}var rN=ZA,sN=tN,ab=["Enter"," "],mK=["ArrowDown","PageUp","Home"],oN=["ArrowUp","PageDown","End"],gK=[...mK,...oN],$K={ltr:[...ab,"ArrowRight"],rtl:[...ab,"ArrowLeft"]},_K={ltr:["ArrowLeft"],rtl:["ArrowRight"]},bg="Menu",[rg,vK,yK]=M_(bg),[ed,iN]=To(bg,[yK,yp,uv]),dv=yp(),lN=uv(),[TK,td]=ed(bg),[bK,Eg]=ed(bg),aN=t=>{const{__scopeMenu:r,open:s=!1,children:o,dir:a,onOpenChange:d,modal:h=!0}=t,f=dv(r),[g,$]=E.useState(null),v=E.useRef(!1),y=Rn(d),w=gg(a);return E.useEffect(()=>{const S=()=>{v.current=!0,document.addEventListener("pointerdown",O,{capture:!0,once:!0}),document.addEventListener("pointermove",O,{capture:!0,once:!0})},O=()=>v.current=!1;return document.addEventListener("keydown",S,{capture:!0}),()=>{document.removeEventListener("keydown",S,{capture:!0}),document.removeEventListener("pointerdown",O,{capture:!0}),document.removeEventListener("pointermove",O,{capture:!0})}},[]),R.jsx(N0,{...f,children:R.jsx(TK,{scope:r,open:s,onOpenChange:y,content:g,onContentChange:$,children:R.jsx(bK,{scope:r,onClose:E.useCallback(()=>y(!1),[y]),isUsingKeyboardRef:v,dir:w,modal:h,children:o})})})};aN.displayName=bg;var EK="MenuAnchor",zE=E.forwardRef((t,r)=>{const{__scopeMenu:s,...o}=t,a=dv(s);return R.jsx(Xb,{...a,...o,ref:r})});zE.displayName=EK;var KE="MenuPortal",[wK,cN]=ed(KE,{forceMount:void 0}),uN=t=>{const{__scopeMenu:r,forceMount:s,children:o,container:a}=t,d=td(KE,r);return R.jsx(wK,{scope:r,forceMount:s,children:R.jsx(Kr,{present:s||d.open,children:R.jsx(pg,{asChild:!0,container:a,children:o})})})};uN.displayName=KE;var yo="MenuContent",[SK,XE]=ed(yo),dN=E.forwardRef((t,r)=>{const s=cN(yo,t.__scopeMenu),{forceMount:o=s.forceMount,...a}=t,d=td(yo,t.__scopeMenu),h=Eg(yo,t.__scopeMenu);return R.jsx(rg.Provider,{scope:t.__scopeMenu,children:R.jsx(Kr,{present:o||d.open,children:R.jsx(rg.Slot,{scope:t.__scopeMenu,children:h.modal?R.jsx(CK,{...a,ref:r}):R.jsx(IK,{...a,ref:r})})})})}),CK=E.forwardRef((t,r)=>{const s=td(yo,t.__scopeMenu),o=E.useRef(null),a=_t(r,o);return E.useEffect(()=>{const d=o.current;if(d)return VE(d)},[]),R.jsx(YE,{...t,ref:a,trapFocus:s.open,disableOutsidePointerEvents:s.open,disableOutsideScroll:!0,onFocusOutside:Pe(t.onFocusOutside,d=>d.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>s.onOpenChange(!1)})}),IK=E.forwardRef((t,r)=>{const s=td(yo,t.__scopeMenu);return R.jsx(YE,{...t,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>s.onOpenChange(!1)})}),RK=ju("MenuContent.ScrollLock"),YE=E.forwardRef((t,r)=>{const{__scopeMenu:s,loop:o=!1,trapFocus:a,onOpenAutoFocus:d,onCloseAutoFocus:h,disableOutsidePointerEvents:f,onEntryFocus:g,onEscapeKeyDown:$,onPointerDownOutside:v,onFocusOutside:y,onInteractOutside:w,onDismiss:S,disableOutsideScroll:O,...I}=t,x=td(yo,s),A=Eg(yo,s),M=dv(s),P=lN(s),F=vK(s),[B,V]=E.useState(null),j=E.useRef(null),W=_t(r,j,x.onContentChange),he=E.useRef(0),we=E.useRef(""),Ee=E.useRef(0),ye=E.useRef(null),De=E.useRef("right"),ce=E.useRef(0),Oe=O?iv:E.Fragment,ie=O?{as:RK,allowPinchZoom:!0}:void 0,pe=ee=>{const $e=we.current+ee,z=F().filter(te=>!te.disabled),se=document.activeElement,ae=z.find(te=>te.ref.current===se)?.textValue,ne=z.map(te=>te.textValue),me=UK(ne,$e,ae),fe=z.find(te=>te.textValue===me)?.ref.current;(function te(Se){we.current=Se,window.clearTimeout(he.current),Se!==""&&(he.current=window.setTimeout(()=>te(""),1e3))})($e),fe&&setTimeout(()=>fe.focus())};E.useEffect(()=>()=>window.clearTimeout(he.current),[]),UE();const G=E.useCallback(ee=>De.current===ye.current?.side&&HK(ee,ye.current?.area),[]);return R.jsx(SK,{scope:s,searchRef:we,onItemEnter:E.useCallback(ee=>{G(ee)&&ee.preventDefault()},[G]),onItemLeave:E.useCallback(ee=>{G(ee)||(j.current?.focus(),V(null))},[G]),onTriggerLeave:E.useCallback(ee=>{G(ee)&&ee.preventDefault()},[G]),pointerGraceTimerRef:Ee,onPointerGraceIntentChange:E.useCallback(ee=>{ye.current=ee},[]),children:R.jsx(Oe,{...ie,children:R.jsx(sv,{asChild:!0,trapped:a,onMountAutoFocus:Pe(d,ee=>{ee.preventDefault(),j.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:h,children:R.jsx(gp,{asChild:!0,disableOutsidePointerEvents:f,onEscapeKeyDown:$,onPointerDownOutside:v,onFocusOutside:y,onInteractOutside:w,onDismiss:S,children:R.jsx(rN,{asChild:!0,...P,dir:A.dir,orientation:"vertical",loop:o,currentTabStopId:B,onCurrentTabStopIdChange:V,onEntryFocus:Pe(g,ee=>{A.isUsingKeyboardRef.current||ee.preventDefault()}),preventScrollOnEntryFocus:!0,children:R.jsx(Yb,{role:"menu","aria-orientation":"vertical","data-state":IN(x.open),"data-radix-menu-content":"",dir:A.dir,...M,...I,ref:W,style:{outline:"none",...I.style},onKeyDown:Pe(I.onKeyDown,ee=>{const z=ee.target.closest("[data-radix-menu-content]")===ee.currentTarget,se=ee.ctrlKey||ee.altKey||ee.metaKey,ae=ee.key.length===1;z&&(ee.key==="Tab"&&ee.preventDefault(),!se&&ae&&pe(ee.key));const ne=j.current;if(ee.target!==ne||!gK.includes(ee.key))return;ee.preventDefault();const fe=F().filter(te=>!te.disabled).map(te=>te.ref.current);oN.includes(ee.key)&&fe.reverse(),BK(fe)}),onBlur:Pe(t.onBlur,ee=>{ee.currentTarget.contains(ee.target)||(window.clearTimeout(he.current),we.current="")}),onPointerMove:Pe(t.onPointerMove,sg(ee=>{const $e=ee.target,z=ce.current!==ee.clientX;if(ee.currentTarget.contains($e)&&z){const se=ee.clientX>ce.current?"right":"left";De.current=se,ce.current=ee.clientX}}))})})})})})})});dN.displayName=yo;var kK="MenuGroup",qE=E.forwardRef((t,r)=>{const{__scopeMenu:s,...o}=t;return R.jsx(Ze.div,{role:"group",...o,ref:r})});qE.displayName=kK;var xK="MenuLabel",hN=E.forwardRef((t,r)=>{const{__scopeMenu:s,...o}=t;return R.jsx(Ze.div,{...o,ref:r})});hN.displayName=xK;var E_="MenuItem",PR="menu.itemSelect",hv=E.forwardRef((t,r)=>{const{disabled:s=!1,onSelect:o,...a}=t,d=E.useRef(null),h=Eg(E_,t.__scopeMenu),f=XE(E_,t.__scopeMenu),g=_t(r,d),$=E.useRef(!1),v=()=>{const y=d.current;if(!s&&y){const w=new CustomEvent(PR,{bubbles:!0,cancelable:!0});y.addEventListener(PR,S=>o?.(S),{once:!0}),Ob(y,w),w.defaultPrevented?$.current=!1:h.onClose()}};return R.jsx(pN,{...a,ref:g,disabled:s,onClick:Pe(t.onClick,v),onPointerDown:y=>{t.onPointerDown?.(y),$.current=!0},onPointerUp:Pe(t.onPointerUp,y=>{$.current||y.currentTarget?.click()}),onKeyDown:Pe(t.onKeyDown,y=>{const w=f.searchRef.current!=="";s||w&&y.key===" "||ab.includes(y.key)&&(y.currentTarget.click(),y.preventDefault())})})});hv.displayName=E_;var pN=E.forwardRef((t,r)=>{const{__scopeMenu:s,disabled:o=!1,textValue:a,...d}=t,h=XE(E_,s),f=lN(s),g=E.useRef(null),$=_t(r,g),[v,y]=E.useState(!1),[w,S]=E.useState("");return E.useEffect(()=>{const O=g.current;O&&S((O.textContent??"").trim())},[d.children]),R.jsx(rg.ItemSlot,{scope:s,disabled:o,textValue:a??w,children:R.jsx(sN,{asChild:!0,...f,focusable:!o,children:R.jsx(Ze.div,{role:"menuitem","data-highlighted":v?"":void 0,"aria-disabled":o||void 0,"data-disabled":o?"":void 0,...d,ref:$,onPointerMove:Pe(t.onPointerMove,sg(O=>{o?h.onItemLeave(O):(h.onItemEnter(O),O.defaultPrevented||O.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Pe(t.onPointerLeave,sg(O=>h.onItemLeave(O))),onFocus:Pe(t.onFocus,()=>y(!0)),onBlur:Pe(t.onBlur,()=>y(!1))})})})}),OK="MenuCheckboxItem",fN=E.forwardRef((t,r)=>{const{checked:s=!1,onCheckedChange:o,...a}=t;return R.jsx(vN,{scope:t.__scopeMenu,checked:s,children:R.jsx(hv,{role:"menuitemcheckbox","aria-checked":w_(s)?"mixed":s,...a,ref:r,"data-state":QE(s),onSelect:Pe(a.onSelect,()=>o?.(w_(s)?!0:!s),{checkForDefaultPrevented:!1})})})});fN.displayName=OK;var mN="MenuRadioGroup",[AK,NK]=ed(mN,{value:void 0,onValueChange:()=>{}}),gN=E.forwardRef((t,r)=>{const{value:s,onValueChange:o,...a}=t,d=Rn(o);return R.jsx(AK,{scope:t.__scopeMenu,value:s,onValueChange:d,children:R.jsx(qE,{...a,ref:r})})});gN.displayName=mN;var $N="MenuRadioItem",_N=E.forwardRef((t,r)=>{const{value:s,...o}=t,a=NK($N,t.__scopeMenu),d=s===a.value;return R.jsx(vN,{scope:t.__scopeMenu,checked:d,children:R.jsx(hv,{role:"menuitemradio","aria-checked":d,...o,ref:r,"data-state":QE(d),onSelect:Pe(o.onSelect,()=>a.onValueChange?.(s),{checkForDefaultPrevented:!1})})})});_N.displayName=$N;var JE="MenuItemIndicator",[vN,LK]=ed(JE,{checked:!1}),yN=E.forwardRef((t,r)=>{const{__scopeMenu:s,forceMount:o,...a}=t,d=LK(JE,s);return R.jsx(Kr,{present:o||w_(d.checked)||d.checked===!0,children:R.jsx(Ze.span,{...a,ref:r,"data-state":QE(d.checked)})})});yN.displayName=JE;var MK="MenuSeparator",TN=E.forwardRef((t,r)=>{const{__scopeMenu:s,...o}=t;return R.jsx(Ze.div,{role:"separator","aria-orientation":"horizontal",...o,ref:r})});TN.displayName=MK;var PK="MenuArrow",bN=E.forwardRef((t,r)=>{const{__scopeMenu:s,...o}=t,a=dv(s);return R.jsx(qb,{...a,...o,ref:r})});bN.displayName=PK;var DK="MenuSub",[z6,EN]=ed(DK),Dm="MenuSubTrigger",wN=E.forwardRef((t,r)=>{const s=td(Dm,t.__scopeMenu),o=Eg(Dm,t.__scopeMenu),a=EN(Dm,t.__scopeMenu),d=XE(Dm,t.__scopeMenu),h=E.useRef(null),{pointerGraceTimerRef:f,onPointerGraceIntentChange:g}=d,$={__scopeMenu:t.__scopeMenu},v=E.useCallback(()=>{h.current&&window.clearTimeout(h.current),h.current=null},[]);return E.useEffect(()=>v,[v]),E.useEffect(()=>{const y=f.current;return()=>{window.clearTimeout(y),g(null)}},[f,g]),R.jsx(zE,{asChild:!0,...$,children:R.jsx(pN,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":a.contentId,"data-state":IN(s.open),...t,ref:L_(r,a.onTriggerChange),onClick:y=>{t.onClick?.(y),!(t.disabled||y.defaultPrevented)&&(y.currentTarget.focus(),s.open||s.onOpenChange(!0))},onPointerMove:Pe(t.onPointerMove,sg(y=>{d.onItemEnter(y),!y.defaultPrevented&&!t.disabled&&!s.open&&!h.current&&(d.onPointerGraceIntentChange(null),h.current=window.setTimeout(()=>{s.onOpenChange(!0),v()},100))})),onPointerLeave:Pe(t.onPointerLeave,sg(y=>{v();const w=s.content?.getBoundingClientRect();if(w){const S=s.content?.dataset.side,O=S==="right",I=O?-5:5,x=w[O?"left":"right"],A=w[O?"right":"left"];d.onPointerGraceIntentChange({area:[{x:y.clientX+I,y:y.clientY},{x,y:w.top},{x:A,y:w.top},{x:A,y:w.bottom},{x,y:w.bottom}],side:S}),window.clearTimeout(f.current),f.current=window.setTimeout(()=>d.onPointerGraceIntentChange(null),300)}else{if(d.onTriggerLeave(y),y.defaultPrevented)return;d.onPointerGraceIntentChange(null)}})),onKeyDown:Pe(t.onKeyDown,y=>{const w=d.searchRef.current!=="";t.disabled||w&&y.key===" "||$K[o.dir].includes(y.key)&&(s.onOpenChange(!0),s.content?.focus(),y.preventDefault())})})})});wN.displayName=Dm;var SN="MenuSubContent",CN=E.forwardRef((t,r)=>{const s=cN(yo,t.__scopeMenu),{forceMount:o=s.forceMount,...a}=t,d=td(yo,t.__scopeMenu),h=Eg(yo,t.__scopeMenu),f=EN(SN,t.__scopeMenu),g=E.useRef(null),$=_t(r,g);return R.jsx(rg.Provider,{scope:t.__scopeMenu,children:R.jsx(Kr,{present:o||d.open,children:R.jsx(rg.Slot,{scope:t.__scopeMenu,children:R.jsx(YE,{id:f.contentId,"aria-labelledby":f.triggerId,...a,ref:$,align:"start",side:h.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:v=>{h.isUsingKeyboardRef.current&&g.current?.focus(),v.preventDefault()},onCloseAutoFocus:v=>v.preventDefault(),onFocusOutside:Pe(t.onFocusOutside,v=>{v.target!==f.trigger&&d.onOpenChange(!1)}),onEscapeKeyDown:Pe(t.onEscapeKeyDown,v=>{h.onClose(),v.preventDefault()}),onKeyDown:Pe(t.onKeyDown,v=>{const y=v.currentTarget.contains(v.target),w=_K[h.dir].includes(v.key);y&&w&&(d.onOpenChange(!1),f.trigger?.focus(),v.preventDefault())})})})})})});CN.displayName=SN;function IN(t){return t?"open":"closed"}function w_(t){return t==="indeterminate"}function QE(t){return w_(t)?"indeterminate":t?"checked":"unchecked"}function BK(t){const r=document.activeElement;for(const s of t)if(s===r||(s.focus(),document.activeElement!==r))return}function FK(t,r){return t.map((s,o)=>t[(r+o)%t.length])}function UK(t,r,s){const a=r.length>1&&Array.from(r).every($=>$===r[0])?r[0]:r,d=s?t.indexOf(s):-1;let h=FK(t,Math.max(d,0));a.length===1&&(h=h.filter($=>$!==s));const g=h.find($=>$.toLowerCase().startsWith(a.toLowerCase()));return g!==s?g:void 0}function VK(t,r){const{x:s,y:o}=t;let a=!1;for(let d=0,h=r.length-1;d<r.length;h=d++){const f=r[d],g=r[h],$=f.x,v=f.y,y=g.x,w=g.y;v>o!=w>o&&s<(y-$)*(o-v)/(w-v)+$&&(a=!a)}return a}function HK(t,r){if(!r)return!1;const s={x:t.clientX,y:t.clientY};return VK(s,r)}function sg(t){return r=>r.pointerType==="mouse"?t(r):void 0}var GK=aN,jK=zE,WK=uN,zK=dN,KK=qE,XK=hN,YK=hv,qK=fN,JK=gN,QK=_N,ZK=yN,eX=TN,tX=bN,nX=wN,rX=CN,pv="DropdownMenu",[sX]=To(pv,[iN]),Xr=iN(),[oX,RN]=sX(pv),kN=t=>{const{__scopeDropdownMenu:r,children:s,dir:o,open:a,defaultOpen:d,onOpenChange:h,modal:f=!0}=t,g=Xr(r),$=E.useRef(null),[v,y]=Wu({prop:a,defaultProp:d??!1,onChange:h,caller:pv});return R.jsx(oX,{scope:r,triggerId:Ui(),triggerRef:$,contentId:Ui(),open:v,onOpenChange:y,onOpenToggle:E.useCallback(()=>y(w=>!w),[y]),modal:f,children:R.jsx(GK,{...g,open:v,onOpenChange:y,dir:o,modal:f,children:s})})};kN.displayName=pv;var xN="DropdownMenuTrigger",ON=E.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,disabled:o=!1,...a}=t,d=RN(xN,s),h=Xr(s);return R.jsx(jK,{asChild:!0,...h,children:R.jsx(Ze.button,{type:"button",id:d.triggerId,"aria-haspopup":"menu","aria-expanded":d.open,"aria-controls":d.open?d.contentId:void 0,"data-state":d.open?"open":"closed","data-disabled":o?"":void 0,disabled:o,...a,ref:L_(r,d.triggerRef),onPointerDown:Pe(t.onPointerDown,f=>{!o&&f.button===0&&f.ctrlKey===!1&&(d.onOpenToggle(),d.open||f.preventDefault())}),onKeyDown:Pe(t.onKeyDown,f=>{o||(["Enter"," "].includes(f.key)&&d.onOpenToggle(),f.key==="ArrowDown"&&d.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(f.key)&&f.preventDefault())})})})});ON.displayName=xN;var iX="DropdownMenuPortal",AN=t=>{const{__scopeDropdownMenu:r,...s}=t,o=Xr(r);return R.jsx(WK,{...o,...s})};AN.displayName=iX;var NN="DropdownMenuContent",LN=E.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...o}=t,a=RN(NN,s),d=Xr(s),h=E.useRef(!1);return R.jsx(zK,{id:a.contentId,"aria-labelledby":a.triggerId,...d,...o,ref:r,onCloseAutoFocus:Pe(t.onCloseAutoFocus,f=>{h.current||a.triggerRef.current?.focus(),h.current=!1,f.preventDefault()}),onInteractOutside:Pe(t.onInteractOutside,f=>{const g=f.detail.originalEvent,$=g.button===0&&g.ctrlKey===!0,v=g.button===2||$;(!a.modal||v)&&(h.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});LN.displayName=NN;var lX="DropdownMenuGroup",aX=E.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...o}=t,a=Xr(s);return R.jsx(KK,{...a,...o,ref:r})});aX.displayName=lX;var cX="DropdownMenuLabel",MN=E.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...o}=t,a=Xr(s);return R.jsx(XK,{...a,...o,ref:r})});MN.displayName=cX;var uX="DropdownMenuItem",PN=E.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...o}=t,a=Xr(s);return R.jsx(YK,{...a,...o,ref:r})});PN.displayName=uX;var dX="DropdownMenuCheckboxItem",DN=E.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...o}=t,a=Xr(s);return R.jsx(qK,{...a,...o,ref:r})});DN.displayName=dX;var hX="DropdownMenuRadioGroup",pX=E.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...o}=t,a=Xr(s);return R.jsx(JK,{...a,...o,ref:r})});pX.displayName=hX;var fX="DropdownMenuRadioItem",BN=E.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...o}=t,a=Xr(s);return R.jsx(QK,{...a,...o,ref:r})});BN.displayName=fX;var mX="DropdownMenuItemIndicator",FN=E.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...o}=t,a=Xr(s);return R.jsx(ZK,{...a,...o,ref:r})});FN.displayName=mX;var gX="DropdownMenuSeparator",UN=E.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...o}=t,a=Xr(s);return R.jsx(eX,{...a,...o,ref:r})});UN.displayName=gX;var $X="DropdownMenuArrow",_X=E.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...o}=t,a=Xr(s);return R.jsx(tX,{...a,...o,ref:r})});_X.displayName=$X;var vX="DropdownMenuSubTrigger",VN=E.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...o}=t,a=Xr(s);return R.jsx(nX,{...a,...o,ref:r})});VN.displayName=vX;var yX="DropdownMenuSubContent",HN=E.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...o}=t,a=Xr(s);return R.jsx(rX,{...a,...o,ref:r,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});HN.displayName=yX;var TX=kN,bX=ON,EX=AN,GN=LN,jN=MN,WN=PN,zN=DN,KN=BN,XN=FN,YN=UN,qN=VN,JN=HN;const DR=TX,BR=bX,wX=E.forwardRef(({className:t,inset:r,children:s,...o},a)=>R.jsxs(qN,{ref:a,className:pt("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",r&&"pl-8",t),...o,children:[s,R.jsx(TD,{className:"ml-auto h-4 w-4"})]}));wX.displayName=qN.displayName;const SX=E.forwardRef(({className:t,...r},s)=>R.jsx(JN,{ref:s,className:pt("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r}));SX.displayName=JN.displayName;const cb=E.forwardRef(({className:t,sideOffset:r=4,...s},o)=>R.jsx(EX,{children:R.jsx(GN,{ref:o,sideOffset:r,className:pt("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s})}));cb.displayName=GN.displayName;const Gh=E.forwardRef(({className:t,inset:r,...s},o)=>R.jsx(WN,{ref:o,className:pt("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",r&&"pl-8",t),...s}));Gh.displayName=WN.displayName;const CX=E.forwardRef(({className:t,children:r,checked:s,...o},a)=>R.jsxs(zN,{ref:a,className:pt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),checked:s,...o,children:[R.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:R.jsx(XN,{children:R.jsx(Pb,{className:"h-4 w-4"})})}),r]}));CX.displayName=zN.displayName;const IX=E.forwardRef(({className:t,children:r,...s},o)=>R.jsxs(KN,{ref:o,className:pt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...s,children:[R.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:R.jsx(XN,{children:R.jsx(wD,{className:"h-2 w-2 fill-current"})})}),r]}));IX.displayName=KN.displayName;const RX=E.forwardRef(({className:t,inset:r,...s},o)=>R.jsx(jN,{ref:o,className:pt("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",t),...s}));RX.displayName=jN.displayName;const QN=E.forwardRef(({className:t,...r},s)=>R.jsx(YN,{ref:s,className:pt("-mx-1 my-1 h-px bg-muted",t),...r}));QN.displayName=YN.displayName;var fv="Dialog",[ZN]=To(fv),[kX,ei]=ZN(fv),eL=t=>{const{__scopeDialog:r,children:s,open:o,defaultOpen:a,onOpenChange:d,modal:h=!0}=t,f=E.useRef(null),g=E.useRef(null),[$,v]=Wu({prop:o,defaultProp:a??!1,onChange:d,caller:fv});return R.jsx(kX,{scope:r,triggerRef:f,contentRef:g,contentId:Ui(),titleId:Ui(),descriptionId:Ui(),open:$,onOpenChange:v,onOpenToggle:E.useCallback(()=>v(y=>!y),[v]),modal:h,children:s})};eL.displayName=fv;var tL="DialogTrigger",nL=E.forwardRef((t,r)=>{const{__scopeDialog:s,...o}=t,a=ei(tL,s),d=_t(r,a.triggerRef);return R.jsx(Ze.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":tw(a.open),...o,ref:d,onClick:Pe(t.onClick,a.onOpenToggle)})});nL.displayName=tL;var ZE="DialogPortal",[xX,rL]=ZN(ZE,{forceMount:void 0}),sL=t=>{const{__scopeDialog:r,forceMount:s,children:o,container:a}=t,d=ei(ZE,r);return R.jsx(xX,{scope:r,forceMount:s,children:E.Children.map(o,h=>R.jsx(Kr,{present:s||d.open,children:R.jsx(pg,{asChild:!0,container:a,children:h})}))})};sL.displayName=ZE;var S_="DialogOverlay",oL=E.forwardRef((t,r)=>{const s=rL(S_,t.__scopeDialog),{forceMount:o=s.forceMount,...a}=t,d=ei(S_,t.__scopeDialog);return d.modal?R.jsx(Kr,{present:o||d.open,children:R.jsx(AX,{...a,ref:r})}):null});oL.displayName=S_;var OX=ju("DialogOverlay.RemoveScroll"),AX=E.forwardRef((t,r)=>{const{__scopeDialog:s,...o}=t,a=ei(S_,s);return R.jsx(iv,{as:OX,allowPinchZoom:!0,shards:[a.contentRef],children:R.jsx(Ze.div,{"data-state":tw(a.open),...o,ref:r,style:{pointerEvents:"auto",...o.style}})})}),Yu="DialogContent",iL=E.forwardRef((t,r)=>{const s=rL(Yu,t.__scopeDialog),{forceMount:o=s.forceMount,...a}=t,d=ei(Yu,t.__scopeDialog);return R.jsx(Kr,{present:o||d.open,children:d.modal?R.jsx(NX,{...a,ref:r}):R.jsx(LX,{...a,ref:r})})});iL.displayName=Yu;var NX=E.forwardRef((t,r)=>{const s=ei(Yu,t.__scopeDialog),o=E.useRef(null),a=_t(r,s.contentRef,o);return E.useEffect(()=>{const d=o.current;if(d)return VE(d)},[]),R.jsx(lL,{...t,ref:a,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Pe(t.onCloseAutoFocus,d=>{d.preventDefault(),s.triggerRef.current?.focus()}),onPointerDownOutside:Pe(t.onPointerDownOutside,d=>{const h=d.detail.originalEvent,f=h.button===0&&h.ctrlKey===!0;(h.button===2||f)&&d.preventDefault()}),onFocusOutside:Pe(t.onFocusOutside,d=>d.preventDefault())})}),LX=E.forwardRef((t,r)=>{const s=ei(Yu,t.__scopeDialog),o=E.useRef(!1),a=E.useRef(!1);return R.jsx(lL,{...t,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:d=>{t.onCloseAutoFocus?.(d),d.defaultPrevented||(o.current||s.triggerRef.current?.focus(),d.preventDefault()),o.current=!1,a.current=!1},onInteractOutside:d=>{t.onInteractOutside?.(d),d.defaultPrevented||(o.current=!0,d.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const h=d.target;s.triggerRef.current?.contains(h)&&d.preventDefault(),d.detail.originalEvent.type==="focusin"&&a.current&&d.preventDefault()}})}),lL=E.forwardRef((t,r)=>{const{__scopeDialog:s,trapFocus:o,onOpenAutoFocus:a,onCloseAutoFocus:d,...h}=t,f=ei(Yu,s),g=E.useRef(null),$=_t(r,g);return UE(),R.jsxs(R.Fragment,{children:[R.jsx(sv,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:a,onUnmountAutoFocus:d,children:R.jsx(gp,{role:"dialog",id:f.contentId,"aria-describedby":f.descriptionId,"aria-labelledby":f.titleId,"data-state":tw(f.open),...h,ref:$,onDismiss:()=>f.onOpenChange(!1)})}),R.jsxs(R.Fragment,{children:[R.jsx(MX,{titleId:f.titleId}),R.jsx(DX,{contentRef:g,descriptionId:f.descriptionId})]})]})}),ew="DialogTitle",aL=E.forwardRef((t,r)=>{const{__scopeDialog:s,...o}=t,a=ei(ew,s);return R.jsx(Ze.h2,{id:a.titleId,...o,ref:r})});aL.displayName=ew;var cL="DialogDescription",uL=E.forwardRef((t,r)=>{const{__scopeDialog:s,...o}=t,a=ei(cL,s);return R.jsx(Ze.p,{id:a.descriptionId,...o,ref:r})});uL.displayName=cL;var dL="DialogClose",hL=E.forwardRef((t,r)=>{const{__scopeDialog:s,...o}=t,a=ei(dL,s);return R.jsx(Ze.button,{type:"button",...o,ref:r,onClick:Pe(t.onClick,()=>a.onOpenChange(!1))})});hL.displayName=dL;function tw(t){return t?"open":"closed"}var pL="DialogTitleWarning",[K6,fL]=SP(pL,{contentName:Yu,titleName:ew,docsSlug:"dialog"}),MX=({titleId:t})=>{const r=fL(pL),s=`\`${r.contentName}\` requires a \`${r.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${r.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${r.docsSlug}`;return E.useEffect(()=>{t&&(document.getElementById(t)||console.error(s))},[s,t]),null},PX="DialogDescriptionWarning",DX=({contentRef:t,descriptionId:r})=>{const o=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${fL(PX).contentName}}.`;return E.useEffect(()=>{const a=t.current?.getAttribute("aria-describedby");r&&a&&(document.getElementById(r)||console.warn(o))},[o,t,r]),null},BX=eL,FX=nL,UX=sL,mL=oL,gL=iL,$L=aL,_L=uL,VX=hL;const FR=BX,HX=FX,GX=UX,vL=E.forwardRef(({className:t,...r},s)=>R.jsx(mL,{ref:s,className:pt("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r}));vL.displayName=mL.displayName;const ub=E.forwardRef(({className:t,children:r,...s},o)=>R.jsxs(GX,{children:[R.jsx(vL,{}),R.jsxs(gL,{ref:o,className:pt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s,children:[r,R.jsxs(VX,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[R.jsx(Db,{className:"h-4 w-4"}),R.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ub.displayName=gL.displayName;const db=({className:t,...r})=>R.jsx("div",{className:pt("flex flex-col space-y-1.5 text-center sm:text-left",t),...r});db.displayName="DialogHeader";const hb=({className:t,...r})=>R.jsx("div",{className:pt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r});hb.displayName="DialogFooter";const pb=E.forwardRef(({className:t,...r},s)=>R.jsx($L,{ref:s,className:pt("text-lg font-semibold leading-none tracking-tight",t),...r}));pb.displayName=$L.displayName;const fb=E.forwardRef(({className:t,...r},s)=>R.jsx(_L,{ref:s,className:pt("text-sm text-muted-foreground",t),...r}));fb.displayName=_L.displayName;var jX="Label",yL=E.forwardRef((t,r)=>R.jsx(Ze.label,{...t,ref:r,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(t.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));yL.displayName=jX;var TL=yL;const WX=Mb("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),bL=E.forwardRef(({className:t,...r},s)=>R.jsx(TL,{ref:s,className:pt(WX(),t),...r}));bL.displayName=TL.displayName;var nw="Progress",rw=100,[zX]=To(nw),[KX,XX]=zX(nw),EL=E.forwardRef((t,r)=>{const{__scopeProgress:s,value:o=null,max:a,getValueLabel:d=YX,...h}=t;(a||a===0)&&!UR(a)&&console.error(qX(`${a}`,"Progress"));const f=UR(a)?a:rw;o!==null&&!VR(o,f)&&console.error(JX(`${o}`,"Progress"));const g=VR(o,f)?o:null,$=C_(g)?d(g,f):void 0;return R.jsx(KX,{scope:s,value:g,max:f,children:R.jsx(Ze.div,{"aria-valuemax":f,"aria-valuemin":0,"aria-valuenow":C_(g)?g:void 0,"aria-valuetext":$,role:"progressbar","data-state":CL(g,f),"data-value":g??void 0,"data-max":f,...h,ref:r})})});EL.displayName=nw;var wL="ProgressIndicator",SL=E.forwardRef((t,r)=>{const{__scopeProgress:s,...o}=t,a=XX(wL,s);return R.jsx(Ze.div,{"data-state":CL(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...o,ref:r})});SL.displayName=wL;function YX(t,r){return`${Math.round(t/r*100)}%`}function CL(t,r){return t==null?"indeterminate":t===r?"complete":"loading"}function C_(t){return typeof t=="number"}function UR(t){return C_(t)&&!isNaN(t)&&t>0}function VR(t,r){return C_(t)&&!isNaN(t)&&t<=r&&t>=0}function qX(t,r){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${r}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${rw}\`.`}function JX(t,r){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${r}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${rw} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var IL=EL,QX=SL;const RL=E.forwardRef(({className:t,value:r,...s},o)=>R.jsx(IL,{ref:o,className:pt("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...s,children:R.jsx(QX,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(r||0)}%)`}})}));RL.displayName=IL.displayName;const ZX=t=>t?(...r)=>t(...r):(...r)=>fetch(...r);class sw extends Error{constructor(r,s="FunctionsError",o){super(r),this.name=s,this.context=o}}class e5 extends sw{constructor(r){super("Failed to send a request to the Edge Function","FunctionsFetchError",r)}}class HR extends sw{constructor(r){super("Relay Error invoking the Edge Function","FunctionsRelayError",r)}}class GR extends sw{constructor(r){super("Edge Function returned a non-2xx status code","FunctionsHttpError",r)}}var mb;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(mb||(mb={}));class t5{constructor(r,{headers:s={},customFetch:o,region:a=mb.Any}={}){this.url=r,this.headers=s,this.region=a,this.fetch=ZX(o)}setAuth(r){this.headers.Authorization=`Bearer ${r}`}invoke(r){return WW(this,arguments,void 0,function*(s,o={}){var a;let d,h;try{const{headers:f,method:g,body:$,signal:v,timeout:y}=o;let w={},{region:S}=o;S||(S=this.region);const O=new URL(`${this.url}/${s}`);S&&S!=="any"&&(w["x-region"]=S,O.searchParams.set("forceFunctionRegion",S));let I;$&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)?typeof Blob<"u"&&$ instanceof Blob||$ instanceof ArrayBuffer?(w["Content-Type"]="application/octet-stream",I=$):typeof $=="string"?(w["Content-Type"]="text/plain",I=$):typeof FormData<"u"&&$ instanceof FormData?I=$:(w["Content-Type"]="application/json",I=JSON.stringify($)):$&&typeof $!="string"&&!(typeof Blob<"u"&&$ instanceof Blob)&&!($ instanceof ArrayBuffer)&&!(typeof FormData<"u"&&$ instanceof FormData)?I=JSON.stringify($):I=$;let x=v;y&&(h=new AbortController,d=setTimeout(()=>h.abort(),y),v?(x=h.signal,v.addEventListener("abort",()=>h.abort())):x=h.signal);const A=yield this.fetch(O.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},w),this.headers),f),body:I,signal:x}).catch(B=>{throw new e5(B)}),M=A.headers.get("x-relay-error");if(M&&M==="true")throw new HR(A);if(!A.ok)throw new GR(A);let P=((a=A.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),F;return P==="application/json"?F=yield A.json():P==="application/octet-stream"||P==="application/pdf"?F=yield A.blob():P==="text/event-stream"?F=A:P==="multipart/form-data"?F=yield A.formData():F=yield A.text(),{data:F,error:null,response:A}}catch(f){return{data:null,error:f,response:f instanceof GR||f instanceof HR?f.context:void 0}}finally{d&&clearTimeout(d)}})}}var n5=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},r5=class{constructor(t){var r,s;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(r=t.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=t.signal,this.isMaybeSingle=(s=t.isMaybeSingle)!==null&&s!==void 0?s:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=new Headers(this.headers),this.headers.set(t,r),this}then(t,r){var s=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let a=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{let h=null,f=null,g=null,$=d.status,v=d.statusText;if(d.ok){var y,w;if(s.method!=="HEAD"){var S;const A=await d.text();A===""||(s.headers.get("Accept")==="text/csv"||s.headers.get("Accept")&&(!((S=s.headers.get("Accept"))===null||S===void 0)&&S.includes("application/vnd.pgrst.plan+text"))?f=A:f=JSON.parse(A))}const I=(y=s.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),x=(w=d.headers.get("content-range"))===null||w===void 0?void 0:w.split("/");I&&x&&x.length>1&&(g=parseInt(x[1])),s.isMaybeSingle&&s.method==="GET"&&Array.isArray(f)&&(f.length>1?(h={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,g=null,$=406,v="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{var O;const I=await d.text();try{h=JSON.parse(I),Array.isArray(h)&&d.status===404&&(f=[],h=null,$=200,v="OK")}catch{d.status===404&&I===""?($=204,v="No Content"):h={message:I}}if(h&&s.isMaybeSingle&&(!(h==null||(O=h.details)===null||O===void 0)&&O.includes("0 rows"))&&(h=null,$=200,v="OK"),h&&s.shouldThrowOnError)throw new n5(h)}return{error:h,data:f,count:g,status:$,statusText:v}});return this.shouldThrowOnError||(a=a.catch(d=>{var h;let f="";const g=d?.cause;if(g){var $,v,y,w;const O=($=g?.message)!==null&&$!==void 0?$:"",I=(v=g?.code)!==null&&v!==void 0?v:"";f=`${(y=d?.name)!==null&&y!==void 0?y:"FetchError"}: ${d?.message}`,f+=`

Caused by: ${(w=g?.name)!==null&&w!==void 0?w:"Error"}: ${O}`,I&&(f+=` (${I})`),g?.stack&&(f+=`
${g.stack}`)}else{var S;f=(S=d?.stack)!==null&&S!==void 0?S:""}return{error:{message:`${(h=d?.name)!==null&&h!==void 0?h:"FetchError"}: ${d?.message}`,details:f,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(t,r)}returns(){return this}overrideTypes(){return this}},s5=class extends r5{select(t){let r=!1;const s=(t??"*").split("").map(o=>/\s/.test(o)&&!r?"":(o==='"'&&(r=!r),o)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:r=!0,nullsFirst:s,foreignTable:o,referencedTable:a=o}={}){const d=a?`${a}.order`:"order",h=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${h?`${h},`:""}${t}.${r?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:s=r}={}){const o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${t}`),this}range(t,r,{foreignTable:s,referencedTable:o=s}={}){const a=typeof o>"u"?"offset":`${o}.offset`,d=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(d,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:r=!1,settings:s=!1,buffers:o=!1,wal:a=!1,format:d="text"}={}){var h;const f=[t?"analyze":null,r?"verbose":null,s?"settings":null,o?"buffers":null,a?"wal":null].filter(Boolean).join("|"),g=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${g}"; options=${f};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const jR=new RegExp("[,()]");var jh=class extends s5{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}regexMatch(t,r){return this.url.searchParams.append(t,`match.${r}`),this}regexIMatch(t,r){return this.url.searchParams.append(t,`imatch.${r}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}isDistinct(t,r){return this.url.searchParams.append(t,`isdistinct.${r}`),this}in(t,r){const s=Array.from(new Set(r)).map(o=>typeof o=="string"&&jR.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(t,`in.(${s})`),this}notIn(t,r){const s=Array.from(new Set(r)).map(o=>typeof o=="string"&&jR.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(t,`not.in.(${s})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:s,type:o}={}){let a="";o==="plain"?a="pl":o==="phrase"?a="ph":o==="websearch"&&(a="w");const d=s===void 0?"":`(${s})`;return this.url.searchParams.append(t,`${a}fts${d}.${r}`),this}match(t){return Object.entries(t).forEach(([r,s])=>{this.url.searchParams.append(r,`eq.${s}`)}),this}not(t,r,s){return this.url.searchParams.append(t,`not.${r}.${s}`),this}or(t,{foreignTable:r,referencedTable:s=r}={}){const o=s?`${s}.or`:"or";return this.url.searchParams.append(o,`(${t})`),this}filter(t,r,s){return this.url.searchParams.append(t,`${r}.${s}`),this}},o5=class{constructor(t,{headers:r={},schema:s,fetch:o}){this.url=t,this.headers=new Headers(r),this.schema=s,this.fetch=o}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,r){const{head:s=!1,count:o}=r??{},a=s?"HEAD":"GET";let d=!1;const h=(t??"*").split("").map($=>/\s/.test($)&&!d?"":($==='"'&&(d=!d),$)).join(""),{url:f,headers:g}=this.cloneRequestState();return f.searchParams.set("select",h),o&&g.append("Prefer",`count=${o}`),new jh({method:a,url:f,headers:g,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:s=!0}={}){var o;const a="POST",{url:d,headers:h}=this.cloneRequestState();if(r&&h.append("Prefer",`count=${r}`),s||h.append("Prefer","missing=default"),Array.isArray(t)){const f=t.reduce((g,$)=>g.concat(Object.keys($)),[]);if(f.length>0){const g=[...new Set(f)].map($=>`"${$}"`);d.searchParams.set("columns",g.join(","))}}return new jh({method:a,url:d,headers:h,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:s=!1,count:o,defaultToNull:a=!0}={}){var d;const h="POST",{url:f,headers:g}=this.cloneRequestState();if(g.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),r!==void 0&&f.searchParams.set("on_conflict",r),o&&g.append("Prefer",`count=${o}`),a||g.append("Prefer","missing=default"),Array.isArray(t)){const $=t.reduce((v,y)=>v.concat(Object.keys(y)),[]);if($.length>0){const v=[...new Set($)].map(y=>`"${y}"`);f.searchParams.set("columns",v.join(","))}}return new jh({method:h,url:f,headers:g,schema:this.schema,body:t,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(t,{count:r}={}){var s;const o="PATCH",{url:a,headers:d}=this.cloneRequestState();return r&&d.append("Prefer",`count=${r}`),new jh({method:o,url:a,headers:d,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:t}={}){var r;const s="DELETE",{url:o,headers:a}=this.cloneRequestState();return t&&a.append("Prefer",`count=${t}`),new jh({method:s,url:o,headers:a,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}},i5=class kL{constructor(r,{headers:s={},schema:o,fetch:a}={}){this.url=r,this.headers=new Headers(s),this.schemaName=o,this.fetch=a}from(r){if(!r||typeof r!="string"||r.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new o5(new URL(`${this.url}/${r}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(r){return new kL(this.url,{headers:this.headers,schema:r,fetch:this.fetch})}rpc(r,s={},{head:o=!1,get:a=!1,count:d}={}){var h;let f;const g=new URL(`${this.url}/rpc/${r}`);let $;const v=S=>S!==null&&typeof S=="object"&&(!Array.isArray(S)||S.some(v)),y=o&&Object.values(s).some(v);y?(f="POST",$=s):o||a?(f=o?"HEAD":"GET",Object.entries(s).filter(([S,O])=>O!==void 0).map(([S,O])=>[S,Array.isArray(O)?`{${O.join(",")}}`:`${O}`]).forEach(([S,O])=>{g.searchParams.append(S,O)})):(f="POST",$=s);const w=new Headers(this.headers);return y?w.set("Prefer",d?`count=${d},return=minimal`:"return=minimal"):d&&w.set("Prefer",`count=${d}`),new jh({method:f,url:g,headers:w,schema:this.schemaName,body:$,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}};class l5{constructor(){}static detectEnvironment(){var r;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((r=navigator.userAgent)===null||r===void 0)&&r.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const s=globalThis.process;if(s){const o=s.versions;if(o&&o.node){const a=o.node,d=parseInt(a.replace(/^v/,"").split(".")[0]);return d>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${d} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${d} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const r=this.detectEnvironment();if(r.constructor)return r.constructor;let s=r.error||"WebSocket not supported in this environment.";throw r.workaround&&(s+=`

Suggested solution: ${r.workaround}`),new Error(s)}static createWebSocket(r,s){const o=this.getWebSocketConstructor();return new o(r,s)}static isWebSocketSupported(){try{const r=this.detectEnvironment();return r.type==="native"||r.type==="ws"}catch{return!1}}}const a5="2.90.1",c5=`realtime-js/${a5}`,xL="1.0.0",u5="2.0.0",WR=xL,gb=1e4,d5=1e3,h5=100;var Ya;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ya||(Ya={}));var Kn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Kn||(Kn={}));var qo;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(qo||(qo={}));var $b;(function(t){t.websocket="websocket"})($b||($b={}));var Lu;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Lu||(Lu={}));class p5{constructor(r){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=r??[]}encode(r,s){if(r.event===this.BROADCAST_EVENT&&!(r.payload instanceof ArrayBuffer)&&typeof r.payload.event=="string")return s(this._binaryEncodeUserBroadcastPush(r));let o=[r.join_ref,r.ref,r.topic,r.event,r.payload];return s(JSON.stringify(o))}_binaryEncodeUserBroadcastPush(r){var s;return this._isArrayBuffer((s=r.payload)===null||s===void 0?void 0:s.payload)?this._encodeBinaryUserBroadcastPush(r):this._encodeJsonUserBroadcastPush(r)}_encodeBinaryUserBroadcastPush(r){var s,o;const a=(o=(s=r.payload)===null||s===void 0?void 0:s.payload)!==null&&o!==void 0?o:new ArrayBuffer(0);return this._encodeUserBroadcastPush(r,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(r){var s,o;const a=(o=(s=r.payload)===null||s===void 0?void 0:s.payload)!==null&&o!==void 0?o:{},h=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(r,this.JSON_ENCODING,h)}_encodeUserBroadcastPush(r,s,o){var a,d;const h=r.topic,f=(a=r.ref)!==null&&a!==void 0?a:"",g=(d=r.join_ref)!==null&&d!==void 0?d:"",$=r.payload.event,v=this.allowedMetadataKeys?this._pick(r.payload,this.allowedMetadataKeys):{},y=Object.keys(v).length===0?"":JSON.stringify(v);if(g.length>255)throw new Error(`joinRef length ${g.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`ref length ${f.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`topic length ${h.length} exceeds maximum of 255`);if($.length>255)throw new Error(`userEvent length ${$.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`metadata length ${y.length} exceeds maximum of 255`);const w=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+f.length+h.length+$.length+y.length,S=new ArrayBuffer(this.HEADER_LENGTH+w);let O=new DataView(S),I=0;O.setUint8(I++,this.KINDS.userBroadcastPush),O.setUint8(I++,g.length),O.setUint8(I++,f.length),O.setUint8(I++,h.length),O.setUint8(I++,$.length),O.setUint8(I++,y.length),O.setUint8(I++,s),Array.from(g,A=>O.setUint8(I++,A.charCodeAt(0))),Array.from(f,A=>O.setUint8(I++,A.charCodeAt(0))),Array.from(h,A=>O.setUint8(I++,A.charCodeAt(0))),Array.from($,A=>O.setUint8(I++,A.charCodeAt(0))),Array.from(y,A=>O.setUint8(I++,A.charCodeAt(0)));var x=new Uint8Array(S.byteLength+o.byteLength);return x.set(new Uint8Array(S),0),x.set(new Uint8Array(o),S.byteLength),x.buffer}decode(r,s){if(this._isArrayBuffer(r)){let o=this._binaryDecode(r);return s(o)}if(typeof r=="string"){const o=JSON.parse(r),[a,d,h,f,g]=o;return s({join_ref:a,ref:d,topic:h,event:f,payload:g})}return s({})}_binaryDecode(r){const s=new DataView(r),o=s.getUint8(0),a=new TextDecoder;if(o===this.KINDS.userBroadcast)return this._decodeUserBroadcast(r,s,a)}_decodeUserBroadcast(r,s,o){const a=s.getUint8(1),d=s.getUint8(2),h=s.getUint8(3),f=s.getUint8(4);let g=this.HEADER_LENGTH+4;const $=o.decode(r.slice(g,g+a));g=g+a;const v=o.decode(r.slice(g,g+d));g=g+d;const y=o.decode(r.slice(g,g+h));g=g+h;const w=r.slice(g,r.byteLength),S=f===this.JSON_ENCODING?JSON.parse(o.decode(w)):w,O={type:this.BROADCAST_EVENT,event:v,payload:S};return h>0&&(O.meta=JSON.parse(y)),{join_ref:null,ref:null,topic:$,event:this.BROADCAST_EVENT,payload:O}}_isArrayBuffer(r){var s;return r instanceof ArrayBuffer||((s=r?.constructor)===null||s===void 0?void 0:s.name)==="ArrayBuffer"}_pick(r,s){return!r||typeof r!="object"?{}:Object.fromEntries(Object.entries(r).filter(([o])=>s.includes(o)))}}class OL{constructor(r,s){this.callback=r,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=r,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Jt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Jt||(Jt={}));const zR=(t,r,s={})=>{var o;const a=(o=s.skipTypes)!==null&&o!==void 0?o:[];return r?Object.keys(r).reduce((d,h)=>(d[h]=f5(h,t,r,a),d),{}):{}},f5=(t,r,s,o)=>{const a=r.find(f=>f.name===t),d=a?.type,h=s[t];return d&&!o.includes(d)?AL(d,h):_b(h)},AL=(t,r)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return _5(r,s)}switch(t){case Jt.bool:return m5(r);case Jt.float4:case Jt.float8:case Jt.int2:case Jt.int4:case Jt.int8:case Jt.numeric:case Jt.oid:return g5(r);case Jt.json:case Jt.jsonb:return $5(r);case Jt.timestamp:return v5(r);case Jt.abstime:case Jt.date:case Jt.daterange:case Jt.int4range:case Jt.int8range:case Jt.money:case Jt.reltime:case Jt.text:case Jt.time:case Jt.timestamptz:case Jt.timetz:case Jt.tsrange:case Jt.tstzrange:return _b(r);default:return _b(r)}},_b=t=>t,m5=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},g5=t=>{if(typeof t=="string"){const r=parseFloat(t);if(!Number.isNaN(r))return r}return t},$5=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},_5=(t,r)=>{if(typeof t!="string")return t;const s=t.length-1,o=t[s];if(t[0]==="{"&&o==="}"){let d;const h=t.slice(1,s);try{d=JSON.parse("["+h+"]")}catch{d=h?h.split(","):[]}return d.map(f=>AL(r,f))}return t},v5=t=>typeof t=="string"?t.replace(" ","T"):t,NL=t=>{const r=new URL(t);return r.protocol=r.protocol.replace(/^ws/i,"http"),r.pathname=r.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),r.pathname===""||r.pathname==="/"?r.pathname="/api/broadcast":r.pathname=r.pathname+"/api/broadcast",r.href};class nT{constructor(r,s,o={},a=gb){this.channel=r,this.event=s,this.payload=o,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(r){this.timeout=r,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(r){this.payload=Object.assign(Object.assign({},this.payload),r)}receive(r,s){var o;return this._hasReceived(r)&&s((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:r,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const r=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},r),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(r,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:r,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:r,response:s}){this.recHooks.filter(o=>o.status===r).forEach(o=>o.callback(s))}_hasReceived(r){return this.receivedResp&&this.receivedResp.status===r}}var KR;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(KR||(KR={}));class zm{constructor(r,s){this.channel=r,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},a=>{const{onJoin:d,onLeave:h,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=zm.syncState(this.state,a,d,h),this.pendingDiffs.forEach(g=>{this.state=zm.syncDiff(this.state,g,d,h)}),this.pendingDiffs=[],f()}),this.channel._on(o.diff,{},a=>{const{onJoin:d,onLeave:h,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=zm.syncDiff(this.state,a,d,h),f())}),this.onJoin((a,d,h)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:d,newPresences:h})}),this.onLeave((a,d,h)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:d,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(r,s,o,a){const d=this.cloneDeep(r),h=this.transformState(s),f={},g={};return this.map(d,($,v)=>{h[$]||(g[$]=v)}),this.map(h,($,v)=>{const y=d[$];if(y){const w=v.map(x=>x.presence_ref),S=y.map(x=>x.presence_ref),O=v.filter(x=>S.indexOf(x.presence_ref)<0),I=y.filter(x=>w.indexOf(x.presence_ref)<0);O.length>0&&(f[$]=O),I.length>0&&(g[$]=I)}else f[$]=v}),this.syncDiff(d,{joins:f,leaves:g},o,a)}static syncDiff(r,s,o,a){const{joins:d,leaves:h}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return o||(o=()=>{}),a||(a=()=>{}),this.map(d,(f,g)=>{var $;const v=($=r[f])!==null&&$!==void 0?$:[];if(r[f]=this.cloneDeep(g),v.length>0){const y=r[f].map(S=>S.presence_ref),w=v.filter(S=>y.indexOf(S.presence_ref)<0);r[f].unshift(...w)}o(f,v,g)}),this.map(h,(f,g)=>{let $=r[f];if(!$)return;const v=g.map(y=>y.presence_ref);$=$.filter(y=>v.indexOf(y.presence_ref)<0),r[f]=$,a(f,$,g),$.length===0&&delete r[f]}),r}static map(r,s){return Object.getOwnPropertyNames(r).map(o=>s(o,r[o]))}static transformState(r){return r=this.cloneDeep(r),Object.getOwnPropertyNames(r).reduce((s,o)=>{const a=r[o];return"metas"in a?s[o]=a.metas.map(d=>(d.presence_ref=d.phx_ref,delete d.phx_ref,delete d.phx_ref_prev,d)):s[o]=a,s},{})}static cloneDeep(r){return JSON.parse(JSON.stringify(r))}onJoin(r){this.caller.onJoin=r}onLeave(r){this.caller.onLeave=r}onSync(r){this.caller.onSync=r}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var XR;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(XR||(XR={}));var Km;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Km||(Km={}));var jl;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(jl||(jl={}));class ep{constructor(r,s={config:{}},o){var a,d;if(this.topic=r,this.params=s,this.socket=o,this.bindings={},this.state=Kn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=r.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new nT(this,qo.join,this.params,this.timeout),this.rejoinTimer=new OL(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Kn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(h=>h.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Kn.closed,this.socket._remove(this)}),this._onError(h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Kn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Kn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Kn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(qo.reply,{},(h,f)=>{this._trigger(this._replyEventName(f),h)}),this.presence=new zm(this),this.broadcastEndpointURL=NL(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((d=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||d===void 0)&&d.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(r,s=this.timeout){var o,a,d;if(this.socket.isConnected()||this.socket.connect(),this.state==Kn.closed){const{config:{broadcast:h,presence:f,private:g}}=this.params,$=(a=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(S=>S.filter))!==null&&a!==void 0?a:[],v=!!this.bindings[Km.PRESENCE]&&this.bindings[Km.PRESENCE].length>0||((d=this.params.config.presence)===null||d===void 0?void 0:d.enabled)===!0,y={},w={broadcast:h,presence:Object.assign(Object.assign({},f),{enabled:v}),postgres_changes:$,private:g};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(S=>r?.(jl.CHANNEL_ERROR,S)),this._onClose(()=>r?.(jl.CLOSED)),this.updateJoinPayload(Object.assign({config:w},y)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:S})=>{var O;if(this.socket._isManualToken()||this.socket.setAuth(),S===void 0){r?.(jl.SUBSCRIBED);return}else{const I=this.bindings.postgres_changes,x=(O=I?.length)!==null&&O!==void 0?O:0,A=[];for(let M=0;M<x;M++){const P=I[M],{filter:{event:F,schema:B,table:V,filter:j}}=P,W=S&&S[M];if(W&&W.event===F&&ep.isFilterValueEqual(W.schema,B)&&ep.isFilterValueEqual(W.table,V)&&ep.isFilterValueEqual(W.filter,j))A.push(Object.assign(Object.assign({},P),{id:W.id}));else{this.unsubscribe(),this.state=Kn.errored,r?.(jl.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=A,r&&r(jl.SUBSCRIBED);return}}).receive("error",S=>{this.state=Kn.errored,r?.(jl.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(S).join(", ")||"error")))}).receive("timeout",()=>{r?.(jl.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(r,s={}){return await this.send({type:"presence",event:"track",payload:r},s.timeout||this.timeout)}async untrack(r={}){return await this.send({type:"presence",event:"untrack"},r)}on(r,s,o){return this.state===Kn.joined&&r===Km.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(r,s,o)}async httpSend(r,s,o={}){var a;if(s==null)return Promise.reject("Payload is required for httpSend()");const d={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(d.Authorization=`Bearer ${this.socket.accessTokenValue}`);const h={method:"POST",headers:d,body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:s,private:this.private}]})},f=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(a=o.timeout)!==null&&a!==void 0?a:this.timeout);if(f.status===202)return{success:!0};let g=f.statusText;try{const $=await f.json();g=$.error||$.message||g}catch{}return Promise.reject(new Error(g))}async send(r,s={}){var o,a;if(!this._canPush()&&r.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:d,payload:h}=r,f={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(f.Authorization=`Bearer ${this.socket.accessTokenValue}`);const g={method:"POST",headers:f,body:JSON.stringify({messages:[{topic:this.subTopic,event:d,payload:h,private:this.private}]})};try{const $=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(o=s.timeout)!==null&&o!==void 0?o:this.timeout);return await((a=$.body)===null||a===void 0?void 0:a.cancel()),$.ok?"ok":"error"}catch($){return $.name==="AbortError"?"timed out":"error"}}else return new Promise(d=>{var h,f,g;const $=this._push(r.type,r,s.timeout||this.timeout);r.type==="broadcast"&&!(!((g=(f=(h=this.params)===null||h===void 0?void 0:h.config)===null||f===void 0?void 0:f.broadcast)===null||g===void 0)&&g.ack)&&d("ok"),$.receive("ok",()=>d("ok")),$.receive("error",()=>d("error")),$.receive("timeout",()=>d("timed out"))})}updateJoinPayload(r){this.joinPush.updatePayload(r)}unsubscribe(r=this.timeout){this.state=Kn.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(qo.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(a=>{o=new nT(this,qo.leave,{},r),o.receive("ok",()=>{s(),a("ok")}).receive("timeout",()=>{s(),a("timed out")}).receive("error",()=>{a("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o?.destroy()})}teardown(){this.pushBuffer.forEach(r=>r.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Kn.closed,this.bindings={}}async _fetchWithTimeout(r,s,o){const a=new AbortController,d=setTimeout(()=>a.abort(),o),h=await this.socket.fetch(r,Object.assign(Object.assign({},s),{signal:a.signal}));return clearTimeout(d),h}_push(r,s,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${r}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new nT(this,r,s,o);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(r){if(r.startTimeout(),this.pushBuffer.push(r),this.pushBuffer.length>h5){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(r,s,o){return s}_isMember(r){return this.topic===r}_joinRef(){return this.joinPush.ref}_trigger(r,s,o){var a,d;const h=r.toLocaleLowerCase(),{close:f,error:g,leave:$,join:v}=qo;if(o&&[f,g,$,v].indexOf(h)>=0&&o!==this._joinRef())return;let w=this._onMessage(h,s,o);if(s&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(S=>{var O,I,x;return((O=S.filter)===null||O===void 0?void 0:O.event)==="*"||((x=(I=S.filter)===null||I===void 0?void 0:I.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===h}).map(S=>S.callback(w,o)):(d=this.bindings[h])===null||d===void 0||d.filter(S=>{var O,I,x,A,M,P,F,B;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in S){const V=S.id,j=(O=S.filter)===null||O===void 0?void 0:O.event;return V&&((I=s.ids)===null||I===void 0?void 0:I.includes(V))&&(j==="*"||j?.toLocaleLowerCase()===((x=s.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))&&(!(!((A=S.filter)===null||A===void 0)&&A.table)||S.filter.table===((M=s.data)===null||M===void 0?void 0:M.table))}else{const V=(F=(P=S?.filter)===null||P===void 0?void 0:P.event)===null||F===void 0?void 0:F.toLocaleLowerCase();return V==="*"||V===((B=s?.event)===null||B===void 0?void 0:B.toLocaleLowerCase())}else return S.type.toLocaleLowerCase()===h}).map(S=>{if(typeof w=="object"&&"ids"in w){const O=w.data,{schema:I,table:x,commit_timestamp:A,type:M,errors:P}=O;w=Object.assign(Object.assign({},{schema:I,table:x,commit_timestamp:A,eventType:M,new:{},old:{},errors:P}),this._getPayloadRecords(O))}S.callback(w,o)})}_isClosed(){return this.state===Kn.closed}_isJoined(){return this.state===Kn.joined}_isJoining(){return this.state===Kn.joining}_isLeaving(){return this.state===Kn.leaving}_replyEventName(r){return`chan_reply_${r}`}_on(r,s,o){const a=r.toLocaleLowerCase(),d={type:a,filter:s,callback:o};return this.bindings[a]?this.bindings[a].push(d):this.bindings[a]=[d],this}_off(r,s){const o=r.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(a=>{var d;return!(((d=a.type)===null||d===void 0?void 0:d.toLocaleLowerCase())===o&&ep.isEqual(a.filter,s))})),this}static isEqual(r,s){if(Object.keys(r).length!==Object.keys(s).length)return!1;for(const o in r)if(r[o]!==s[o])return!1;return!0}static isFilterValueEqual(r,s){return(r??void 0)===(s??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(r){this._on(qo.close,{},r)}_onError(r){this._on(qo.error,{},s=>r(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(r=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Kn.joining,this.joinPush.resend(r))}_getPayloadRecords(r){const s={new:{},old:{}};return(r.type==="INSERT"||r.type==="UPDATE")&&(s.new=zR(r.columns,r.record)),(r.type==="UPDATE"||r.type==="DELETE")&&(s.old=zR(r.columns,r.old_record)),s}}const rT=()=>{},U$={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},y5=[1e3,2e3,5e3,1e4],T5=1e4,b5=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class E5{constructor(r,s){var o;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=gb,this.transport=null,this.heartbeatIntervalMs=U$.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=rT,this.ref=0,this.reconnectTimer=null,this.vsn=WR,this.logger=rT,this.conn=null,this.sendBuffer=[],this.serializer=new p5,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=a=>a?(...d)=>a(...d):(...d)=>fetch(...d),!(!((o=s?.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${r}/${$b.websocket}`,this.httpEndpoint=NL(r),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=l5.createWebSocket(this.endpointURL())}catch(r){this._setConnectionState("disconnected");const s=r.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(r,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(r?this.conn.close(r,s??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(r){const s=await r.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const r=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),r}log(r,s,o){this.logger(r,s,o)}connectionState(){switch(this.conn&&this.conn.readyState){case Ya.connecting:return Lu.Connecting;case Ya.open:return Lu.Open;case Ya.closing:return Lu.Closing;default:return Lu.Closed}}isConnected(){return this.connectionState()===Lu.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(r,s={config:{}}){const o=`realtime:${r}`,a=this.getChannels().find(d=>d.topic===o);if(a)return a;{const d=new ep(`realtime:${r}`,s,this);return this.channels.push(d),d}}push(r){const{topic:s,event:o,payload:a,ref:d}=r,h=()=>{this.encode(r,f=>{var g;(g=this.conn)===null||g===void 0||g.send(f)})};this.log("push",`${s} ${o} (${d})`,a),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(r=null){this._authPromise=this._performAuth(r);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var r;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(r=this.conn)===null||r===void 0||r.close(d5,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},U$.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(r){this.heartbeatCallback=r}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(r=>r()),this.sendBuffer=[])}_makeRef(){let r=this.ref+1;return r===this.ref?this.ref=0:this.ref=r,this.ref.toString()}_leaveOpenTopic(r){let s=this.channels.find(o=>o.topic===r&&(o._isJoined()||o._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${r}"`),s.unsubscribe())}_remove(r){this.channels=this.channels.filter(s=>s.topic!==r.topic)}_onConnMessage(r){this.decode(r.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply"&&s.ref&&s.ref===this.pendingHeartbeatRef){const $=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error",$)}catch(v){this.log("error","error in heartbeat callback",v)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:o,event:a,payload:d,ref:h}=s,f=h?`(${h})`:"",g=d.status||"";this.log("receive",`${g} ${o} ${a} ${f}`.trim(),d),this.channels.filter($=>$._isMember(o)).forEach($=>$._trigger(a,d,h)),this._triggerStateCallbacks("message",s)})}_clearTimer(r){var s;r==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):r==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=r=>this._onConnError(r),this.conn.onmessage=r=>this._onConnMessage(r),this.conn.onclose=r=>this._onConnClose(r),this.conn.readyState===Ya.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ya.open||this.conn.readyState===Ya.connecting)try{this.conn.close()}catch(r){this.log("error","Error closing connection",r)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(r=>r.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(s=>{this.log("error","error waiting for auth on connect",s),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const r=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(r),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this._terminateWorker()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(r){var s;this._setConnectionState("disconnected"),this.log("transport","close",r),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",r)}_onConnError(r){this._setConnectionState("disconnected"),this.log("transport",`${r}`),this._triggerChanError(),this._triggerStateCallbacks("error",r)}_triggerChanError(){this.channels.forEach(r=>r._trigger(qo.error))}_appendParams(r,s){if(Object.keys(s).length===0)return r;const o=r.match(/\?/)?"&":"?",a=new URLSearchParams(s);return`${r}${o}${a}`}_workerObjectUrl(r){let s;if(r)s=r;else{const o=new Blob([b5],{type:"application/javascript"});s=URL.createObjectURL(o)}return s}_setConnectionState(r,s=!1){this._connectionState=r,r==="connecting"?this._wasManualDisconnect=!1:r==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(r=null){let s,o=!1;if(r)s=r,o=!0;else if(this.accessToken)try{s=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),s=this.accessTokenValue}else s=this.accessTokenValue;o?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(a=>{const d={access_token:s,version:c5};s&&a.updateJoinPayload(d),a.joinedOnce&&a._isJoined()&&a._push(qo.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(r="general"){this._isManualToken()||this.setAuth().catch(s=>{this.log("error",`Error setting auth in ${r}`,s)})}_triggerStateCallbacks(r,s){try{this.stateChangeCallbacks[r].forEach(o=>{try{o(s)}catch(a){this.log("error",`error in ${r} callback`,a)}})}catch(o){this.log("error",`error triggering ${r} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new OL(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},U$.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(r){var s,o,a,d,h,f,g,$,v,y,w,S;switch(this.transport=(s=r?.transport)!==null&&s!==void 0?s:null,this.timeout=(o=r?.timeout)!==null&&o!==void 0?o:gb,this.heartbeatIntervalMs=(a=r?.heartbeatIntervalMs)!==null&&a!==void 0?a:U$.HEARTBEAT_INTERVAL,this.worker=(d=r?.worker)!==null&&d!==void 0?d:!1,this.accessToken=(h=r?.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(f=r?.heartbeatCallback)!==null&&f!==void 0?f:rT,this.vsn=(g=r?.vsn)!==null&&g!==void 0?g:WR,r?.params&&(this.params=r.params),r?.logger&&(this.logger=r.logger),(r?.logLevel||r?.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=($=r?.reconnectAfterMs)!==null&&$!==void 0?$:(O=>y5[O-1]||T5),this.vsn){case xL:this.encode=(v=r?.encode)!==null&&v!==void 0?v:((O,I)=>I(JSON.stringify(O))),this.decode=(y=r?.decode)!==null&&y!==void 0?y:((O,I)=>I(JSON.parse(O)));break;case u5:this.encode=(w=r?.encode)!==null&&w!==void 0?w:this.serializer.encode.bind(this.serializer),this.decode=(S=r?.decode)!==null&&S!==void 0?S:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=r?.workerUrl}}}var og=class extends Error{constructor(t,r){super(t),this.name="IcebergError",this.status=r.status,this.icebergType=r.icebergType,this.icebergCode=r.icebergCode,this.details=r.details,this.isCommitStateUnknown=r.icebergType==="CommitStateUnknownException"||[500,502,504].includes(r.status)&&r.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function w5(t,r,s){const o=new URL(r,t);if(s)for(const[a,d]of Object.entries(s))d!==void 0&&o.searchParams.set(a,d);return o.toString()}async function S5(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function C5(t){const r=t.fetchImpl??globalThis.fetch;return{async request({method:s,path:o,query:a,body:d,headers:h}){const f=w5(t.baseUrl,o,a),g=await S5(t.auth),$=await r(f,{method:s,headers:{...d?{"Content-Type":"application/json"}:{},...g,...h},body:d?JSON.stringify(d):void 0}),v=await $.text(),y=($.headers.get("content-type")||"").includes("application/json"),w=y&&v?JSON.parse(v):v;if(!$.ok){const S=y?w:void 0,O=S?.error;throw new og(O?.message??`Request failed with status ${$.status}`,{status:$.status,icebergType:O?.type,icebergCode:O?.code,details:S})}return{status:$.status,headers:$.headers,data:w}}}}function V$(t){return t.join("")}var I5=class{constructor(t,r=""){this.client=t,this.prefix=r}async listNamespaces(t){const r=t?{parent:V$(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:r})).data.namespaces.map(o=>({namespace:o}))}async createNamespace(t,r){const s={namespace:t.namespace,properties:r?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:s})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${V$(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${V$(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${V$(t.namespace)}`}),!0}catch(r){if(r instanceof og&&r.status===404)return!1;throw r}}async createNamespaceIfNotExists(t,r){try{return await this.createNamespace(t,r)}catch(s){if(s instanceof og&&s.status===409)return;throw s}}};function Ph(t){return t.join("")}var R5=class{constructor(t,r="",s){this.client=t,this.prefix=r,this.accessDelegation=s}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ph(t.namespace)}/tables`})).data.identifiers}async createTable(t,r){const s={};return this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ph(t.namespace)}/tables`,body:r,headers:s})).data.metadata}async updateTable(t,r){const s=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ph(t.namespace)}/tables/${t.name}`,body:r});return{"metadata-location":s.data["metadata-location"],metadata:s.data.metadata}}async dropTable(t,r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ph(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(r?.purge??!1)}})}async loadTable(t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ph(t.namespace)}/tables/${t.name}`,headers:r})).data.metadata}async tableExists(t){const r={};this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ph(t.namespace)}/tables/${t.name}`,headers:r}),!0}catch(s){if(s instanceof og&&s.status===404)return!1;throw s}}async createTableIfNotExists(t,r){try{return await this.createTable(t,r)}catch(s){if(s instanceof og&&s.status===409)return await this.loadTable({namespace:t.namespace,name:r.name});throw s}}},k5=class{constructor(t){let r="v1";t.catalogName&&(r+=`/${t.catalogName}`);const s=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=C5({baseUrl:s,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new I5(this.client,r),this.tableOps=new R5(this.client,r,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,r){return this.namespaceOps.createNamespace(t,r)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,r){return this.tableOps.createTable(t,r)}async updateTable(t,r){return this.tableOps.updateTable(t,r)}async dropTable(t,r){await this.tableOps.dropTable(t,r)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,r){return this.namespaceOps.createNamespaceIfNotExists(t,r)}async createTableIfNotExists(t,r){return this.tableOps.createTableIfNotExists(t,r)}},mv=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function mn(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var x5=class extends mv{constructor(t,r,s){super(t),this.name="StorageApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},vb=class extends mv{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}};const ow=t=>t?(...r)=>t(...r):(...r)=>fetch(...r),O5=()=>Response,yb=t=>{if(Array.isArray(t))return t.map(s=>yb(s));if(typeof t=="function"||t!==Object(t))return t;const r={};return Object.entries(t).forEach(([s,o])=>{const a=s.replace(/([-_][a-z])/gi,d=>d.toUpperCase().replace(/[-_]/g,""));r[a]=yb(o)}),r},A5=t=>{if(typeof t!="object"||t===null)return!1;const r=Object.getPrototypeOf(t);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},N5=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function ig(t){"@babel/helpers - typeof";return ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ig(t)}function L5(t,r){if(ig(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var o=s.call(t,r);if(ig(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function M5(t){var r=L5(t,"string");return ig(r)=="symbol"?r:r+""}function P5(t,r,s){return(r=M5(r))in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function YR(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);r&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,o)}return s}function ot(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?YR(Object(s),!0).forEach(function(o){P5(t,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):YR(Object(s)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(s,o))})}return t}const sT=t=>{var r;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(r=t.error)===null||r===void 0?void 0:r.message)||JSON.stringify(t)},D5=async(t,r,s)=>{t instanceof await O5()&&!s?.noResolveJson?t.json().then(o=>{const a=t.status||500,d=o?.statusCode||a+"";r(new x5(sT(o),a,d))}).catch(o=>{r(new vb(sT(o),o))}):r(new vb(sT(t),t))},B5=(t,r,s,o)=>{const a={method:t,headers:r?.headers||{}};return t==="GET"||!o?a:(A5(o)?(a.headers=ot({"Content-Type":"application/json"},r?.headers),a.body=JSON.stringify(o)):a.body=o,r?.duplex&&(a.duplex=r.duplex),ot(ot({},a),s))};async function wg(t,r,s,o,a,d){return new Promise((h,f)=>{t(s,B5(r,o,a,d)).then(g=>{if(!g.ok)throw g;return o?.noResolveJson?g:g.json()}).then(g=>h(g)).catch(g=>D5(g,f,o))})}async function lg(t,r,s,o){return wg(t,"GET",r,s,o)}async function Yo(t,r,s,o,a){return wg(t,"POST",r,o,a,s)}async function Tb(t,r,s,o,a){return wg(t,"PUT",r,o,a,s)}async function F5(t,r,s,o){return wg(t,"HEAD",r,ot(ot({},s),{},{noResolveJson:!0}),o)}async function iw(t,r,s,o,a){return wg(t,"DELETE",r,o,a,s)}var U5=class{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(mn(r))return{data:null,error:r};throw r}}};let LL;LL=Symbol.toStringTag;var V5=class{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[LL]="BlobDownloadBuilder",this.promise=null}asStream(){return new U5(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(mn(r))return{data:null,error:r};throw r}}};const H5={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},qR={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var G5=class{constructor(t,r={},s,o){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=s,this.fetch=ow(o)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,r,s,o){var a=this;try{let d;const h=ot(ot({},qR),o);let f=ot(ot({},a.headers),t==="POST"&&{"x-upsert":String(h.upsert)});const g=h.metadata;typeof Blob<"u"&&s instanceof Blob?(d=new FormData,d.append("cacheControl",h.cacheControl),g&&d.append("metadata",a.encodeMetadata(g)),d.append("",s)):typeof FormData<"u"&&s instanceof FormData?(d=s,d.has("cacheControl")||d.append("cacheControl",h.cacheControl),g&&!d.has("metadata")&&d.append("metadata",a.encodeMetadata(g))):(d=s,f["cache-control"]=`max-age=${h.cacheControl}`,f["content-type"]=h.contentType,g&&(f["x-metadata"]=a.toBase64(a.encodeMetadata(g))),(typeof ReadableStream<"u"&&d instanceof ReadableStream||d&&typeof d=="object"&&"pipe"in d&&typeof d.pipe=="function")&&!h.duplex&&(h.duplex="half")),o?.headers&&(f=ot(ot({},f),o.headers));const $=a._removeEmptyFolders(r),v=a._getFinalPath($),y=await(t=="PUT"?Tb:Yo)(a.fetch,`${a.url}/object/${v}`,d,ot({headers:f},h?.duplex?{duplex:h.duplex}:{}));return{data:{path:$,id:y.Id,fullPath:y.Key},error:null}}catch(d){if(a.shouldThrowOnError)throw d;if(mn(d))return{data:null,error:d};throw d}}async upload(t,r,s){return this.uploadOrUpdate("POST",t,r,s)}async uploadToSignedUrl(t,r,s,o){var a=this;const d=a._removeEmptyFolders(t),h=a._getFinalPath(d),f=new URL(a.url+`/object/upload/sign/${h}`);f.searchParams.set("token",r);try{let g;const $=ot({upsert:qR.upsert},o),v=ot(ot({},a.headers),{"x-upsert":String($.upsert)});return typeof Blob<"u"&&s instanceof Blob?(g=new FormData,g.append("cacheControl",$.cacheControl),g.append("",s)):typeof FormData<"u"&&s instanceof FormData?(g=s,g.append("cacheControl",$.cacheControl)):(g=s,v["cache-control"]=`max-age=${$.cacheControl}`,v["content-type"]=$.contentType),{data:{path:d,fullPath:(await Tb(a.fetch,f.toString(),g,{headers:v})).Key},error:null}}catch(g){if(a.shouldThrowOnError)throw g;if(mn(g))return{data:null,error:g};throw g}}async createSignedUploadUrl(t,r){var s=this;try{let o=s._getFinalPath(t);const a=ot({},s.headers);r?.upsert&&(a["x-upsert"]="true");const d=await Yo(s.fetch,`${s.url}/object/upload/sign/${o}`,{},{headers:a}),h=new URL(s.url+d.url),f=h.searchParams.get("token");if(!f)throw new mv("No token returned by API");return{data:{signedUrl:h.toString(),path:t,token:f},error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(mn(o))return{data:null,error:o};throw o}}async update(t,r,s){return this.uploadOrUpdate("PUT",t,r,s)}async move(t,r,s){var o=this;try{return{data:await Yo(o.fetch,`${o.url}/object/move`,{bucketId:o.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s?.destinationBucket},{headers:o.headers}),error:null}}catch(a){if(o.shouldThrowOnError)throw a;if(mn(a))return{data:null,error:a};throw a}}async copy(t,r,s){var o=this;try{return{data:{path:(await Yo(o.fetch,`${o.url}/object/copy`,{bucketId:o.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s?.destinationBucket},{headers:o.headers})).Key},error:null}}catch(a){if(o.shouldThrowOnError)throw a;if(mn(a))return{data:null,error:a};throw a}}async createSignedUrl(t,r,s){var o=this;try{let a=o._getFinalPath(t),d=await Yo(o.fetch,`${o.url}/object/sign/${a}`,ot({expiresIn:r},s?.transform?{transform:s.transform}:{}),{headers:o.headers});const h=s?.download?`&download=${s.download===!0?"":s.download}`:"";return d={signedUrl:encodeURI(`${o.url}${d.signedURL}${h}`)},{data:d,error:null}}catch(a){if(o.shouldThrowOnError)throw a;if(mn(a))return{data:null,error:a};throw a}}async createSignedUrls(t,r,s){var o=this;try{const a=await Yo(o.fetch,`${o.url}/object/sign/${o.bucketId}`,{expiresIn:r,paths:t},{headers:o.headers}),d=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(h=>ot(ot({},h),{},{signedUrl:h.signedURL?encodeURI(`${o.url}${h.signedURL}${d}`):null})),error:null}}catch(a){if(o.shouldThrowOnError)throw a;if(mn(a))return{data:null,error:a};throw a}}download(t,r){const s=typeof r?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(r?.transform||{}),a=o?`?${o}`:"",d=this._getFinalPath(t),h=()=>lg(this.fetch,`${this.url}/${s}/${d}${a}`,{headers:this.headers,noResolveJson:!0});return new V5(h,this.shouldThrowOnError)}async info(t){var r=this;const s=r._getFinalPath(t);try{return{data:yb(await lg(r.fetch,`${r.url}/object/info/${s}`,{headers:r.headers})),error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(mn(o))return{data:null,error:o};throw o}}async exists(t){var r=this;const s=r._getFinalPath(t);try{return await F5(r.fetch,`${r.url}/object/${s}`,{headers:r.headers}),{data:!0,error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(mn(o)&&o instanceof vb){const a=o.originalError;if([400,404].includes(a?.status))return{data:!1,error:o}}throw o}}getPublicUrl(t,r){const s=this._getFinalPath(t),o=[],a=r?.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&o.push(a);const d=typeof r?.transform<"u"?"render/image":"object",h=this.transformOptsToQueryString(r?.transform||{});h!==""&&o.push(h);let f=o.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${s}${f}`)}}}async remove(t){var r=this;try{return{data:await iw(r.fetch,`${r.url}/object/${r.bucketId}`,{prefixes:t},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(mn(s))return{data:null,error:s};throw s}}async list(t,r,s){var o=this;try{const a=ot(ot(ot({},H5),r),{},{prefix:t||""});return{data:await Yo(o.fetch,`${o.url}/object/list/${o.bucketId}`,a,{headers:o.headers},s),error:null}}catch(a){if(o.shouldThrowOnError)throw a;if(mn(a))return{data:null,error:a};throw a}}async listV2(t,r){var s=this;try{const o=ot({},t);return{data:await Yo(s.fetch,`${s.url}/object/list-v2/${s.bucketId}`,o,{headers:s.headers},r),error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(mn(o))return{data:null,error:o};throw o}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}};const ML="2.90.1",PL={"X-Client-Info":`storage-js/${ML}`};var j5=class{constructor(t,r={},s,o){this.shouldThrowOnError=!1;const a=new URL(t);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=ot(ot({},PL),r),this.fetch=ow(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var r=this;try{const s=r.listBucketOptionsToQueryString(t);return{data:await lg(r.fetch,`${r.url}/bucket${s}`,{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(mn(s))return{data:null,error:s};throw s}}async getBucket(t){var r=this;try{return{data:await lg(r.fetch,`${r.url}/bucket/${t}`,{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(mn(s))return{data:null,error:s};throw s}}async createBucket(t,r={public:!1}){var s=this;try{return{data:await Yo(s.fetch,`${s.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:s.headers}),error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(mn(o))return{data:null,error:o};throw o}}async updateBucket(t,r){var s=this;try{return{data:await Tb(s.fetch,`${s.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:s.headers}),error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(mn(o))return{data:null,error:o};throw o}}async emptyBucket(t){var r=this;try{return{data:await Yo(r.fetch,`${r.url}/bucket/${t}/empty`,{},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(mn(s))return{data:null,error:s};throw s}}async deleteBucket(t){var r=this;try{return{data:await iw(r.fetch,`${r.url}/bucket/${t}`,{},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(mn(s))return{data:null,error:s};throw s}}listBucketOptionsToQueryString(t){const r={};return t&&("limit"in t&&(r.limit=String(t.limit)),"offset"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}},W5=class{constructor(t,r={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=ot(ot({},PL),r),this.fetch=ow(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var r=this;try{return{data:await Yo(r.fetch,`${r.url}/bucket`,{name:t},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(mn(s))return{data:null,error:s};throw s}}async listBuckets(t){var r=this;try{const s=new URLSearchParams;t?.limit!==void 0&&s.set("limit",t.limit.toString()),t?.offset!==void 0&&s.set("offset",t.offset.toString()),t?.sortColumn&&s.set("sortColumn",t.sortColumn),t?.sortOrder&&s.set("sortOrder",t.sortOrder),t?.search&&s.set("search",t.search);const o=s.toString(),a=o?`${r.url}/bucket?${o}`:`${r.url}/bucket`;return{data:await lg(r.fetch,a,{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(mn(s))return{data:null,error:s};throw s}}async deleteBucket(t){var r=this;try{return{data:await iw(r.fetch,`${r.url}/bucket/${t}`,{},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(mn(s))return{data:null,error:s};throw s}}from(t){var r=this;if(!N5(t))throw new mv("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const s=new k5({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>r.headers},fetch:this.fetch}),o=this.shouldThrowOnError;return new Proxy(s,{get(a,d){const h=a[d];return typeof h!="function"?h:async(...f)=>{try{return{data:await h.apply(a,f),error:null}}catch(g){if(o)throw g;return{data:null,error:g}}}}})}};const lw={"X-Client-Info":`storage-js/${ML}`,"Content-Type":"application/json"};var DL=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Ds(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var oT=class extends DL{constructor(t,r,s){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},z5=class extends DL{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}};const aw=t=>t?(...r)=>t(...r):(...r)=>fetch(...r),K5=t=>{if(typeof t!="object"||t===null)return!1;const r=Object.getPrototypeOf(t);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},JR=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),X5=async(t,r,s)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!s?.noResolveJson){const o=t.status||500,a=t;if(typeof a.json=="function")a.json().then(d=>{const h=d?.statusCode||d?.code||o+"";r(new oT(JR(d),o,h))}).catch(()=>{const d=o+"";r(new oT(a.statusText||`HTTP ${o} error`,o,d))});else{const d=o+"";r(new oT(a.statusText||`HTTP ${o} error`,o,d))}}else r(new z5(JR(t),t))},Y5=(t,r,s,o)=>{const a={method:t,headers:r?.headers||{}};return o?(K5(o)?(a.headers=ot({"Content-Type":"application/json"},r?.headers),a.body=JSON.stringify(o)):a.body=o,ot(ot({},a),s)):a};async function q5(t,r,s,o,a,d){return new Promise((h,f)=>{t(s,Y5(r,o,a,d)).then(g=>{if(!g.ok)throw g;if(o?.noResolveJson)return g;const $=g.headers.get("content-type");return!$||!$.includes("application/json")?{}:g.json()}).then(g=>h(g)).catch(g=>X5(g,f,o))})}async function Bs(t,r,s,o,a){return q5(t,"POST",r,o,a,s)}var J5=class{constructor(t,r={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=ot(ot({},lw),r),this.fetch=aw(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var r=this;try{return{data:await Bs(r.fetch,`${r.url}/CreateIndex`,t,{headers:r.headers})||{},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Ds(s))return{data:null,error:s};throw s}}async getIndex(t,r){var s=this;try{return{data:await Bs(s.fetch,`${s.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:s.headers}),error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(Ds(o))return{data:null,error:o};throw o}}async listIndexes(t){var r=this;try{return{data:await Bs(r.fetch,`${r.url}/ListIndexes`,t,{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Ds(s))return{data:null,error:s};throw s}}async deleteIndex(t,r){var s=this;try{return{data:await Bs(s.fetch,`${s.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:s.headers})||{},error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(Ds(o))return{data:null,error:o};throw o}}},Q5=class{constructor(t,r={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=ot(ot({},lw),r),this.fetch=aw(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var r=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Bs(r.fetch,`${r.url}/PutVectors`,t,{headers:r.headers})||{},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Ds(s))return{data:null,error:s};throw s}}async getVectors(t){var r=this;try{return{data:await Bs(r.fetch,`${r.url}/GetVectors`,t,{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Ds(s))return{data:null,error:s};throw s}}async listVectors(t){var r=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await Bs(r.fetch,`${r.url}/ListVectors`,t,{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Ds(s))return{data:null,error:s};throw s}}async queryVectors(t){var r=this;try{return{data:await Bs(r.fetch,`${r.url}/QueryVectors`,t,{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Ds(s))return{data:null,error:s};throw s}}async deleteVectors(t){var r=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Bs(r.fetch,`${r.url}/DeleteVectors`,t,{headers:r.headers})||{},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Ds(s))return{data:null,error:s};throw s}}},Z5=class{constructor(t,r={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=ot(ot({},lw),r),this.fetch=aw(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var r=this;try{return{data:await Bs(r.fetch,`${r.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:r.headers})||{},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Ds(s))return{data:null,error:s};throw s}}async getBucket(t){var r=this;try{return{data:await Bs(r.fetch,`${r.url}/GetVectorBucket`,{vectorBucketName:t},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Ds(s))return{data:null,error:s};throw s}}async listBuckets(t={}){var r=this;try{return{data:await Bs(r.fetch,`${r.url}/ListVectorBuckets`,t,{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Ds(s))return{data:null,error:s};throw s}}async deleteBucket(t){var r=this;try{return{data:await Bs(r.fetch,`${r.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:r.headers})||{},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Ds(s))return{data:null,error:s};throw s}}},e3=class extends Z5{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new t3(this.url,this.headers,t,this.fetch)}async createBucket(t){var r=()=>super.createBucket,s=this;return r().call(s,t)}async getBucket(t){var r=()=>super.getBucket,s=this;return r().call(s,t)}async listBuckets(t={}){var r=()=>super.listBuckets,s=this;return r().call(s,t)}async deleteBucket(t){var r=()=>super.deleteBucket,s=this;return r().call(s,t)}},t3=class extends J5{constructor(t,r,s,o){super(t,r,o),this.vectorBucketName=s}async createIndex(t){var r=()=>super.createIndex,s=this;return r().call(s,ot(ot({},t),{},{vectorBucketName:s.vectorBucketName}))}async listIndexes(t={}){var r=()=>super.listIndexes,s=this;return r().call(s,ot(ot({},t),{},{vectorBucketName:s.vectorBucketName}))}async getIndex(t){var r=()=>super.getIndex,s=this;return r().call(s,s.vectorBucketName,t)}async deleteIndex(t){var r=()=>super.deleteIndex,s=this;return r().call(s,s.vectorBucketName,t)}index(t){return new n3(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},n3=class extends Q5{constructor(t,r,s,o,a){super(t,r,a),this.vectorBucketName=s,this.indexName=o}async putVectors(t){var r=()=>super.putVectors,s=this;return r().call(s,ot(ot({},t),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async getVectors(t){var r=()=>super.getVectors,s=this;return r().call(s,ot(ot({},t),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async listVectors(t={}){var r=()=>super.listVectors,s=this;return r().call(s,ot(ot({},t),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async queryVectors(t){var r=()=>super.queryVectors,s=this;return r().call(s,ot(ot({},t),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async deleteVectors(t){var r=()=>super.deleteVectors,s=this;return r().call(s,ot(ot({},t),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}},r3=class extends j5{constructor(t,r={},s,o){super(t,r,s,o)}from(t){return new G5(this.url,this.headers,t,this.fetch)}get vectors(){return new e3(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new W5(this.url+"/iceberg",this.headers,this.fetch)}};const BL="2.90.1",Wh=30*1e3,bb=3,iT=bb*Wh,s3="http://localhost:9999",o3="supabase.auth.token",i3={"X-Client-Info":`gotrue-js/${BL}`},Eb="X-Supabase-Api-Version",FL={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},l3=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,a3=600*1e3;class ag extends Error{constructor(r,s,o){super(r),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=o}}function Ye(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class c3 extends ag{constructor(r,s,o){super(r,s,o),this.name="AuthApiError",this.status=s,this.code=o}}function u3(t){return Ye(t)&&t.name==="AuthApiError"}class Mu extends ag{constructor(r,s){super(r),this.name="AuthUnknownError",this.originalError=s}}class Jl extends ag{constructor(r,s,o,a){super(r,o,a),this.name=s,this.status=o}}class Ls extends Jl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function d3(t){return Ye(t)&&t.name==="AuthSessionMissingError"}class Dh extends Jl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class H$ extends Jl{constructor(r){super(r,"AuthInvalidCredentialsError",400,void 0)}}class G$ extends Jl{constructor(r,s=null){super(r,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function h3(t){return Ye(t)&&t.name==="AuthImplicitGrantRedirectError"}class QR extends Jl{constructor(r,s=null){super(r,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class p3 extends Jl{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class wb extends Jl{constructor(r,s){super(r,"AuthRetryableFetchError",s,void 0)}}function lT(t){return Ye(t)&&t.name==="AuthRetryableFetchError"}class ZR extends Jl{constructor(r,s,o){super(r,"AuthWeakPasswordError",s,"weak_password"),this.reasons=o}}class Sb extends Jl{constructor(r){super(r,"AuthInvalidJwtError",400,"invalid_jwt")}}const I_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ek=` 	
\r=`.split(""),f3=(()=>{const t=new Array(128);for(let r=0;r<t.length;r+=1)t[r]=-1;for(let r=0;r<ek.length;r+=1)t[ek[r].charCodeAt(0)]=-2;for(let r=0;r<I_.length;r+=1)t[I_[r].charCodeAt(0)]=r;return t})();function tk(t,r,s){if(t!==null)for(r.queue=r.queue<<8|t,r.queuedBits+=8;r.queuedBits>=6;){const o=r.queue>>r.queuedBits-6&63;s(I_[o]),r.queuedBits-=6}else if(r.queuedBits>0)for(r.queue=r.queue<<6-r.queuedBits,r.queuedBits=6;r.queuedBits>=6;){const o=r.queue>>r.queuedBits-6&63;s(I_[o]),r.queuedBits-=6}}function UL(t,r,s){const o=f3[t];if(o>-1)for(r.queue=r.queue<<6|o,r.queuedBits+=6;r.queuedBits>=8;)s(r.queue>>r.queuedBits-8&255),r.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function nk(t){const r=[],s=h=>{r.push(String.fromCodePoint(h))},o={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},d=h=>{$3(h,o,s)};for(let h=0;h<t.length;h+=1)UL(t.charCodeAt(h),a,d);return r.join("")}function m3(t,r){if(t<=127){r(t);return}else if(t<=2047){r(192|t>>6),r(128|t&63);return}else if(t<=65535){r(224|t>>12),r(128|t>>6&63),r(128|t&63);return}else if(t<=1114111){r(240|t>>18),r(128|t>>12&63),r(128|t>>6&63),r(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function g3(t,r){for(let s=0;s<t.length;s+=1){let o=t.charCodeAt(s);if(o>55295&&o<=56319){const a=(o-55296)*1024&65535;o=(t.charCodeAt(s+1)-56320&65535|a)+65536,s+=1}m3(o,r)}}function $3(t,r,s){if(r.utf8seq===0){if(t<=127){s(t);return}for(let o=1;o<6;o+=1)if((t>>7-o&1)===0){r.utf8seq=o;break}if(r.utf8seq===2)r.codepoint=t&31;else if(r.utf8seq===3)r.codepoint=t&15;else if(r.utf8seq===4)r.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");r.utf8seq-=1}else if(r.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");r.codepoint=r.codepoint<<6|t&63,r.utf8seq-=1,r.utf8seq===0&&s(r.codepoint)}}function lp(t){const r=[],s={queue:0,queuedBits:0},o=a=>{r.push(a)};for(let a=0;a<t.length;a+=1)UL(t.charCodeAt(a),s,o);return new Uint8Array(r)}function _3(t){const r=[];return g3(t,s=>r.push(s)),new Uint8Array(r)}function Bu(t){const r=[],s={queue:0,queuedBits:0},o=a=>{r.push(a)};return t.forEach(a=>tk(a,s,o)),tk(null,s,o),r.join("")}function v3(t){return Math.round(Date.now()/1e3)+t}function y3(){return Symbol("auth-callback")}const gr=()=>typeof window<"u"&&typeof document<"u",Ru={tested:!1,writable:!1},VL=()=>{if(!gr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ru.tested)return Ru.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Ru.tested=!0,Ru.writable=!0}catch{Ru.tested=!0,Ru.writable=!1}return Ru.writable};function T3(t){const r={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((a,d)=>{r[d]=a})}catch{}return s.searchParams.forEach((o,a)=>{r[a]=o}),r}const HL=t=>t?(...r)=>t(...r):(...r)=>fetch(...r),b3=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",zh=async(t,r,s)=>{await t.setItem(r,JSON.stringify(s))},ku=async(t,r)=>{const s=await t.getItem(r);if(!s)return null;try{return JSON.parse(s)}catch{return s}},mr=async(t,r)=>{await t.removeItem(r)};class gv{constructor(){this.promise=new gv.promiseConstructor((r,s)=>{this.resolve=r,this.reject=s})}}gv.promiseConstructor=Promise;function aT(t){const r=t.split(".");if(r.length!==3)throw new Sb("Invalid JWT structure");for(let o=0;o<r.length;o++)if(!l3.test(r[o]))throw new Sb("JWT not in base64url format");return{header:JSON.parse(nk(r[0])),payload:JSON.parse(nk(r[1])),signature:lp(r[2]),raw:{header:r[0],payload:r[1]}}}async function E3(t){return await new Promise(r=>{setTimeout(()=>r(null),t)})}function w3(t,r){return new Promise((o,a)=>{(async()=>{for(let d=0;d<1/0;d++)try{const h=await t(d);if(!r(d,null,h)){o(h);return}}catch(h){if(!r(d,h)){a(h);return}}})()})}function S3(t){return("0"+t.toString(16)).substr(-2)}function C3(){const r=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=s.length;let a="";for(let d=0;d<56;d++)a+=s.charAt(Math.floor(Math.random()*o));return a}return crypto.getRandomValues(r),Array.from(r,S3).join("")}async function I3(t){const s=new TextEncoder().encode(t),o=await crypto.subtle.digest("SHA-256",s),a=new Uint8Array(o);return Array.from(a).map(d=>String.fromCharCode(d)).join("")}async function R3(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await I3(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Bh(t,r,s=!1){const o=C3();let a=o;s&&(a+="/PASSWORD_RECOVERY"),await zh(t,`${r}-code-verifier`,a);const d=await R3(o);return[d,o===d?"plain":"s256"]}const k3=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function x3(t){const r=t.headers.get(Eb);if(!r||!r.match(k3))return null;try{return new Date(`${r}T00:00:00.0Z`)}catch{return null}}function O3(t){if(!t)throw new Error("Missing exp claim");const r=Math.floor(Date.now()/1e3);if(t<=r)throw new Error("JWT has expired")}function A3(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const N3=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Fh(t){if(!N3.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function cT(){const t={};return new Proxy(t,{get:(r,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const o=s.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(r,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(r,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function L3(t,r){return new Proxy(t,{get:(s,o,a)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const d=o.toString();if(d==="Symbol(Symbol.toPrimitive)"||d==="Symbol(Symbol.toStringTag)"||d==="Symbol(util.inspect.custom)"||d==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,o,a)}return!r.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r.value=!0),Reflect.get(s,o,a)}})}function rk(t){return JSON.parse(JSON.stringify(t))}const Nu=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),M3=[502,503,504];async function sk(t){var r;if(!b3(t))throw new wb(Nu(t),0);if(M3.includes(t.status))throw new wb(Nu(t),t.status);let s;try{s=await t.json()}catch(d){throw new Mu(Nu(d),d)}let o;const a=x3(t);if(a&&a.getTime()>=FL["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?o=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(o=s.error_code),o){if(o==="weak_password")throw new ZR(Nu(s),t.status,((r=s.weak_password)===null||r===void 0?void 0:r.reasons)||[]);if(o==="session_not_found")throw new Ls}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((d,h)=>d&&typeof h=="string",!0))throw new ZR(Nu(s),t.status,s.weak_password.reasons);throw new c3(Nu(s),t.status||500,o)}const P3=(t,r,s,o)=>{const a={method:t,headers:r?.headers||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},r?.headers),a.body=JSON.stringify(o),Object.assign(Object.assign({},a),s))};async function rt(t,r,s,o){var a;const d=Object.assign({},o?.headers);d[Eb]||(d[Eb]=FL["2024-01-01"].name),o?.jwt&&(d.Authorization=`Bearer ${o.jwt}`);const h=(a=o?.query)!==null&&a!==void 0?a:{};o?.redirectTo&&(h.redirect_to=o.redirectTo);const f=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",g=await D3(t,r,s+f,{headers:d,noResolveJson:o?.noResolveJson},{},o?.body);return o?.xform?o?.xform(g):{data:Object.assign({},g),error:null}}async function D3(t,r,s,o,a,d){const h=P3(r,o,a,d);let f;try{f=await t(s,Object.assign({},h))}catch(g){throw console.error(g),new wb(Nu(g),0)}if(f.ok||await sk(f),o?.noResolveJson)return f;try{return await f.json()}catch(g){await sk(g)}}function Wo(t){var r;let s=null;U3(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=v3(t.expires_in)));const o=(r=t.user)!==null&&r!==void 0?r:t;return{data:{session:s,user:o},error:null}}function ok(t){const r=Wo(t);return!r.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0)&&(r.data.weak_password=t.weak_password),r}function qa(t){var r;return{data:{user:(r=t.user)!==null&&r!==void 0?r:t},error:null}}function B3(t){return{data:t,error:null}}function F3(t){const{action_link:r,email_otp:s,hashed_token:o,redirect_to:a,verification_type:d}=t,h=Ep(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:r,email_otp:s,hashed_token:o,redirect_to:a,verification_type:d},g=Object.assign({},h);return{data:{properties:f,user:g},error:null}}function ik(t){return t}function U3(t){return t.access_token&&t.refresh_token&&t.expires_in}const uT=["global","local","others"];class V3{constructor({url:r="",headers:s={},fetch:o}){this.url=r,this.headers=s,this.fetch=HL(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(r,s=uT[0]){if(uT.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${uT.join(", ")}`);try{return await rt(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(o){if(Ye(o))return{data:null,error:o};throw o}}async inviteUserByEmail(r,s={}){try{return await rt(this.fetch,"POST",`${this.url}/invite`,{body:{email:r,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:qa})}catch(o){if(Ye(o))return{data:{user:null},error:o};throw o}}async generateLink(r){try{const{options:s}=r,o=Ep(r,["options"]),a=Object.assign(Object.assign({},o),s);return"newEmail"in o&&(a.new_email=o?.newEmail,delete a.newEmail),await rt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:F3,redirectTo:s?.redirectTo})}catch(s){if(Ye(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(r){try{return await rt(this.fetch,"POST",`${this.url}/admin/users`,{body:r,headers:this.headers,xform:qa})}catch(s){if(Ye(s))return{data:{user:null},error:s};throw s}}async listUsers(r){var s,o,a,d,h,f,g;try{const $={nextPage:null,lastPage:0,total:0},v=await rt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(s=r?.page)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:"",per_page:(d=(a=r?.perPage)===null||a===void 0?void 0:a.toString())!==null&&d!==void 0?d:""},xform:ik});if(v.error)throw v.error;const y=await v.json(),w=(h=v.headers.get("x-total-count"))!==null&&h!==void 0?h:0,S=(g=(f=v.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&g!==void 0?g:[];return S.length>0&&(S.forEach(O=>{const I=parseInt(O.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(O.split(";")[1].split("=")[1]);$[`${x}Page`]=I}),$.total=parseInt(w)),{data:Object.assign(Object.assign({},y),$),error:null}}catch($){if(Ye($))return{data:{users:[]},error:$};throw $}}async getUserById(r){Fh(r);try{return await rt(this.fetch,"GET",`${this.url}/admin/users/${r}`,{headers:this.headers,xform:qa})}catch(s){if(Ye(s))return{data:{user:null},error:s};throw s}}async updateUserById(r,s){Fh(r);try{return await rt(this.fetch,"PUT",`${this.url}/admin/users/${r}`,{body:s,headers:this.headers,xform:qa})}catch(o){if(Ye(o))return{data:{user:null},error:o};throw o}}async deleteUser(r,s=!1){Fh(r);try{return await rt(this.fetch,"DELETE",`${this.url}/admin/users/${r}`,{headers:this.headers,body:{should_soft_delete:s},xform:qa})}catch(o){if(Ye(o))return{data:{user:null},error:o};throw o}}async _listFactors(r){Fh(r.userId);try{const{data:s,error:o}=await rt(this.fetch,"GET",`${this.url}/admin/users/${r.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:s,error:o}}catch(s){if(Ye(s))return{data:null,error:s};throw s}}async _deleteFactor(r){Fh(r.userId),Fh(r.id);try{return{data:await rt(this.fetch,"DELETE",`${this.url}/admin/users/${r.userId}/factors/${r.id}`,{headers:this.headers}),error:null}}catch(s){if(Ye(s))return{data:null,error:s};throw s}}async _listOAuthClients(r){var s,o,a,d,h,f,g;try{const $={nextPage:null,lastPage:0,total:0},v=await rt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(s=r?.page)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:"",per_page:(d=(a=r?.perPage)===null||a===void 0?void 0:a.toString())!==null&&d!==void 0?d:""},xform:ik});if(v.error)throw v.error;const y=await v.json(),w=(h=v.headers.get("x-total-count"))!==null&&h!==void 0?h:0,S=(g=(f=v.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&g!==void 0?g:[];return S.length>0&&(S.forEach(O=>{const I=parseInt(O.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(O.split(";")[1].split("=")[1]);$[`${x}Page`]=I}),$.total=parseInt(w)),{data:Object.assign(Object.assign({},y),$),error:null}}catch($){if(Ye($))return{data:{clients:[]},error:$};throw $}}async _createOAuthClient(r){try{return await rt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:r,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Ye(s))return{data:null,error:s};throw s}}async _getOAuthClient(r){try{return await rt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Ye(s))return{data:null,error:s};throw s}}async _updateOAuthClient(r,s){try{return await rt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${r}`,{body:s,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(Ye(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(r){try{return await rt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Ye(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(r){try{return await rt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${r}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Ye(s))return{data:null,error:s};throw s}}}function lk(t={}){return{getItem:r=>t[r]||null,setItem:(r,s)=>{t[r]=s},removeItem:r=>{delete t[r]}}}const Uh={debug:!!(globalThis&&VL()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class GL extends Error{constructor(r){super(r),this.isAcquireTimeout=!0}}class H3 extends GL{}async function G3(t,r,s){Uh.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,r);const o=new globalThis.AbortController;return r>0&&setTimeout(()=>{o.abort(),Uh.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},r),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,r===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async a=>{if(a){Uh.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await s()}finally{Uh.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(r===0)throw Uh.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new H3(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Uh.debug)try{const d=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(d,null,"  "))}catch(d){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",d)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function j3(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function jL(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function W3(t){return parseInt(t,16)}function z3(t){const r=new TextEncoder().encode(t);return"0x"+Array.from(r,o=>o.toString(16).padStart(2,"0")).join("")}function K3(t){var r;const{chainId:s,domain:o,expirationTime:a,issuedAt:d=new Date,nonce:h,notBefore:f,requestId:g,resources:$,scheme:v,uri:y,version:w}=t;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(h&&h.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${h}`);if(!y)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(w!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${w}`);if(!((r=t.statement)===null||r===void 0)&&r.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const S=jL(t.address),O=v?`${v}://${o}`:o,I=t.statement?`${t.statement}
`:"",x=`${O} wants you to sign in with your Ethereum account:
${S}

${I}`;let A=`URI: ${y}
Version: ${w}
Chain ID: ${s}${h?`
Nonce: ${h}`:""}
Issued At: ${d.toISOString()}`;if(a&&(A+=`
Expiration Time: ${a.toISOString()}`),f&&(A+=`
Not Before: ${f.toISOString()}`),g&&(A+=`
Request ID: ${g}`),$){let M=`
Resources:`;for(const P of $){if(!P||typeof P!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${P}`);M+=`
- ${P}`}A+=M}return`${x}
${A}`}class Dn extends Error{constructor({message:r,code:s,cause:o,name:a}){var d;super(r,{cause:o}),this.__isWebAuthnError=!0,this.name=(d=a??(o instanceof Error?o.name:void 0))!==null&&d!==void 0?d:"Unknown Error",this.code=s}}class R_ extends Dn{constructor(r,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:r}),this.name="WebAuthnUnknownError",this.originalError=s}}function X3({error:t,options:r}){var s,o,a;const{publicKey:d}=r;if(!d)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(r.signal instanceof AbortSignal)return new Dn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((s=d.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new Dn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(r.mediation==="conditional"&&((o=d.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new Dn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((a=d.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Dn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Dn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Dn({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return d.pubKeyCredParams.filter(f=>f.type==="public-key").length===0?new Dn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Dn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const h=window.location.hostname;if(WL(h)){if(d.rp.id!==h)return new Dn({message:`The RP ID "${d.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Dn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(d.user.id.byteLength<1||d.user.id.byteLength>64)return new Dn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Dn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Dn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Y3({error:t,options:r}){const{publicKey:s}=r;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(r.signal instanceof AbortSignal)return new Dn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Dn({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(WL(o)){if(s.rpId!==o)return new Dn({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Dn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Dn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Dn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class q3{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const r=new AbortController;return this.controller=r,r.signal}cancelCeremony(){if(this.controller){const r=new Error("Manually cancelling existing WebAuthn API call");r.name="AbortError",this.controller.abort(r),this.controller=void 0}}}const J3=new q3;function Q3(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:r,user:s,excludeCredentials:o}=t,a=Ep(t,["challenge","user","excludeCredentials"]),d=lp(r).buffer,h=Object.assign(Object.assign({},s),{id:lp(s.id).buffer}),f=Object.assign(Object.assign({},a),{challenge:d,user:h});if(o&&o.length>0){f.excludeCredentials=new Array(o.length);for(let g=0;g<o.length;g++){const $=o[g];f.excludeCredentials[g]=Object.assign(Object.assign({},$),{id:lp($.id).buffer,type:$.type||"public-key",transports:$.transports})}}return f}function Z3(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:r,allowCredentials:s}=t,o=Ep(t,["challenge","allowCredentials"]),a=lp(r).buffer,d=Object.assign(Object.assign({},o),{challenge:a});if(s&&s.length>0){d.allowCredentials=new Array(s.length);for(let h=0;h<s.length;h++){const f=s[h];d.allowCredentials[h]=Object.assign(Object.assign({},f),{id:lp(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return d}function e4(t){var r;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const s=t;return{id:t.id,rawId:t.id,response:{attestationObject:Bu(new Uint8Array(t.response.attestationObject)),clientDataJSON:Bu(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(r=s.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function t4(t){var r;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const s=t,o=t.getClientExtensionResults(),a=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Bu(new Uint8Array(a.authenticatorData)),clientDataJSON:Bu(new Uint8Array(a.clientDataJSON)),signature:Bu(new Uint8Array(a.signature)),userHandle:a.userHandle?Bu(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(r=s.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function WL(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function ak(){var t,r;return!!(gr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.get)=="function")}async function n4(t){try{const r=await navigator.credentials.create(t);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new R_("Browser returned unexpected credential type",r)}:{data:null,error:new R_("Empty credential response",r)}}catch(r){return{data:null,error:X3({error:r,options:t})}}}async function r4(t){try{const r=await navigator.credentials.get(t);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new R_("Browser returned unexpected credential type",r)}:{data:null,error:new R_("Empty credential response",r)}}catch(r){return{data:null,error:Y3({error:r,options:t})}}}const s4={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},o4={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function k_(...t){const r=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),s=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),o={};for(const a of t)if(a)for(const d in a){const h=a[d];if(h!==void 0)if(Array.isArray(h))o[d]=h;else if(s(h))o[d]=h;else if(r(h)){const f=o[d];r(f)?o[d]=k_(f,h):o[d]=k_(h)}else o[d]=h}return o}function i4(t,r){return k_(s4,t,r||{})}function l4(t,r){return k_(o4,t,r||{})}class a4{constructor(r){this.client=r,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(r){return this.client.mfa.enroll(Object.assign(Object.assign({},r),{factorType:"webauthn"}))}async _challenge({factorId:r,webauthn:s,friendlyName:o,signal:a},d){try{const{data:h,error:f}=await this.client.mfa.challenge({factorId:r,webauthn:s});if(!h)return{data:null,error:f};const g=a??J3.createNewAbortSignal();if(h.webauthn.type==="create"){const{user:$}=h.webauthn.credential_options.publicKey;$.name||($.name=`${$.id}:${o}`),$.displayName||($.displayName=$.name)}switch(h.webauthn.type){case"create":{const $=i4(h.webauthn.credential_options.publicKey,d?.create),{data:v,error:y}=await n4({publicKey:$,signal:g});return v?{data:{factorId:r,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:v}},error:null}:{data:null,error:y}}case"request":{const $=l4(h.webauthn.credential_options.publicKey,d?.request),{data:v,error:y}=await r4(Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:$,signal:g}));return v?{data:{factorId:r,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:v}},error:null}:{data:null,error:y}}}}catch(h){return Ye(h)?{data:null,error:h}:{data:null,error:new Mu("Unexpected error in challenge",h)}}}async _verify({challengeId:r,factorId:s,webauthn:o}){return this.client.mfa.verify({factorId:s,challengeId:r,webauthn:o})}async _authenticate({factorId:r,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},d){if(!s)return{data:null,error:new ag("rpId is required for WebAuthn authentication")};try{if(!ak())return{data:null,error:new Mu("Browser does not support WebAuthn",null)};const{data:h,error:f}=await this.challenge({factorId:r,webauthn:{rpId:s,rpOrigins:o},signal:a},{request:d});if(!h)return{data:null,error:f};const{webauthn:g}=h;return this._verify({factorId:r,challengeId:h.challengeId,webauthn:{type:g.type,rpId:s,rpOrigins:o,credential_response:g.credential_response}})}catch(h){return Ye(h)?{data:null,error:h}:{data:null,error:new Mu("Unexpected error in authenticate",h)}}}async _register({friendlyName:r,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},d){if(!s)return{data:null,error:new ag("rpId is required for WebAuthn registration")};try{if(!ak())return{data:null,error:new Mu("Browser does not support WebAuthn",null)};const{data:h,error:f}=await this._enroll({friendlyName:r});if(!h)return await this.client.mfa.listFactors().then(v=>{var y;return(y=v.data)===null||y===void 0?void 0:y.all.find(w=>w.factor_type==="webauthn"&&w.friendly_name===r&&w.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v?.id}):void 0),{data:null,error:f};const{data:g,error:$}=await this._challenge({factorId:h.id,friendlyName:h.friendly_name,webauthn:{rpId:s,rpOrigins:o},signal:a},{create:d});return g?this._verify({factorId:h.id,challengeId:g.challengeId,webauthn:{rpId:s,rpOrigins:o,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:$}}catch(h){return Ye(h)?{data:null,error:h}:{data:null,error:new Mu("Unexpected error in register",h)}}}}j3();const c4={url:s3,storageKey:o3,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:i3,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function ck(t,r,s){return await s()}const Vh={};class cg{get jwks(){var r,s;return(s=(r=Vh[this.storageKey])===null||r===void 0?void 0:r.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(r){Vh[this.storageKey]=Object.assign(Object.assign({},Vh[this.storageKey]),{jwks:r})}get jwks_cached_at(){var r,s;return(s=(r=Vh[this.storageKey])===null||r===void 0?void 0:r.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(r){Vh[this.storageKey]=Object.assign(Object.assign({},Vh[this.storageKey]),{cachedAt:r})}constructor(r){var s,o,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const d=Object.assign(Object.assign({},c4),r);if(this.storageKey=d.storageKey,this.instanceID=(s=cg.nextInstanceID[this.storageKey])!==null&&s!==void 0?s:0,cg.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!d.debug,typeof d.debug=="function"&&(this.logger=d.debug),this.instanceID>0&&gr()){const h=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(h),this.logDebugMessages&&console.trace(h)}if(this.persistSession=d.persistSession,this.autoRefreshToken=d.autoRefreshToken,this.admin=new V3({url:d.url,headers:d.headers,fetch:d.fetch}),this.url=d.url,this.headers=d.headers,this.fetch=HL(d.fetch),this.lock=d.lock||ck,this.detectSessionInUrl=d.detectSessionInUrl,this.flowType=d.flowType,this.hasCustomAuthorizationHeader=d.hasCustomAuthorizationHeader,this.throwOnError=d.throwOnError,this.lockAcquireTimeout=d.lockAcquireTimeout,d.lock?this.lock=d.lock:this.persistSession&&gr()&&(!((o=globalThis?.navigator)===null||o===void 0)&&o.locks)?this.lock=G3:this.lock=ck,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new a4(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(d.storage?this.storage=d.storage:VL()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=lk(this.memoryStorage)),d.userStorage&&(this.userStorage=d.userStorage)):(this.memoryStorage={},this.storage=lk(this.memoryStorage)),gr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(h){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",h)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async h=>{this._debug("received broadcast notification from other tab or client",h),await this._notifyAllSubscribers(h.data.event,h.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(r){if(this.throwOnError&&r&&r.error)throw r.error;return r}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${BL}) ${new Date().toISOString()}`}_debug(...r){return this.logDebugMessages&&this.logger(this._logPrefix(),...r),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var r;try{let s={},o="none";if(gr()&&(s=T3(window.location.href),this._isImplicitGrantCallback(s)?o="implicit":await this._isPKCECallback(s)&&(o="pkce")),gr()&&this.detectSessionInUrl&&o!=="none"){const{data:a,error:d}=await this._getSessionFromURL(s,o);if(d){if(this._debug("#_initialize()","error detecting session from URL",d),h3(d)){const g=(r=d.details)===null||r===void 0?void 0:r.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:d}}return{error:d}}const{session:h,redirectType:f}=a;return this._debug("#_initialize()","detected session in URL",h,"redirect type",f),await this._saveSession(h),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return Ye(s)?this._returnResult({error:s}):this._returnResult({error:new Mu("Unexpected error during initialization",s)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(r){var s,o,a;try{const d=await rt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(s=r?.options)===null||s===void 0?void 0:s.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(a=r?.options)===null||a===void 0?void 0:a.captchaToken}},xform:Wo}),{data:h,error:f}=d;if(f||!h)return this._returnResult({data:{user:null,session:null},error:f});const g=h.session,$=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:$,session:g},error:null})}catch(d){if(Ye(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signUp(r){var s,o,a;try{let d;if("email"in r){const{email:v,password:y,options:w}=r;let S=null,O=null;this.flowType==="pkce"&&([S,O]=await Bh(this.storage,this.storageKey)),d=await rt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w?.emailRedirectTo,body:{email:v,password:y,data:(s=w?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:w?.captchaToken},code_challenge:S,code_challenge_method:O},xform:Wo})}else if("phone"in r){const{phone:v,password:y,options:w}=r;d=await rt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:y,data:(o=w?.data)!==null&&o!==void 0?o:{},channel:(a=w?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:w?.captchaToken}},xform:Wo})}else throw new H$("You must provide either an email or phone number and a password");const{data:h,error:f}=d;if(f||!h)return await mr(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:f});const g=h.session,$=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:$,session:g},error:null})}catch(d){if(await mr(this.storage,`${this.storageKey}-code-verifier`),Ye(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signInWithPassword(r){try{let s;if("email"in r){const{email:d,password:h,options:f}=r;s=await rt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:d,password:h,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:ok})}else if("phone"in r){const{phone:d,password:h,options:f}=r;s=await rt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:d,password:h,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:ok})}else throw new H$("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!o||!o.session||!o.user){const d=new Dh;return this._returnResult({data:{user:null,session:null},error:d})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:a})}catch(s){if(Ye(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOAuth(r){var s,o,a,d;return await this._handleProviderSignIn(r.provider,{redirectTo:(s=r.options)===null||s===void 0?void 0:s.redirectTo,scopes:(o=r.options)===null||o===void 0?void 0:o.scopes,queryParams:(a=r.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(d=r.options)===null||d===void 0?void 0:d.skipBrowserRedirect})}async exchangeCodeForSession(r){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(r))}async signInWithWeb3(r){const{chain:s}=r;switch(s){case"ethereum":return await this.signInWithEthereum(r);case"solana":return await this.signInWithSolana(r);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(r){var s,o,a,d,h,f,g,$,v,y,w;let S,O;if("message"in r)S=r.message,O=r.signature;else{const{chain:I,wallet:x,statement:A,options:M}=r;let P;if(gr())if(typeof x=="object")P=x;else{const he=window;if("ethereum"in he&&typeof he.ethereum=="object"&&"request"in he.ethereum&&typeof he.ethereum.request=="function")P=he.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!M?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=x}const F=new URL((s=M?.url)!==null&&s!==void 0?s:window.location.href),B=await P.request({method:"eth_requestAccounts"}).then(he=>he).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!B||B.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const V=jL(B[0]);let j=(o=M?.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!j){const he=await P.request({method:"eth_chainId"});j=W3(he)}const W={domain:F.host,address:V,statement:A,uri:F.href,version:"1",chainId:j,nonce:(a=M?.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(h=(d=M?.signInWithEthereum)===null||d===void 0?void 0:d.issuedAt)!==null&&h!==void 0?h:new Date,expirationTime:(f=M?.signInWithEthereum)===null||f===void 0?void 0:f.expirationTime,notBefore:(g=M?.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:($=M?.signInWithEthereum)===null||$===void 0?void 0:$.requestId,resources:(v=M?.signInWithEthereum)===null||v===void 0?void 0:v.resources};S=K3(W),O=await P.request({method:"personal_sign",params:[z3(S),V]})}try{const{data:I,error:x}=await rt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:S,signature:O},!((y=r.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(w=r.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:Wo});if(x)throw x;if(!I||!I.session||!I.user){const A=new Dh;return this._returnResult({data:{user:null,session:null},error:A})}return I.session&&(await this._saveSession(I.session),await this._notifyAllSubscribers("SIGNED_IN",I.session)),this._returnResult({data:Object.assign({},I),error:x})}catch(I){if(Ye(I))return this._returnResult({data:{user:null,session:null},error:I});throw I}}async signInWithSolana(r){var s,o,a,d,h,f,g,$,v,y,w,S;let O,I;if("message"in r)O=r.message,I=r.signature;else{const{chain:x,wallet:A,statement:M,options:P}=r;let F;if(gr())if(typeof A=="object")F=A;else{const V=window;if("solana"in V&&typeof V.solana=="object"&&("signIn"in V.solana&&typeof V.solana.signIn=="function"||"signMessage"in V.solana&&typeof V.solana.signMessage=="function"))F=V.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!P?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");F=A}const B=new URL((s=P?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in F&&F.signIn){const V=await F.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},P?.signInWithSolana),{version:"1",domain:B.host,uri:B.href}),M?{statement:M}:null));let j;if(Array.isArray(V)&&V[0]&&typeof V[0]=="object")j=V[0];else if(V&&typeof V=="object"&&"signedMessage"in V&&"signature"in V)j=V;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)O=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),I=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in F)||typeof F.signMessage!="function"||!("publicKey"in F)||typeof F!="object"||!F.publicKey||!("toBase58"in F.publicKey)||typeof F.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");O=[`${B.host} wants you to sign in with your Solana account:`,F.publicKey.toBase58(),...M?["",M,""]:[""],"Version: 1",`URI: ${B.href}`,`Issued At: ${(a=(o=P?.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((d=P?.signInWithSolana)===null||d===void 0)&&d.notBefore?[`Not Before: ${P.signInWithSolana.notBefore}`]:[],...!((h=P?.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${P.signInWithSolana.expirationTime}`]:[],...!((f=P?.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${P.signInWithSolana.chainId}`]:[],...!((g=P?.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${P.signInWithSolana.nonce}`]:[],...!(($=P?.signInWithSolana)===null||$===void 0)&&$.requestId?[`Request ID: ${P.signInWithSolana.requestId}`]:[],...!((y=(v=P?.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||y===void 0)&&y.length?["Resources",...P.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const V=await F.signMessage(new TextEncoder().encode(O),"utf8");if(!V||!(V instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");I=V}}try{const{data:x,error:A}=await rt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:O,signature:Bu(I)},!((w=r.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(S=r.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:Wo});if(A)throw A;if(!x||!x.session||!x.user){const M=new Dh;return this._returnResult({data:{user:null,session:null},error:M})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:A})}catch(x){if(Ye(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async _exchangeCodeForSession(r){const s=await ku(this.storage,`${this.storageKey}-code-verifier`),[o,a]=(s??"").split("/");try{if(!o&&this.flowType==="pkce")throw new p3;const{data:d,error:h}=await rt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:r,code_verifier:o},xform:Wo});if(await mr(this.storage,`${this.storageKey}-code-verifier`),h)throw h;if(!d||!d.session||!d.user){const f=new Dh;return this._returnResult({data:{user:null,session:null,redirectType:null},error:f})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:Object.assign(Object.assign({},d),{redirectType:a??null}),error:h})}catch(d){if(await mr(this.storage,`${this.storageKey}-code-verifier`),Ye(d))return this._returnResult({data:{user:null,session:null,redirectType:null},error:d});throw d}}async signInWithIdToken(r){try{const{options:s,provider:o,token:a,access_token:d,nonce:h}=r,f=await rt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:a,access_token:d,nonce:h,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:Wo}),{data:g,error:$}=f;if($)return this._returnResult({data:{user:null,session:null},error:$});if(!g||!g.session||!g.user){const v=new Dh;return this._returnResult({data:{user:null,session:null},error:v})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:$})}catch(s){if(Ye(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOtp(r){var s,o,a,d,h;try{if("email"in r){const{email:f,options:g}=r;let $=null,v=null;this.flowType==="pkce"&&([$,v]=await Bh(this.storage,this.storageKey));const{error:y}=await rt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(s=g?.data)!==null&&s!==void 0?s:{},create_user:(o=g?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:$,code_challenge_method:v},redirectTo:g?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:y})}if("phone"in r){const{phone:f,options:g}=r,{data:$,error:v}=await rt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(a=g?.data)!==null&&a!==void 0?a:{},create_user:(d=g?.shouldCreateUser)!==null&&d!==void 0?d:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},channel:(h=g?.channel)!==null&&h!==void 0?h:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:$?.message_id},error:v})}throw new H$("You must provide either an email or phone number.")}catch(f){if(await mr(this.storage,`${this.storageKey}-code-verifier`),Ye(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async verifyOtp(r){var s,o;try{let a,d;"options"in r&&(a=(s=r.options)===null||s===void 0?void 0:s.redirectTo,d=(o=r.options)===null||o===void 0?void 0:o.captchaToken);const{data:h,error:f}=await rt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},r),{gotrue_meta_security:{captcha_token:d}}),redirectTo:a,xform:Wo});if(f)throw f;if(!h)throw new Error("An error occurred on token verification.");const g=h.session,$=h.user;return g?.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(r.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:$,session:g},error:null})}catch(a){if(Ye(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(r){var s,o,a,d,h;try{let f=null,g=null;this.flowType==="pkce"&&([f,g]=await Bh(this.storage,this.storageKey));const $=await rt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in r?{provider_id:r.providerId}:null),"domain"in r?{domain:r.domain}:null),{redirect_to:(o=(s=r.options)===null||s===void 0?void 0:s.redirectTo)!==null&&o!==void 0?o:void 0}),!((a=r?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:r.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:g}),headers:this.headers,xform:B3});return!((d=$.data)===null||d===void 0)&&d.url&&gr()&&!(!((h=r.options)===null||h===void 0)&&h.skipBrowserRedirect)&&window.location.assign($.data.url),this._returnResult($)}catch(f){if(await mr(this.storage,`${this.storageKey}-code-verifier`),Ye(f))return this._returnResult({data:null,error:f});throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async r=>{const{data:{session:s},error:o}=r;if(o)throw o;if(!s)throw new Ls;const{error:a}=await rt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(r){if(Ye(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async resend(r){try{const s=`${this.url}/resend`;if("email"in r){const{email:o,type:a,options:d}=r,{error:h}=await rt(this.fetch,"POST",s,{headers:this.headers,body:{email:o,type:a,gotrue_meta_security:{captcha_token:d?.captchaToken}},redirectTo:d?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}else if("phone"in r){const{phone:o,type:a,options:d}=r,{data:h,error:f}=await rt(this.fetch,"POST",s,{headers:this.headers,body:{phone:o,type:a,gotrue_meta_security:{captcha_token:d?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:h?.message_id},error:f})}throw new H$("You must provide either an email or phone number and a type")}catch(s){if(Ye(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async s=>s))}async _acquireLock(r,s){this._debug("#_acquireLock","begin",r);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await o,await s()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,r,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=s();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(r){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await r(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let r=null;const s=await ku(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?r=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!r)return{data:{session:null},error:null};const o=r.expires_at?r.expires_at*1e3-Date.now()<iT:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",r.expires_at),!o){if(this.userStorage){const h=await ku(this.userStorage,this.storageKey+"-user");h?.user?r.user=h.user:r.user=cT()}if(this.storage.isServer&&r.user&&!r.user.__isUserNotAvailableProxy){const h={value:this.suppressGetSessionWarning};r.user=L3(r.user,h),h.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:r},error:null}}const{data:a,error:d}=await this._callRefreshToken(r.refresh_token);return d?this._returnResult({data:{session:null},error:d}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(r){if(r)return await this._getUser(r);await this.initializePromise;const s=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return s.data.user&&(this.suppressGetSessionWarning=!0),s}async _getUser(r){try{return r?await rt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:r,xform:qa}):await this._useSession(async s=>{var o,a,d;const{data:h,error:f}=s;if(f)throw f;return!(!((o=h.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ls}:await rt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(d=(a=h.session)===null||a===void 0?void 0:a.access_token)!==null&&d!==void 0?d:void 0,xform:qa})})}catch(s){if(Ye(s))return d3(s)&&(await this._removeSession(),await mr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:s});throw s}}async updateUser(r,s={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(r,s))}async _updateUser(r,s={}){try{return await this._useSession(async o=>{const{data:a,error:d}=o;if(d)throw d;if(!a.session)throw new Ls;const h=a.session;let f=null,g=null;this.flowType==="pkce"&&r.email!=null&&([f,g]=await Bh(this.storage,this.storageKey));const{data:$,error:v}=await rt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},r),{code_challenge:f,code_challenge_method:g}),jwt:h.access_token,xform:qa});if(v)throw v;return h.user=$.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),this._returnResult({data:{user:h.user},error:null})})}catch(o){if(await mr(this.storage,`${this.storageKey}-code-verifier`),Ye(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(r){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(r))}async _setSession(r){try{if(!r.access_token||!r.refresh_token)throw new Ls;const s=Date.now()/1e3;let o=s,a=!0,d=null;const{payload:h}=aT(r.access_token);if(h.exp&&(o=h.exp,a=o<=s),a){const{data:f,error:g}=await this._callRefreshToken(r.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!f)return{data:{user:null,session:null},error:null};d=f}else{const{data:f,error:g}=await this._getUser(r.access_token);if(g)throw g;d={access_token:r.access_token,refresh_token:r.refresh_token,user:f.user,token_type:"bearer",expires_in:o-s,expires_at:o},await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)}return this._returnResult({data:{user:d.user,session:d},error:null})}catch(s){if(Ye(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}}async refreshSession(r){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(r))}async _refreshSession(r){try{return await this._useSession(async s=>{var o;if(!r){const{data:h,error:f}=s;if(f)throw f;r=(o=h.session)!==null&&o!==void 0?o:void 0}if(!r?.refresh_token)throw new Ls;const{data:a,error:d}=await this._callRefreshToken(r.refresh_token);return d?this._returnResult({data:{user:null,session:null},error:d}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(s){if(Ye(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async _getSessionFromURL(r,s){try{if(!gr())throw new G$("No browser detected.");if(r.error||r.error_description||r.error_code)throw new G$(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new QR("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new G$("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!r.code)throw new QR("No code detected.");const{data:M,error:P}=await this._exchangeCodeForSession(r.code);if(P)throw P;const F=new URL(window.location.href);return F.searchParams.delete("code"),window.history.replaceState(window.history.state,"",F.toString()),{data:{session:M.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:a,access_token:d,refresh_token:h,expires_in:f,expires_at:g,token_type:$}=r;if(!d||!f||!h||!$)throw new G$("No session defined in URL");const v=Math.round(Date.now()/1e3),y=parseInt(f);let w=v+y;g&&(w=parseInt(g));const S=w-v;S*1e3<=Wh&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${S}s, should have been closer to ${y}s`);const O=w-y;v-O>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",O,w,v):v-O<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",O,w,v);const{data:I,error:x}=await this._getUser(d);if(x)throw x;const A={provider_token:o,provider_refresh_token:a,access_token:d,expires_in:y,expires_at:w,refresh_token:h,token_type:$,user:I.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:A,redirectType:r.type},error:null})}catch(o){if(Ye(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(r){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),r):!!(r.access_token||r.error_description)}async _isPKCECallback(r){const s=await ku(this.storage,`${this.storageKey}-code-verifier`);return!!(r.code&&s)}async signOut(r={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(r))}async _signOut({scope:r}={scope:"global"}){return await this._useSession(async s=>{var o;const{data:a,error:d}=s;if(d)return this._returnResult({error:d});const h=(o=a.session)===null||o===void 0?void 0:o.access_token;if(h){const{error:f}=await this.admin.signOut(h,r);if(f&&!(u3(f)&&(f.status===404||f.status===401||f.status===403)))return this._returnResult({error:f})}return r!=="others"&&(await this._removeSession(),await mr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(r){const s=y3(),o={id:s,callback:r,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,o),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:o}}}async _emitInitialSession(r){return await this._useSession(async s=>{var o,a;try{const{data:{session:d},error:h}=s;if(h)throw h;await((o=this.stateChangeEmitters.get(r))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",r,"session",d)}catch(d){await((a=this.stateChangeEmitters.get(r))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",r,"error",d),console.error(d)}})}async resetPasswordForEmail(r,s={}){let o=null,a=null;this.flowType==="pkce"&&([o,a]=await Bh(this.storage,this.storageKey,!0));try{return await rt(this.fetch,"POST",`${this.url}/recover`,{body:{email:r,code_challenge:o,code_challenge_method:a,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(d){if(await mr(this.storage,`${this.storageKey}-code-verifier`),Ye(d))return this._returnResult({data:null,error:d});throw d}}async getUserIdentities(){var r;try{const{data:s,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(r=s.user.identities)!==null&&r!==void 0?r:[]},error:null})}catch(s){if(Ye(s))return this._returnResult({data:null,error:s});throw s}}async linkIdentity(r){return"token"in r?this.linkIdentityIdToken(r):this.linkIdentityOAuth(r)}async linkIdentityOAuth(r){var s;try{const{data:o,error:a}=await this._useSession(async d=>{var h,f,g,$,v;const{data:y,error:w}=d;if(w)throw w;const S=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,r.provider,{redirectTo:(h=r.options)===null||h===void 0?void 0:h.redirectTo,scopes:(f=r.options)===null||f===void 0?void 0:f.scopes,queryParams:(g=r.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await rt(this.fetch,"GET",S,{headers:this.headers,jwt:(v=($=y.session)===null||$===void 0?void 0:$.access_token)!==null&&v!==void 0?v:void 0})});if(a)throw a;return gr()&&!(!((s=r.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(o?.url),this._returnResult({data:{provider:r.provider,url:o?.url},error:null})}catch(o){if(Ye(o))return this._returnResult({data:{provider:r.provider,url:null},error:o});throw o}}async linkIdentityIdToken(r){return await this._useSession(async s=>{var o;try{const{error:a,data:{session:d}}=s;if(a)throw a;const{options:h,provider:f,token:g,access_token:$,nonce:v}=r,y=await rt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=d?.access_token)!==null&&o!==void 0?o:void 0,body:{provider:f,id_token:g,access_token:$,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:Wo}),{data:w,error:S}=y;return S?this._returnResult({data:{user:null,session:null},error:S}):!w||!w.session||!w.user?this._returnResult({data:{user:null,session:null},error:new Dh}):(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("USER_UPDATED",w.session)),this._returnResult({data:w,error:S}))}catch(a){if(await mr(this.storage,`${this.storageKey}-code-verifier`),Ye(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(r){try{return await this._useSession(async s=>{var o,a;const{data:d,error:h}=s;if(h)throw h;return await rt(this.fetch,"DELETE",`${this.url}/user/identities/${r.identity_id}`,{headers:this.headers,jwt:(a=(o=d.session)===null||o===void 0?void 0:o.access_token)!==null&&a!==void 0?a:void 0})})}catch(s){if(Ye(s))return this._returnResult({data:null,error:s});throw s}}async _refreshAccessToken(r){const s=`#_refreshAccessToken(${r.substring(0,5)}...)`;this._debug(s,"begin");try{const o=Date.now();return await w3(async a=>(a>0&&await E3(200*Math.pow(2,a-1)),this._debug(s,"refreshing attempt",a),await rt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:r},headers:this.headers,xform:Wo})),(a,d)=>{const h=200*Math.pow(2,a);return d&&lT(d)&&Date.now()+h-o<Wh})}catch(o){if(this._debug(s,"error",o),Ye(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(s,"end")}}_isValidSession(r){return typeof r=="object"&&r!==null&&"access_token"in r&&"refresh_token"in r&&"expires_at"in r}async _handleProviderSignIn(r,s){const o=await this._getUrlForProvider(`${this.url}/authorize`,r,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",r,"options",s,"url",o),gr()&&!s.skipBrowserRedirect&&window.location.assign(o),{data:{provider:r,url:o},error:null}}async _recoverAndRefresh(){var r,s;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const a=await ku(this.storage,this.storageKey);if(a&&this.userStorage){let h=await ku(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:a.user},await zh(this.userStorage,this.storageKey+"-user",h)),a.user=(r=h?.user)!==null&&r!==void 0?r:cT()}else if(a&&!a.user&&!a.user){const h=await ku(this.storage,this.storageKey+"-user");h&&h?.user?(a.user=h.user,await mr(this.storage,this.storageKey+"-user"),await zh(this.storage,this.storageKey,a)):a.user=cT()}if(this._debug(o,"session from storage",a),!this._isValidSession(a)){this._debug(o,"session is not valid"),a!==null&&await this._removeSession();return}const d=((s=a.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<iT;if(this._debug(o,`session has${d?"":" not"} expired with margin of ${iT}s`),d){if(this.autoRefreshToken&&a.refresh_token){const{error:h}=await this._callRefreshToken(a.refresh_token);h&&(console.error(h),lT(h)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:f}=await this._getUser(a.access_token);!f&&h?.user?(a.user=h.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(o,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(o,"error",a),console.error(a);return}finally{this._debug(o,"end")}}async _callRefreshToken(r){var s,o;if(!r)throw new Ls;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${r.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new gv;const{data:d,error:h}=await this._refreshAccessToken(r);if(h)throw h;if(!d.session)throw new Ls;await this._saveSession(d.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",d.session);const f={data:d.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(d){if(this._debug(a,"error",d),Ye(d)){const h={data:null,error:d};return lT(d)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(h),h}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(d),d}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(r,s,o=!0){const a=`#_notifyAllSubscribers(${r})`;this._debug(a,"begin",s,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:r,session:s});const d=[],h=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(r,s)}catch(g){d.push(g)}});if(await Promise.all(h),d.length>0){for(let f=0;f<d.length;f+=1)console.error(d[f]);throw d[0]}}finally{this._debug(a,"end")}}async _saveSession(r){this._debug("#_saveSession()",r),this.suppressGetSessionWarning=!0,await mr(this.storage,`${this.storageKey}-code-verifier`);const s=Object.assign({},r),o=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&s.user&&await zh(this.userStorage,this.storageKey+"-user",{user:s.user});const a=Object.assign({},s);delete a.user;const d=rk(a);await zh(this.storage,this.storageKey,d)}else{const a=rk(s);await zh(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await mr(this.storage,this.storageKey),await mr(this.storage,this.storageKey+"-code-verifier"),await mr(this.storage,this.storageKey+"-user"),this.userStorage&&await mr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const r=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{r&&gr()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",r)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const r=setInterval(()=>this._autoRefreshTokenTick(),Wh);this.autoRefreshTicker=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r);const s=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const r=this.autoRefreshTicker;this.autoRefreshTicker=null,r&&clearInterval(r);const s=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,s&&clearTimeout(s)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const r=Date.now();try{return await this._useSession(async s=>{const{data:{session:o}}=s;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((o.expires_at*1e3-r)/Wh);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Wh}ms, refresh threshold is ${bb} ticks`),a<=bb&&await this._callRefreshToken(o.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(r){if(r.isAcquireTimeout||r instanceof GL)this._debug("auto refresh token tick lock not available");else throw r}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!gr()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}}async _onVisibilityChanged(r){const s=`#_onVisibilityChanged(${r})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),r||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(r,s,o){const a=[`provider=${encodeURIComponent(s)}`];if(o?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&a.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[d,h]=await Bh(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(d)}`,code_challenge_method:`${encodeURIComponent(h)}`});a.push(f.toString())}if(o?.queryParams){const d=new URLSearchParams(o.queryParams);a.push(d.toString())}return o?.skipBrowserRedirect&&a.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${r}?${a.join("&")}`}async _unenroll(r){try{return await this._useSession(async s=>{var o;const{data:a,error:d}=s;return d?this._returnResult({data:null,error:d}):await rt(this.fetch,"DELETE",`${this.url}/factors/${r.factorId}`,{headers:this.headers,jwt:(o=a?.session)===null||o===void 0?void 0:o.access_token})})}catch(s){if(Ye(s))return this._returnResult({data:null,error:s});throw s}}async _enroll(r){try{return await this._useSession(async s=>{var o,a;const{data:d,error:h}=s;if(h)return this._returnResult({data:null,error:h});const f=Object.assign({friendly_name:r.friendlyName,factor_type:r.factorType},r.factorType==="phone"?{phone:r.phone}:r.factorType==="totp"?{issuer:r.issuer}:{}),{data:g,error:$}=await rt(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(o=d?.session)===null||o===void 0?void 0:o.access_token});return $?this._returnResult({data:null,error:$}):(r.factorType==="totp"&&g.type==="totp"&&(!((a=g?.totp)===null||a===void 0)&&a.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(s){if(Ye(s))return this._returnResult({data:null,error:s});throw s}}async _verify(r){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async s=>{var o;const{data:a,error:d}=s;if(d)return this._returnResult({data:null,error:d});const h=Object.assign({challenge_id:r.challengeId},"webauthn"in r?{webauthn:Object.assign(Object.assign({},r.webauthn),{credential_response:r.webauthn.type==="create"?e4(r.webauthn.credential_response):t4(r.webauthn.credential_response)})}:{code:r.code}),{data:f,error:g}=await rt(this.fetch,"POST",`${this.url}/factors/${r.factorId}/verify`,{body:h,headers:this.headers,jwt:(o=a?.session)===null||o===void 0?void 0:o.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),this._returnResult({data:f,error:g}))})}catch(s){if(Ye(s))return this._returnResult({data:null,error:s});throw s}})}async _challenge(r){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async s=>{var o;const{data:a,error:d}=s;if(d)return this._returnResult({data:null,error:d});const h=await rt(this.fetch,"POST",`${this.url}/factors/${r.factorId}/challenge`,{body:r,headers:this.headers,jwt:(o=a?.session)===null||o===void 0?void 0:o.access_token});if(h.error)return h;const{data:f}=h;if(f.type!=="webauthn")return{data:f,error:null};switch(f.webauthn.type){case"create":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:Q3(f.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:Z3(f.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(Ye(s))return this._returnResult({data:null,error:s});throw s}})}async _challengeAndVerify(r){const{data:s,error:o}=await this._challenge({factorId:r.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:r.factorId,challengeId:s.id,code:r.code})}async _listFactors(){var r;const{data:{user:s},error:o}=await this.getUser();if(o)return{data:null,error:o};const a={all:[],phone:[],totp:[],webauthn:[]};for(const d of(r=s?.factors)!==null&&r!==void 0?r:[])a.all.push(d),d.status==="verified"&&a[d.factor_type].push(d);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var r,s;const{data:{session:o},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=aT(o.access_token);let h=null;d.aal&&(h=d.aal);let f=h;((s=(r=o.user.factors)===null||r===void 0?void 0:r.filter(v=>v.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(f="aal2");const $=d.amr||[];return{data:{currentLevel:h,nextLevel:f,currentAuthenticationMethods:$},error:null}}async _getAuthorizationDetails(r){try{return await this._useSession(async s=>{const{data:{session:o},error:a}=s;return a?this._returnResult({data:null,error:a}):o?await rt(this.fetch,"GET",`${this.url}/oauth/authorizations/${r}`,{headers:this.headers,jwt:o.access_token,xform:d=>({data:d,error:null})}):this._returnResult({data:null,error:new Ls})})}catch(s){if(Ye(s))return this._returnResult({data:null,error:s});throw s}}async _approveAuthorization(r,s){try{return await this._useSession(async o=>{const{data:{session:a},error:d}=o;if(d)return this._returnResult({data:null,error:d});if(!a)return this._returnResult({data:null,error:new Ls});const h=await rt(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:f=>({data:f,error:null})});return h.data&&h.data.redirect_url&&gr()&&!s?.skipBrowserRedirect&&window.location.assign(h.data.redirect_url),h})}catch(o){if(Ye(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(r,s){try{return await this._useSession(async o=>{const{data:{session:a},error:d}=o;if(d)return this._returnResult({data:null,error:d});if(!a)return this._returnResult({data:null,error:new Ls});const h=await rt(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:f=>({data:f,error:null})});return h.data&&h.data.redirect_url&&gr()&&!s?.skipBrowserRedirect&&window.location.assign(h.data.redirect_url),h})}catch(o){if(Ye(o))return this._returnResult({data:null,error:o});throw o}}async _listOAuthGrants(){try{return await this._useSession(async r=>{const{data:{session:s},error:o}=r;return o?this._returnResult({data:null,error:o}):s?await rt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Ls})})}catch(r){if(Ye(r))return this._returnResult({data:null,error:r});throw r}}async _revokeOAuthGrant(r){try{return await this._useSession(async s=>{const{data:{session:o},error:a}=s;return a?this._returnResult({data:null,error:a}):o?(await rt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:o.access_token,query:{client_id:r.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ls})})}catch(s){if(Ye(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(r,s={keys:[]}){let o=s.keys.find(f=>f.kid===r);if(o)return o;const a=Date.now();if(o=this.jwks.keys.find(f=>f.kid===r),o&&this.jwks_cached_at+a3>a)return o;const{data:d,error:h}=await rt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!d.keys||d.keys.length===0||(this.jwks=d,this.jwks_cached_at=a,o=d.keys.find(f=>f.kid===r),!o)?null:o}async getClaims(r,s={}){try{let o=r;if(!o){const{data:S,error:O}=await this.getSession();if(O||!S.session)return this._returnResult({data:null,error:O});o=S.session.access_token}const{header:a,payload:d,signature:h,raw:{header:f,payload:g}}=aT(o);s?.allowExpired||O3(d.exp);const $=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!$){const{error:S}=await this.getUser(o);if(S)throw S;return{data:{claims:d,header:a,signature:h},error:null}}const v=A3(a.alg),y=await crypto.subtle.importKey("jwk",$,v,!0,["verify"]);if(!await crypto.subtle.verify(v,y,h,_3(`${f}.${g}`)))throw new Sb("Invalid JWT signature");return{data:{claims:d,header:a,signature:h},error:null}}catch(o){if(Ye(o))return this._returnResult({data:null,error:o});throw o}}}cg.nextInstanceID={};const u4=cg,d4="2.90.1";let Bm="";typeof Deno<"u"?Bm="deno":typeof document<"u"?Bm="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Bm="react-native":Bm="node";const h4={"X-Client-Info":`supabase-js-${Bm}/${d4}`},p4={headers:h4},f4={schema:"public"},m4={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},g4={};function ug(t){"@babel/helpers - typeof";return ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ug(t)}function $4(t,r){if(ug(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var o=s.call(t,r);if(ug(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function _4(t){var r=$4(t,"string");return ug(r)=="symbol"?r:r+""}function v4(t,r,s){return(r=_4(r))in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function uk(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);r&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,o)}return s}function Tn(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?uk(Object(s),!0).forEach(function(o){v4(t,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):uk(Object(s)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(s,o))})}return t}const y4=t=>t?(...r)=>t(...r):(...r)=>fetch(...r),T4=()=>Headers,b4=(t,r,s)=>{const o=y4(s),a=T4();return async(d,h)=>{var f;const g=(f=await r())!==null&&f!==void 0?f:t;let $=new a(h?.headers);return $.has("apikey")||$.set("apikey",t),$.has("Authorization")||$.set("Authorization",`Bearer ${g}`),o(d,Tn(Tn({},h),{},{headers:$}))}};function E4(t){return t.endsWith("/")?t:t+"/"}function w4(t,r){var s,o;const{db:a,auth:d,realtime:h,global:f}=t,{db:g,auth:$,realtime:v,global:y}=r,w={db:Tn(Tn({},g),a),auth:Tn(Tn({},$),d),realtime:Tn(Tn({},v),h),storage:{},global:Tn(Tn(Tn({},y),f),{},{headers:Tn(Tn({},(s=y?.headers)!==null&&s!==void 0?s:{}),(o=f?.headers)!==null&&o!==void 0?o:{})}),accessToken:async()=>""};return t.accessToken?w.accessToken=t.accessToken:delete w.accessToken,w}function S4(t){const r=t?.trim();if(!r)throw new Error("supabaseUrl is required.");if(!r.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(E4(r))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var C4=class extends u4{constructor(t){super(t)}},I4=class{constructor(t,r,s){var o,a;this.supabaseUrl=t,this.supabaseKey=r;const d=S4(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const h=`sb-${d.hostname.split(".")[0]}-auth-token`,f={db:f4,realtime:g4,auth:Tn(Tn({},m4),{},{storageKey:h}),global:p4},g=w4(s??{},f);if(this.storageKey=(o=g.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(a=g.global.headers)!==null&&a!==void 0?a:{},g.accessToken)this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(v,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}});else{var $;this.auth=this._initSupabaseAuthClient(($=g.auth)!==null&&$!==void 0?$:{},this.headers,g.global.fetch)}this.fetch=b4(r,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Tn({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.accessToken&&this.accessToken().then(v=>this.realtime.setAuth(v)).catch(v=>console.warn("Failed to set initial Realtime auth token:",v)),this.rest=new i5(new URL("rest/v1",d).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new r3(this.storageUrl.href,this.headers,this.fetch,s?.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new t5(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,s)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,r,s;if(t.accessToken)return await t.accessToken();const{data:o}=await t.auth.getSession();return(r=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:s,storage:o,userStorage:a,storageKey:d,flowType:h,lock:f,debug:g,throwOnError:$},v,y){const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new C4({url:this.authUrl.href,headers:Tn(Tn({},w),v),storageKey:d,autoRefreshToken:t,persistSession:r,detectSessionInUrl:s,storage:o,userStorage:a,flowType:h,lock:f,debug:g,throwOnError:$,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(S=>S.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new E5(this.realtimeUrl.href,Tn(Tn({},t),{},{params:Tn(Tn({},{apikey:this.supabaseKey}),t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r?.access_token)})}_handleTokenChanged(t,r,s){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const R4=(t,r,s)=>new I4(t,r,s);function k4(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const r=t.version;if(r==null)return!1;const s=r.match(/^v(\d+)\./);return s?parseInt(s[1],10)<=18:!1}k4()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const x4="https://iyhnpfeirmxirpwyjumf.supabase.co",O4="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml5aG5wZmVpcm14aXJwd3lqdW1mIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgzOTkwMjAsImV4cCI6MjA4Mzk3NTAyMH0.ufZgQpI-UBQElmqnmSzIYyft0WF4wu_0iII6NyYUutA",A4=R4(x4,O4,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),dk=async(t,r)=>{try{const{data:s,error:o}=await A4.functions.invoke("compile-arduino",{body:{code:t,board:r}});return o?{success:!1,error:o.message}:s}catch(s){return console.error("Compile request error:",s),{success:!1,error:s instanceof Error?s.message:"Failed to compile code"}}},cw=".arduide",zL={description:"ArduIDE Project",accept:{"application/json":[cw]}},uw=()=>"showSaveFilePicker"in window&&"showOpenFilePicker"in window,N4=async(t,r,s,o)=>{const a={name:t,blocklyXml:r,generatedCode:s,board:o,version:"1.0",exportedAt:new Date().toISOString()},d=JSON.stringify(a,null,2),h=`${t.replace(/[^a-zA-Z0-9-_]/g,"_")}${cw}`;if(uw())try{const g=await(await window.showSaveFilePicker({suggestedName:h,types:[zL]})).createWritable();return await g.write(d),await g.close(),!0}catch(f){return f.name==="AbortError"?!1:(console.error("File save error:",f),x_(d,h))}else return x_(d,h)},x_=(t,r)=>{const s=new Blob([t],{type:"application/json"}),o=URL.createObjectURL(s),a=document.createElement("a");return a.href=o,a.download=r,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o),!0},L4=async()=>{if(uw())try{const[t]=await window.showOpenFilePicker({types:[zL],multiple:!1}),s=await(await t.getFile()).text();return KL(s)}catch(t){return t.name==="AbortError"?null:(console.error("File open error:",t),hk())}else return hk()},hk=()=>new Promise(t=>{const r=document.createElement("input");r.type="file",r.accept=cw+",.json",r.onchange=async s=>{const o=s.target.files?.[0];if(!o){t(null);return}try{const a=await o.text();t(KL(a))}catch(a){console.error("Error reading file:",a),t(null)}},r.oncancel=()=>t(null),r.click()}),KL=t=>{try{const r=JSON.parse(t);if(!r.name||!r.blocklyXml)throw new Error("Invalid ArduIDE file: missing required fields");return{name:r.name,blocklyXml:r.blocklyXml,generatedCode:r.generatedCode||"",board:r.board||"arduino:avr:uno",version:r.version||"1.0",exportedAt:r.exportedAt||new Date().toISOString()}}catch(r){return console.error("Error parsing ArduIDE file:",r),null}},M4=async(t,r)=>{const o=`// Generated by ArduIDE
// Project: ${r}
// Date: ${new Date().toISOString()}

`+t,a=`${r.replace(/[^a-zA-Z0-9-_]/g,"_")}.ino`;if(uw())try{const h=await(await window.showSaveFilePicker({suggestedName:a,types:[{description:"Arduino Sketch",accept:{"text/plain":[".ino"]}}]})).createWritable();return await h.write(o),await h.close(),!0}catch(d){return d.name==="AbortError"?!1:x_(o,a)}else return x_(o,a)},P4=()=>{const{currentProject:t,renameProject:r}=Qu(),[s,o]=E.useState(!1),[a,d]=E.useState(""),h=E.useRef(null),f=t?.name||"Proyecto sin guardar";E.useEffect(()=>{s&&h.current&&(h.current.focus(),h.current.select())},[s]);const g=()=>{if(!t){Xn.info("Guarda el proyecto primero para cambiarle el nombre");return}d(t.name),o(!0)},$=async()=>{const w=a.trim();if(!w){Xn.error("El nombre no puede estar vaco");return}t&&w!==t.name&&(await r(w),Xn.success("Nombre actualizado")),o(!1)},v=()=>{o(!1),d("")},y=w=>{w.key==="Enter"?$():w.key==="Escape"&&v()};return R.jsxs("div",{className:"flex items-center gap-3",children:[R.jsx("div",{className:"flex items-center gap-2",children:R.jsx("img",{src:"/favicon.ico",alt:"ArduIDE Logo",className:"w- h-8 object-contain"})}),R.jsx("div",{className:"h-6 w-px bg-border hidden sm:block"}),R.jsx("div",{className:"flex items-center gap-2",children:s?R.jsxs("div",{className:"flex items-center gap-1",children:[R.jsx("input",{ref:h,type:"text",value:a,onChange:w=>d(w.target.value),onKeyDown:y,onBlur:$,className:"neu-input px-3 py-1.5 text-sm font-bold w-40 sm:w-56",placeholder:"Nombre del proyecto"}),R.jsx("button",{onClick:$,className:"p-1.5 rounded-lg hover:bg-success/20 text-success transition-colors",title:"Guardar",children:R.jsx(Pb,{className:"w-4 h-4"})}),R.jsx("button",{onClick:v,className:"p-1.5 rounded-lg hover:bg-destructive/20 text-destructive transition-colors",title:"Cancelar",children:R.jsx(Db,{className:"w-4 h-4"})})]}):R.jsxs("button",{onClick:g,className:"flex items-center gap-2 px-3 py-1.5 rounded-xl hover:bg-muted/50 transition-colors group",title:t?"Click para editar nombre":"Guarda el proyecto primero",children:[R.jsxs("span",{className:`font-bold text-sm truncate max-w-32 sm:max-w-48 ${t?"text-foreground":"text-muted-foreground italic"}`,children:[" ",f]}),t&&R.jsx(ND,{className:"w-3.5 h-3.5 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity"})]})})]})},pk=({onSave:t,onNewProject:r,onOpenProject:s,onImportProject:o})=>{const{selectedBoard:a,setSelectedBoard:d,isConnected:h,setIsConnected:f,isUploading:g,setIsUploading:$,uploadProgress:v,setUploadProgress:y,currentProject:w,projects:S,loadProjects:O,addConsoleMessage:I,generatedCode:x,setActiveTab:A}=Qu(),[M,P]=Ne.useState(""),[F,B]=Ne.useState(!1),[V,j]=Ne.useState(!1),[W,he]=Ne.useState(null);Ne.useEffect(()=>{O()},[O]),Ne.useEffect(()=>{W&&he(null)},[x]);const we=async()=>{I("info"," Iniciando compilacin "),I("info",`Placa: ${a.name} (${a.fqbn})`),$(!0),y(10),A("console");try{y(30);const ie=await dk(x,a.fqbn);y(90),ie.success?(ie.hex&&(he(ie.hex),I("success"," Compilacin exitosa! Archivo HEX listo.")),ie.output&&ie.output.split(`
`).forEach(pe=>{pe.trim()&&I("info",pe)}),Xn.success("Compilacin completada!")):(he(null),I("error"," Error de compilacin"),ie.error&&I("error",ie.error),ie.output&&ie.output.split(`
`).forEach(pe=>{pe.trim()&&I("warning",pe)}),Xn.error("Error de compilacin - revisa la consola")),y(100)}catch(ie){I("error",`Error: ${ie}`),Xn.error("Error de compilacin"),he(null)}finally{setTimeout(()=>$(!1),500)}},Ee=async()=>{h&&(I("info","Cerrando conexin serial..."),f(!1),await new Promise(pe=>setTimeout(pe,500)));let ie=W;if(!ie){I("info","Compilando primero..."),I("info"," Iniciando compilacin "),I("info",`Placa: ${a.name} (${a.fqbn})`),$(!0),y(10),A("console");try{y(30);const pe=await dk(x,a.fqbn);if(y(90),pe.success&&pe.hex)ie=pe.hex,he(pe.hex),I("success"," Compilacin exitosa!"),pe.output&&pe.output.split(`
`).forEach(G=>{G.trim()&&I("info",G)});else{he(null),I("error"," Error de compilacin"),pe.error&&I("error",pe.error),pe.output&&pe.output.split(`
`).forEach(G=>{G.trim()&&I("warning",G)}),Xn.error("Error de compilacin"),$(!1);return}}catch(pe){I("error",`Error: ${pe}`),Xn.error("Error de compilacin"),$(!1);return}}I("info"," Subiendo a la placa "),I("info",`Destino: ${a.name}`),g||$(!0),A("console");try{const pe=await ux();if(!pe){I("warning","Subida cancelada - sin puerto seleccionado"),$(!1);return}const G=wV(ie);I("info",`Tamao del firmware: ${G.length} bytes`),await IV(pe,G,a,ee=>{y(ee.progress),I(ee.stage==="error"?"error":"info",ee.message)},ee=>{I("info",ee)}),I("success"," Subida completada!"),Xn.success("Programa subido correctamente!")}catch(pe){const G=pe instanceof Error?pe.message:String(pe);I("error",` Error de subida: ${G}`),Xn.error("Error al subir")}finally{$(!1),y(0)}},ye=()=>{if(!M.trim()){Xn.error("Ingresa un nombre para el proyecto");return}r(M),P(""),B(!1)},De=async()=>{const ie=w?.name||"MiProyecto",pe=mx();let G="";if(pe){const $e=Uu.workspaceToDom(pe);G=Uu.domToText($e)}await N4(ie,G||w?.blocklyXml||"",x,a.fqbn)&&(Xn.success("Proyecto exportado a PC"),I("success",`Proyecto "${ie}" guardado en PC`))},ce=async()=>{const ie=w?.name||"MiProyecto";await M4(x,ie)&&(Xn.success("Archivo .ino exportado"),I("success",`Cdigo exportado como ${ie}.ino`))},Oe=async()=>{const ie=await L4();ie&&(o(ie.blocklyXml,ie.name,ie.board),Xn.success(`Proyecto "${ie.name}" cargado`),I("success",`Proyecto "${ie.name}" importado desde PC`))};return R.jsxs(R.Fragment,{children:[R.jsxs("div",{className:"toolbar-island flex-wrap gap-2",children:[R.jsx(P4,{}),R.jsx("div",{className:"h-8 w-px bg-border hidden md:block"}),R.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[R.jsxs(FR,{open:F,onOpenChange:B,children:[R.jsx(HX,{asChild:!0,children:R.jsxs("button",{className:"clay-btn gap-2 text-xs",children:[R.jsx(ID,{className:"w-4 h-4 text-primary"}),R.jsx("span",{className:"hidden sm:inline",children:"Nuevo"})]})}),R.jsxs(ub,{className:"ide-panel border-none",children:[R.jsxs(db,{children:[R.jsx(pb,{className:"text-xl font-black text-primary",children:"Nuevo Proyecto"}),R.jsx(fb,{children:"Crea un nuevo proyecto Arduino. Tu trabajo se guardar automticamente."})]}),R.jsxs("div",{className:"py-4",children:[R.jsx(bL,{htmlFor:"projectName",className:"font-bold",children:"Nombre del Proyecto"}),R.jsx(FE,{id:"projectName",value:M,onChange:ie=>P(ie.target.value),placeholder:"Mi Proyecto Arduino",className:"neu-input mt-2",onKeyDown:ie=>ie.key==="Enter"&&ye()})]}),R.jsxs(hb,{className:"gap-2",children:[R.jsx(Vu,{variant:"outline",onClick:()=>B(!1),className:"clay-btn",children:"Cancelar"}),R.jsx(Vu,{onClick:ye,className:"clay-btn clay-btn-primary",children:"Crear"})]})]})]}),R.jsxs(DR,{children:[R.jsx(BR,{asChild:!0,children:R.jsxs("button",{className:"clay-btn gap-2 text-xs",children:[R.jsx(RD,{className:"w-4 h-4 text-secondary"}),R.jsx("span",{className:"hidden sm:inline",children:"Abrir"})]})}),R.jsxs(cb,{align:"start",className:"w-56 ide-panel border-none p-2",children:[R.jsxs(Gh,{onClick:Oe,className:"rounded-xl font-medium",children:[R.jsx(fC,{className:"w-4 h-4 mr-2 text-primary"}),"Abrir desde PC (.arduide)"]}),R.jsx(QN,{}),S.length===0?R.jsx(Gh,{disabled:!0,className:"rounded-xl",children:"Sin proyectos recientes"}):R.jsxs(R.Fragment,{children:[R.jsx("div",{className:"px-2 py-1 text-xs text-muted-foreground font-bold",children:"Proyectos recientes:"}),S.slice(0,5).map(ie=>R.jsx(Gh,{onClick:()=>s(ie.id),className:"rounded-xl font-medium",children:R.jsxs("div",{className:"flex flex-col",children:[R.jsxs("span",{children:[" ",ie.name]}),R.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(ie.updatedAt).toLocaleDateString()})]})},ie.id))]})]})]}),R.jsxs("button",{onClick:t,className:"clay-btn gap-2 text-xs",children:[R.jsx(MD,{className:"w-4 h-4 text-success"}),R.jsx("span",{className:"hidden sm:inline",children:"Guardar"})]}),R.jsxs(DR,{children:[R.jsx(BR,{asChild:!0,children:R.jsxs("button",{className:"clay-btn gap-2 text-xs",children:[R.jsx(SD,{className:"w-4 h-4 text-warning"}),R.jsx("span",{className:"hidden sm:inline",children:"Exportar"})]})}),R.jsxs(cb,{align:"start",className:"w-56 ide-panel border-none p-2",children:[R.jsxs(Gh,{onClick:De,className:"rounded-xl font-medium",children:[R.jsx(fC,{className:"w-4 h-4 mr-2 text-primary"}),"Guardar en PC (.arduide)"]}),R.jsxs(Gh,{onClick:ce,className:"rounded-xl font-medium",children:[R.jsx(CD,{className:"w-4 h-4 mr-2 text-success"}),"Exportar cdigo (.ino)"]})]})]})]}),R.jsx("div",{className:"h-8 w-px bg-border hidden md:block"}),R.jsxs("div",{className:"flex items-center gap-2 flex-wrap ml-auto",children:[R.jsxs(XA,{value:a.fqbn,onValueChange:ie=>{const pe=Xh.find(G=>G.fqbn===ie);pe&&d(pe)},children:[R.jsx(GE,{className:"neu-input w-[140px] sm:w-[160px] h-10 text-xs font-bold",children:R.jsx(YA,{placeholder:"Seleccionar placa"})}),R.jsx(jE,{className:"ide-panel border-none",children:Xh.map(ie=>R.jsx(WE,{value:ie.fqbn,className:"font-medium rounded-lg",children:ie.name},ie.fqbn))})]}),R.jsxs("button",{onClick:we,disabled:g,className:"clay-btn clay-btn-warning gap-2 text-xs",children:[R.jsx(xD,{className:"w-4 h-4"}),R.jsx("span",{className:"hidden sm:inline",children:"Compilar"})]}),R.jsxs("button",{onClick:Ee,disabled:g,className:"clay-btn clay-btn-primary gap-2 text-xs",children:[R.jsx(FD,{className:"w-4 h-4"}),R.jsx("span",{className:"hidden sm:inline",children:"Subir"})]})]})]}),R.jsx(op,{children:g&&R.jsx(Wr.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:R.jsx("div",{children:R.jsxs("div",{className:"flex items-center gap-3",children:[R.jsx(RL,{value:v,className:"flex-1 h-2"}),R.jsxs("span",{className:"text-sm text-muted-foreground w-12",children:[v,"%"]})]})})})}),R.jsx(FR,{open:V,onOpenChange:j,children:R.jsxs(ub,{children:[R.jsxs(db,{children:[R.jsxs(pb,{className:"flex items-center gap-2",children:[R.jsx(e0,{className:"w-5 h-5 text-destructive"}),"WebSerial No Soportado"]}),R.jsxs(fb,{className:"pt-2",children:["Tu navegador no soporta la API WebSerial, necesaria para conectar con placas Arduino.",R.jsx("br",{}),R.jsx("br",{}),R.jsx("strong",{children:"Para usar esta funcin:"}),R.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[R.jsx("li",{children:"Usa Google Chrome (versin 89+)"}),R.jsx("li",{children:"Usa Microsoft Edge (versin 89+)"}),R.jsx("li",{children:"Usa Opera (versin 75+)"})]}),R.jsx("br",{}),"Safari, Firefox y navegadores mviles no son compatibles."]})]}),R.jsx(hb,{children:R.jsx(Vu,{onClick:()=>j(!1),children:"Entendido"})})]})})]})};var $v="Tabs",[D4]=To($v,[uv]),XL=uv(),[B4,dw]=D4($v),YL=E.forwardRef((t,r)=>{const{__scopeTabs:s,value:o,onValueChange:a,defaultValue:d,orientation:h="horizontal",dir:f,activationMode:g="automatic",...$}=t,v=gg(f),[y,w]=Wu({prop:o,onChange:a,defaultProp:d??"",caller:$v});return R.jsx(B4,{scope:s,baseId:Ui(),value:y,onValueChange:w,orientation:h,dir:v,activationMode:g,children:R.jsx(Ze.div,{dir:v,"data-orientation":h,...$,ref:r})})});YL.displayName=$v;var qL="TabsList",JL=E.forwardRef((t,r)=>{const{__scopeTabs:s,loop:o=!0,...a}=t,d=dw(qL,s),h=XL(s);return R.jsx(rN,{asChild:!0,...h,orientation:d.orientation,dir:d.dir,loop:o,children:R.jsx(Ze.div,{role:"tablist","aria-orientation":d.orientation,...a,ref:r})})});JL.displayName=qL;var QL="TabsTrigger",ZL=E.forwardRef((t,r)=>{const{__scopeTabs:s,value:o,disabled:a=!1,...d}=t,h=dw(QL,s),f=XL(s),g=nM(h.baseId,o),$=rM(h.baseId,o),v=o===h.value;return R.jsx(sN,{asChild:!0,...f,focusable:!a,active:v,children:R.jsx(Ze.button,{type:"button",role:"tab","aria-selected":v,"aria-controls":$,"data-state":v?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:g,...d,ref:r,onMouseDown:Pe(t.onMouseDown,y=>{!a&&y.button===0&&y.ctrlKey===!1?h.onValueChange(o):y.preventDefault()}),onKeyDown:Pe(t.onKeyDown,y=>{[" ","Enter"].includes(y.key)&&h.onValueChange(o)}),onFocus:Pe(t.onFocus,()=>{const y=h.activationMode!=="manual";!v&&!a&&y&&h.onValueChange(o)})})})});ZL.displayName=QL;var eM="TabsContent",tM=E.forwardRef((t,r)=>{const{__scopeTabs:s,value:o,forceMount:a,children:d,...h}=t,f=dw(eM,s),g=nM(f.baseId,o),$=rM(f.baseId,o),v=o===f.value,y=E.useRef(v);return E.useEffect(()=>{const w=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(w)},[]),R.jsx(Kr,{present:a||v,children:({present:w})=>R.jsx(Ze.div,{"data-state":v?"active":"inactive","data-orientation":f.orientation,role:"tabpanel","aria-labelledby":g,hidden:!w,id:$,tabIndex:0,...h,ref:r,style:{...t.style,animationDuration:y.current?"0s":void 0},children:w&&d})})});tM.displayName=eM;function nM(t,r){return`${t}-trigger-${r}`}function rM(t,r){return`${t}-content-${r}`}var F4=YL,sM=JL,oM=ZL,iM=tM;const fk=F4,Cb=E.forwardRef(({className:t,...r},s)=>R.jsx(sM,{ref:s,className:pt("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...r}));Cb.displayName=sM.displayName;const Ib=E.forwardRef(({className:t,...r},s)=>R.jsx(oM,{ref:s,className:pt("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",t),...r}));Ib.displayName=oM.displayName;const U4=E.forwardRef(({className:t,...r},s)=>R.jsx(iM,{ref:s,className:pt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...r}));U4.displayName=iM.displayName;const _v=E.createContext(null);_v.displayName="PanelGroupContext";const En={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},hw=10,Gu=E.useLayoutEffect,mk=N_.useId,V4=typeof mk=="function"?mk:()=>null;let H4=0;function pw(t=null){const r=V4(),s=E.useRef(t||r||null);return s.current===null&&(s.current=""+H4++),t??s.current}function lM({children:t,className:r="",collapsedSize:s,collapsible:o,defaultSize:a,forwardedRef:d,id:h,maxSize:f,minSize:g,onCollapse:$,onExpand:v,onResize:y,order:w,style:S,tagName:O="div",...I}){const x=E.useContext(_v);if(x===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:A,expandPanel:M,getPanelSize:P,getPanelStyle:F,groupId:B,isPanelCollapsed:V,reevaluatePanelConstraints:j,registerPanel:W,resizePanel:he,unregisterPanel:we}=x,Ee=pw(h),ye=E.useRef({callbacks:{onCollapse:$,onExpand:v,onResize:y},constraints:{collapsedSize:s,collapsible:o,defaultSize:a,maxSize:f,minSize:g},id:Ee,idIsFromProps:h!==void 0,order:w});E.useRef({didLogMissingDefaultSizeWarning:!1}),Gu(()=>{const{callbacks:ce,constraints:Oe}=ye.current,ie={...Oe};ye.current.id=Ee,ye.current.idIsFromProps=h!==void 0,ye.current.order=w,ce.onCollapse=$,ce.onExpand=v,ce.onResize=y,Oe.collapsedSize=s,Oe.collapsible=o,Oe.defaultSize=a,Oe.maxSize=f,Oe.minSize=g,(ie.collapsedSize!==Oe.collapsedSize||ie.collapsible!==Oe.collapsible||ie.maxSize!==Oe.maxSize||ie.minSize!==Oe.minSize)&&j(ye.current,ie)}),Gu(()=>{const ce=ye.current;return W(ce),()=>{we(ce)}},[w,Ee,W,we]),E.useImperativeHandle(d,()=>({collapse:()=>{A(ye.current)},expand:ce=>{M(ye.current,ce)},getId(){return Ee},getSize(){return P(ye.current)},isCollapsed(){return V(ye.current)},isExpanded(){return!V(ye.current)},resize:ce=>{he(ye.current,ce)}}),[A,M,P,V,Ee,he]);const De=F(ye.current,a);return E.createElement(O,{...I,children:t,className:r,id:Ee,style:{...De,...S},[En.groupId]:B,[En.panel]:"",[En.panelCollapsible]:o||void 0,[En.panelId]:Ee,[En.panelSize]:parseFloat(""+De.flexGrow).toFixed(1)})}const aM=E.forwardRef((t,r)=>E.createElement(lM,{...t,forwardedRef:r}));lM.displayName="Panel";aM.displayName="forwardRef(Panel)";let Rb=null,s_=-1,Ja=null;function G4(t,r){if(r){const s=(r&pM)!==0,o=(r&fM)!==0,a=(r&mM)!==0,d=(r&gM)!==0;if(s)return a?"se-resize":d?"ne-resize":"e-resize";if(o)return a?"sw-resize":d?"nw-resize":"w-resize";if(a)return"s-resize";if(d)return"n-resize"}switch(t){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function j4(){Ja!==null&&(document.head.removeChild(Ja),Rb=null,Ja=null,s_=-1)}function dT(t,r){var s,o;const a=G4(t,r);if(Rb!==a){if(Rb=a,Ja===null&&(Ja=document.createElement("style"),document.head.appendChild(Ja)),s_>=0){var d;(d=Ja.sheet)===null||d===void 0||d.removeRule(s_)}s_=(s=(o=Ja.sheet)===null||o===void 0?void 0:o.insertRule(`*{cursor: ${a} !important;}`))!==null&&s!==void 0?s:-1}}function cM(t){return t.type==="keydown"}function uM(t){return t.type.startsWith("pointer")}function dM(t){return t.type.startsWith("mouse")}function vv(t){if(uM(t)){if(t.isPrimary)return{x:t.clientX,y:t.clientY}}else if(dM(t))return{x:t.clientX,y:t.clientY};return{x:1/0,y:1/0}}function W4(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function z4(t,r,s){return t.x<r.x+r.width&&t.x+t.width>r.x&&t.y<r.y+r.height&&t.y+t.height>r.y}function K4(t,r){if(t===r)throw new Error("Cannot compare node with itself");const s={a:_k(t),b:_k(r)};let o;for(;s.a.at(-1)===s.b.at(-1);)t=s.a.pop(),r=s.b.pop(),o=t;ht(o,"Stacking order can only be calculated for elements with a common ancestor");const a={a:$k(gk(s.a)),b:$k(gk(s.b))};if(a.a===a.b){const d=o.childNodes,h={a:s.a.at(-1),b:s.b.at(-1)};let f=d.length;for(;f--;){const g=d[f];if(g===h.a)return 1;if(g===h.b)return-1}}return Math.sign(a.a-a.b)}const X4=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function Y4(t){var r;const s=getComputedStyle((r=hM(t))!==null&&r!==void 0?r:t).display;return s==="flex"||s==="inline-flex"}function q4(t){const r=getComputedStyle(t);return!!(r.position==="fixed"||r.zIndex!=="auto"&&(r.position!=="static"||Y4(t))||+r.opacity<1||"transform"in r&&r.transform!=="none"||"webkitTransform"in r&&r.webkitTransform!=="none"||"mixBlendMode"in r&&r.mixBlendMode!=="normal"||"filter"in r&&r.filter!=="none"||"webkitFilter"in r&&r.webkitFilter!=="none"||"isolation"in r&&r.isolation==="isolate"||X4.test(r.willChange)||r.webkitOverflowScrolling==="touch")}function gk(t){let r=t.length;for(;r--;){const s=t[r];if(ht(s,"Missing node"),q4(s))return s}return null}function $k(t){return t&&Number(getComputedStyle(t).zIndex)||0}function _k(t){const r=[];for(;t;)r.push(t),t=hM(t);return r}function hM(t){const{parentNode:r}=t;return r&&r instanceof ShadowRoot?r.host:r}const pM=1,fM=2,mM=4,gM=8,J4=W4()==="coarse";let Jo=[],ap=!1,Pu=new Map,yv=new Map;const dg=new Set;function Q4(t,r,s,o,a){var d;const{ownerDocument:h}=r,f={direction:s,element:r,hitAreaMargins:o,setResizeHandlerState:a},g=(d=Pu.get(h))!==null&&d!==void 0?d:0;return Pu.set(h,g+1),dg.add(f),O_(),function(){var v;yv.delete(t),dg.delete(f);const y=(v=Pu.get(h))!==null&&v!==void 0?v:1;if(Pu.set(h,y-1),O_(),y===1&&Pu.delete(h),Jo.includes(f)){const w=Jo.indexOf(f);w>=0&&Jo.splice(w,1),mw(),a("up",!0,null)}}}function Z4(t){const{target:r}=t,{x:s,y:o}=vv(t);ap=!0,fw({target:r,x:s,y:o}),O_(),Jo.length>0&&(A_("down",t),t.preventDefault(),$M(r)||t.stopImmediatePropagation())}function hT(t){const{x:r,y:s}=vv(t);if(ap&&t.buttons===0&&(ap=!1,A_("up",t)),!ap){const{target:o}=t;fw({target:o,x:r,y:s})}A_("move",t),mw(),Jo.length>0&&t.preventDefault()}function pT(t){const{target:r}=t,{x:s,y:o}=vv(t);yv.clear(),ap=!1,Jo.length>0&&(t.preventDefault(),$M(r)||t.stopImmediatePropagation()),A_("up",t),fw({target:r,x:s,y:o}),mw(),O_()}function $M(t){let r=t;for(;r;){if(r.hasAttribute(En.resizeHandle))return!0;r=r.parentElement}return!1}function fw({target:t,x:r,y:s}){Jo.splice(0);let o=null;(t instanceof HTMLElement||t instanceof SVGElement)&&(o=t),dg.forEach(a=>{const{element:d,hitAreaMargins:h}=a,f=d.getBoundingClientRect(),{bottom:g,left:$,right:v,top:y}=f,w=J4?h.coarse:h.fine;if(r>=$-w&&r<=v+w&&s>=y-w&&s<=g+w){if(o!==null&&document.contains(o)&&d!==o&&!d.contains(o)&&!o.contains(d)&&K4(o,d)>0){let O=o,I=!1;for(;O&&!O.contains(d);){if(z4(O.getBoundingClientRect(),f)){I=!0;break}O=O.parentElement}if(I)return}Jo.push(a)}})}function fT(t,r){yv.set(t,r)}function mw(){let t=!1,r=!1;Jo.forEach(o=>{const{direction:a}=o;a==="horizontal"?t=!0:r=!0});let s=0;yv.forEach(o=>{s|=o}),t&&r?dT("intersection",s):t?dT("horizontal",s):r?dT("vertical",s):j4()}let mT=new AbortController;function O_(){mT.abort(),mT=new AbortController;const t={capture:!0,signal:mT.signal};dg.size&&(ap?(Jo.length>0&&Pu.forEach((r,s)=>{const{body:o}=s;r>0&&(o.addEventListener("contextmenu",pT,t),o.addEventListener("pointerleave",hT,t),o.addEventListener("pointermove",hT,t))}),window.addEventListener("pointerup",pT,t),window.addEventListener("pointercancel",pT,t)):Pu.forEach((r,s)=>{const{body:o}=s;r>0&&(o.addEventListener("pointerdown",Z4,t),o.addEventListener("pointermove",hT,t))}))}function A_(t,r){dg.forEach(s=>{const{setResizeHandlerState:o}=s,a=Jo.includes(s);o(t,a,r)})}function eY(){const[t,r]=E.useState(0);return E.useCallback(()=>r(s=>s+1),[])}function ht(t,r){if(!t)throw console.error(r),Error(r)}function qu(t,r,s=hw){return t.toFixed(s)===r.toFixed(s)?0:t>r?1:-1}function Wl(t,r,s=hw){return qu(t,r,s)===0}function Ms(t,r,s){return qu(t,r,s)===0}function tY(t,r,s){if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++){const a=t[o],d=r[o];if(!Ms(a,d,s))return!1}return!0}function tp({panelConstraints:t,panelIndex:r,size:s}){const o=t[r];ht(o!=null,`Panel constraints not found for index ${r}`);let{collapsedSize:a=0,collapsible:d,maxSize:h=100,minSize:f=0}=o;if(qu(s,f)<0)if(d){const g=(a+f)/2;qu(s,g)<0?s=a:s=f}else s=f;return s=Math.min(h,s),s=parseFloat(s.toFixed(hw)),s}function Fm({delta:t,initialLayout:r,panelConstraints:s,pivotIndices:o,prevLayout:a,trigger:d}){if(Ms(t,0))return r;const h=[...r],[f,g]=o;ht(f!=null,"Invalid first pivot index"),ht(g!=null,"Invalid second pivot index");let $=0;if(d==="keyboard"){{const y=t<0?g:f,w=s[y];ht(w,`Panel constraints not found for index ${y}`);const{collapsedSize:S=0,collapsible:O,minSize:I=0}=w;if(O){const x=r[y];if(ht(x!=null,`Previous layout not found for panel index ${y}`),Ms(x,S)){const A=I-x;qu(A,Math.abs(t))>0&&(t=t<0?0-A:A)}}}{const y=t<0?f:g,w=s[y];ht(w,`No panel constraints found for index ${y}`);const{collapsedSize:S=0,collapsible:O,minSize:I=0}=w;if(O){const x=r[y];if(ht(x!=null,`Previous layout not found for panel index ${y}`),Ms(x,I)){const A=x-S;qu(A,Math.abs(t))>0&&(t=t<0?0-A:A)}}}}{const y=t<0?1:-1;let w=t<0?g:f,S=0;for(;;){const I=r[w];ht(I!=null,`Previous layout not found for panel index ${w}`);const A=tp({panelConstraints:s,panelIndex:w,size:100})-I;if(S+=A,w+=y,w<0||w>=s.length)break}const O=Math.min(Math.abs(t),Math.abs(S));t=t<0?0-O:O}{let w=t<0?f:g;for(;w>=0&&w<s.length;){const S=Math.abs(t)-Math.abs($),O=r[w];ht(O!=null,`Previous layout not found for panel index ${w}`);const I=O-S,x=tp({panelConstraints:s,panelIndex:w,size:I});if(!Ms(O,x)&&($+=O-x,h[w]=x,$.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?w--:w++}}if(tY(a,h))return a;{const y=t<0?g:f,w=r[y];ht(w!=null,`Previous layout not found for panel index ${y}`);const S=w+$,O=tp({panelConstraints:s,panelIndex:y,size:S});if(h[y]=O,!Ms(O,S)){let I=S-O,A=t<0?g:f;for(;A>=0&&A<s.length;){const M=h[A];ht(M!=null,`Previous layout not found for panel index ${A}`);const P=M+I,F=tp({panelConstraints:s,panelIndex:A,size:P});if(Ms(M,F)||(I-=F-M,h[A]=F),Ms(I,0))break;t>0?A--:A++}}}const v=h.reduce((y,w)=>w+y,0);return Ms(v,100)?h:a}function nY({layout:t,panelsArray:r,pivotIndices:s}){let o=0,a=100,d=0,h=0;const f=s[0];ht(f!=null,"No pivot index found"),r.forEach((y,w)=>{const{constraints:S}=y,{maxSize:O=100,minSize:I=0}=S;w===f?(o=I,a=O):(d+=I,h+=O)});const g=Math.min(a,100-d),$=Math.max(o,100-h),v=t[f];return{valueMax:g,valueMin:$,valueNow:v}}function hg(t,r=document){return Array.from(r.querySelectorAll(`[${En.resizeHandleId}][data-panel-group-id="${t}"]`))}function _M(t,r,s=document){const a=hg(t,s).findIndex(d=>d.getAttribute(En.resizeHandleId)===r);return a??null}function vM(t,r,s){const o=_M(t,r,s);return o!=null?[o,o+1]:[-1,-1]}function yM(t,r=document){var s;if(r instanceof HTMLElement&&(r==null||(s=r.dataset)===null||s===void 0?void 0:s.panelGroupId)==t)return r;const o=r.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return o||null}function Tv(t,r=document){const s=r.querySelector(`[${En.resizeHandleId}="${t}"]`);return s||null}function rY(t,r,s,o=document){var a,d,h,f;const g=Tv(r,o),$=hg(t,o),v=g?$.indexOf(g):-1,y=(a=(d=s[v])===null||d===void 0?void 0:d.id)!==null&&a!==void 0?a:null,w=(h=(f=s[v+1])===null||f===void 0?void 0:f.id)!==null&&h!==void 0?h:null;return[y,w]}function sY({committedValuesRef:t,eagerValuesRef:r,groupId:s,layout:o,panelDataArray:a,panelGroupElement:d,setLayout:h}){E.useRef({didWarnAboutMissingResizeHandle:!1}),Gu(()=>{if(!d)return;const f=hg(s,d);for(let g=0;g<a.length-1;g++){const{valueMax:$,valueMin:v,valueNow:y}=nY({layout:o,panelsArray:a,pivotIndices:[g,g+1]}),w=f[g];if(w!=null){const S=a[g];ht(S,`No panel data found for index "${g}"`),w.setAttribute("aria-controls",S.id),w.setAttribute("aria-valuemax",""+Math.round($)),w.setAttribute("aria-valuemin",""+Math.round(v)),w.setAttribute("aria-valuenow",y!=null?""+Math.round(y):"")}}return()=>{f.forEach((g,$)=>{g.removeAttribute("aria-controls"),g.removeAttribute("aria-valuemax"),g.removeAttribute("aria-valuemin"),g.removeAttribute("aria-valuenow")})}},[s,o,a,d]),E.useEffect(()=>{if(!d)return;const f=r.current;ht(f,"Eager values not found");const{panelDataArray:g}=f,$=yM(s,d);ht($!=null,`No group found for id "${s}"`);const v=hg(s,d);ht(v,`No resize handles found for group id "${s}"`);const y=v.map(w=>{const S=w.getAttribute(En.resizeHandleId);ht(S,"Resize handle element has no handle id attribute");const[O,I]=rY(s,S,g,d);if(O==null||I==null)return()=>{};const x=A=>{if(!A.defaultPrevented)switch(A.key){case"Enter":{A.preventDefault();const M=g.findIndex(P=>P.id===O);if(M>=0){const P=g[M];ht(P,`No panel data found for index ${M}`);const F=o[M],{collapsedSize:B=0,collapsible:V,minSize:j=0}=P.constraints;if(F!=null&&V){const W=Fm({delta:Ms(F,B)?j-B:B-F,initialLayout:o,panelConstraints:g.map(he=>he.constraints),pivotIndices:vM(s,S,d),prevLayout:o,trigger:"keyboard"});o!==W&&h(W)}}break}}};return w.addEventListener("keydown",x),()=>{w.removeEventListener("keydown",x)}});return()=>{y.forEach(w=>w())}},[d,t,r,s,o,a,h])}function vk(t,r){if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s]!==r[s])return!1;return!0}function TM(t,r){const s=t==="horizontal",{x:o,y:a}=vv(r);return s?o:a}function oY(t,r,s,o,a){const d=s==="horizontal",h=Tv(r,a);ht(h,`No resize handle element found for id "${r}"`);const f=h.getAttribute(En.groupId);ht(f,"Resize handle element has no group id attribute");let{initialCursorPosition:g}=o;const $=TM(s,t),v=yM(f,a);ht(v,`No group element found for id "${f}"`);const y=v.getBoundingClientRect(),w=d?y.width:y.height;return($-g)/w*100}function iY(t,r,s,o,a,d){if(cM(t)){const h=s==="horizontal";let f=0;t.shiftKey?f=100:a!=null?f=a:f=10;let g=0;switch(t.key){case"ArrowDown":g=h?0:f;break;case"ArrowLeft":g=h?-f:0;break;case"ArrowRight":g=h?f:0;break;case"ArrowUp":g=h?0:-f;break;case"End":g=100;break;case"Home":g=-100;break}return g}else return o==null?0:oY(t,r,s,o,d)}function lY({panelDataArray:t}){const r=Array(t.length),s=t.map(d=>d.constraints);let o=0,a=100;for(let d=0;d<t.length;d++){const h=s[d];ht(h,`Panel constraints not found for index ${d}`);const{defaultSize:f}=h;f!=null&&(o++,r[d]=f,a-=f)}for(let d=0;d<t.length;d++){const h=s[d];ht(h,`Panel constraints not found for index ${d}`);const{defaultSize:f}=h;if(f!=null)continue;const g=t.length-o,$=a/g;o++,r[d]=$,a-=$}return r}function Hh(t,r,s){r.forEach((o,a)=>{const d=t[a];ht(d,`Panel data not found for index ${a}`);const{callbacks:h,constraints:f,id:g}=d,{collapsedSize:$=0,collapsible:v}=f,y=s[g];if(y==null||o!==y){s[g]=o;const{onCollapse:w,onExpand:S,onResize:O}=h;O&&O(o,y),v&&(w||S)&&(S&&(y==null||Wl(y,$))&&!Wl(o,$)&&S(),w&&(y==null||!Wl(y,$))&&Wl(o,$)&&w())}})}function j$(t,r){if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s]!=r[s])return!1;return!0}function aY({defaultSize:t,dragState:r,layout:s,panelData:o,panelIndex:a,precision:d=3}){const h=s[a];let f;return h==null?f=t!=null?t.toPrecision(d):"1":o.length===1?f="1":f=h.toPrecision(d),{flexBasis:0,flexGrow:f,flexShrink:1,overflow:"hidden",pointerEvents:r!==null?"none":void 0}}function cY(t,r=10){let s=null;return(...a)=>{s!==null&&clearTimeout(s),s=setTimeout(()=>{t(...a)},r)}}function yk(t){try{if(typeof localStorage<"u")t.getItem=r=>localStorage.getItem(r),t.setItem=(r,s)=>{localStorage.setItem(r,s)};else throw new Error("localStorage not supported in this environment")}catch(r){console.error(r),t.getItem=()=>null,t.setItem=()=>{}}}function bM(t){return`react-resizable-panels:${t}`}function EM(t){return t.map(r=>{const{constraints:s,id:o,idIsFromProps:a,order:d}=r;return a?o:d?`${d}:${JSON.stringify(s)}`:JSON.stringify(s)}).sort((r,s)=>r.localeCompare(s)).join(",")}function wM(t,r){try{const s=bM(t),o=r.getItem(s);if(o){const a=JSON.parse(o);if(typeof a=="object"&&a!=null)return a}}catch{}return null}function uY(t,r,s){var o,a;const d=(o=wM(t,s))!==null&&o!==void 0?o:{},h=EM(r);return(a=d[h])!==null&&a!==void 0?a:null}function dY(t,r,s,o,a){var d;const h=bM(t),f=EM(r),g=(d=wM(t,a))!==null&&d!==void 0?d:{};g[f]={expandToSizes:Object.fromEntries(s.entries()),layout:o};try{a.setItem(h,JSON.stringify(g))}catch($){console.error($)}}function Tk({layout:t,panelConstraints:r}){const s=[...t],o=s.reduce((d,h)=>d+h,0);if(s.length!==r.length)throw Error(`Invalid ${r.length} panel layout: ${s.map(d=>`${d}%`).join(", ")}`);if(!Ms(o,100)&&s.length>0)for(let d=0;d<r.length;d++){const h=s[d];ht(h!=null,`No layout data found for index ${d}`);const f=100/o*h;s[d]=f}let a=0;for(let d=0;d<r.length;d++){const h=s[d];ht(h!=null,`No layout data found for index ${d}`);const f=tp({panelConstraints:r,panelIndex:d,size:h});h!=f&&(a+=h-f,s[d]=f)}if(!Ms(a,0))for(let d=0;d<r.length;d++){const h=s[d];ht(h!=null,`No layout data found for index ${d}`);const f=h+a,g=tp({panelConstraints:r,panelIndex:d,size:f});if(h!==g&&(a-=g-h,s[d]=g,Ms(a,0)))break}return s}const hY=100,Um={getItem:t=>(yk(Um),Um.getItem(t)),setItem:(t,r)=>{yk(Um),Um.setItem(t,r)}},bk={};function SM({autoSaveId:t=null,children:r,className:s="",direction:o,forwardedRef:a,id:d=null,onLayout:h=null,keyboardResizeBy:f=null,storage:g=Um,style:$,tagName:v="div",...y}){const w=pw(d),S=E.useRef(null),[O,I]=E.useState(null),[x,A]=E.useState([]),M=eY(),P=E.useRef({}),F=E.useRef(new Map),B=E.useRef(0),V=E.useRef({autoSaveId:t,direction:o,dragState:O,id:w,keyboardResizeBy:f,onLayout:h,storage:g}),j=E.useRef({layout:x,panelDataArray:[],panelDataArrayChanged:!1});E.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),E.useImperativeHandle(a,()=>({getId:()=>V.current.id,getLayout:()=>{const{layout:ae}=j.current;return ae},setLayout:ae=>{const{onLayout:ne}=V.current,{layout:me,panelDataArray:fe}=j.current,te=Tk({layout:ae,panelConstraints:fe.map(Se=>Se.constraints)});vk(me,te)||(A(te),j.current.layout=te,ne&&ne(te),Hh(fe,te,P.current))}}),[]),Gu(()=>{V.current.autoSaveId=t,V.current.direction=o,V.current.dragState=O,V.current.id=w,V.current.onLayout=h,V.current.storage=g}),sY({committedValuesRef:V,eagerValuesRef:j,groupId:w,layout:x,panelDataArray:j.current.panelDataArray,setLayout:A,panelGroupElement:S.current}),E.useEffect(()=>{const{panelDataArray:ae}=j.current;if(t){if(x.length===0||x.length!==ae.length)return;let ne=bk[t];ne==null&&(ne=cY(dY,hY),bk[t]=ne);const me=[...ae],fe=new Map(F.current);ne(t,me,fe,x,g)}},[t,x,g]),E.useEffect(()=>{});const W=E.useCallback(ae=>{const{onLayout:ne}=V.current,{layout:me,panelDataArray:fe}=j.current;if(ae.constraints.collapsible){const te=fe.map(tt=>tt.constraints),{collapsedSize:Se=0,panelSize:Le,pivotIndices:He}=xu(fe,ae,me);if(ht(Le!=null,`Panel size not found for panel "${ae.id}"`),!Wl(Le,Se)){F.current.set(ae.id,Le);const ct=Kh(fe,ae)===fe.length-1?Le-Se:Se-Le,nt=Fm({delta:ct,initialLayout:me,panelConstraints:te,pivotIndices:He,prevLayout:me,trigger:"imperative-api"});j$(me,nt)||(A(nt),j.current.layout=nt,ne&&ne(nt),Hh(fe,nt,P.current))}}},[]),he=E.useCallback((ae,ne)=>{const{onLayout:me}=V.current,{layout:fe,panelDataArray:te}=j.current;if(ae.constraints.collapsible){const Se=te.map(Rt=>Rt.constraints),{collapsedSize:Le=0,panelSize:He=0,minSize:tt=0,pivotIndices:ct}=xu(te,ae,fe),nt=ne??tt;if(Wl(He,Le)){const Rt=F.current.get(ae.id),Wt=Rt!=null&&Rt>=nt?Rt:nt,wn=Kh(te,ae)===te.length-1?He-Wt:Wt-He,At=Fm({delta:wn,initialLayout:fe,panelConstraints:Se,pivotIndices:ct,prevLayout:fe,trigger:"imperative-api"});j$(fe,At)||(A(At),j.current.layout=At,me&&me(At),Hh(te,At,P.current))}}},[]),we=E.useCallback(ae=>{const{layout:ne,panelDataArray:me}=j.current,{panelSize:fe}=xu(me,ae,ne);return ht(fe!=null,`Panel size not found for panel "${ae.id}"`),fe},[]),Ee=E.useCallback((ae,ne)=>{const{panelDataArray:me}=j.current,fe=Kh(me,ae);return aY({defaultSize:ne,dragState:O,layout:x,panelData:me,panelIndex:fe})},[O,x]),ye=E.useCallback(ae=>{const{layout:ne,panelDataArray:me}=j.current,{collapsedSize:fe=0,collapsible:te,panelSize:Se}=xu(me,ae,ne);return ht(Se!=null,`Panel size not found for panel "${ae.id}"`),te===!0&&Wl(Se,fe)},[]),De=E.useCallback(ae=>{const{layout:ne,panelDataArray:me}=j.current,{collapsedSize:fe=0,collapsible:te,panelSize:Se}=xu(me,ae,ne);return ht(Se!=null,`Panel size not found for panel "${ae.id}"`),!te||qu(Se,fe)>0},[]),ce=E.useCallback(ae=>{const{panelDataArray:ne}=j.current;ne.push(ae),ne.sort((me,fe)=>{const te=me.order,Se=fe.order;return te==null&&Se==null?0:te==null?-1:Se==null?1:te-Se}),j.current.panelDataArrayChanged=!0,M()},[M]);Gu(()=>{if(j.current.panelDataArrayChanged){j.current.panelDataArrayChanged=!1;const{autoSaveId:ae,onLayout:ne,storage:me}=V.current,{layout:fe,panelDataArray:te}=j.current;let Se=null;if(ae){const He=uY(ae,te,me);He&&(F.current=new Map(Object.entries(He.expandToSizes)),Se=He.layout)}Se==null&&(Se=lY({panelDataArray:te}));const Le=Tk({layout:Se,panelConstraints:te.map(He=>He.constraints)});vk(fe,Le)||(A(Le),j.current.layout=Le,ne&&ne(Le),Hh(te,Le,P.current))}}),Gu(()=>{const ae=j.current;return()=>{ae.layout=[]}},[]);const Oe=E.useCallback(ae=>{let ne=!1;const me=S.current;return me&&window.getComputedStyle(me,null).getPropertyValue("direction")==="rtl"&&(ne=!0),function(te){te.preventDefault();const Se=S.current;if(!Se)return()=>null;const{direction:Le,dragState:He,id:tt,keyboardResizeBy:ct,onLayout:nt}=V.current,{layout:Rt,panelDataArray:Wt}=j.current,{initialLayout:Mt}=He??{},wn=vM(tt,ae,Se);let At=iY(te,ae,Le,He,ct,Se);const Yr=Le==="horizontal";Yr&&ne&&(At=-At);const je=Wt.map(kn=>kn.constraints),at=Fm({delta:At,initialLayout:Mt??Rt,panelConstraints:je,pivotIndices:wn,prevLayout:Rt,trigger:cM(te)?"keyboard":"mouse-or-touch"}),ft=!j$(Rt,at);(uM(te)||dM(te))&&B.current!=At&&(B.current=At,!ft&&At!==0?Yr?fT(ae,At<0?pM:fM):fT(ae,At<0?mM:gM):fT(ae,0)),ft&&(A(at),j.current.layout=at,nt&&nt(at),Hh(Wt,at,P.current))}},[]),ie=E.useCallback((ae,ne)=>{const{onLayout:me}=V.current,{layout:fe,panelDataArray:te}=j.current,Se=te.map(Rt=>Rt.constraints),{panelSize:Le,pivotIndices:He}=xu(te,ae,fe);ht(Le!=null,`Panel size not found for panel "${ae.id}"`);const ct=Kh(te,ae)===te.length-1?Le-ne:ne-Le,nt=Fm({delta:ct,initialLayout:fe,panelConstraints:Se,pivotIndices:He,prevLayout:fe,trigger:"imperative-api"});j$(fe,nt)||(A(nt),j.current.layout=nt,me&&me(nt),Hh(te,nt,P.current))},[]),pe=E.useCallback((ae,ne)=>{const{layout:me,panelDataArray:fe}=j.current,{collapsedSize:te=0,collapsible:Se}=ne,{collapsedSize:Le=0,collapsible:He,maxSize:tt=100,minSize:ct=0}=ae.constraints,{panelSize:nt}=xu(fe,ae,me);nt!=null&&(Se&&He&&Wl(nt,te)?Wl(te,Le)||ie(ae,Le):nt<ct?ie(ae,ct):nt>tt&&ie(ae,tt))},[ie]),G=E.useCallback((ae,ne)=>{const{direction:me}=V.current,{layout:fe}=j.current;if(!S.current)return;const te=Tv(ae,S.current);ht(te,`Drag handle element not found for id "${ae}"`);const Se=TM(me,ne);I({dragHandleId:ae,dragHandleRect:te.getBoundingClientRect(),initialCursorPosition:Se,initialLayout:fe})},[]),ee=E.useCallback(()=>{I(null)},[]),$e=E.useCallback(ae=>{const{panelDataArray:ne}=j.current,me=Kh(ne,ae);me>=0&&(ne.splice(me,1),delete P.current[ae.id],j.current.panelDataArrayChanged=!0,M())},[M]),z=E.useMemo(()=>({collapsePanel:W,direction:o,dragState:O,expandPanel:he,getPanelSize:we,getPanelStyle:Ee,groupId:w,isPanelCollapsed:ye,isPanelExpanded:De,reevaluatePanelConstraints:pe,registerPanel:ce,registerResizeHandle:Oe,resizePanel:ie,startDragging:G,stopDragging:ee,unregisterPanel:$e,panelGroupElement:S.current}),[W,O,o,he,we,Ee,w,ye,De,pe,ce,Oe,ie,G,ee,$e]),se={display:"flex",flexDirection:o==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return E.createElement(_v.Provider,{value:z},E.createElement(v,{...y,children:r,className:s,id:d,ref:S,style:{...se,...$},[En.group]:"",[En.groupDirection]:o,[En.groupId]:w}))}const CM=E.forwardRef((t,r)=>E.createElement(SM,{...t,forwardedRef:r}));SM.displayName="PanelGroup";CM.displayName="forwardRef(PanelGroup)";function Kh(t,r){return t.findIndex(s=>s===r||s.id===r.id)}function xu(t,r,s){const o=Kh(t,r),d=o===t.length-1?[o-1,o]:[o,o+1],h=s[o];return{...r.constraints,panelSize:h,pivotIndices:d}}function pY({disabled:t,handleId:r,resizeHandler:s,panelGroupElement:o}){E.useEffect(()=>{if(t||s==null||o==null)return;const a=Tv(r,o);if(a==null)return;const d=h=>{if(!h.defaultPrevented)switch(h.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{h.preventDefault(),s(h);break}case"F6":{h.preventDefault();const f=a.getAttribute(En.groupId);ht(f,`No group element found for id "${f}"`);const g=hg(f,o),$=_M(f,r,o);ht($!==null,`No resize element found for id "${r}"`);const v=h.shiftKey?$>0?$-1:g.length-1:$+1<g.length?$+1:0;g[v].focus();break}}};return a.addEventListener("keydown",d),()=>{a.removeEventListener("keydown",d)}},[o,t,r,s])}function IM({children:t=null,className:r="",disabled:s=!1,hitAreaMargins:o,id:a,onBlur:d,onClick:h,onDragging:f,onFocus:g,onPointerDown:$,onPointerUp:v,style:y={},tabIndex:w=0,tagName:S="div",...O}){var I,x;const A=E.useRef(null),M=E.useRef({onClick:h,onDragging:f,onPointerDown:$,onPointerUp:v});E.useEffect(()=>{M.current.onClick=h,M.current.onDragging=f,M.current.onPointerDown=$,M.current.onPointerUp=v});const P=E.useContext(_v);if(P===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:F,groupId:B,registerResizeHandle:V,startDragging:j,stopDragging:W,panelGroupElement:he}=P,we=pw(a),[Ee,ye]=E.useState("inactive"),[De,ce]=E.useState(!1),[Oe,ie]=E.useState(null),pe=E.useRef({state:Ee});Gu(()=>{pe.current.state=Ee}),E.useEffect(()=>{if(s)ie(null);else{const z=V(we);ie(()=>z)}},[s,we,V]);const G=(I=o?.coarse)!==null&&I!==void 0?I:15,ee=(x=o?.fine)!==null&&x!==void 0?x:5;E.useEffect(()=>{if(s||Oe==null)return;const z=A.current;ht(z,"Element ref not attached");let se=!1;return Q4(we,z,F,{coarse:G,fine:ee},(ne,me,fe)=>{if(!me){ye("inactive");return}switch(ne){case"down":{ye("drag"),se=!1,ht(fe,'Expected event to be defined for "down" action'),j(we,fe);const{onDragging:te,onPointerDown:Se}=M.current;te?.(!0),Se?.();break}case"move":{const{state:te}=pe.current;se=!0,te!=="drag"&&ye("hover"),ht(fe,'Expected event to be defined for "move" action'),Oe(fe);break}case"up":{ye("hover"),W();const{onClick:te,onDragging:Se,onPointerUp:Le}=M.current;Se?.(!1),Le?.(),se||te?.();break}}})},[G,F,s,ee,V,we,Oe,j,W]),pY({disabled:s,handleId:we,resizeHandler:Oe,panelGroupElement:he});const $e={touchAction:"none",userSelect:"none"};return E.createElement(S,{...O,children:t,className:r,id:a,onBlur:()=>{ce(!1),d?.()},onFocus:()=>{ce(!0),g?.()},ref:A,role:"separator",style:{...$e,...y},tabIndex:w,[En.groupDirection]:F,[En.groupId]:B,[En.resizeHandle]:"",[En.resizeHandleActive]:Ee==="drag"?"pointer":De?"keyboard":void 0,[En.resizeHandleEnabled]:!s,[En.resizeHandleId]:we,[En.resizeHandleState]:Ee})}IM.displayName="PanelResizeHandle";const fY=({className:t,...r})=>R.jsx(CM,{className:pt("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...r}),Ek=aM,mY=({withHandle:t,className:r,...s})=>R.jsx(IM,{className:pt("relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 [&[data-panel-group-direction=vertical]>div]:rotate-90",r),...s,children:t&&R.jsx("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border",children:R.jsx(kD,{className:"h-2.5 w-2.5"})})}),gT=768;function gY(){const[t,r]=E.useState(void 0);return E.useEffect(()=>{const s=window.matchMedia(`(max-width: ${gT-1}px)`),o=()=>{r(window.innerWidth<gT)};return s.addEventListener("change",o),r(window.innerWidth<gT),()=>s.removeEventListener("change",o)},[]),!!t}const $Y=()=>{const{activeTab:t,setActiveTab:r,saveProject:s,generatedCode:o,currentProject:a,openProject:d,createNewProject:h,addConsoleMessage:f,selectedBoard:g,importProject:$}=Qu(),v=gY(),[y,w]=E.useState("blocks"),[S,O]=E.useState(0),I=E.useRef(null);E.useEffect(()=>{const V=setTimeout(()=>{if(document.querySelector(".blockly-container")){const W=mx();W&&(I.current=W)}},500);return()=>clearTimeout(V)},[S]);const x=E.useCallback(()=>{if(I.current){const B=Uu.workspaceToDom(I.current);return Uu.domToText(B)}return""},[]),A=E.useCallback(async()=>{const B=x();B&&await s(B,o)},[x,s,o]),M=E.useCallback(async B=>{const V=x()||"";await h(B,V,o)},[x,h,o]),P=E.useCallback(async B=>{await d(B),O(V=>V+1),f("info","Proyecto cargado correctamente")},[d,f]),F=E.useCallback(async(B,V,j)=>{await $(B,V,j),O(W=>W+1)},[$]);return E.useEffect(()=>{const B=setInterval(()=>{a&&A()},3e4);return()=>clearInterval(B)},[a,A]),v?R.jsxs("div",{className:"h-screen w-screen overflow-hidden bg-slate-100 flex flex-col",children:[R.jsx("div",{className:"w-full relative z-20 mb-2 px-2",children:R.jsx(pk,{onSave:A,onNewProject:M,onOpenProject:P,onImportProject:F})}),R.jsx("div",{className:"px-2 mb-2",children:R.jsxs("div",{className:"flex gap-1 p-1 bg-card rounded-xl",children:[R.jsxs("button",{onClick:()=>w("blocks"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-lg text-sm font-bold transition-all ${y==="blocks"?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-muted"}`,children:[R.jsx(yD,{className:"w-4 h-4"}),"Bloques"]}),R.jsxs("button",{onClick:()=>w("code"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-lg text-sm font-bold transition-all ${y==="code"?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-muted"}`,children:[R.jsx(K$,{className:"w-4 h-4"}),"Cdigo"]})]})}),R.jsx("div",{className:"flex-1 px-2 pb-2 overflow-hidden",children:R.jsx(op,{mode:"wait",children:y==="blocks"?R.jsx(Wr.div,{className:"h-full ide-panel overflow-hidden",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:R.jsx(iI,{initialXml:a?.blocklyXml},S)},"blocks"):R.jsx(Wr.div,{className:"h-full flex flex-col ide-panel overflow-hidden",initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.2},children:R.jsxs(fk,{value:t,onValueChange:B=>r(B),className:"h-full flex flex-col",children:[R.jsx("div",{className:"px-2 pt-2 bg-gradient-to-b from-muted/30 to-transparent",children:R.jsx(Cb,{className:"bg-transparent h-auto p-0 w-full justify-start gap-1",children:[{value:"code",icon:K$,label:"Cdigo"},{value:"console",icon:o_,label:"Consola"},{value:"serial",icon:TT,label:"Monitor"}].map(B=>R.jsxs(Ib,{value:B.value,className:"tab-candy gap-1.5 px-3 py-2 text-xs",children:[R.jsx(B.icon,{className:"w-3.5 h-3.5"}),B.label]},B.value))})}),R.jsx("div",{className:"flex-1 overflow-hidden relative bg-card rounded-b-2xl",children:R.jsxs(op,{mode:"wait",children:[t==="code"&&R.jsx(Wr.div,{className:"h-full w-full",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:R.jsx(aI,{})},"code-panel"),t==="console"&&R.jsx(Wr.div,{className:"h-full w-full",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:R.jsx(wR,{})},"console-panel"),t==="serial"&&R.jsx(Wr.div,{className:"h-full w-full",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:R.jsx(MR,{})},"serial-panel")]})})]})},"code")})})]}):R.jsxs("div",{className:"h-screen w-screen overflow-hidden bg-slate-100 flex flex-col",children:[R.jsx("div",{className:"w-full relative z-20 mb-4",children:R.jsx(pk,{onSave:A,onNewProject:M,onOpenProject:P,onImportProject:F})}),R.jsx(Wr.div,{className:"flex-1 workspace-inset overflow-hidden relative",initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},transition:{duration:.4,delay:.2},children:R.jsxs(fY,{direction:"horizontal",className:"h-full w-full",children:[R.jsx(Ek,{defaultSize:60,minSize:35,className:"p-3",children:R.jsx("div",{className:"h-full w-full ide-panel overflow-hidden relative group",children:R.jsx(iI,{initialXml:a?.blocklyXml},S)})}),R.jsx(mY,{withHandle:!0,className:"bg-transparent w-5 group hover:bg-primary/10 transition-colors rounded-full mx-1"}),R.jsx(Ek,{defaultSize:40,minSize:28,className:"p-3 pl-0",children:R.jsx("div",{className:"h-full w-full flex flex-col ide-panel overflow-hidden",children:R.jsxs(fk,{value:t,onValueChange:B=>r(B),className:"h-full flex flex-col",children:[R.jsx("div",{className:"px-3 pt-3 bg-gradient-to-b from-muted/30 to-transparent",children:R.jsx(Cb,{className:"bg-transparent h-auto p-0 w-full justify-start gap-1 flex-wrap",children:[{value:"code",icon:K$,label:"Cdigo",color:"primary"},{value:"console",icon:o_,label:"Consola",color:"warning"},{value:"serial",icon:TT,label:"Monitor",color:"success"}].map(B=>R.jsxs(Ib,{value:B.value,className:`tab-candy gap-2 data-[state=active]:text-${B.color}`,children:[R.jsx(B.icon,{className:"w-4 h-4"}),R.jsx("span",{className:"hidden sm:inline",children:B.label})]},B.value))})}),R.jsx("div",{className:"flex-1 overflow-hidden relative bg-card rounded-b-2xl",children:R.jsxs(op,{mode:"wait",children:[t==="code"&&R.jsx(Wr.div,{className:"h-full w-full",initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2},children:R.jsx(aI,{})},"code"),t==="console"&&R.jsx(Wr.div,{className:"h-full w-full",initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2},children:R.jsx(wR,{})},"console"),t==="serial"&&R.jsx(Wr.div,{className:"h-full w-full",initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2},children:R.jsx(MR,{})},"serial")]})})]})})})]})}),R.jsxs(Wr.div,{className:"toolbar-island mx-2 mt-3 justify-between text-xs font-bold text-muted-foreground",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[R.jsxs("div",{className:"flex items-center gap-4",children:[R.jsxs("span",{className:"flex items-center gap-2",children:[R.jsx("span",{className:"status-dot status-dot-connected"}),"ArduIDE v1.0"]}),a&&R.jsxs("span",{className:"badge-candy",children:[" ",a.name]})]}),R.jsx("div",{className:"flex items-center gap-4",children:R.jsx("span",{className:"text-muted-foreground",children:"Auto-guardado activo "})})]})]})},_Y=()=>R.jsx(RV,{children:R.jsx($Y,{})}),vY=()=>{const t=rx();return E.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),R.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:R.jsxs("div",{className:"text-center",children:[R.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),R.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),R.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},yY=new cU,TY=()=>R.jsx(dU,{client:yY,children:R.jsxs(FF,{children:[R.jsx(bB,{}),R.jsx(e1,{}),R.jsx(QU,{children:R.jsxs(YU,{children:[R.jsx(OT,{path:"/",element:R.jsx(_Y,{})}),R.jsx(OT,{path:"*",element:R.jsx(vY,{})})]})})]})});_P.createRoot(document.getElementById("root")).render(R.jsx(TY,{}));
